<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ken's blog</title><link>https://wangken0129.github.io/</link><description>Recent content on Ken's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Fri, 07 Mar 2025 05:53:22 +0800</lastBuildDate><atom:link href="https://wangken0129.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>Nutanix_NKP-v2.13_AHV</title><link>https://wangken0129.github.io/p/nutanix_nkp-v2.13_ahv/</link><pubDate>Fri, 07 Mar 2025 05:53:22 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix_nkp-v2.13_ahv/</guid><description>&lt;h1 id="nutanix-nkp-v2131-install-with-private-registry">Nutanix NKP v2.13.1 Install with private registry
&lt;/h1>&lt;p>NKP 安裝 Lab，安裝在 AHV 環境上 ，透過 cli 方式安裝&lt;/p>
&lt;p>會建立 image registry 來放置 NKP 需要的 image，建置完成後會升級到 2.14&lt;/p>
&lt;h2 id="環境資訊">環境資訊
&lt;/h2>&lt;h3 id="版本">版本
&lt;/h3>&lt;p>Prism Central: 2024.2.0.3&lt;/p>
&lt;p>AOS: 6.5.1.1&lt;/p>
&lt;p>NKP: 2.13.1&lt;/p>
&lt;p>Kubernetes: 1.30.5&lt;/p>
&lt;p>OS Image: ubuntu-22.04&lt;/p>
&lt;p>KIB: v2.18.0&lt;/p>
&lt;h3 id="ip-與名稱">IP 與名稱
&lt;/h3>&lt;p>Prism Central: https://10.38.14.10:9440&lt;/p>
&lt;p>Prism Element (PHX-SPOC014-1): https://10.38.14.7:9440/&lt;/p>
&lt;p>bastion ip : 10.38.14.24&lt;/p>
&lt;p>Storage Container: default&lt;/p>
&lt;p>Subnet: primary&lt;/p>
&lt;p>kubeVIP: 10.38.14.51&lt;/p>
&lt;p>kube Ingress ip Range: 10.38.14.52-10.38.14.54&lt;/p>
&lt;p>Subnet Mask: 255.255.255.192&lt;/p>
&lt;p>Gateway IP Address: 10.38.14.1&lt;/p>
&lt;h2 id="bastion">Bastion
&lt;/h2>&lt;h3 id="軟體下載">軟體下載
&lt;/h3>&lt;p>nkp-airgapped, nkp cli , kib 從 Portal 上直接用 copy link 方式下載&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">air&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gapped&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/nkp/v2.13.1/nkp-air-gapped-bundle_v2.13.1_linux_amd64.tar.gz?Expires=1740156924&amp;amp;Key-Pair-xx__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">14.3&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">14.3&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">317&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">46&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">46&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">289&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/nkp/v2.13.1/nkp_v2.13.1_linux_amd64.tar.gz?Expires=1740156983&amp;amp;Key-Pair-xx__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">97.5&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">97.5&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mf">16.5&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mf">17.5&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">18.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/nkp/v2.13.1/konvoy-image-bundle-v2.18.0_linux_amd64.tar.gz?Expires=1740157007&amp;amp;Key-Pair-xxx__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mi">334&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mi">334&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mf">15.7&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mf">15.9&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">15484132&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">350719341&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">57&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">18.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">15402765171&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">56&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">air&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gapped&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">102264118&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">56&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="軟體安裝">軟體安裝
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">yum&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">yum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">utils&lt;/span> &lt;span class="n">bzip2&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">yum&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">17.1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">18.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">air&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gapped&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">diagnose&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">10.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">imagebuilder&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">20.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">konvoy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mindthegap&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">16.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Client&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Kustomize&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.20230601165947&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">ce0bf390ce3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">connection&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span> &lt;span class="n">was&lt;/span> &lt;span class="n">refused&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">did&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">specify&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">right&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="基本設定">基本設定
&lt;/h3>&lt;p>disable firewalld, selinux&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ sudo systemctl disable firewalld --now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Removed &amp;#34;/etc/systemd/system/multi-user.target.wants/firewalld.service&amp;#34;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Removed &amp;#34;/etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service&amp;#34;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ sudo vi /etc/selinux/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELINUXTYPE=disabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ getenforce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Disabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="registry">Registry
&lt;/h3>&lt;h4 id="啟動-registry">啟動 Registry
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;switch to root&amp;#34;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">方便使用，也可以用一般使用者，但要另外設定&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">login&lt;/span> &lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;Start registry&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">5000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span> &lt;span class="n">always&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span> &lt;span class="n">registry&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">latest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">BOOTSTRAP_HOST_IP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.24&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export REGISTRY_URL=http://10.38.14.24:5000&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="推送-nkp-image">推送 NKP Image
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;Push Image&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Unarchiving&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="s2">&amp;#34;/home/nkp/nkptools/nkp-airgap/nkp-v2.13.1/container-images/kommander-image-bundle-v2.13.1.tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Parsing&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Pushing&lt;/span> &lt;span class="n">bundled&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">================================&amp;gt;&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">57&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Unarchiving&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="s2">&amp;#34;/home/nkp/nkptools/nkp-airgap/nkp-v2.13.1/container-images/konvoy-image-bundle-v2.13.1.tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Parsing&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Pushing&lt;/span> &lt;span class="n">bundled&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">================================&amp;gt;&lt;/span>&lt;span class="mi">115&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">115&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">35&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">catalog&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">applications&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Unarchiving&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="s2">&amp;#34;/home/nkp/nkptools/nkp-airgap/nkp-v2.13.1/container-images/nkp-catalog-applications-image-bundle-v2.13.1.tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Parsing&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Pushing&lt;/span> &lt;span class="n">bundled&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================&amp;gt;&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">04&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221163239471.png"
loading="lazy"
alt="image-20250221163239471"
>&lt;/p>
&lt;h4 id="load-image">load image
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">podman&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">podman&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">20.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REPOSITORY&lt;/span> &lt;span class="n">TAG&lt;/span> &lt;span class="n">IMAGE&lt;/span> &lt;span class="n">ID&lt;/span> &lt;span class="n">CREATED&lt;/span> &lt;span class="n">SIZE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mesosphere&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span> &lt;span class="n">e7b2ed9a825c&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="n">weeks&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">2.13&lt;/span> &lt;span class="n">GB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">library&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">registry&lt;/span> &lt;span class="n">latest&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="n">b2eb03618e&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mi">26&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mesosphere&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">20.0&lt;/span> &lt;span class="n">f8ce7f154c3b&lt;/span> &lt;span class="mi">45&lt;/span> &lt;span class="n">years&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mi">779&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="create-cluster">Create Cluster
&lt;/h2>&lt;p>上述環境、Bastion 準備完成後，可以開始佈建 NKP Management Cluster&lt;/p>
&lt;h3 id="bootstrap-cluster">Bootstrap Cluster
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] nkp create bootstrap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Creating a bootstrap cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Initializing new CAPI components
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Initializing new CAPI components
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Creating ClusterClass resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> [root@nkp-bastion ~] kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">konvoy-capi-bootstrapper-control-plane Ready control-plane 2m27s v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl get pods -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caaph-system caaph-controller-manager-5c4b55f8b6-n6l5j 1/1 Running 0 93s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capa-system capa-controller-manager-6c9654f67d-4cr6z 1/1 Running 0 108s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capg-system capg-controller-manager-6f85f89dbc-z4qgv 1/1 Running 0 96s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-kubeadm-bootstrap-system capi-kubeadm-bootstrap-controller-manager-679764b5b7-f5558 1/1 Running 0 111s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-kubeadm-control-plane-system capi-kubeadm-control-plane-controller-manager-6db6bbdd85-zbhkg 1/1 Running 0 110s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="machine-image-if-required">Machine Image (if required)
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export NUTANIX_USER=admin&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export NUTANIX_PASSWORD=nx2Tech702!&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export PE_CLUSTER_NAME=PHX-SPOC014-1&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export PC_ENDPOINT=10.38.14.10&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export SUBNET=primary&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">env&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REGISTRY_URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.24&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PE_CLUSTER_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">PHX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SPOC014&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NUTANIX_USER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">admin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PC_ENDPOINT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BOOTSTRAP_HOST_IP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">ubuntu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">22.04&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PE_CLUSTER_NAME&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">endpoint&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PC_ENDPOINT&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">subnet&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">SUBNET&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">insecure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Wait&lt;/span> &lt;span class="n">completed&lt;/span> &lt;span class="n">after&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="n">minutes&lt;/span> &lt;span class="mi">33&lt;/span> &lt;span class="n">seconds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Builds&lt;/span> &lt;span class="n">finished&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">artifacts&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">successful&lt;/span> &lt;span class="n">builds&lt;/span> &lt;span class="n">are&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&amp;gt;&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kib_image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ubuntu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">22.04&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.30&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20250221084439&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&amp;gt;&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kib_image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ubuntu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">22.04&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.30&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20250221084439&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&amp;gt;&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kib_image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ubuntu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">22.04&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.30&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20250221084439&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export VM_IMAGE=nkp-ubuntu-22.04-1.30.5-20250221084439&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164530515.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164753010.png"
loading="lazy"
alt="image-20250221164753010"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164808447.png"
loading="lazy"
alt="image-20250221164808447"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164837208.png"
loading="lazy"
alt="image-20250221164837208"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164908398.png"
loading="lazy"
alt="image-20250221164908398"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221165050977.png"
loading="lazy"
alt="image-20250221165050977"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164925341.png"
loading="lazy"
alt="image-20250221164925341"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221165127407.png"
loading="lazy"
alt="image-20250221165127407"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221164704789.png"
loading="lazy"
alt="image-20250221164704789"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221165200360.png"
loading="lazy"
alt="image-20250221165200360"
>&lt;/p>
&lt;h3 id="management-cluster">Management Cluster
&lt;/h3>&lt;h4 id="env-設定環境變數">Env 設定環境變數
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">env&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">MGMT_CLUSTER_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">PE_CLUSTER_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">PHX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SPOC014&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">SUBNET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">primary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">MGMT_CP_ENDPOINT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.51&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">VM_IMAGE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ubuntu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">22.04&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.30&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20250221084439&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">STORAGE_CONTAINER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">MGMT_LB_IP_RANGE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.52&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.54&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">NUTANIX_USER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">admin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">NUTANIX_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nx2Tech702&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">PC_ENDPOINT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">CSI_HYPERVISOR_ATTACHED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">CSI_FILESYSTEM&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ext4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">CONTROL_PLANE_IP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;10.38.14.51&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">SSH_PUBLIC_KEY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/home/nkp/.ssh/id_rsa.pub&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">REGISTRY_URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://10.38.14.24:5000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="n">env&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="create--cluster">Create Cluster
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">nutanix&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">MGMT_CLUSTER_NAME&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prism&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PE_CLUSTER_NAME&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subnets&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">SUBNET&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">endpoint&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">MGMT_CP_ENDPOINT&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VM_IMAGE&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prism&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">element&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PE_CLUSTER_NAME&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">subnets&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">SUBNET&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VM_IMAGE&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">memory&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">16&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">STORAGE_CONTAINER&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">load&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">balancer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">range&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">MGMT_LB_IP_RANGE&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">endpoint&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://$PC_ENDPOINT:9440&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mirror&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">ssh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">public&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">SSH_PUBLIC_KEY&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">dry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">run&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">output&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">deploy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-$&lt;/span>&lt;span class="n">MGMT_CLUSTER_NAME&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">997&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">43&lt;/span> &lt;span class="n">anaconda&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ks&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cfg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">5913&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="n">deploy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rwxr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">586&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">env&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">deploy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">secret&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">secret&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">configmap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configuration&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">secret&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prism&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">central&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metadata&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">secret&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">global&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">watch&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">describe&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">MGMT_CLUSTER_NAME&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250221172657309.png"
loading="lazy"
alt="image-20250221172657309"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">kubeconfig&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="mi">600&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">997&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">43&lt;/span> &lt;span class="n">anaconda&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ks&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cfg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">5913&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="n">deploy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">5913&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="n">deploy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml_bk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rwxr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">586&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">env&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">5543&lt;/span> &lt;span class="n">Feb&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;export KUBECONFIG=~/nkp-poc.conf&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dkfnd&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">m43s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gmllf&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="n">m8s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x989r&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="n">m25s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g5pnb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4j&lt;/span>&lt;span class="n">bfm&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="n">m17s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g5pnb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cxlx7&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="n">m40s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g5pnb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kwvlj&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="n">m15s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g5pnb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">m9dkw&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="n">m18s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;建立 capi-components&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">components&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Initializing&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">CAPI&lt;/span> &lt;span class="n">components&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Initializing&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">CAPI&lt;/span> &lt;span class="n">components&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">ClusterClass&lt;/span> &lt;span class="n">resources&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="delete-bootstrap">Delete bootstrap
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;從 bootstratp 移轉 capi-resources&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] unset KUBECONFIG
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">konvoy-capi-bootstrapper-control-plane Ready control-plane 60m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] nkp move capi-resources --to-kubeconfig nkp-poc.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Moving cluster resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can now view resources in the moved cluster by using the --kubeconfig flag with kubectl.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">For example: kubectl --kubeconfig=&amp;#34;nkp-poc.conf&amp;#34; get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] nkp delete bootstrap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Deleting bootstrap cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] source ~/.bashrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-dkfnd Ready control-plane 12m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-gmllf Ready control-plane 14m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-x989r Ready control-plane 10m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-4jbfm Ready &amp;lt;none&amp;gt; 12m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-cxlx7 Ready &amp;lt;none&amp;gt; 13m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-kwvlj Ready &amp;lt;none&amp;gt; 12m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-m9dkw Ready &amp;lt;none&amp;gt; 12m v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl get ns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caaph-system Active 4m56s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capa-system Active 5m9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capg-system Active 4m59s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-kubeadm-bootstrap-system Active 5m10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-kubeadm-control-plane-system Active 5m9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-system Active 5m11s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cappp-system Active 5m1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capv-system Active 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capvcd-system Active 4m58s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capx-system Active 4m57s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capz-system Active 5m7s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caren-system Active 3m50s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager Active 5m23s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default Active 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git-operator-system Active 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander Active 13m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander-flux Active 109s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-node-lease Active 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-public Active 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system Active 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system Active 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery Active 13m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system Active 14m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="取得-dashboard">取得 Dashboard
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">watch kubectl get pods -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] nkp get dashboard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username: clever_euclid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password: 8JW63deYbPpIIrCtTPBXJihIF8xsWxw0YTCSVvcAa1SupyZ14GqEEVFGXzAb7ZB7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">URL: https://10.38.14.52/dkp/kommander/dashboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>串接LDAP、License匯入完成後登入畫面&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250225151046730.png"
loading="lazy"
alt="image-20250225151046730"
>&lt;/p>
&lt;h4 id="其他叢集資訊">其他叢集資訊
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#34;叢集資訊&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl get namespace kube-system --output jsonpath={.metadata.uid}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7e1c859a-0d30-46a3-83d5-21398e4d7cc4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl get cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CLUSTERCLASS PHASE AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc nkp-nutanix Provisioned 2d20h v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;POC License Key&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># AEAAN-AAAYY-T9A7V-5UL6S-49UQ2-H89DG-EP2AR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~] kubectl describe cluster nkp-poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: nkp-poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: cluster.x-k8s.io/cluster-name=nkp-poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.x-k8s.io/provider=nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> konvoy.d2iq.io/cluster-name=nkp-poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> konvoy.d2iq.io/provider=nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> topology.cluster.x-k8s.io/owned=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: caren.nutanix.com/cluster-uuid: 019527cf-0ec5-7b3b-b4aa-3f50c7dc3b4f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API Version: cluster.x-k8s.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kind: Cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Timestamp: 2025-02-21T09:36:01Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Finalizers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.cluster.x-k8s.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Generation: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Resource Version: 10471
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UID: 4236d3d9-3d77-4c0b-8494-e67dfe774f92
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Pods:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cidr Blocks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 192.168.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cidr Blocks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 10.96.0.0/12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control Plane Endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Host: 10.38.14.51
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Port: 6443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control Plane Ref:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: controlplane.cluster.x-k8s.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Kind: KubeadmControlPlane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-poc-d78fs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Namespace: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Infrastructure Ref:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: infrastructure.cluster.x-k8s.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Kind: NutanixCluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-poc-5cvwf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Namespace: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Topology:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Class: nkp-nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control Plane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Variables:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: clusterConfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Value:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Addons:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ccm:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Credentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Secret Ref:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-poc-pc-credentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Strategy: HelmAddon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Autoscaler:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Strategy: HelmAddon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cni:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Provider: Cilium
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Strategy: HelmAddon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Csi:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Default Storage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Provider: nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Storage Class Config: volume
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Providers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Credentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Secret Ref:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-poc-pc-credentials-for-csi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Storage Class Configs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Volume:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Allow Expansion: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/fstype: ext4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Description: CSI StorageClass nutanix-volume for nkp-poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Flash Mode: DISABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Hypervisor Attached: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Storage Container: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Storage Type: NutanixVolumes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reclaim Policy: Delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Volume Binding Mode: WaitForFirstConsumer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Strategy: HelmAddon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Snapshot Controller:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Strategy: HelmAddon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nfd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Strategy: HelmAddon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Service Load Balancer:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Configuration:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Address Ranges:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> End: 10.38.14.54
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Start: 10.38.14.52
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Provider: MetalLB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control Plane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Machine Details:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Boot Type: uefi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: PHX-SPOC014-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-ubuntu-22.04-1.30.5-20250221084439
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory Size: 16Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subnets:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: primary
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System Disk Size: 80Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Vcpu Sockets: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Vcpus Per Socket: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Dns:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Core DNS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Encryption At Rest:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Providers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Secretbox:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Global Image Registry Mirror:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> URL: http://10.38.14.24:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control Plane Endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Host: 10.38.14.51
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Port: 6443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Virtual IP:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Provider: KubeVIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Prism Central Endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Credentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Secret Ref:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-poc-pc-credentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Insecure: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> URL: https://10.38.14.10:9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Workers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Machine Deployments:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Class: default-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.x-k8s.io/cluster-api-autoscaler-node-group-max-size: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.x-k8s.io/cluster-api-autoscaler-node-group-min-size: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: md-0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Variables:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Overrides:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: workerConfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Value:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Machine Details:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Boot Type: uefi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: PHX-SPOC014-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-ubuntu-22.04-1.30.5-20250221084439
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory Size: 16Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subnets:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: primary
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> System Disk Size: 80Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Vcpu Sockets: 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Vcpus Per Socket: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Conditions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2025-02-21T09:36:14Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: Ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2025-02-21T09:36:10Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: ControlPlaneInitialized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2025-02-21T09:36:14Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: ControlPlaneReady
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2025-02-21T09:36:11Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: InfrastructureReady
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2025-02-21T09:37:32Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: KommanderInitialized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2025-02-21T09:36:13Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: TopologyReconciled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control Plane Ready: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Infrastructure Ready: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observed Generation: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Phase: Provisioned
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="upgrade-nkp">Upgrade NKP
&lt;/h2>&lt;h3 id="目前版本">目前版本
&lt;/h3>&lt;p>NKP : v2.13.1 預計升級到 v2.14&lt;/p>
&lt;p>Kubernetes: v1.30.5 預計升級到 v1.31.4&lt;/p>
&lt;p>OS image : Ubuntu 22.04 , Kernel 5.15.0-119-generic&lt;/p>
&lt;p>KiB : 2.18 預計升級到 2.22.2&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306140245123.png"
loading="lazy"
alt="image-20250306140245123"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306140338580.png"
loading="lazy"
alt="image-20250306140338580"
>&lt;/p>
&lt;h3 id="升級前先確認">升級前先確認
&lt;/h3>&lt;ol>
&lt;li>NKP Release Notes&lt;/li>
&lt;li>更新的項目及版本是否會影響現有系統及應用程式&lt;/li>
&lt;li>用 nkp version 指令確認 NKP 版本&lt;/li>
&lt;li>確認版本相容性 &lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Platform-v2_14:top-ug-nkp-compat-table-c.html" target="_blank" rel="noopener"
>Upgrade Compatibility Tables&lt;/a>&lt;/li>
&lt;li>重要系統套用 Deploy Pod Disruption Budget (PDB) &lt;a class="link" href="https://kubernetes.io/docs/concepts/workloads/pods/disruptions/" target="_blank" rel="noopener"
>https://kubernetes.io/docs/concepts/workloads/pods/disruptions/&lt;/a>&lt;/li>
&lt;li>使用 Velero 備份現有設定&lt;/li>
&lt;/ol>
&lt;h3 id="upgrade-path">Upgrade Path
&lt;/h3>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306133207749.png"
loading="lazy"
alt="image-20250306133207749"
>&lt;/p>
&lt;h3 id="upgrade-order-nutanix">Upgrade Order (Nutanix)
&lt;/h3>&lt;p>&lt;strong>先升級 Management Cluster 再升級 Workload Cluster&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>Bastion 升級 nkp, kib 指令版本&lt;/li>
&lt;li>下載 nkp-airgapped bundle 包並升級 kubectl&lt;/li>
&lt;li>上傳 Kommander, Konvoy, Catalog Application (Ultimate) 等 image 到 private registry&lt;/li>
&lt;li>製作或下載新版本的 OS image ( 請查看版本相容性確認是否需要更新 )&lt;/li>
&lt;li>升級 Kommander&lt;/li>
&lt;li>升級 Cluster 並指定 OS Image
在 Nutanix 環境此步驟會直接升級 Kubernetes 版本&lt;/li>
&lt;/ol>
&lt;h3 id="upgrade-nkp-pro">Upgrade NKP PRO
&lt;/h3>&lt;h4 id="1--bastion-指令升級及bundle">1. Bastion 指令升級及bundle
&lt;/h4>&lt;p>檔案從 Support Portal copy link下載&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/nkp/v2.14.0/nkp_v2.14.0_linux_amd64.tar.gz?Expires=17xxxxxQ__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">90.5&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">90.5&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">319&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">319&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.2&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/nkp/v2.14.0/konvoy-image-bundle-v2.22.2_linux_amd64.tar.gz?Expires=174127xxxxxx__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mi">330&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mi">330&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mf">16.1&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mf">15.8&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">ls&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">16674272&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">346426397&lt;/span> &lt;span class="n">Mar&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">47&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.2&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">94896342&lt;/span> &lt;span class="n">Mar&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">45&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>解壓縮&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.2&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="o">../&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="o">../&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>將指令複製到 /usr/local/bin&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">diagnose&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">10.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">imagebuilder&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">konvoy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mindthegap&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">16.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Writing&lt;/span> &lt;span class="n">manifest&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">destination&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Loaded&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mesosphere&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">version&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.2&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">branch&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">revision&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">build&lt;/span> &lt;span class="n">date&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">go&lt;/span> &lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">go1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">22.12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">platform&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">amd64&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="2-下載-airgapped-包">2. 下載 airgapped 包
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">air&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gapped&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/nkp/v2.14.0/nkp-air-gapped-bundle_v2.14.0_linux_amd64.tar.gz?Expires=174127xxxxx&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">15.4&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">15.4&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mf">17.3&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mf">15.1&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">air&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gapped&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="o">../&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Client&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Kustomize&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">4.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Server&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">30.5&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="3-上傳-image">3. 上傳 Image
&lt;/h4>&lt;p>&amp;ldquo;Switch to root&amp;rdquo; 環境變數確認&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo &amp;#34;export REGISTRY_URL=http://10.38.14.24:5000&amp;#34; &amp;gt;&amp;gt; .bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># source .bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo $REGISTRY_URL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.24&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo &amp;#34;NUTANIX_USERNAME=admin&amp;#34; &amp;gt;&amp;gt; .bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo &amp;#34;NUTANIX_PASSWORD=nx2Tech702!&amp;#34; &amp;gt;&amp;gt; .bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo &amp;#34;export PE_CLUSTER_NAME=PHX-SPOC014-1&amp;#34; &amp;gt;&amp;gt; ~/.bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo &amp;#34;export PC_ENDPOINT=10.38.14.10&amp;#34; &amp;gt;&amp;gt; ~/.bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># echo &amp;#34;export SUBNET=primary&amp;#34; &amp;gt;&amp;gt; ~/.bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># source .bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># ll /home/nkp/nkptools/nkp-airgap/nkp-v2.14.0/container-images/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">12847076&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">81&lt;/span> &lt;span class="n">Mar&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="n">NOTICES&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">8202238464&lt;/span> &lt;span class="n">Mar&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">4069966848&lt;/span> &lt;span class="n">Mar&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="mi">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">46&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="mi">883191296&lt;/span> &lt;span class="n">Mar&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">46&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">catalog&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">applications&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;Push Image&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kommander&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Unarchiving&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="s2">&amp;#34;/home/nkp/nkptools/nkp-airgap/nkp-v2.14.0/container-images/kommander-image-bundle-v2.14.0.tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Parsing&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Pushing&lt;/span> &lt;span class="n">bundled&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">================================&amp;gt;&lt;/span>&lt;span class="mi">137&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">137&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m02s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Konvoy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Unarchiving&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="s2">&amp;#34;/home/nkp/nkptools/nkp-airgap/nkp-v2.14.0/container-images/konvoy-image-bundle-v2.14.0.tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Parsing&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Pushing&lt;/span> &lt;span class="n">bundled&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">================================&amp;gt;&lt;/span>&lt;span class="mi">119&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">119&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">28&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Catalog &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkptools&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">catalog&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">applications&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REGISTRY_URL&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">skip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Unarchiving&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="s2">&amp;#34;/home/nkp/nkptools/nkp-airgap/nkp-v2.14.0/container-images/nkp-catalog-applications-image-bundle-v2.14.0.tar&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Parsing&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">bundle&lt;/span> &lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">temporary&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">registry&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Pushing&lt;/span> &lt;span class="n">bundled&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================&amp;gt;&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="4-製作-os-image">4. 製作 OS Image
&lt;/h4>&lt;h5 id="for-rocky">For Rocky
&lt;/h5>&lt;p>直接在 Prism Central 新增 Support Portal 上的 Image&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306145124197.png"
loading="lazy"
alt="image-20250306145124197"
>&lt;/p>
&lt;p>Add Image&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306145228491.png"
loading="lazy"
alt="image-20250306145228491"
>&lt;/p>
&lt;p>貼上 URL 並點選 Add URL&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306145309174.png"
loading="lazy"
alt="image-20250306145309174"
>&lt;/p>
&lt;p>點選 save&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306145400309.png"
loading="lazy"
alt="image-20250306145400309"
>&lt;/p>
&lt;h5 id="for-others-ubuntu">For Others (ubuntu)
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~]# nkp create image nutanix ubuntu-22.04 --cluster=$PE_CLUSTER_NAME --endpoint=$PC_ENDPOINT --subnet=$SUBNET --insecure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Provisioning and configuring image
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Manifest files extracted to /root/.nkp-image-builder-3070850318
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying to pull docker.io/mesosphere/nkp-image-builder:v0.22.3...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Getting image source signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:99febc243941c0928306275946d862c586d2bd46be4fc4c4e318938a8662d85f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:c926b61bad3b94ae7351bafd0c184c159ebf0643b085f7ef1d47ecdc7316833c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:89fb4fbbd97a1c94aa08f217f0cb914c612179746c6b3706103a99317e65bcda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:fdc5ed007f9c02f44943008862f7c6b62ad238018c6bf0412ab688445e42bbd2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:e9db0040a66483f9870e0f445877fa1352a405a970814dea2aff29598198ff6d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:acb23a6002388c658931180fb73706eeee11696de5da1bce33df4a8a206de2a0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:1166ced2b6761e3267b16e6b82ca07ee8fd00c6626c3507ccc8034ceaf722494
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:72df65ad9aeb923b7c2cbc5d06a5e16cb2fda0041a0dc04416c02223e54caee4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:319333dc043f729fe7dca70c6188d77614743bb43e47693f348f5cafb1425cbe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob sha256:517f3ad3da58ceb19857ea8e995ea92fb76ae37df29d314265f3d0e8da77060f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying config sha256:2c008cec7e3e56932b4510d51067ff0b604822190f3589d091ec265f58e4bf01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing manifest to image destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix.kib_image: output will be in this color.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; nutanix.kib_image: Creating Packer Builder virtual machine...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Build &amp;#39;nutanix.kib_image&amp;#39; finished after 7 minutes 28 seconds.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; Wait completed after 7 minutes 28 seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">==&amp;gt; Builds finished. The artifacts of successful builds are:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; nutanix.kib_image: nkp-ubuntu-22.04-1.31.4-20250306081227
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; nutanix.kib_image: nkp-ubuntu-22.04-1.31.4-20250306081227
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt; nutanix.kib_image: nkp-ubuntu-22.04-1.31.4-20250306081227
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OS Image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-ubuntu-22.04-1.31.4-20250306081227
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306163817087.png"
loading="lazy"
alt="image-20250306163817087"
>&lt;/p>
&lt;h4 id="5-升級-kommander">5. 升級 Kommander
&lt;/h4>&lt;h5 id="原版本">原版本
&lt;/h5>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306164047890.png"
loading="lazy"
alt="image-20250306164047890"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306164118766.png"
loading="lazy"
alt="image-20250306164118766"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># kubectl get helmreleases -A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2360587938&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2360587938.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dex&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v4&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.47&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.17&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mutations&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mutations&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mutations&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">8.5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loki&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loki&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">loki&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">distributed&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.79&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">istio&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">istio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.23&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">jaeger&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jaeger&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">jaeger&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.56&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kiali&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kiali&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kiali&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.89&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">15.23&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">17&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">65.5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubefed&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubefed&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">7.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubetunnel&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubetunnel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kubetunnel&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.38&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claims&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claims&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claim&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">4.11&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">reloader&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reloader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">reloader&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">27.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">velero&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">velero&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">velero&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">7.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="執行升級指令">執行升級指令
&lt;/h5>&lt;p>大約20分鐘時間&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cd /home/nkp/nkptools/nkp-airgap/nkp-v2.14.0/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp upgrade kommander \&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">application&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">applications&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">repository&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">application&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">repositories&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">applications&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">upgrading&lt;/span> &lt;span class="n">conditions&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">met&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">kubecost&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">upgraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">DKP&lt;/span> &lt;span class="n">licenses&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">migrated&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">application&lt;/span> &lt;span class="n">definitions&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">updated&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mirror&lt;/span> &lt;span class="n">implementation&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">migrated&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">ChartMuseum&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">CA&lt;/span> &lt;span class="n">duration&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">upgraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">DKA&lt;/span> &lt;span class="n">config&lt;/span> &lt;span class="n">overrides&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">cleaned&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">core&lt;/span> &lt;span class="n">Kommander&lt;/span> &lt;span class="n">application&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">upgraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">core&lt;/span> &lt;span class="n">Kommander&lt;/span> &lt;span class="n">applications&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">upgraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">new&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">updated&lt;/span> &lt;span class="n">management&lt;/span> &lt;span class="n">configOverrides&lt;/span> &lt;span class="n">configmaps&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">applied&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">COSI&lt;/span> &lt;span class="n">controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="n">Kommander&lt;/span> &lt;span class="n">applications&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="mi">23&lt;/span> &lt;span class="n">platform&lt;/span> &lt;span class="n">Kommander&lt;/span> &lt;span class="n">applications&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">upgraded&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">==================================&amp;gt;&lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m07s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">✓&lt;/span> &lt;span class="n">Ensuring&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">Kommander&lt;/span> &lt;span class="n">applications&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">installed&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306171232968.png"
loading="lazy"
alt="image-20250306171232968"
>&lt;/p>
&lt;p>Kommander UI 已升級，並有新的應用程式出現 (Harbor, Nutanix COSI, CloudNativePG, kubecost)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306171317317.png"
loading="lazy"
alt="image-20250306171317317"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306171430142.png"
loading="lazy"
alt="image-20250306171430142"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306171411257.png"
loading="lazy"
alt="image-20250306171411257"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306171452670.png"
loading="lazy"
alt="image-20250306171452670"
>&lt;/p>
&lt;h4 id="6-升級-cluster">6. 升級 Cluster
&lt;/h4>&lt;p>確認環境變數&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">修改 VM_IMAGE_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~]# vi env.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~]# source env.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~]# echo $MANAGEMENT_CLUSTER_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~]# echo $VM_IMAGE_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-ubuntu-22.04-1.31.4-20250306081227
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@nkp-bastion nkp-v2.14.0]# kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-dkfnd Ready control-plane 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-gmllf Ready control-plane 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-x989r Ready control-plane 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-4jbfm Ready &amp;lt;none&amp;gt; 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-cxlx7 Ready &amp;lt;none&amp;gt; 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-kwvlj Ready &amp;lt;none&amp;gt; 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-m9dkw Ready &amp;lt;none&amp;gt; 12d v1.30.5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>執行升級指令&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306172955285.png"
loading="lazy"
alt="image-20250306172955285"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@nkp-bastion ~]# nkp upgrade cluster nutanix \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --cluster-name ${MANAGEMENT_CLUSTER_NAME} \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --vm-image ${VM_IMAGE_NAME}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Deleting VCD Infrastructure Provider
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Upgrading CAPI components
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✓ Updating ClusterClass resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.cluster.x-k8s.io/nkp-poc upgraded
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⠈⠱ Upgrading the cluster
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Prism Central 自動開始建立新的虛擬機加入叢集，Control 跟 worker 每一台採取先建後拆的方式自動升級&lt;/p>
&lt;p>所以 IP 數量至少要多2個比較保險&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306172414800.png"
loading="lazy"
alt="image-20250306172414800"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306173056948.png"
loading="lazy"
alt="image-20250306173056948"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">用另一個 session 連線到 bastion 確認狀態
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-czzph NotReady control-plane 47s v1.31.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-dkfnd Ready control-plane 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-gmllf Ready control-plane 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-x989r Ready control-plane 12d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-4jbfm Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-cxlx7 Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-kwvlj Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-m9dkw Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ kubectl get nodes -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-czzph Ready control-plane 7m12s v1.31.4 10.38.14.43 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-134-generic containerd://1.7.24-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-nqtx9 Ready control-plane 3m48s v1.31.4 10.38.14.40 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-134-generic containerd://1.7.24-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-x989r Ready control-plane 13d v1.30.5 10.38.14.30 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-4jbfm Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.31 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-cxlx7 Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.50 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-kwvlj Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.48 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-m9dkw Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.47 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-czzph Ready control-plane 12m v1.31.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-mcn2q Ready control-plane 4m59s v1.31.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-nqtx9 Ready control-plane 8m47s v1.31.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-4jbfm Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-cxlx7 Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-kwvlj Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-m9dkw Ready &amp;lt;none&amp;gt; 13d v1.30.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-gfbbp-sh8b2 NotReady &amp;lt;none&amp;gt; 13s v1.31.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-bastion ~]$ kubectl get nodes -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-czzph Ready control-plane 12m v1.31.4 10.38.14.43 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-134-generic containerd://1.7.24-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-mcn2q Ready control-plane 5m29s v1.31.4 10.38.14.38 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-134-generic containerd://1.7.24-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-d78fs-nqtx9 Ready control-plane 9m17s v1.31.4 10.38.14.40 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-134-generic containerd://1.7.24-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-4jbfm Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.31 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-cxlx7 Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.50 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-kwvlj Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.48 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-g5pnb-m9dkw Ready &amp;lt;none&amp;gt; 13d v1.30.5 10.38.14.47 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-133-generic containerd://1.7.22-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-poc-md-0-clx8j-gfbbp-sh8b2 NotReady &amp;lt;none&amp;gt; 43s v1.31.4 10.38.14.19 &amp;lt;none&amp;gt; Ubuntu 22.04.5 LTS 5.15.0-134-generic containerd://1.7.24-d2iq.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>升級完成，大約花費30分鐘左右&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20250306175039600.png"
loading="lazy"
alt="image-20250306175039600"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">nodes&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span> &lt;span class="n">INTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">EXTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="ne">OS&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">IMAGE&lt;/span> &lt;span class="n">KERNEL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">VERSION&lt;/span> &lt;span class="n">CONTAINER&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RUNTIME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">czzph&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.43&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mcn2q&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">19&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.38&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nqtx9&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.40&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g6rtw&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">m50s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.25&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qzrkh&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m6s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.30&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sh8b2&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.19&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xlmc7&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span> &lt;span class="mf">10.38&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.27&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="mf">22.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">LTS&lt;/span> &lt;span class="mf">5.15&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">134&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">generic&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">czzph&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mcn2q&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">19&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d78fs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nqtx9&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g6rtw&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">m59s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qzrkh&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m15s&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sh8b2&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">poc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clx8j&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gfbbp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xlmc7&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">31.4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">helmreleases&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2360587938&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2360587938.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">cosi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">driver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">store&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cosi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">driver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">cosi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kit&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dex&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v3&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.14&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v5&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.48&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.18&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mutations&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mutations&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mutations&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gateway&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">crds&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gateway&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">8.9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loki&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loki&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">loki&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">distributed&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.79&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">istio&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">istio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v3&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.23&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">jaeger&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jaeger&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">jaeger&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.57&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kiali&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">istio&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kiali&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kiali&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">17.42&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v3&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">69.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubefed&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubefed&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">7.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubetunnel&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubetunnel&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kubetunnel&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.39&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">5.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claims&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claims&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">object&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bucket&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claim&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">4.11&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">reloader&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reloader&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">reloader&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">16.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">16.2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">34.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">crds&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">velero&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">True&lt;/span> &lt;span class="n">Helm&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">succeeded&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">velero&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">v2&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">velero&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">8.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Management 升級完成後之後再升級 workload cluster&lt;/p>
&lt;p>以下為範例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># kubectl get cluster -A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># export WORKLOAD_CLUSTER_NAME=demo-prod-01&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># export WORKLOAD_CLUSTER_NAMESPACE=demo-zone-c4zz7-qjq6g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nkp upgrade cluster nutanix \&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">WORKLOAD_CLUSTER_NAME&lt;/span>&lt;span class="p">}&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">vm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">VM_IMAGE_NAME&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">WORKLOAD_CLUSTER_NAME&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>OCP-4.16.3_on_Nutanix(IPI)</title><link>https://wangken0129.github.io/p/ocp-4.16.3_on_nutanixipi/</link><pubDate>Thu, 06 Mar 2025 03:05:48 +0800</pubDate><guid>https://wangken0129.github.io/p/ocp-4.16.3_on_nutanixipi/</guid><description>&lt;h1 id="ocp-4163_on_nutanix-ipi">OCP 4.16.3_on_Nutanix (IPI)
&lt;/h1>&lt;p>整合測試 OCP 4.16.3 透過 IPI (Installer-provisioned Infrastructure) 安裝在 Nutanix&lt;/p>
&lt;p>並且結合 Nutanix CSI、COSI、NDK (Nutanix Data service for kubernetes) 、 Autoscaler 自動擴展Worker&lt;/p>
&lt;h2 id="大致流程">大致流程
&lt;/h2>&lt;ol>
&lt;li>建立Bastion&lt;/li>
&lt;li>Prism Central 更換憑證&lt;/li>
&lt;li>建立 install-config.yaml , CCO&lt;/li>
&lt;li>建立 Openshift Cluster&lt;/li>
&lt;li>安裝Nutanix CSI 3.0 (beta)連線NUS&lt;/li>
&lt;li>安裝測試 Nutanix NDK (For VG Only)&lt;/li>
&lt;li>建立Machine Config ，worker node autoscaler&lt;/li>
&lt;/ol>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;p>Openshift:&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.16/installing/installing_nutanix/preparing-to-install-on-nutanix.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.16/installing/installing_nutanix/preparing-to-install-on-nutanix.html&lt;/a>&lt;/p>
&lt;p>Openshift Download:&lt;/p>
&lt;p>&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.16.3/" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.16.3/&lt;/a>&lt;/p>
&lt;p>Nutanix NVD for OCP:&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/solutions/details?targetId=NVD-2177-Cloud-Native-6-5-OpenShift:NVD-2177-Cloud-Native-6-5-OpenShift" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/solutions/details?targetId=NVD-2177-Cloud-Native-6-5-OpenShift:NVD-2177-Cloud-Native-6-5-OpenShift&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2030-Red-Hat-OpenShift-on-Nutanix:TN-2030-Red-Hat-OpenShift-on-Nutanix" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2030-Red-Hat-OpenShift-on-Nutanix:TN-2030-Red-Hat-OpenShift-on-Nutanix&lt;/a>&lt;/p>
&lt;p>Nutanix NDK:&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Data-Services-for-Kubernetes-v1_0:Nutanix-Data-Services-for-Kubernetes-v1_0" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Data-Services-for-Kubernetes-v1_0:Nutanix-Data-Services-for-Kubernetes-v1_0&lt;/a>&lt;/p>
&lt;p>Nutanix PC CA:&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nutanix.dev/2023/09/26/generating-a-self-signed-san-certificate-to-use-red-hat-openshift-in-nutanix-marketplace/" target="_blank" rel="noopener"
>https://www.nutanix.dev/2023/09/26/generating-a-self-signed-san-certificate-to-use-red-hat-openshift-in-nutanix-marketplace/&lt;/a>&lt;/p>
&lt;h2 id="架構與版本">架構與版本
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名稱&lt;/th>
&lt;th>IP / DNS&lt;/th>
&lt;th>版本&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>AOS / PE&lt;/td>
&lt;td>172.16.90.74&lt;/td>
&lt;td>6.8&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Prism Central&lt;/td>
&lt;td>172.16.90.75&lt;/td>
&lt;td>pc2024.1.0.1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NDK&lt;/td>
&lt;td>none&lt;/td>
&lt;td>1.0.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nutanix CSI&lt;/td>
&lt;td>none&lt;/td>
&lt;td>nutanix-csi-storage-3.0.0-beta.1912&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nutanix Object&lt;/td>
&lt;td>none&lt;/td>
&lt;td>5.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Nutanix IPAM&lt;/td>
&lt;td>172.16.90.x&lt;/td>
&lt;td>none&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bastion&lt;/td>
&lt;td>172.16.90.206&lt;/td>
&lt;td>RHEL 9.3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OCP Cluster Name&lt;/td>
&lt;td>ocplab.nutanixlab.local&lt;/td>
&lt;td>4.16.3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OCP API VIP&lt;/td>
&lt;td>172.16.90.205 / api.ocplab.nutanixlab.local&lt;/td>
&lt;td>none&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OCP Ingress VIP&lt;/td>
&lt;td>172.16.90.207 / *.apps.ocplab.nutanixlab.local&lt;/td>
&lt;td>none&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716100928430.png"
loading="lazy"
alt="image-20240716100928430"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716094638388.png"
loading="lazy"
alt="image-20240716094638388"
>&lt;/p>
&lt;h2 id="ocp-installation">OCP Installation
&lt;/h2>&lt;h3 id="prepare-bastion">Prepare Bastion
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>準備一台 RHEL VM&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@ken-rhel9 ~]$ cat /etc/os-release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME=&amp;#34;Red Hat Enterprise Linux&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VERSION=&amp;#34;9.3 (Plow)&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>下載安裝檔 ccoctl , oc , openshift-install ,&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 建立安裝目錄
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir ocp-install-4-16-3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cd ocp-install-4-16-3/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 下載檔案
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wget https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.16.3/ccoctl-linux-rhel9-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wget https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.16.3/openshift-client-linux-amd64-rhel9-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wget https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.16.3/openshift-install-linux-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 解壓縮檔案
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tar xvf ccoctl-linux-rhel9-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tar xvf openshift-client-linux-amd64-rhel9-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tar xvf openshift-install-linux-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 1689088
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. 1 nutanix nutanix 89185776 Jul 4 05:23 ccoctl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 nutanix nutanix 35912054 Jul 12 03:52 ccoctl-linux-rhel9-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. 2 nutanix nutanix 159916496 Jul 9 04:50 kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. 2 nutanix nutanix 159916496 Jul 9 04:50 oc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 nutanix nutanix 66698442 Jul 12 03:52 openshift-client-linux-amd64-rhel9-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. 1 nutanix nutanix 707719168 Jul 9 20:10 openshift-install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 nutanix nutanix 510267167 Jul 12 03:52 openshift-install-linux-4.16.3.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./oc version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client Version: 4.16.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./openshift-install version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./openshift-install 4.16.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">built from commit e1f9f057ce87c1a4a5f3c268812fa4c9dc003cb7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">release image quay.io/openshift-release-dev/ocp-release@sha256:3ec3a43ded1decc18134e5677f56037d8929f4442930f5d1156e7a77cdf1b9b3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">release architecture amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="prism-central-ca">Prism Central CA
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>產生 CA 憑證&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PC_IP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.75&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PC_FQDN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ntnxselabpc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanixlab&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">openssl&lt;/span> &lt;span class="n">req&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">x509&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">nodes&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">days&lt;/span> &lt;span class="mi">3650&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">newkey&lt;/span> &lt;span class="n">rsa&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2048&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">keyout&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">PC_IP&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">key&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">out&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">PC_IP&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crt&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">subj&lt;/span> &lt;span class="s2">&amp;#34;/C=US/ST=CA/L=San Jose/O=Nutanix Inc./OU=Manageability/CN=*.nutanix.local&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">addext&lt;/span> &lt;span class="s2">&amp;#34;subjectAltName=IP:${PC_IP},DNS:${PC_FQDN}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">1689096&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="mi">1444&lt;/span> &lt;span class="n">Jul&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">48&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.75&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="mi">1704&lt;/span> &lt;span class="n">Jul&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">48&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.75&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">key&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>置換 Prism Central CA&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716144747534.png"
loading="lazy"
alt="image-20240716144747534"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716144805568.png"
loading="lazy"
alt="image-20240716144805568"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716144834705.png"
loading="lazy"
alt="image-20240716144834705"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>檢視憑證&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716144925561.png"
loading="lazy"
alt="image-20240716144925561"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>將憑證匯入至Bastion&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ sudo cp 172.16.90.75.* /etc/pki/ca-trust/source/anchors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo update-ca-trust extract
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="install-configyaml">Install-config.yaml
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>建立install-config.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 建立安裝目錄
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 產生install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./openshift-install create install-config --dir /home/nutanix/ocp-install-4-16-3/install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? SSH Public Key /home/nutanix/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Platform nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Prism Central 172.16.90.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Port 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Username ocpadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Password [? for help] ***********
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Connecting to Prism Central 172.16.90.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Prism Element NX1365G6PE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Subnet Netfos_90_Access_IPAM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Virtual IP Address for API 172.16.90.205
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Virtual IP Address for Ingress 172.16.90.207
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Base Domain nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Cluster Name ocplab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Pull Secret [? for help] *****************************************************************************************************************INFO Install-Config created in: /home/nutanix/ocp-install-4-16-3/install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ll install/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r-----. 1 nutanix nutanix 4374 Jul 16 14:59 install-config.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改檔案&lt;/p>
&lt;p>additionalTrustBundle: 加入 Prism Central 的 root CA&lt;/p>
&lt;p>additionalTrustBundlePolicy: 改為 Always&lt;/p>
&lt;p>machineNetwork: 改為與VM相同網段 xxx.xxx.xxx.xxx/24&lt;/p>
&lt;p>platform 自定義cpu、memory、disk&lt;/p>
&lt;p>完成後如下，建議備份此檔案以利部署到其他地方或是重新部署&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cat install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">additionalTrustBundlePolicy: Always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">additionalTrustBundle: |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----BEGIN CERTIFICATE-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MIID/jCCAuagAwIBAgIUKDpX++EriXrP4L1R+e15qqR3+4owDQYJKoZIhvcNAQEL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BQAwdjELMAkGA1UEBhMCVVMxCzAJBgNVBAgMAkNBMREwDwYDVQQHDAhTYW4gSm9z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ZTEVMBMGxxx....
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----END CERTIFICATE-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseDomain: nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- architecture: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpus: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> coresPerSocket: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memoryMiB: 8196
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osDisk:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskSizeGiB: 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> categories:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ocplab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controlPlane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> architecture: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpus: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> coresPerSocket: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memoryMiB: 16384
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osDisk:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskSizeGiB: 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> categories:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ocpalb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">credentialsMode: Manual
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ocplab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networking:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: 10.128.0.0/14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hostPrefix: 23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: 172.16.90.0/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networkType: OVNKubernetes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.30.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiVIPs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.16.90.205
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ingressVIPs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.16.90.207
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismCentral:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address: 172.16.90.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ocpadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismElements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address: 172.16.90.74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uuid: 00061972-aeba-fee2-0000-000000028e95
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> subnetUUIDs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 060837bb-aefc-41f2-aaae-25c95267d87a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">publish: External
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pullSecret: &amp;#39;{&amp;#34;auths&amp;#34;:{&amp;#34;cloud.openshift.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnN....&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sshKey: |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCy4sUIXB5QMIETJe6+niy4SrO0ly/ymlwBtnCbgAPNtIKfQfkjFrbcUgsdUsjEQ+M0giXfjlgDcAMiasxaFvfhKCNJ1dR5L6hyi/JrWAdG/Ue5ydbc84vFgQRQ1AolnovlxWcM4xdsYYQvpZwo9v1dOIAQ9rasubEiDxHaw7HK+mGChu+6uRli4EdJ7HvRg9Ha5dKAQFawsZ/cBcMZZnW84bfK72naHI7XyVOEPnbQ8NG+Pk55S2za6J7VIIHDr3rSbNYBZUJnTroYMLxXnC0I0xqcXZMDiUm6ZQzE6kJnrFHIdqVEXkgqtbdXQDK+zdeA/vOttq8ojYSFpa9qCHMCHK66OC2P0vE54hI439uEHPJI7aIYNGPxPJtL6k8rDklWyMnkh8jJMtxM+sZkZxI2/+L4szC/S4qJ/OmRJI3TeTob+0kptqwJrAuWK3T/YiCWbyqytr4RyGJTFA5pB0SucJHaqJ4PbiJ633hJ8AJ7KepYHB65KyvHgDga2v3QDf0= nutanix@ken-rhel9.nutanixlab.local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="cloud-credential-operator">Cloud Credential Operator
&lt;/h3>&lt;p>安裝Cluster需要Cloud Credential Operator (CCO)，讓OCP能與Prism溝通&lt;/p>
&lt;p>大致作法為&lt;/p>
&lt;ol>
&lt;li>
&lt;p>建立帳號密碼檔案&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立要求帳密的目錄及檔案&lt;/p>
&lt;/li>
&lt;li>
&lt;p>利用上述檔案建立OCP Shared Secret&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立cred.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">credentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- type: basic_auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismCentral:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ocpadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismElements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: ocpadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: password
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定Image環境變數&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ RELEASE_IMAGE=$(./openshift-install version | awk &amp;#39;/release image/ {print $3}&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立credrequests資料夾&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ mkdir credrequests
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立0000_30_machine-api-operator_00_credentials-request.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">extract&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">credentials&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">requests&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cloud&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nutanix&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">=./&lt;/span>&lt;span class="n">credrequests&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">RELEASE_IMAGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">warning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">intend&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="k">pass&lt;/span> &lt;span class="n">CredentialsRequests&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">ccoctl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">should&lt;/span> &lt;span class="n">use&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">included&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">filter&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">requests&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">expected&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">need&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Extracted&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">payload&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">04&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">ll&lt;/span> &lt;span class="n">credrequests&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="mi">599&lt;/span> &lt;span class="n">Jul&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">43&lt;/span> &lt;span class="mi">0000&lt;/span>&lt;span class="n">_26_cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator_18_credentialsrequest&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="mi">543&lt;/span> &lt;span class="n">Jul&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">43&lt;/span> &lt;span class="mi">0000&lt;/span>&lt;span class="n">_30_machine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator_00_credentials&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">request&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立 CCO Secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ./ccoctl nutanix create-shared-secrets --credentials-requests-dir=/home/nutanix/ocp-install-4-16-3/credrequests --output-dir=/home/nutanix/ocp-install-4-16-3/install --credentials-source-filepath=/home/nutanix/ocp-install-4-16-3/install/credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/07/16 15:45:45 Saved credentials configuration to: /home/nutanix/ocp-install-4-16-3/install/manifests/openshift-cloud-controller-manager-nutanix-credentials-credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024/07/16 15:45:45 Saved credentials configuration to: /home/nutanix/ocp-install-4-16-3/install/manifests/openshift-machine-api-nutanix-credentials-credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tree install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── manifests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── openshift-cloud-controller-manager-nutanix-credentials-credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── openshift-machine-api-nutanix-credentials-credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 directory, 4 files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="create-cluster">Create Cluster
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>Create manifests&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ./openshift-install create manifests --dir /home/nutanix/ocp-install-4-16-3/install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Install Config from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Manifests created in: /home/nutanix/ocp-install-4-16-3/install/cluster-api, /home/nutanix/ocp-install-4-16-3/install/manifests and /home/nutanix/ocp-install-4-16-3/install/openshift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tree install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── cluster-api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 000_capi-namespace.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 01_capi-cluster.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 01_nutanix-cluster.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 01_nutanix-creds.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── machines
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_inframachine_ocplab-k7zds-bootstrap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_inframachine_ocplab-k7zds-master-0.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_inframachine_ocplab-k7zds-master-1.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_inframachine_ocplab-k7zds-master-2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_machine_ocplab-k7zds-bootstrap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_machine_ocplab-k7zds-master-0.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── 10_machine_ocplab-k7zds-master-1.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── 10_machine_ocplab-k7zds-master-2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── manifests
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cloud-provider-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-dns-02-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-infrastructure-02-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-ingress-02-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-network-02-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-proxy-01-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cluster-scheduler-02-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── cvo-overrides.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── kube-cloud-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── kube-system-configmap-root-ca.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── machine-config-server-tls-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── openshift-cloud-controller-manager-nutanix-credentials-credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── openshift-config-secret-pull-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── openshift-machine-api-nutanix-credentials-credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── user-ca-bundle-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── openshift
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_feature-gate.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_kubeadmin-password-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-cluster-api_master-machines-0.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-cluster-api_master-machines-1.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-cluster-api_master-machines-2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-cluster-api_master-user-data-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-cluster-api_worker-machineset-0.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-cluster-api_worker-user-data-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-machine-api_master-control-plane-machine-set.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-machineconfig_99-master-ssh.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── 99_openshift-machineconfig_99-worker-ssh.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── openshift-install-manifests.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4 directories, 41 files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Create Cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">level&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">debug&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Generating&lt;/span> &lt;span class="n">Cluster&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">infrastructure&lt;/span> &lt;span class="n">resources&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">category&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="s2">&amp;#34;kubernetes-io-cluster-ocplab-k7zds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">category&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="s2">&amp;#34;owned&amp;#34;&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;kubernetes-io-cluster-ocplab-k7zds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">category&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="s2">&amp;#34;shared&amp;#34;&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;kubernetes-io-cluster-ocplab-k7zds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">rhcos&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k7zds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhcos&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">uuid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">c8db94e&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">17&lt;/span>&lt;span class="n">aa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">eea&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bc75&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2e05876&lt;/span>&lt;span class="n">e8f31&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">waiting&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="n">uploading&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">rhcos&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mirror&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">art&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prod&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">streams&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">416.94&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">202406251923&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rhcos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">416.94&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">202406251923&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">qcow2&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">taskUUID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cf6ef687&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c95d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4648&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b97e&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c0bccfcb3052&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Network&lt;/span> &lt;span class="n">infrastructure&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">infrastructure&lt;/span> &lt;span class="n">ready&lt;/span> &lt;span class="n">requirements&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">provider&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k7zds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ign&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">uuid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">466&lt;/span>&lt;span class="n">b5db5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">69e4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">f39&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aaac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">ae65594a09f&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">taskUUID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">04588942&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">57&lt;/span>&lt;span class="n">c9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">b0b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">bb2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">321e6&lt;/span>&lt;span class="n">eaf60ad&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k7zds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ign&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">uuid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">466&lt;/span>&lt;span class="n">b5db5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">69e4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">f39&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aaac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">ae65594a09f&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">used_time&lt;/span> &lt;span class="mf">10.829777095&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">preparing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">upload&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k7zds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ign&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">uuid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">466&lt;/span>&lt;span class="n">b5db5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">69e4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">f39&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aaac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">ae65594a09f&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">installer&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">image_cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k7zds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ign&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">All&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">operators&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="n">completed&lt;/span> &lt;span class="n">progressing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Checking&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">see&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">there&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">route&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Route&lt;/span> &lt;span class="n">found&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span> &lt;span class="n">namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">console&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">OpenShift&lt;/span> &lt;span class="n">console&lt;/span> &lt;span class="n">route&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">admitted&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Install&lt;/span> &lt;span class="n">complete&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">To&lt;/span> &lt;span class="n">access&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">admin&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="n">when&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="s1">&amp;#39;oc&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="s1">&amp;#39;export KUBECONFIG=/home/nutanix/ocp-install-4-16-3/install/auth/kubeconfig&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Access&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">OpenShift&lt;/span> &lt;span class="n">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span> &lt;span class="n">here&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocplab&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanixlab&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Login&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">console&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;kubeadmin&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;JrHfc-s958g-V3oQ7-eXHxY&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">elapsed&lt;/span> &lt;span class="n">per&lt;/span> &lt;span class="n">stage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Infrastructure&lt;/span> &lt;span class="n">Pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">provisioning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m6s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Network&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">infrastructure&lt;/span> &lt;span class="n">Provisioning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">54&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Bootstrap&lt;/span> &lt;span class="n">Ignition&lt;/span> &lt;span class="n">Provisioning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Machine&lt;/span> &lt;span class="n">Provisioning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Bootstrap&lt;/span> &lt;span class="n">Complete&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="n">m27s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">API&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="n">m0s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Bootstrap&lt;/span> &lt;span class="n">Destroy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">Operators&lt;/span> &lt;span class="n">Available&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m37s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DEBUG&lt;/span> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">Operators&lt;/span> &lt;span class="n">Stable&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">elapsed&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">39&lt;/span>&lt;span class="n">m33s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716155629530.png"
loading="lazy"
alt="image-20240716155629530"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716163717437.png"
loading="lazy"
alt="image-20240716163717437"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完畢確認連線&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716163827676.png"
loading="lazy"
alt="image-20240716163827676"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716163936258.png"
loading="lazy"
alt="image-20240716163936258"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716163947487.png"
loading="lazy"
alt="image-20240716163947487"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>指令確認&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cp /home/nutanix/ocp-install-4-16-3/install/auth/kubeconfig ~/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo cp oc /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-master-0 Ready control-plane,master 34m v1.29.6+aba1e8d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-master-1 Ready control-plane,master 34m v1.29.6+aba1e8d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-master-2 Ready control-plane,master 34m v1.29.6+aba1e8d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-worker-27snp Ready worker 19m v1.29.6+aba1e8d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-worker-29wr6 Ready worker 19m v1.29.6+aba1e8d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-worker-bdgmd Ready worker 19m v1.29.6+aba1e8d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get nodes -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-master-0 Ready control-plane,master 34m v1.29.6+aba1e8d 172.16.90.158 &amp;lt;none&amp;gt; Red Hat Enterprise Linux CoreOS 416.94.202407081958-0 5.14.0-427.26.1.el9_4.x86_64 cri-o://1.29.6-3.rhaos4.16.gitfd433b7.el9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-master-1 Ready control-plane,master 34m v1.29.6+aba1e8d 172.16.90.175 &amp;lt;none&amp;gt; Red Hat Enterprise Linux CoreOS 416.94.202407081958-0 5.14.0-427.26.1.el9_4.x86_64 cri-o://1.29.6-3.rhaos4.16.gitfd433b7.el9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-master-2 Ready control-plane,master 34m v1.29.6+aba1e8d 172.16.90.151 &amp;lt;none&amp;gt; Red Hat Enterprise Linux CoreOS 416.94.202407081958-0 5.14.0-427.26.1.el9_4.x86_64 cri-o://1.29.6-3.rhaos4.16.gitfd433b7.el9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-worker-27snp Ready worker 19m v1.29.6+aba1e8d 172.16.90.154 &amp;lt;none&amp;gt; Red Hat Enterprise Linux CoreOS 416.94.202407081958-0 5.14.0-427.26.1.el9_4.x86_64 cri-o://1.29.6-3.rhaos4.16.gitfd433b7.el9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-worker-29wr6 Ready worker 20m v1.29.6+aba1e8d 172.16.90.167 &amp;lt;none&amp;gt; Red Hat Enterprise Linux CoreOS 416.94.202407081958-0 5.14.0-427.26.1.el9_4.x86_64 cri-o://1.29.6-3.rhaos4.16.gitfd433b7.el9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ocplab-k7zds-worker-bdgmd Ready worker 20m v1.29.6+aba1e8d 172.16.90.160 &amp;lt;none&amp;gt; Red Hat Enterprise Linux CoreOS 416.94.202407081958-0 5.14.0-427.26.1.el9_4.x86_64 cri-o://1.29.6-3.rhaos4.16.gitfd433b7.el9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="安裝-nutanix-csi-cosi">安裝 Nutanix CSI 、COSI
&lt;/h2>&lt;h3 id="nutanix-csi-30">Nutanix CSI 3.0
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>先安裝Helm Chart 在Bastion上面&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ sudo curl -L https://mirror.openshift.com/pub/openshift-v4/clients/helm/latest/helm-linux-amd64 -o /usr/local/bin/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo chmod +x /usr/local/bin/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version.BuildInfo{Version:&amp;#34;v3.13.2+35.el9&amp;#34;, GitCommit:&amp;#34;fa6e939d7984e1be0d6fbc2dc920b6bbcf395932&amp;#34;, GitTreeState:&amp;#34;clean&amp;#34;, GoVersion:&amp;#34;go1.20.12&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm repo add nutanix https://nutanix.github.io/helm/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立 Nutanix Secret 在 ntnx-system 內&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># Create Namespace ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc create ns ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/ntnx-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Edit Secret for PE,PC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vi ntnx-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # prism-element-ip:prism-port:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: pe-ip:9440:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vi ntnx-pc-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-pc-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # prism-pc-ip:prism-port:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: pc-ip:9440:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Create secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f ntnx-pc-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f ntnx-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get secret -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE DATA AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-pc-secret Opaque 1 13s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-secret Opaque 1 9s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>下載 Nutanix CSI 3.0 beta&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">beta&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1912.&lt;/span>&lt;span class="n">tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xvf&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">beta&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1912.&lt;/span>&lt;span class="n">tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Chart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">NOTES&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">_helpers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tpl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">driver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">machine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configmap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">secret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">helmignore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Nutanix&lt;/span> &lt;span class="n">core_k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi_beta1&lt;/span> &lt;span class="n">Notice&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">questions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yml&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Edit value.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cd nutanix-csi-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># all namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">createPrismCentralSecret: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># prismCentralEndPoint: 00.00.00.00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># pcUsername: username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># pcPassword: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pcSecretName: ntnx-pc-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">createSecret: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># prismEndPoint: 00.00.000.000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># username: username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># password: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">peSecretName: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#supportedPCVersions: &amp;#34;fraser-2023.4-stable-pc-0&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">supportedPCVersions: &amp;#34;fraser-2024.1-stable-pc-0.1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Install CSI Driver using Helm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Warning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">apps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span> &lt;span class="n">DeploymentConfig&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">deprecated&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">v4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">unavailable&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">v4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">10000&lt;/span>&lt;span class="o">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">TYPE&lt;/span> &lt;span class="n">CLUSTER&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">EXTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">PORT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span> &lt;span class="n">ClusterIP&lt;/span> &lt;span class="mf">172.30&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">52.86&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">9809&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9810&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9811&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">9812&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">DESIRED&lt;/span> &lt;span class="n">CURRENT&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">UP&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">TO&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">DATE&lt;/span> &lt;span class="n">AVAILABLE&lt;/span> &lt;span class="n">NODE&lt;/span> &lt;span class="n">SELECTOR&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">daemonset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">linux&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">UP&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">TO&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">DATE&lt;/span> &lt;span class="n">AVAILABLE&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">DESIRED&lt;/span> &lt;span class="n">CURRENT&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">replicaset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8669&lt;/span>&lt;span class="n">b97dc8&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">describe&lt;/span> &lt;span class="n">daemonset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">----&lt;/span> &lt;span class="o">-------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Warning&lt;/span> &lt;span class="n">FailedCreate&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x19&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">daemonset&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span> &lt;span class="n">Error&lt;/span> &lt;span class="n">creating&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-node-&amp;#34;&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">forbidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">unable&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">validate&lt;/span> &lt;span class="n">against&lt;/span> &lt;span class="n">any&lt;/span> &lt;span class="n">security&lt;/span> &lt;span class="n">context&lt;/span> &lt;span class="n">constraint&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">provider&lt;/span> &lt;span class="s2">&amp;#34;anyuid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Forbidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">usable&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">serviceaccount&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Apply privilege to ntnx-system namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">privileged&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-controller&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">privileged&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-node&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">anyuid&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">anyuid&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-controller&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">anyuid&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">anyuid&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-node&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">anyuid&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">anyuid&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;node-exporter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reinstall &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">uninstall&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認安裝完成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc get all -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-controller-8669b97dc8-pwcq4 7/7 Running 0 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-controller-8669b97dc8-srkbr 7/7 Running 0 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-node-gz278 3/3 Running 0 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-node-p6lrb 3/3 Running 0 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-node-qdrdp 3/3 Running 0 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/nutanix-csi-metrics ClusterIP 172.30.34.177 &amp;lt;none&amp;gt; 9809/TCP,9810/TCP,9811/TCP,9812/TCP 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY UP-TO-DATE AVAILABLE NODE SELECTOR AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">daemonset.apps/nutanix-csi-node 3 3 3 3 3 kubernetes.io/os=linux 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/nutanix-csi-controller 2/2 2 2 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nutanix-csi-controller-8669b97dc8 2 2 2 9s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716172840878.png"
loading="lazy"
alt="image-20240716172840878"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="連線-nutanix-volume">連線 Nutanix Volume
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Create nutanix-volume.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim nutanix-volume.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageclass.kubernetes.io/is-default-class: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanixvolume
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-namespace: ntnx-systems
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/fstype: ext4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dataServiceEndPoint: 172.16.90.76:3260 # Prism data service ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageContainer: NX_1365_AHV_cr # Prism 上建立的Storage Container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixVolumes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #whitelistIPMode: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #chapAuth: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allowVolumeExpansion: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reclaimPolicy: Delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>apply nutanix-volume.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc apply -f nutanix-volume.yaml -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">storageclass.storage.k8s.io/nutanix-volume created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get storageclass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix-volume (default) csi.nutanix.com Delete Immediate true 45s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>測試VG&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc get pv,pvc -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS VOLUMEATTRIBUTESCLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-49b7f489-05a1-479a-ada3-a1cd2ae76bfa 1Gi RWO Delete Bound ntnx-system/test-vg nutanix-volume &amp;lt;unset&amp;gt; 77s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS VOLUMEATTRIBUTESCLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/test-vg Bound pvc-49b7f489-05a1-479a-ada3-a1cd2ae76bfa 1Gi RWO nutanix-volume &amp;lt;unset&amp;gt; 110s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716174552557.png"
loading="lazy"
alt="image-20240716174552557"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716174543937.png"
loading="lazy"
alt="image-20240716174543937"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2024/07/image-20240716174532000.png"
loading="lazy"
alt="image-20240716174532000"
>&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Nutanix_Webinar_通過Nutanix實現資料庫與DevOps的融合</title><link>https://wangken0129.github.io/p/nutanix_webinar_%E9%80%9A%E9%81%8Enutanix%E5%AF%A6%E7%8F%BE%E8%B3%87%E6%96%99%E5%BA%AB%E8%88%87devops%E7%9A%84%E8%9E%8D%E5%90%88/</link><pubDate>Mon, 03 Mar 2025 07:52:01 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix_webinar_%E9%80%9A%E9%81%8Enutanix%E5%AF%A6%E7%8F%BE%E8%B3%87%E6%96%99%E5%BA%AB%E8%88%87devops%E7%9A%84%E8%9E%8D%E5%90%88/</guid><description>&lt;h1 id="通過nutanix實現資料庫與devops-的融合">通過Nutanix實現資料庫與DevOps 的融合
&lt;/h1>&lt;p>Youtube Link:&lt;/p>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=cYEByBhtra8" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=cYEByBhtra8&lt;/a>&lt;/p>
&lt;h2 id="agenda">Agenda
&lt;/h2>&lt;p>1.通過Nutanix實現資料庫與DevOps 的融合&lt;/p>
&lt;p>講師 鄭兆良 / 逸盈科技 技術經理&lt;/p>
&lt;p>2.demo&lt;/p>
&lt;p>講師 王軍凱 / 逸盈科技 工程師 &amp;ndash;&amp;gt; Ken&lt;/p>
&lt;p>3.新功能分享&lt;/p>
&lt;p>特別來賓 張兆祥 / Nutanix 大中華區關鍵應用系統資深顧問&lt;/p></description></item><item><title>vSphere_on_Nutanix</title><link>https://wangken0129.github.io/p/vsphere_on_nutanix/</link><pubDate>Mon, 03 Mar 2025 07:39:16 +0800</pubDate><guid>https://wangken0129.github.io/p/vsphere_on_nutanix/</guid><description>&lt;h1 id="vsphere-on-nutanix">vSphere on Nutanix
&lt;/h1>&lt;p>透過Nutanix Foundation安裝vSphere ESXi，並執行後續的設定，&lt;/p>
&lt;p>Foundation步驟因為很簡單此處就不多加贅述，&lt;/p>
&lt;p>原則上會建議先把Nutanix Node加入vCenter，再將Nutanix Cluster建立好，&lt;/p>
&lt;p>因為加入vCenter時Node會需要進入維護模式，如有Nutanix Cluster運作時，&lt;/p>
&lt;p>變成要一台一台加入vCenter，執行速度上會比較慢。&lt;/p>
&lt;h2 id="參考文件">參考文件
&lt;/h2>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-cluster-introduction-vsphere-c.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-cluster-introduction-vsphere-c.html&lt;/a>&lt;/p>
&lt;h2 id="foundation">Foundation
&lt;/h2>&lt;ol>
&lt;li>準備vSphere ESXi、vCenter的iso檔&lt;/li>
&lt;li>利用mac的foundation安裝nutanix&lt;/li>
&lt;li>安裝時改用vSphere的iso檔&lt;/li>
&lt;li>如不是使用官方Support的版本,要提供md5 check sum&lt;/li>
&lt;li>目前支援到vSphere ESXi 7.0u3c , 實測7.0u3g也可以安裝&lt;/li>
&lt;li>安裝時間約50~60min&lt;/li>
&lt;/ol>
&lt;h2 id="安裝後的設定">安裝後的設定
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>設定DNS Server&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定NTP Server&lt;/p>
&lt;/li>
&lt;li>
&lt;p>刪除Default Container,再新增一個 (因名稱太長)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Virtual IP、Data Service IP&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Deploy vCenter or Registry to vCenter
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117115309394.png"
loading="lazy"
alt="image-20230117115309394"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117115414091.png"
loading="lazy"
alt="image-20230117115414091"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117115559389.png"
loading="lazy"
alt="image-20230117115559389"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117120202663.png"
loading="lazy"
alt="image-20230117120202663"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117120702169.png"
loading="lazy"
alt="image-20230117120702169"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117121452623.png"
loading="lazy"
alt="image-20230117121452623"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117121557920.png"
loading="lazy"
alt="image-20230117121557920"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>vCenter Setting&lt;/p>
&lt;ul>
&lt;li>先在vCenter Create Datacenter並新增Nutanix Cluster
Cluster &lt;strong>開啟DRS、HA&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117122218272.png"
loading="lazy"
alt="image-20230117122218272"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117131129201.png"
loading="lazy"
alt="image-20230117131129201"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>確認Checklist都有設定完畢才能加入Nutanix Node&lt;/strong>
HA&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Enable Host Monitoring&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the Host Isolation Response of the cluster to &lt;strong>Power Off &amp;amp; Restart VMs&lt;/strong>.
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117143553864.png"
loading="lazy"
alt="image-20230117143553864"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Enable admission control (%)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142443552.png"
loading="lazy"
alt="image-20230117142443552"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the VM Restart Priority of all CVMs to &lt;strong>Disabled&lt;/strong>. &amp;ndash; After register
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142551006.png"
loading="lazy"
alt="image-20230117142551006"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142719050.png"
loading="lazy"
alt="image-20230117142719050"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the VM Monitoring for all CVMs to &lt;strong>Disabled&lt;/strong>. &amp;ndash; After register&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142810049.png"
loading="lazy"
alt="image-20230117142810049"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Datastore heartbeats &amp;ndash; After register&lt;/p>
&lt;p>(只有一個Datastore時,增加此設定)
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117134844420.png"
loading="lazy"
alt="image-20230117134844420"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142910096.png"
loading="lazy"
alt="image-20230117142910096"
>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>DRS&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Set the Automation Level on all CVMs to &lt;strong>Disabled&lt;/strong>. &amp;ndash;After register
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142728280.png"
loading="lazy"
alt="image-20230117142728280"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Select Automation Level to accept level 3 recommendations.&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117135654108.png"
loading="lazy"
alt="image-20230117135654108"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Leave power management &lt;strong>disabled&lt;/strong>.
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117135332448.png"
loading="lazy"
alt="image-20230117135332448"
>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Others&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Configure advertised capacity for the Nutanix storage container (RF2)
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117140918527.png"
loading="lazy"
alt="image-20230117140918527"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Store VM swapfiles in the same directory as the VM.&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117143410180.png"
loading="lazy"
alt="image-20230117143410180"
>
&lt;a class="link" href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.resmgmt.doc/GUID-12B8E0FB-CD43-4972-AC2C-4B4E2955A5DA.html" target="_blank" rel="noopener"
>https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.resmgmt.doc/GUID-12B8E0FB-CD43-4972-AC2C-4B4E2955A5DA.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Enable&lt;/strong> enhanced vMotion compatibility (EVC) in the cluster.
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117140459645.png"
loading="lazy"
alt="image-20230117140459645"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Configure Nutanix CVMs with the appropriate VM overrides. &amp;ndash;After register
(HA、DRS、Monitoring &lt;strong>Disabled&lt;/strong>)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>vCenter Adding Nutanix nodes&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117141404460.png"
loading="lazy"
alt="image-20230117141404460"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117141430544.png"
loading="lazy"
alt="image-20230117141430544"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117141503268.png"
loading="lazy"
alt="image-20230117141503268"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117141525157.png"
loading="lazy"
alt="image-20230117141525157"
>&lt;/p>
&lt;p>實測第一台Node會被順利加到Cluster內,其他兩台需手動移入
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117142411214.png"
loading="lazy"
alt="image-20230117142411214"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>補齊Checklist的設定&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Register Nutanix Cluster to vCenter
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117143835885.png"
loading="lazy"
alt="image-20230117143835885"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117143908067.png"
loading="lazy"
alt="image-20230117143908067"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117144024141.png"
loading="lazy"
alt="image-20230117144024141"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="安裝後的設定-pc">安裝後的設定-PC
&lt;/h2>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Acropolis-Upgrade-Guide:upg-vm-install-wc-r.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Acropolis-Upgrade-Guide:upg-vm-install-wc-r.html&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>create PC (可用Online下載或是部署時上傳PC的檔案)
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117144856189.png" alt="image-20230117144856189" style="zoom:50%;" />&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117144919733.png" alt="image-20230117144919733" style="zoom:50%;" />
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117145119576.png" alt="image-20230117145119576" style="zoom:50%;" />
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117160527103.png"
loading="lazy"
alt="image-20230117160527103"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>PC建立好後即可用web連線
預設帳密 admin , Nutanix/4u
若無法登入web,可以在PE開PCVM的console,用nutanix / nutanix/4u的帳密登入
登入後切換身份為root 執行以下指令來重設admin密碼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ncli user reset-password user-name=admin password=password
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117162037651.png"
loading="lazy"
alt="image-20230117162037651"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>註冊Nutanix Cluster至Prism Central (PC)
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117162121479.png"
loading="lazy"
alt="image-20230117162121479"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117162141769.png"
loading="lazy"
alt="image-20230117162141769"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117162216948.png"
loading="lazy"
alt="image-20230117162216948"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>註冊完成即可在PC上看到Nutanix Cluster
&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117162314773.png"
loading="lazy"
alt="image-20230117162314773"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prism Central 設定NTP、DNS Server&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Enable Microserivces Infrastructure (可使用更多功能)
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Prism-Central-Guide-vpc_2022_6:mul-cmsp-overview-pc-c.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Prism-Central-Guide-vpc_2022_6:mul-cmsp-overview-pc-c.html&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/03/image-20230117162822002.png"
loading="lazy"
alt="image-20230117162822002"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="vsphere-settings-checklist">vSphere Settings Checklist
&lt;/h1>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-vcenter-settings-r.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-vcenter-settings-r.html&lt;/a>&lt;/p>
&lt;p>Review the following checklist of the settings that you have to configure to successfully deploy vSphere virtual environment running Nutanix Enterprise cloud.&lt;/p>
&lt;h2 id="vsphere-availability-settings">vSphere Availability Settings
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;strong>Enable&lt;/strong> host monitoring.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Enable&lt;/strong> admission control and use the percentage-based policy with a value based on the number of nodes in the cluster.&lt;/p>
&lt;p>For more information about settings of percentage of cluster resources reserved as failover spare capacity, &lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-cluster-settings-admissioncontrol-vcenter-vsphere-r.html" target="_blank" rel="noopener"
>vSphere HA Admission Control Settings for Nutanix Environment&lt;/a>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the VM Restart Priority of all CVMs to &lt;strong>Disabled&lt;/strong>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the Host Isolation Response of the cluster to &lt;strong>Power Off &amp;amp; Restart VMs&lt;/strong>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Set the VM Monitoring for all CVMs to &lt;strong>Disabled&lt;/strong>.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Enable datastore heartbeats by clicking &lt;strong>Use datastores only from the specified list&lt;/strong> and choosing the Nutanix NFS datastore.&lt;/p>
&lt;p>If the cluster has only one datastore, click &lt;strong>Advanced Options&lt;/strong> tab and add das.ignoreInsufficientHbDatastore with &lt;strong>Value&lt;/strong> of true.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="vsphere-drs-settings">vSphere DRS Settings
&lt;/h2>&lt;ul>
&lt;li>Set the Automation Level on all CVMs to &lt;strong>Disabled&lt;/strong>.&lt;/li>
&lt;li>Select Automation Level to accept level 3 recommendations.&lt;/li>
&lt;li>Leave power management &lt;strong>disabled&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;h2 id="other-cluster-settings">Other Cluster Settings
&lt;/h2>&lt;ul>
&lt;li>Configure advertised capacity for the Nutanix storage container
(total usable capacity minus the capacity of one node for replication factor 2 or two nodes for replication factor 3).&lt;/li>
&lt;li>Store VM swapfiles in the same directory as the VM.&lt;/li>
&lt;li>&lt;strong>Enable&lt;/strong> enhanced vMotion compatibility (EVC) in the cluster. For more information, see &lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-cluster-settings-evc-vcenter-vsphere-t.html" target="_blank" rel="noopener"
>vSphere EVC Settings&lt;/a>.&lt;/li>
&lt;li>Configure Nutanix CVMs with the appropriate VM overrides. For more information, see &lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-cluster-settings-override-vcenter-vsphere-t.html" target="_blank" rel="noopener"
>VM Override Settings&lt;/a>.&lt;/li>
&lt;li>Check &lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=vSphere-Admin6-AOS-v6_5:vsp-node-components-unconfigurable-vsphere-r.html" target="_blank" rel="noopener"
>Nonconfigurable ESXi Components&lt;/a>. Modifying the nonconfigurable components may inadvertently constrain performance of your Nutanix cluster or render the Nutanix cluster inoperable.&lt;/li>
&lt;/ul></description></item><item><title>Nutanix_NKP-v2.13_Preprovisioned</title><link>https://wangken0129.github.io/p/nutanix_nkp-v2.13_preprovisioned/</link><pubDate>Thu, 27 Feb 2025 09:42:42 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix_nkp-v2.13_preprovisioned/</guid><description>&lt;h1 id="nutanix-nkp-v213-pre-provisioned-環境">Nutanix NKP v2.13 Pre-Provisioned 環境
&lt;/h1>&lt;p>Pre-Provisioned 預配置的方式，可以讓 NKP 裝在任何環境，只要先安裝好 OS 以及基本的設定完成後&lt;/p>
&lt;p>即可部署 NKP 叢集，不論是實體機或是虛擬機都可以安裝。&lt;/p>
&lt;h2 id="安裝大致流程">安裝大致流程
&lt;/h2>&lt;p>可調整資源、自定義設定，生產環境建議使用此方法 ，self-managed 僅支援此方法&lt;/p>
&lt;p>1.確認安裝環境&lt;/p>
&lt;p>2.連線 bootstrap host (Bastion Host)&lt;/p>
&lt;p>3.確認 Container Service&lt;/p>
&lt;p>4.確認 Kubernetes CLI&lt;/p>
&lt;p>5.確認 NKP CLI&lt;/p>
&lt;p>6.設定 Local Registry (air-gapped)&lt;/p>
&lt;p>7.推送 NKP Image 到 Local Registry (air-gapped)&lt;/p>
&lt;p>8.建立 bootstrap cluster (air-gapped or pre-provisioned or KIB or NIB )&lt;/p>
&lt;p>9.建立 machine image (optional)&lt;/p>
&lt;p>10.建立 management cluster&lt;/p>
&lt;h2 id="環境資訊">環境資訊
&lt;/h2>&lt;p>此 LAB 僅用 1 個 control plane 加上 3 個 worker node 來測試，生產環境建議 3 個 control plane 加 4 個 worker node&lt;/p>
&lt;p>NKP Version : 2.13&lt;/p>
&lt;p>OS Image : Rocky 9.5&lt;/p>
&lt;h2 id="bastion-host-準備">Bastion Host 準備
&lt;/h2>&lt;h3 id="安裝主機">安裝主機
&lt;/h3>&lt;p>創建虛擬機 Rocky 9.1 ，記憶體最少 8GB，最小安裝即可&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227172457416.png"
loading="lazy"
alt="image-20250227172457416"
>&lt;/p>
&lt;h3 id="環境準備">環境準備
&lt;/h3>&lt;p>設定網路、主機名稱、SSH，為簡化安裝流程選擇停用防火牆（Pre-Provisioned的節點需停用） 、
關閉 SELinux，調整完後建議重開機確認，使用root or 一般使用者 + sudo&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">設定網路：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># nmcli c s &amp;gt;&amp;gt; 顯示網卡名稱
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># nmcli c m ens3 ipv4.method manual ipv4.addresses xxx.xx.xx.xx/24 ipv4.gateway xxx.xx.xx.xxx ipv4.dns 8.8.8.8 &amp;gt;&amp;gt; 設定ip,dns,gateway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># nmcli c u ens3 &amp;gt;&amp;gt; 啟用網卡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">主機名稱：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># hostnamectl set-hostname nkp-bastion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SSH Key：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ssh-keygen &amp;gt;&amp;gt; 產生金鑰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ssh-copy-id -i .ssh/id_rsa.pub nkp@xxx.xx.xx.xx &amp;gt;&amp;gt; 複製金鑰到其他 Host 上
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">停用防火牆：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># systemctl disable firewalld --now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">關閉SELinux：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># vi /etc/selinux/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SELINUX=disable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="container-service--工具">Container Service &amp;amp; 工具
&lt;/h3>&lt;p>下載安裝NKP CLI、Container Service ( podman 4.0 or docker 20.10 以上 )、其他工具、Kubectl、KIB&lt;/p>
&lt;p>請先確認環境所需的 NKP 以及 Kubernetes 版本，此範例用 NKP 2.13 對應 Kubernetes 1.30.5&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Podman 下載安裝：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo yum install -y podman
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ podman version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">or Docker 下載安裝：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo yum install -y docker-ce docker-ce-cli containerd.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">其他工具下載安裝：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo yum install -y yum-utils bzip2 wget tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227172655721.png"
loading="lazy"
alt="image-20250227172655721"
>&lt;/p>
&lt;h3 id="nkp-cli">NKP CLI
&lt;/h3>&lt;p>下載安裝NKP CLI、Container Service ( podman 4.0 or docker 20.10 以上 )、其他工具、Kubectl、KIB&lt;/p>
&lt;p>請先確認環境所需的 NKP 以及 Kubernetes 版本，此範例用 NKP 2.13 對應 Kubernetes 1.30.5&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">NKP&lt;/span> &lt;span class="n">CLI&lt;/span> &lt;span class="err">下載：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">nkp_v&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">2.13&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="err">“&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">urlxxx&lt;/span>&lt;span class="err">”&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NKP&lt;/span> &lt;span class="n">CLI&lt;/span> &lt;span class="err">安裝：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">ls&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173028571.png"
loading="lazy"
alt="image-20250227173028571"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173015476.png"
loading="lazy"
alt="image-20250227173015476"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173035349.png"
loading="lazy"
alt="image-20250227173035349"
>&lt;/p>
&lt;h3 id="kubectl">Kubectl
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Kubectl&lt;/span> &lt;span class="err">安裝：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">blob&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CHANGELOG&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CHANGELOG&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.30&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="c1">#downloads-for-v1305&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="s2">&amp;#34;https://dl.k8s.io/v1.30.5/kubernetes-client-linux-amd64.tar.gz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173058472.png"
loading="lazy"
alt="image-20250227173058472"
>&lt;/p>
&lt;h3 id="kib">&lt;strong>KIB&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">KIB Konvoy Image Builder 下載安裝 ( 有需要再裝 )：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ curl -o konvoy-image-bundle-v2.18.0.tar.gz ”https://url”
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tar xvf konvoy-image-bundle-v2.18.0.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo cp konvoy-image /usr/local/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ konvoy-image version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173137067.png"
loading="lazy"
alt="image-20250227173137067"
>&lt;/p>
&lt;h2 id="預配置主機準備">預配置主機準備
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">Worker&lt;/span> &lt;span class="n">Machines&lt;/span> &lt;span class="err">建議：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">control&lt;/span> &lt;span class="n">plane&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="n">cores&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="n">GiB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">worker&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="n">cores&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="n">GiB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">root&lt;/span> &lt;span class="err">目錄&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="o">%&lt;/span> &lt;span class="err">可用空間，&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubelet&lt;/span> &lt;span class="err">以及&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containerd&lt;/span> &lt;span class="mi">95&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="err">以上空間&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">預設&lt;/span>&lt;span class="n">Storage&lt;/span> &lt;span class="n">Class&lt;/span> &lt;span class="err">是用&lt;/span> &lt;span class="n">localvolume&lt;/span> &lt;span class="err">所以&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">disks&lt;/span> &lt;span class="err">底下至少要有&lt;/span>&lt;span class="n">mount&lt;/span> &lt;span class="err">一顆&lt;/span> &lt;span class="mi">55&lt;/span>&lt;span class="n">GiB&lt;/span> &lt;span class="err">硬碟&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">官方建議&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="err">顆&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">停用防火牆&lt;/span> &lt;span class="n">firewalld&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">swap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">防火牆需求開通&lt;/span> &lt;span class="n">nutanix&lt;/span> &lt;span class="n">support&lt;/span> &lt;span class="n">portal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">root&lt;/span> &lt;span class="err">或是不用密碼執行&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="err">的使用者，並先跟&lt;/span>&lt;span class="n">Bastion做金鑰交換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">至少&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="err">個&lt;/span> &lt;span class="n">Loadbalancer&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="err">或是設定外部&lt;/span> &lt;span class="n">Loadbalance&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="err">含&lt;/span> &lt;span class="n">api&lt;/span> &lt;span class="err">及&lt;/span> &lt;span class="n">Ingress&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">OS&lt;/span> &lt;span class="n">images&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Air&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gapped&lt;/span> &lt;span class="err">環境需先準備好用&lt;/span> &lt;span class="n">Konvoy&lt;/span> &lt;span class="ne">Image&lt;/span> &lt;span class="n">Builder&lt;/span> &lt;span class="err">產生出需要的安裝包並用&lt;/span> &lt;span class="n">konvoy&lt;/span> &lt;span class="n">upload&lt;/span> &lt;span class="err">上傳至節點&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">8&lt;/span> &lt;span class="n">vCPU&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="n">RAM&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">120&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="err">根目錄&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">60&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">disks&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp1&lt;/span> &lt;span class="err">一顆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">最小安裝&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">另外安裝&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="err">停用&lt;/span> &lt;span class="n">firewalld&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">swap&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">selinux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Worker&lt;/span> &lt;span class="n">Machines&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span> &lt;span class="n">vCPU&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="n">RAM&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">120&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="err">根目錄&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="mi">60&lt;/span> &lt;span class="n">GiB&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">disks&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp1&lt;/span> &lt;span class="err">一顆&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">最小安裝&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">另外安裝&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="err">停用&lt;/span> &lt;span class="n">firewalld&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">swap&lt;/span> &lt;span class="p">,&lt;/span> &lt;span class="n">selinux&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227172309690.png"
loading="lazy"
alt="image-20250227172309690"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227172316729.png"
loading="lazy"
alt="image-20250227172316729"
>&lt;/p>
&lt;h2 id="部署-nkp-pre-provisioned">部署 NKP Pre-provisioned
&lt;/h2>&lt;h3 id="定義環境變數">&lt;strong>定義環境變數&lt;/strong>
&lt;/h3>&lt;p>此範例使用 root 使用者，如要其他使用者請先設定好Docker or Podman 權限&lt;/p>
&lt;p>並且在 control 與 worker 上要設定 /etc/sudoers “&lt;username> ALL=(ALL:ALL) NOPASSWD: ALL”&lt;/p>
&lt;p>此為 single control plane 配置，生產環境建議至少 3 個 control plane，4 個 worker node&lt;/p>
&lt;p>Storage Class 建議用外部 Storage&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">在&lt;/span> &lt;span class="n">Bastion&lt;/span> &lt;span class="err">上定義環境變數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">CONTROL_PLANE_1_ADDRESS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;172.16.90.131&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">WORKER_1_ADDRESS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;172.16.90.132&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">WORKER_2_ADDRESS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;172.16.90.133&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">WORKER_3_ADDRESS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;172.16.90.134&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">SSH_USER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">SSH_PRIVATE_KEY_SECRET_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$CLUSTER_NAME-ssh-key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">CLUSTER_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;nkp-pro-preprovisioned” &amp;gt;&amp;gt; .bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">source&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">bashrc&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="inventoryyaml">&lt;strong>inventory.yaml&lt;/strong>
&lt;/h3>&lt;p>從 NKP 文件複製下來&lt;/p>
&lt;p>確認 preprovisioned_inventory.yaml 內容是否正確
vi preprovisioned_inventory.yaml&lt;/p>
&lt;p>確認control plane 、worker 數量及IP、secret 名稱等等&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173246700.png"
loading="lazy"
alt="image-20250227173246700"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173255503.png"
loading="lazy"
alt="image-20250227173255503"
>&lt;/p>
&lt;h3 id="bootstrap">bootstrap
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">建立 bootstrap cluster 並部署 preprovisioned_inventory.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># nkp create bootstrap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl get pods -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl apply -f preprovisioned_inventory.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">建立 override.yaml 設定 docker.io or Registry 及帳號密碼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl create secret generic $CLUSTER_NAME-user-overrides --from-file=overrides.yaml=overrides.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl label secret $CLUSTER_NAME-user-overrides clusterctl.cluster.x-k8s.io/move=
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173347739.png"
loading="lazy"
alt="image-20250227173347739"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173352792.png"
loading="lazy"
alt="image-20250227173352792"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173400637.png"
loading="lazy"
alt="image-20250227173400637"
>&lt;/p>
&lt;h3 id="dry-run">Dry run
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">部署NKP Preprovisioned Cluster (non-airgapped)，使用單節點或是MetalLB，依需求修改下方資訊
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kube-VIP 方式部署則需要加上--virtual-ip-interface eth1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp create cluster preprovisioned \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --cluster-name=${CLUSTER_NAME} \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --control-plane-endpoint-host=&amp;lt;control plane endpoint host&amp;gt; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --control-plane-replicas=1 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --worker-replicas=3 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --ssh-private-key-file=&amp;lt;path-to-ssh-private-key&amp;gt; \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --registry-mirror-url=https://registry-1.docker.io \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --registry-mirror-username=xxx \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --registry-mirror-password=xxx \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --dry-run \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --output=yaml &amp;gt; deploy-nkp-$CLUSTER_NAME.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">檢查 deploy-nkp-$CLUSTER_NAME.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># vi deploy-nkp-nkp-pro-preprovisioned.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173502810.png"
loading="lazy"
alt="image-20250227173502810"
>&lt;/p>
&lt;h3 id="create-cluster">Create Cluster
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">部署 nkp cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl create -f deploy-nkp-nkp-pro-preprovisioned.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">觀察狀態
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl wait --for=condition=ControlPlaneReady &amp;#34;clusters/${CLUSTER_NAME}&amp;#34; --timeout=30m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173547345.png"
loading="lazy"
alt="image-20250227173547345"
>&lt;/p>
&lt;p>確認 Cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># kubectl get cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl describe cluster
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173613836.png"
loading="lazy"
alt="image-20250227173613836"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173618232.png"
loading="lazy"
alt="image-20250227173618232"
>&lt;/p>
&lt;h4 id="取得kubeconfig">取得kubeconfig
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">取得kubeconfig檔案
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># nkp get kubeconfig -c ${CLUSTER_NAME} &amp;gt; ${CLUSTER_NAME}.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl get nodes --kubeconfig=${CLUSTER_NAME}.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># kubectl get pods -A --kubeconfig=${CLUSTER_NAME}.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173719200.png"
loading="lazy"
alt="image-20250227173719200"
>&lt;/p>
&lt;h4 id="pivot">&lt;strong>Pivot&lt;/strong>
&lt;/h4>&lt;p>原bootstrap 部署出來只是 workload cluster，此動作是要將此叢集變成 Self-Manged or Management&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">將&lt;/span> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">API&lt;/span> &lt;span class="err">元件部署到&lt;/span> &lt;span class="n">workload&lt;/span> &lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nkp create capi-components --kubeconfig=${CLUSTER_NAME}.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">再將&lt;/span> &lt;span class="n">life&lt;/span> &lt;span class="n">cycle&lt;/span> &lt;span class="n">services&lt;/span> &lt;span class="err">從&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="err">移轉到&lt;/span> &lt;span class="n">workload&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="err">，並確認&lt;/span>&lt;span class="n">NKP&lt;/span> &lt;span class="n">describe&lt;/span> &lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nkp move capi-resources --to-kubeconfig ${CLUSTER_NAME}.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nkp describe cluster --kubeconfig ${CLUSTER_NAME}.conf -c ${CLUSTER_NAME}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173802640.png"
loading="lazy"
alt="image-20250227173802640"
>&lt;/p>
&lt;h4 id="metallb">&lt;strong>MetalLB&lt;/strong>
&lt;/h4>&lt;p>&lt;strong>如果沒有外部&lt;/strong> &lt;strong>LoadBalancer&lt;/strong> &lt;strong>的話，可以使用&lt;/strong> &lt;strong>MetalLB&lt;/strong> &lt;strong>，需設定&lt;/strong> &lt;strong>Loadbalancer IP Pool&lt;/strong>&lt;/p>
&lt;p>&lt;strong>IP&lt;/strong> &lt;strong>網段需與&lt;/strong> &lt;strong>Machine&lt;/strong> &lt;strong>同網段，可以只設定一個&lt;/strong> &lt;strong>Ex. 192.168.1.240-192.168.1.240&lt;/strong>&lt;/p>
&lt;p>&lt;strong>原廠文件提供範例，調整&lt;/strong> &lt;strong>addresses&lt;/strong> &lt;strong>後&lt;/strong> &lt;strong>apply&lt;/strong> &lt;strong>該設定檔&lt;/strong>&lt;/p>
&lt;p># kubectl apply -f metallb-conf.yaml &amp;ndash;kubeconfig ${CLUSTER_NAME}.conf&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173825119.png"
loading="lazy"
alt="image-20250227173825119"
>&lt;/p>
&lt;h4 id="install-kommander">Install Kommander
&lt;/h4>&lt;p>&lt;strong>移除&lt;/strong> &lt;strong>bootstrap cluster&lt;/strong>&lt;/p>
&lt;p># nkp delete bootstrap &amp;ndash;kubeconfig $HOME/.kube/config&lt;/p>
&lt;p>&lt;strong>取得&lt;/strong> &lt;strong>kommander.yaml&lt;/strong>&lt;/p>
&lt;p># nkp install kommander &amp;ndash;init &amp;gt; kommander.yaml&lt;/p>
&lt;p>&lt;strong>預設&lt;/strong> &lt;strong>storage class&lt;/strong> &lt;strong>是&lt;/strong> &lt;strong>localvolumeprovisioner&lt;/strong>，&lt;strong>volume mode&lt;/strong> &lt;strong>無法為&lt;/strong> &lt;strong>Block&lt;/strong> **，
** &lt;strong>故需修改&lt;/strong> &lt;strong>yaml&lt;/strong> &lt;strong>調整&lt;/strong> &lt;strong>rook-ceph-cluster&lt;/strong> **設定，**&lt;strong>原則上建議使用外部&lt;/strong> &lt;strong>Storage Class&lt;/strong> &lt;strong>( NFS or Nutanix CSI )&lt;/strong>&lt;/p>
&lt;p>&lt;strong>下方服務不需要的可以設成&lt;/strong> &lt;strong>false&lt;/strong> &lt;strong>最小安裝參照&lt;/strong> &lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Platform-v2_13:top-addl-kommander-config-c.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Platform-v2_13:top-addl-kommander-config-c&lt;/a>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Platform-v2_13:top-addl-kommander-config-c.html" target="_blank" rel="noopener"
>.html&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173900072.png"
loading="lazy"
alt="image-20250227173900072"
>&lt;/p>
&lt;p>&lt;strong>設定&lt;/strong> **NKP Catalog Applications，並部署 **Kommander&lt;/p>
&lt;p># nkp install kommander &amp;ndash;installer-config kommander.yaml &amp;ndash;kubeconfig=${CLUSTER_NAME}.conf &amp;ndash;wait-timeout=1h&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173923224.png"
loading="lazy"
alt="image-20250227173923224"
>&lt;/p>
&lt;p>&lt;strong>觀察安裝過程&lt;/strong>&lt;/p>
&lt;p># watch kubectl get pod &amp;ndash;n kommander&lt;/p>
&lt;p># kubectl -n kommander wait &amp;ndash;for condition=Ready helmreleases &amp;ndash;all &amp;ndash;timeout 15m&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173938405.png"
loading="lazy"
alt="image-20250227173938405"
>&lt;/p>
&lt;p>取得 UI 連結、帳號密碼&lt;/p>
&lt;p># nkp open dashboard &amp;ndash;kubeconfig=${CLUSTER_NAME}.conf&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250227173956097.png"
loading="lazy"
alt="image-20250227173956097"
>&lt;/p></description></item><item><title>Nutanix_NKP-v2.12_AHV</title><link>https://wangken0129.github.io/p/nutanix_nkp-v2.12_ahv/</link><pubDate>Mon, 24 Feb 2025 07:52:30 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix_nkp-v2.12_ahv/</guid><description>&lt;h1 id="nutanix-nkp-v212-for-ahv">Nutanix NKP v2.12 For AHV
&lt;/h1>&lt;p>Nutanix 在2024年收購了D2iQ這間公司，並且將DKP重新調整為NKP&lt;/p>
&lt;p>讓Nutanix的客戶可以在原來的NCI基礎上使用多叢集管理的Kubernetes平台也取代了原本的NKE&lt;/p>
&lt;p>平台功能有包含叢集的監控與Log、負載平衡、SSO、生命週期管理、Service Mesh等等&lt;/p>
&lt;p>主要的競爭者應該為Rancher、Anthos 等等，並沒有像是OCP有開發者介面，所以還是著重在管理上。&lt;/p>
&lt;p>安裝選擇 NKP on Nutanix AHV (non-airgap)&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.nutanix.com/tech-center/blog/nkp-kubernetes-done-the-nutanix-way" target="_blank" rel="noopener"
>https://www.nutanix.com/tech-center/blog/nkp-kubernetes-done-the-nutanix-way&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nutanix.com/blog/nutanix-announces-nutanix-kubernetes-platform" target="_blank" rel="noopener"
>https://www.nutanix.com/blog/nutanix-announces-nutanix-kubernetes-platform&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nutanix.com/products/kubernetes-management-platform" target="_blank" rel="noopener"
>https://www.nutanix.com/products/kubernetes-management-platform&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Platform-v2_12:Nutanix-Kubernetes-Platform-v2_12" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Platform-v2_12:Nutanix-Kubernetes-Platform-v2_12&lt;/a>&lt;/p>
&lt;p>（非官方）&lt;/p>
&lt;p>&lt;a class="link" href="https://jonashogman.com/nkp-post-1-preparing-the-setup-environment/" target="_blank" rel="noopener"
>https://jonashogman.com/nkp-post-1-preparing-the-setup-environment/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.ntnx.jp/entry/2024/09/16/235808" target="_blank" rel="noopener"
>https://blog.ntnx.jp/entry/2024/09/16/235808&lt;/a>&lt;/p>
&lt;h2 id="architecture">Architecture
&lt;/h2>&lt;p>NKP 以目前的文件來看，可以安裝在Nutanix、vSphere、Bare metal (pre-provisioned)、EKS、AKS、Azure、GCP等等&lt;/p>
&lt;p>各安裝的方法以及需求皆有所不同 (airgap or non-airgap 這些都要考慮到)。&lt;/p>
&lt;p>架構主要分為三種型態，以及另一種 Self-Managed Cluster&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Management Cluster：&lt;/p>
&lt;p>安裝 NKP 的上游叢集 (Upstream Cluster)，負責管理多個叢集，不負責使用者工作負載，&lt;/p>
&lt;p>可以管理部署出來的Managed Cluster，也可以管理連接上來的 Attached Cluster。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Managed Cluster：&lt;/p>
&lt;p>由 NKP Management Cluster 部署出來的叢集，又稱 NKP Cluster ，主要負責使用者工作負載，&lt;/p>
&lt;p>並透過Management Cluster來管理生命週期跟應用程式。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Attached Cluster：&lt;/p>
&lt;p>這是非NKP Management Cluster 部署出來的外部叢集，像是 EKS、AKS 或是其他認證的 Kubernetes 叢集(目前無認證清單)，&lt;/p>
&lt;p>以D2iQ的&lt;a class="link" href="https://docs.d2iq.com/dkp/2.7/attach-an-existing-kubernetes-cluster" target="_blank" rel="noopener"
>文件&lt;/a>來說是All Kubernetes Conformant clusters (符合、一致的？)&lt;/p>
&lt;p>透過Management Cluster來管理應用程式，生命週期由原來的地方管理。&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930155523134.png" alt="image-20240930155523134" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>Self-Managed Cluster：&lt;/p>
&lt;p>一樣是裝 NKP，但非上游叢集，可以跑使用者工作負載，不能 Attach 其他叢集做管理。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>整體架構圖：&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/nkp-architecture.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>多叢集環境架構圖：&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/multi-cluster-env.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;p>NKP Self-Managed Cluster：&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/single-cluster-env.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;h2 id="prerequisites">Prerequisites
&lt;/h2>&lt;h3 id="prism-central-role">Prism Central Role
&lt;/h3>&lt;p>(LAB環境建議是用admin)&lt;/p>
&lt;p>預設已有Kubernetes Infrastructure Provisions role&lt;/p>
&lt;p>需要新增Attach&amp;amp;Detach Volume Group To AHV VM、Update VM Disk、view container的權限、Create Volume Group Disk、&lt;/p>
&lt;p>View VM Stats、Category(預設的有此權限，但實際安裝發現是 CSI 使用API v4的去呼叫)、View Prism Central 等等&lt;/p>
&lt;p>並且新增一個 local user 設定為此角色即可&lt;/p>
&lt;p>這裡為 k8sadmin 這個user account&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240919113110948.png"
loading="lazy"
alt="image-20240919113110948"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930180523023.png"
loading="lazy"
alt="image-20240930180523023"
>&lt;/p>
&lt;p>新增Category權限(apiv4)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001092859405.png"
loading="lazy"
alt="image-20241001092859405"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241030133619055.png"
loading="lazy"
alt="image-20241030133619055"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241030140157113.png"
loading="lazy"
alt="image-20241030140157113"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241030140047715.png"
loading="lazy"
alt="image-20241030140047715"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241030134006664.png"
loading="lazy"
alt="image-20241030134006664"
>&lt;/p>
&lt;h3 id="resource-requirements">Resource Requirements
&lt;/h3>&lt;p>以下為各環境所需的資源，基本上還需另外一台Bastion作為安裝使用。&lt;/p>
&lt;ol>
&lt;li>NKP PRO / Ultimate Management Cluster： 3 control plane 、 4 worker node&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930163551021.png"
loading="lazy"
alt="image-20240930163551021"
>&lt;/p>
&lt;ol start="2">
&lt;li>NKP PRO / Ultimate Managed Cluster： 3 control plane 、 4 worker node&lt;/li>
&lt;/ol>
&lt;p>3 worker node 適用於不啟用 velero or logging stack 的叢集。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930164501193.png"
loading="lazy"
alt="image-20240930164501193"
>&lt;/p>
&lt;ol start="3">
&lt;li>NKP Starter Cluster（僅適用於Nutanix 的環境）： 3 control plane、最低 2 worker node&lt;/li>
&lt;/ol>
&lt;p>control plane 文件沒特別寫數量，但還是要三個，另外有支援single control plane的叢集，僅適用於測試環境。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930164224865.png"
loading="lazy"
alt="image-20240930164224865"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930164238522.png"
loading="lazy"
alt="image-20240930164238522"
>&lt;/p>
&lt;h3 id="sofware-requirements">Sofware Requirements
&lt;/h3>&lt;p>For AHV 環境，NKP 相關的軟體可以在Nutanix Support Portal 上下載&lt;/p>
&lt;ol>
&lt;li>
&lt;p>NKP Node Image&lt;/p>
&lt;p>Nutanix 有包好 Rocky Linux for NKP 的 image，另外也可以選用Ubuntu 要另外用Konvoy Image Builder去做&lt;/p>
&lt;p>差別在於GPU Passthrough 是否支援，此 Lab 就用Rocky Linux實作&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240919113329110.png"
loading="lazy"
alt="image-20240919113329110"
>&lt;/p>
&lt;ol>
&lt;li>在Support Portal 複製Download Link&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240919113253425.png"
loading="lazy"
alt="image-20240919113253425"
>&lt;/p>
&lt;ol start="2">
&lt;li>上傳到Prism Central 即可&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240919113231539.png"
loading="lazy"
alt="image-20240919113231539"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240919113639830.png"
loading="lazy"
alt="image-20240919113639830"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>An x86_64 Linux or MacOS machine&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NKP Binary File&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930170142468.png"
loading="lazy"
alt="image-20240930170142468"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>container runtime&lt;/p>
&lt;/li>
&lt;li>
&lt;p>kubectl&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Konvoy Image Builder in KIB&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NKP air-gapped bundle -&amp;gt; &lt;strong>Air-gapped Only (additional prerequisites)&lt;/strong>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Local image registry -&amp;gt; &lt;strong>Air-gapped Only (additional prerequisites)&lt;/strong>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="nutanix-prerequisites">Nutanix prerequisites
&lt;/h3>&lt;p>Prism Central : 2024.1 later&lt;/p>
&lt;p>AOS: 6.5 , 6.8 later&lt;/p>
&lt;p>IP Address for nodes : 7&lt;/p>
&lt;p>IP Address for API : 1&lt;/p>
&lt;p>IP Address for Traefik (metallb) : 1&lt;/p>
&lt;h3 id="bastion">Bastion
&lt;/h3>&lt;h4 id="software">Software
&lt;/h4>&lt;p>已預先安裝好RHEL v9.3 、Podman v4.2.0、kubectl v5.0.4 for v.1.28.0 ，並下載 nkp binary、konvoy-image-bundle&lt;/p>
&lt;p>另外要準備docker image的帳號密碼，不然下載檔案太多會被擋下來&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930171618399.png"
loading="lazy"
alt="image-20240930171618399"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930172056841.png"
loading="lazy"
alt="image-20240930172056841"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930172045210.png"
loading="lazy"
alt="image-20240930172045210"
>&lt;/p>
&lt;h4 id="ssh-key">SSH-Key
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ ssh-keygen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating public/private rsa key pair.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter file in which to save the key (/home/nkp/.ssh/id_rsa):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created directory &amp;#39;/home/nkp/.ssh&amp;#39;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter passphrase (empty for no passphrase):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter same passphrase again:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your identification has been saved in /home/nkp/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your public key has been saved in /home/nkp/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key fingerprint is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHA256:r5lyQDXM972bfYgElhrfz1bkTR2x9GwGIeIP918fbiI nkp@ken-rhel9.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key&amp;#39;s randomart image is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---[RSA 3072]----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o . . o+.|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| =... ..+o|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . ooo.. .B|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . . ++...o+|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . S= o. .*o|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . ... o o.B|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . .E = Oo|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . .+ o X o|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o+ . .|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----[SHA256]-----+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="untar-files">untar files
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xvf&lt;/span> &lt;span class="n">nkp_v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">12.0&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTICES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xvf&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bundle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.2&lt;/span>&lt;span class="n">_linux_amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LICENSE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ansible&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="k">tool&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">versions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ansible&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">yamllint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">mv&lt;/span> &lt;span class="n">nkp&lt;/span> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="installation">Installation
&lt;/h2>&lt;h3 id="nkp-create-cluster-nutanix">nkp create cluster nutanix
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>nkp create cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ nkp create cluster nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image registry: https://registry-1.docker.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Subnet 需要IPAM
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930173457822.png"
loading="lazy"
alt="image-20240930173457822"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930174329479.png"
loading="lazy"
alt="image-20240930174329479"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930175545467.png"
loading="lazy"
alt="image-20240930175545467"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930175602735.png"
loading="lazy"
alt="image-20240930175602735"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930175735795.png"
loading="lazy"
alt="image-20240930175735795"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930175810479.png"
loading="lazy"
alt="image-20240930175810479"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930175903070.png"
loading="lazy"
alt="image-20240930175903070"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930180010307.png"
loading="lazy"
alt="image-20240930180010307"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>切換成root、PC 新增container 權限&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930180346824.png"
loading="lazy"
alt="image-20240930180346824"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930180626964.png"
loading="lazy"
alt="image-20240930180626964"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930180755815.png"
loading="lazy"
alt="image-20240930180755815"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930181036285.png"
loading="lazy"
alt="image-20240930181036285"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930181112546.png"
loading="lazy"
alt="image-20240930181112546"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930181232862.png"
loading="lazy"
alt="image-20240930181232862"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930181324796.png"
loading="lazy"
alt="image-20240930181324796"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930181941554.png"
loading="lazy"
alt="image-20240930181941554"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/09/image-20240930182250767.png"
loading="lazy"
alt="image-20240930182250767"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001091037144.png"
loading="lazy"
alt="image-20241001091037144"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Check logs&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl --kubeconfig=&amp;#34;./nkp-mgmt.conf&amp;#34; get pods -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caaph-system caaph-controller-manager-7557bfbd76-25psr 1/1 Running 1 (149m ago) 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capa-system capa-controller-manager-549fff5698-4js7x 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capg-system capg-controller-manager-54df78c867-ngvkg 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-kubeadm-bootstrap-system capi-kubeadm-bootstrap-controller-manager-589f87d995-ph2ll 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-kubeadm-control-plane-system capi-kubeadm-control-plane-controller-manager-869b46bd8d-ccbl4 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capi-system capi-controller-manager-7bd8c69994-6562l 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cappp-system cappp-controller-manager-6cc595974c-nphps 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capv-system capv-controller-manager-7c6679579f-qdvmx 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capvcd-system capvcd-controller-manager-647bbc5685-8x8p8 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capx-system capx-controller-manager-6b4c9976f6-zjw5r 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capz-system azureserviceoperator-controller-manager-697d757c4b-ffrcs 2/2 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capz-system capz-controller-manager-75c684766c-7z29w 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caren-system cluster-api-runtime-extensions-nutanix-869f6bc85d-wr864 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caren-system helm-repository-86c695db8f-w6xwc 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager cert-manager-c49657b87-hkgdf 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager cert-manager-cainjector-7b9b545679-l6pjf 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager cert-manager-webhook-647c6946df-cdtl9 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default cluster-autoscaler-01924266-3064-7c78-9b30-7e4445c87fa1-85txw8 l 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git-operator-system git-operator-admin-credentials-rotate-28795680-7fpm9 0/1 Completed 0 81m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git-operator-system git-operator-controller-manager-585cc87d78-h47zp 2/2 Running 1 (80m ago) 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git-operator-system git-operator-git-0 0/3 Pending 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander-flux helm-controller-dc4455cd5-rlpdg 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander-flux kustomize-controller-755bbdfc55-dmf4z 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander-flux notification-controller-86c44d47f9-bbm9b 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander-flux source-controller-68bc9cbf4d-zgfd7 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander kommander-bootstrap-mmq8g 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kommander runtime-extension-kommander-59d9c676b7-fjqrv 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-4vt4l 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-7gjsw 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-gkbcm 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-operator-58c5d5d6d-dtknv 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-operator-58c5d5d6d-f7x2w 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-q7bnb 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-qr94t 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-r8k72 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cilium-wlvds 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system coredns-76f75df574-wrg54 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system coredns-76f75df574-zqcr8 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-nkp-mgmt-xxl2n-7fdv6 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-nkp-mgmt-xxl2n-cc69v 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-nkp-mgmt-xxl2n-z5c49 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-nkp-mgmt-xxl2n-7fdv6 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-nkp-mgmt-xxl2n-cc69v 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-nkp-mgmt-xxl2n-z5c49 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-nkp-mgmt-xxl2n-7fdv6 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-nkp-mgmt-xxl2n-cc69v 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-nkp-mgmt-xxl2n-z5c49 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-45pft 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-5dv8f 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-bh7hq 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-fm4gj 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-hkx6m 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-hmzqk 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-zvj58 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-nkp-mgmt-xxl2n-7fdv6 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-nkp-mgmt-xxl2n-cc69v 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-nkp-mgmt-xxl2n-z5c49 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-vip-nkp-mgmt-xxl2n-7fdv6 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-vip-nkp-mgmt-xxl2n-cc69v 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-vip-nkp-mgmt-xxl2n-z5c49 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nutanix-cloud-controller-manager-598b4c7669-dd2nl 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system snapshot-controller-5c7f9fc58-dlbm2 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-controller-94f95d674-24tnf 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-587jl 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-h4g7r 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-kxbp4 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-qxhsr 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-v8r8j 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-wdkbx 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb-system metallb-speaker-xqvbj 4/4 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-gc-7f54d58d99-slpr2 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-master-ccf75997b-86x9c 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-6t9lf 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-78c8h 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-f25gw 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-l6q5k 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-nk99v 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-rjj8w 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-feature-discovery node-feature-discovery-worker-rq5dm 1/1 Running 0 15h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system nutanix-csi-precheck-job-nmkj7 0/1 Error 0 149m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl --kubeconfig=&amp;#34;./nkp-mgmt.conf&amp;#34; logs -f ^C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl --kubeconfig=&amp;#34;./nkp-mgmt.conf&amp;#34; logs nutanix-csi-precheck-job-nmkj7 -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">W0930 22:51:08.489458 1 client_config.go:614] Neither --kubeconfig nor --master was specified. Using the inClust erConfig. This might not work.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.493Z client.go:227: [INFO] nutanix_files: rest request method:GET path: /cluster/version, data: &amp;lt;ni l&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.726Z prism_central.go:31: [INFO] PC Version Info pc.2024.1.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.726Z main.go:252: [INFO] PC version:pc.2024.1.0.1 is supported
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.74Z main.go:145: [WARN] Error getting the data from ConfigMap ntnx-cluster-configmap/ntnx-system : configmaps &amp;#34;ntnx-cluster-configmap&amp;#34; not found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.74Z main.go:164: [WARN] Failed to get categories from ntnx-system/ntnx-cluster-configmap, err: conf igmaps &amp;#34;ntnx-cluster-configmap&amp;#34; not found, will use kube-system uuid as category
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.745Z main.go:174: [INFO] Cluster UUID: k8s-d92bdb3c-dc75-4132-a59d-61d5f3531913
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.746Z categories.go:48: [INFO] creating a new category api client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.746Z main.go:200: [INFO] Category to be associated to CSI Provisioned Vol KubernetesClusterUUID/k8s -d92bdb3c-dc75-4132-a59d-61d5f3531913
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:08.746Z categories_idempotent.go:35: [INFO] Retrieving categories for key &amp;#34;KubernetesClusterUUID&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30 22:51:23.968 INFO - GET https://172.16.90.75:9440/api/prism/v4.0.b1/config/categories?%24filter=key+in+%28%2 7KubernetesClusterUUID%27%29
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30 22:51:23.979 INFO - HTTP/1.1 403 FORBIDDEN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:23.98Z categories.go:115: [ERROR] Failed to get all categories with status: 403 FORBIDDEN, error: {&amp;#34;da ta&amp;#34;:{&amp;#34;error&amp;#34;:[{&amp;#34;message&amp;#34;:&amp;#34;Access Denied because no or incorrect permissions were set in the request http://172.16.90.75 /api/prism/v4.0.b1/config/categories&amp;#34;,&amp;#34;code&amp;#34;:&amp;#34;RBA-10001&amp;#34;,&amp;#34;locale&amp;#34;:&amp;#34;en_US&amp;#34;,&amp;#34;errorGroup&amp;#34;:&amp;#34;RBAC_AUTHORIZATION_ERROR&amp;#34;,&amp;#34;seve rity&amp;#34;:&amp;#34;ERROR&amp;#34;,&amp;#34;$objectType&amp;#34;:&amp;#34;prism.v4.error.AppMessage&amp;#34;}],&amp;#34;$errorItemDiscriminator&amp;#34;:&amp;#34;List&amp;lt;prism.v4.error.AppMessage&amp;gt;&amp;#34;,&amp;#34; $objectType&amp;#34;:&amp;#34;prism.v4.error.ErrorResponse&amp;#34;},&amp;#34;$dataItemDiscriminator&amp;#34;:&amp;#34;prism.v4.error.ErrorResponse&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:23.98Z categories_idempotent.go:94: [ERROR] failed to get category for fqName &amp;#34;KubernetesClusterUUID/k 8s-d92bdb3c-dc75-4132-a59d-61d5f3531913&amp;#34;, err: %!w(*fmt.wrapError=&amp;amp;{Failed to get all categories with status: 403 FORBI DDEN, error: {&amp;#34;data&amp;#34;:{&amp;#34;error&amp;#34;:[{&amp;#34;message&amp;#34;:&amp;#34;Access Denied because no or incorrect permissions were set in the request ht tp://172.16.90.75/api/prism/v4.0.b1/config/categories&amp;#34;,&amp;#34;code&amp;#34;:&amp;#34;RBA-10001&amp;#34;,&amp;#34;locale&amp;#34;:&amp;#34;en_US&amp;#34;,&amp;#34;errorGroup&amp;#34;:&amp;#34;RBAC_AUTHORIZA TION_ERROR&amp;#34;,&amp;#34;severity&amp;#34;:&amp;#34;ERROR&amp;#34;,&amp;#34;$objectType&amp;#34;:&amp;#34;prism.v4.error.AppMessage&amp;#34;}],&amp;#34;$errorItemDiscriminator&amp;#34;:&amp;#34;List&amp;lt;prism.v4.err or.AppMessage&amp;gt;&amp;#34;,&amp;#34;$objectType&amp;#34;:&amp;#34;prism.v4.error.ErrorResponse&amp;#34;},&amp;#34;$dataItemDiscriminator&amp;#34;:&amp;#34;prism.v4.error.ErrorResponse&amp;#34;} {[123 34 100 97 116 97 34 58 123 34 101 114 114 111 114 34 58 91 123 34 109 101 115 115 97 103 101 34 58 34 65 99 99 10 1 115 115 32 68 101 110 105 101 100 32 98 101 99 97 117 115 101 32 110 111 32 111 114 32 105 110 99 111 114 114 101 99 116 32 112 101 114 109 105 115 115 105 111 110 115 32 119 101 114 101 32 115 101 116 32 105 110 32 116 104 101 32 114 1 01 113 117 101 115 116 32 104 116 116 112 58 47 47 49 55 50 46 49 54 46 57 48 46 55 53 47 97 112 105 47 112 114 105 115 109 47 118 52 46 48 46 98 49 47 99 111 110 102 105 103 47 99 97 116 101 103 111 114 105 101 115 34 44 34 99 111 100 10 1 34 58 34 82 66 65 45 49 48 48 48 49 34 44 34 108 111 99 97 108 101 34 58 34 101 110 95 85 83 34 44 34 101 114 114 111 114 71 114 111 117 112 34 58 34 82 66 65 67 95 65 85 84 72 79 82 73 90 65 84 73 79 78 95 69 82 82 79 82 34 44 34 115 1 01 118 101 114 105 116 121 34 58 34 69 82 82 79 82 34 44 34 36 111 98 106 101 99 116 84 121 112 101 34 58 34 112 114 10 5 115 109 46 118 52 46 101 114 114 111 114 46 65 112 112 77 101 115 115 97 103 101 34 125 93 44 34 36 101 114 114 111 1 14 73 116 101 109 68 105 115 99 114 105 109 105 110 97 116 111 114 34 58 34 76 105 115 116 60 112 114 105 115 109 46 11 8 52 46 101 114 114 111 114 46 65 112 112 77 101 115 115 97 103 101 62 34 44 34 36 111 98 106 101 99 116 84 121 112 101 34 58 34 112 114 105 115 109 46 118 52 46 101 114 114 111 114 46 69 114 114 111 114 82 101 115 112 111 110 115 101 34 125 44 34 36 100 97 116 97 73 116 101 109 68 105 115 99 114 105 109 105 110 97 116 111 114 34 58 34 112 114 105 115 109 46 118 52 46 101 114 114 111 114 46 69 114 114 111 114 82 101 115 112 111 110 115 101 34 125] &amp;lt;nil&amp;gt; 403 FORBIDDEN}})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:23.98Z categories_idempotent.go:74: [ERROR] Failed to create category key for fqName &amp;#34;KubernetesCluste rUUID/k8s-d92bdb3c-dc75-4132-a59d-61d5f3531913&amp;#34; ,err: %!w(string=Max retries done: Failed to get all categories with st atus: 403 FORBIDDEN, error: {&amp;#34;data&amp;#34;:{&amp;#34;error&amp;#34;:[{&amp;#34;message&amp;#34;:&amp;#34;Access Denied because no or incorrect permissions were set in the request http://172.16.90.75/api/prism/v4.0.b1/config/categories&amp;#34;,&amp;#34;code&amp;#34;:&amp;#34;RBA-10001&amp;#34;,&amp;#34;locale&amp;#34;:&amp;#34;en_US&amp;#34;,&amp;#34;errorGroup&amp;#34;: &amp;#34;RBAC_AUTHORIZATION_ERROR&amp;#34;,&amp;#34;severity&amp;#34;:&amp;#34;ERROR&amp;#34;,&amp;#34;$objectType&amp;#34;:&amp;#34;prism.v4.error.AppMessage&amp;#34;}],&amp;#34;$errorItemDiscriminator&amp;#34;:&amp;#34;Li st&amp;lt;prism.v4.error.AppMessage&amp;gt;&amp;#34;,&amp;#34;$objectType&amp;#34;:&amp;#34;prism.v4.error.ErrorResponse&amp;#34;},&amp;#34;$dataItemDiscriminator&amp;#34;:&amp;#34;prism.v4.error.E rrorResponse&amp;#34;})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-09-30T22:51:23.98Z main.go:209: [ERROR] Error creating categories, err: %!w(*errors.Error=&amp;amp;{1 0xc0003a2e80 [0xc000 39e2c0]})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>調整權限後再跑一次&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001095835526.png"
loading="lazy"
alt="image-20241001095835526"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001100827007.png"
loading="lazy"
alt="image-20241001100827007"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001102523546.png"
loading="lazy"
alt="image-20241001102523546"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增View Prism Central、update VM basic config、Volume Group權限&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001102850872.png"
loading="lazy"
alt="image-20241001102850872"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001103337889.png"
loading="lazy"
alt="image-20241001103337889"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001104049556.png"
loading="lazy"
alt="image-20241001104049556"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001120931858.png"
loading="lazy"
alt="image-20241001120931858"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>連線NKP Dashboard&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp get dashboard --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Username&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">crazy_boyd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Password&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HYokkgBhIU5WnjBfWoCfxwtBQ4WwP8APuw13fnDKA4MZ9eGz1Gbq3ddyiUkT4OiW&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">URL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.209&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dashboard&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">編輯&lt;/span>&lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="n">edit&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001123425175.png"
loading="lazy"
alt="image-20241001123425175"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入測試&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001123446785.png"
loading="lazy"
alt="image-20241001123446785"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="nkp-starter">NKP Starter
&lt;/h3>&lt;h4 id="畫面擷取">畫面擷取
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Dashboard&lt;/p>
&lt;p>可以新增Cluster&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001123601692.png"
loading="lazy"
alt="image-20241001123601692"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Infrastructure Providers&lt;/p>
&lt;p>這裡不能修改或新增&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001123626080.png"
loading="lazy"
alt="image-20241001123626080"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Identity Providers&lt;/p>
&lt;p>可以整合Github、LDAP、OIDC、SAML等&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001123843483.png"
loading="lazy"
alt="image-20241001123843483"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001123857034.png"
loading="lazy"
alt="image-20241001123857034"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Access Control 預設有 Admin 跟 View Role
Role Bindings是使用跟LDAP或是OIDC等等Group結合&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001124023266.png"
loading="lazy"
alt="image-20241001124023266"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001124114714.png"
loading="lazy"
alt="image-20241001124114714"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Licensing，安裝在 Nutanix 上都有 NKP Starter ，但功能陽春&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001124201488.png"
loading="lazy"
alt="image-20241001124201488"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Resource Alerts 可以設定CPU、Memory、Disk的使用量閥值
但在Starter看起來只會顯示在 UI 上面，UI 沒有其他可以設定寄送告警的地方
這功能可以在 PC 上面設定閥值&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001124321203.png"
loading="lazy"
alt="image-20241001124321203"
>&lt;/p>
&lt;p>PC Project畫面&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001124548715.png"
loading="lazy"
alt="image-20241001124548715"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001124614934.png"
loading="lazy"
alt="image-20241001124614934"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點進去Management Cluster&lt;/p>
&lt;p>沒有kubernetes Dashboard 只能看Namespaces有哪些，無法編輯&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001125501283.png"
loading="lazy"
alt="image-20241001125501283"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001125518563.png"
loading="lazy"
alt="image-20241001125518563"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001125605416.png"
loading="lazy"
alt="image-20241001125605416"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="create-workload-cluster">Create Workload Cluster
&lt;/h4>&lt;p>用Control plane + worker node 各一台部署一個測試環境叢集&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Create Cluster，可以選擇 UI或是 yaml&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001125738098.png"
loading="lazy"
alt="image-20241001125738098"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入Cluster name : nkp-workload
添加Labels 、其他無法選擇&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001125827762.png"
loading="lazy"
alt="image-20241001125827762"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>數入 SSH Key、 PC Project、PE Subnets 資訊
這裏PC Project 我有建立但沒抓到，不確定多久會抓一次資訊&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001130524925.png"
loading="lazy"
alt="image-20241001130524925"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>OS Image 、 Control Plan IP 及數量&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001130625362.png"
loading="lazy"
alt="image-20241001130625362"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Worker Node 資訊、Storage&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001130739672.png"
loading="lazy"
alt="image-20241001130739672"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001130807311.png"
loading="lazy"
alt="image-20241001130807311"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>容器網路&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001130857996.png"
loading="lazy"
alt="image-20241001130857996"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Image Registry 先留空白&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001131101538.png"
loading="lazy"
alt="image-20241001131101538"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開始部署&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001131157253.png"
loading="lazy"
alt="image-20241001131157253"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001131220624.png"
loading="lazy"
alt="image-20241001131220624"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001133509746.png"
loading="lazy"
alt="image-20241001133509746"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001133534110.png"
loading="lazy"
alt="image-20241001133534110"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>整體畫面，UI 沒有升級的地方&lt;/p>
&lt;p>要從指令去操作，nkp 指令有提供 update, upgrade&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001133638170.png"
loading="lazy"
alt="image-20241001133638170"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001133953124.png"
loading="lazy"
alt="image-20241001133953124"
>&lt;/p>
&lt;p>Management 整個叢集的pod數量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># kubectl --kubeconfig=nkp-mgmt.conf get nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">127&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l965p&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fczv8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mspnw&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l965p&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fczv8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n6tlc&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l965p&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fczv8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t5xmd&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l965p&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fczv8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">w7sxk&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># kubectl --kubeconfig=nkp-mgmt.conf get pods -A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caaph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">caaph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7557&lt;/span>&lt;span class="n">bfbd76&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cdx7d&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">549&lt;/span>&lt;span class="n">fff5698&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">zdlh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">54&lt;/span>&lt;span class="n">df78c867&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">zqlw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">589&lt;/span>&lt;span class="n">f87d995&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gqjh6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">869&lt;/span>&lt;span class="n">b46bd8d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tqmr5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bd8c69994&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">c5h9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cappp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cappp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cc595974c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dlj27&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">c6679579f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sj4vc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capvcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capvcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">647&lt;/span>&lt;span class="n">bbc5685&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">74&lt;/span>&lt;span class="n">qnv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">b4c9976f6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f29bg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capz&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">azureserviceoperator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">697&lt;/span>&lt;span class="n">d757c4b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bpwmm&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capz&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capz&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="n">c684766c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mp5bb&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caren&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">runtime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">extensions&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">869&lt;/span>&lt;span class="n">f6bc85d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clcgv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caren&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">repository&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">86&lt;/span>&lt;span class="n">c695db8f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t7cgs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c49657b87&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kvv2q&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b9b545679&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">w867w&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">647&lt;/span>&lt;span class="n">c6946df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qwvnk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01924623&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">02&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">cb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a348&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">158120974&lt;/span>&lt;span class="n">c65&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">ff7rp7&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">585&lt;/span>&lt;span class="n">cc87d78&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bgl8w&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">115&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">115&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federj7xjn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fe25f2t&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fxpv6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dc4455cd5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">frdrw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">116&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">kustomize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">755&lt;/span>&lt;span class="n">bbdfc55&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kd8rh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">116&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">notification&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">86&lt;/span>&lt;span class="n">c44d47f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nzvf7&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">116&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">bc9cbf4d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fn7x5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">116&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2360587938&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fc8b86cd6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">kpgn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">106&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">ff688ddc5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bs87d&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84656677&lt;/span>&lt;span class="n">b7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t7jtq&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">105&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cd94b9bfb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t6jq5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">audit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">57&lt;/span>&lt;span class="n">b899b497&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">msjzc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84456&lt;/span>&lt;span class="n">b75f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">r8h4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84456&lt;/span>&lt;span class="n">b75f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nf66v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b7bbdf54f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdcfw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">677&lt;/span>&lt;span class="n">d49d6d4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bwgrw&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">111&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">765&lt;/span>&lt;span class="n">c8c99f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cknr5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">111&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authorizedlister&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">69586&lt;/span>&lt;span class="n">f8664&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tl5wq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kjrcc&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">capimate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">db846987&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d9br9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">capimate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">db846987&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kp44s&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cdb956ddc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pbqcn&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84976&lt;/span>&lt;span class="n">cdbd7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l6mkt&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">594&lt;/span>&lt;span class="n">c784fb9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fb5rp&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">licensing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">79&lt;/span>&lt;span class="n">db86b6f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hfh9b&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">licensing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">f48d69f4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n8n2t&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">ddcf7797f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">mw9k&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reloader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reloader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">fb77b665&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nw854&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bbc46f4f5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">bvxs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bbc46f4f5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">nxt8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b758645bd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xkk57&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b8ccdf676&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svvqs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">105&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c455687b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">q8dzq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">677&lt;/span>&lt;span class="n">d4b4dlnmz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">runtime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">extension&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="n">d9c676b7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vdk76&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b4848595b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z4kpq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">admission&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">575&lt;/span>&lt;span class="n">c45986d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">c4ff&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c6d6989b8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">77&lt;/span>&lt;span class="n">bwd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c6d6989b8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">m48r&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">s6jn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">rssh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mswcf&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n7h7f&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="n">c5d5d6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sxxp8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="n">c5d5d6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vknvd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p89dz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ph4px&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prc67&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">f75df574&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tnk7v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">f75df574&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">w84hk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76j&lt;/span>&lt;span class="n">cm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">96&lt;/span>&lt;span class="n">pjt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">qrlm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cxw6r&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jkl95&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kr5wg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ljlhh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">598&lt;/span>&lt;span class="n">b4c7669&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">q8j8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c7f9fc58&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">zjjg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">94&lt;/span>&lt;span class="n">f95d674&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="n">z4s&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">lclp&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c78xt&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnljr&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dklnr&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fmbzv&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nwq8b&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nxhz6&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0192467&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9888&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7536&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8266&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ed9e557d46a1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">66&lt;/span>&lt;span class="n">qkh7z&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">27&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1774060518&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">b9989d54&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dzcqt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">27&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federatish7kf&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">28&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federn6pf9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">28&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fedh9vpc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">29&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">f54d58d99&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zvgnb&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ccf75997b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dp7q4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">126&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="n">bxq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">478&lt;/span>&lt;span class="n">dl&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">124&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">79&lt;/span>&lt;span class="n">lmw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">kvw6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">tvvn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dlj8p&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hpbmp&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">754&lt;/span>&lt;span class="n">fcf5f85&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c9vtt&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">119&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">754&lt;/span>&lt;span class="n">fcf5f85&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sfrpb&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">119&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">d9gs&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">qhkx&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">121&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dbxm8&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">121&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qvkv9&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s2wn7&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tq5bt&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">120&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vz87g&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">122&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其他NKP , kubectl 指令、加金鑰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp get workspace --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">NAMESPACE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">kommander&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp get cluster -w kommander-workspace --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKSPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">KUBECONFIG&lt;/span> &lt;span class="n">STATUS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">host&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">attach&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span> &lt;span class="n">Joined&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp get cluster -w default-workspace --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKSPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">KUBECONFIG&lt;/span> &lt;span class="n">STATUS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp get cluster -w nkp-workload-9x6hx --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKSPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">KUBECONFIG&lt;/span> &lt;span class="n">STATUS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span> &lt;span class="n">Joined&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">編輯&lt;/span>&lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="n">edit&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp get cluster -w nkp-workload-lab --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKSPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">KUBECONFIG&lt;/span> &lt;span class="n">STATUS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span> &lt;span class="n">Joined&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp describe cluster -w nkp-workload-lab --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># nkp edit cluster nkp-cluster01 -n nkp-workload-lab --kubeconfig=&amp;#34;/root/nkp-mgmt.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Users&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Ssh&lt;/span> &lt;span class="n">Authorized&lt;/span> &lt;span class="n">Keys&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ssh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rsa&lt;/span> &lt;span class="n">AAAAB3NzaC1yc2EAAAADAQABAAABgQCVN&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">q1hhDCFrbW4Gw&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">wPryGl2BQbLi9NNOv&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">hXLgI&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">NXJqhTT0XEL6Uun5WKd7ceNznfiCHee2AkQXm9nrvVyPpFU5zQ91j9zQbMsFylSDv7RALFyEaXO45u6bzKRvVnL4lsKygBcMwxSW8yIrv0qTeDl3rChfkxjhpWR&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">C7gbn6uIVINRoC&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">L1xNGcThbF0CiHgOt5P03ZV4tsm6C7Z65Wj41vczaH460qqq&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">kaf2uNveOZhi4juIQMc0FcE4kvGwtqRJ5HIs8CRq1N&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wX&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">uIIQEKsqtmQqSujcHOwosYPSNvVXvVgqvy9t0jfEU4Y3bcBkoF5zfq98OCG0978ewjb8yR909bQM2s2QRoQML8Gb6Be&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">EV7&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">xtUcqZOpAkyZOmWXN8yoL5EMcelgDZoyK3yH9FgKuz1sbB0f&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">b1B8LM&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SULTq8Lv7ww6ps3EIvKDwbH5rMQIxf3IEIuk7qvjyQlAZiE2nxiU88fcPB54WUoQBNd3uUjr0YVt1i5GM0&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Sudo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ALL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ALL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">NOPASSWD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">ALL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Workers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Machine&lt;/span> &lt;span class="n">Deployments&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Class&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Annotations&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">max&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">min&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Variables&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Overrides&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">workerConfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Value&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Nutanix&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Machine&lt;/span> &lt;span class="n">Details&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Boot&lt;/span> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">uefi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cluster&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NX1365G6PE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rocky&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.29&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20240816215147.&lt;/span>&lt;span class="n">qcow2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Memory&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">32&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Project&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">management&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Subnets&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Netfos_90_Access_IPAM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span> &lt;span class="n">Disk&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Vcpu&lt;/span> &lt;span class="n">Sockets&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Vcpus&lt;/span> &lt;span class="n">Per&lt;/span> &lt;span class="n">Socket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /home/nkp/.ssh/id_rsa.pub &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ssh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rsa&lt;/span> &lt;span class="n">AAAAB3NzaC1yc2EAAAADAQABAAABgQCVN&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">q1hhDCFrbW4Gw&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">wPryGl2BQbLi9NNOv&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">hXLgI&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">NXJqhTT0XEL6Uun5WKd7ceNznfiCHee2AkQXm9nrvVyPpFU5zQ91j9zQbMsFylSDv7RALFyEaXO45u6bzKRvVnL4lsKygBcMwxSW8yIrv0qTeDl3rChfkxjhpWR&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">C7gbn6uIVINRoC&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">L1xNGcThbF0CiHgOt5P03ZV4tsm6C7Z65Wj41vczaH460qqq&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">kaf2uNveOZhi4juIQMc0FcE4kvGwtqRJ5HIs8CRq1N&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wX&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">uIIQEKsqtmQqSujcHOwosYPSNvVXvVgqvy9t0jfEU4Y3bcBkoF5zfq98OCG0978ewjb8yR909bQM2s2QRoQML8Gb6Be&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">EV7&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">xtUcqZOpAkyZOmWXN8yoL5EMcelgDZoyK3yH9FgKuz1sbB0f&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">b1B8LM&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SULTq8Lv7ww6ps3EIvKDwbH5rMQIxf3IEIuk7qvjyQlAZiE2nxiU88fcPB54WUoQBNd3uUjr0YVt1i5GM0&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanixlab&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># kubectl --kubeconfig=nkp-mgmt.conf describe cluster nkp-mgmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Labels&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">provider&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nutanix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">konvoy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d2iq&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">provider&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nutanix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">topology&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">owned&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Annotations&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">caren&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uuid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">01924623&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">02&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">cb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a348&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">158120974&lt;/span>&lt;span class="n">c65&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">API&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Creation&lt;/span> &lt;span class="n">Timestamp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">26&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Finalizers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Generation&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Resource&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9910&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">UID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">b1e6c594&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7132&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="n">cd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ae06&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">80623&lt;/span>&lt;span class="n">ce81de0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">Network&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Pods&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cidr&lt;/span> &lt;span class="n">Blocks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Services&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cidr&lt;/span> &lt;span class="n">Blocks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">10.96&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span> &lt;span class="n">Endpoint&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.208&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span> &lt;span class="n">Ref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">API&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">controlplane&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">KubeadmControlPlane&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Infrastructure&lt;/span> &lt;span class="n">Ref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">API&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">infrastructure&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NutanixCluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lbhrg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Topology&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Class&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nutanix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Replicas&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Variables&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">clusterConfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Value&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Addons&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Ccm&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Credentials&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Secret&lt;/span> &lt;span class="n">Ref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HelmAddon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">Autoscaler&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HelmAddon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cni&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Provider&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Cilium&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HelmAddon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Csi&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Default&lt;/span> &lt;span class="n">Storage&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Provider&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nutanix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Storage&lt;/span> &lt;span class="n">Class&lt;/span> &lt;span class="n">Config&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">volume&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Providers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Nutanix&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Credentials&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Secret&lt;/span> &lt;span class="n">Ref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Storage&lt;/span> &lt;span class="n">Class&lt;/span> &lt;span class="n">Configs&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Volume&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Allow&lt;/span> &lt;span class="n">Expansion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Parameters&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">csi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fstype&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ext4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Description&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">CSI&lt;/span> &lt;span class="n">StorageClass&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">volume&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Flash&lt;/span> &lt;span class="n">Mode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DISABLED&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Hypervisor&lt;/span> &lt;span class="n">Attached&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ENABLED&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Storage&lt;/span> &lt;span class="ne">Container&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NX_1365_AHV_cr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Storage&lt;/span> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NutanixVolumes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Reclaim&lt;/span> &lt;span class="n">Policy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Delete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Volume&lt;/span> &lt;span class="n">Binding&lt;/span> &lt;span class="n">Mode&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">WaitForFirstConsumer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HelmAddon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Snapshot&lt;/span> &lt;span class="n">Controller&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HelmAddon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Nfd&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Strategy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HelmAddon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Service&lt;/span> &lt;span class="n">Load&lt;/span> &lt;span class="n">Balancer&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Address&lt;/span> &lt;span class="n">Ranges&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">End&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.209&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Start&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.209&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Provider&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">MetalLB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Nutanix&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Machine&lt;/span> &lt;span class="n">Details&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Boot&lt;/span> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">uefi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cluster&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NX1365G6PE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rocky&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.29&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20240816215147.&lt;/span>&lt;span class="n">qcow2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Memory&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Project&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">management&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Subnets&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Netfos_90_Access_IPAM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span> &lt;span class="n">Disk&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Vcpu&lt;/span> &lt;span class="n">Sockets&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Vcpus&lt;/span> &lt;span class="n">Per&lt;/span> &lt;span class="n">Socket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Encryption&lt;/span> &lt;span class="n">At&lt;/span> &lt;span class="n">Rest&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Providers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Secretbox&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span> &lt;span class="n">Registries&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Credentials&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Secret&lt;/span> &lt;span class="n">Ref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">URL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Nutanix&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span> &lt;span class="n">Endpoint&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.208&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Virtual&lt;/span> &lt;span class="ne">IP&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Provider&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">KubeVIP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Prism&lt;/span> &lt;span class="n">Central&lt;/span> &lt;span class="n">Endpoint&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Credentials&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Secret&lt;/span> &lt;span class="n">Ref&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">credentials&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Insecure&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">URL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.75&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9440&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Users&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Ssh&lt;/span> &lt;span class="n">Authorized&lt;/span> &lt;span class="n">Keys&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ssh&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rsa&lt;/span> &lt;span class="n">AAAAB3NzaC1yc2EAAAADAQABAAABgQCVN&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">q1hhDCFrbW4Gw&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">wPryGl2BQbLi9NNOv&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">hXLgI&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">NXJqhTT0XEL6Uun5WKd7ceNznfiCHee2AkQXm9nrvVyPpFU5zQ&lt;/span> &lt;span class="mi">91j9&lt;/span>&lt;span class="n">zQbMsFylSDv7RALFyEaXO45u6bzKRvVnL4lsKygBcMwxSW8yIrv0qTeDl3rChfkxjhpWR&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">C7gbn6uIVINRoC&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">L1xNGcThbF0CiHgOt5P03ZV4tsm6C7Z65Wj41vczaH460qqq&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">ka&lt;/span> &lt;span class="n">f2uNveOZhi4juIQMc0FcE4kvGwtqRJ5HIs8CRq1N&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wX&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">uIIQEKsqtmQqSujcHOwosYPSNvVXvVgqvy9t0jfEU4Y3bcBkoF5zfq98OCG0978ewjb8yR909bQM2s2QRoQML8Gb6Be&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">EV7&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">xt&lt;/span> &lt;span class="n">UcqZOpAkyZOmWXN8yoL5EMcelgDZoyK3yH9FgKuz1sbB0f&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">b1B8LM&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SULTq8Lv7ww6ps3EIvKDwbH5rMQIxf3IEIuk7qvjyQlAZiE2nxiU88fcPB54WUoQBNd3uUjr0YVt1i5GM0&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Sudo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ALL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ALL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">NOPASSWD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">ALL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Workers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Machine&lt;/span> &lt;span class="n">Deployments&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Class&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Annotations&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">max&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">min&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Variables&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Overrides&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">workerConfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Value&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Nutanix&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Machine&lt;/span> &lt;span class="n">Details&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Boot&lt;/span> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">uefi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Cluster&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NX1365G6PE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rocky&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.29&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20240816215147.&lt;/span>&lt;span class="n">qcow2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Memory&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">32&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Project&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">management&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Subnets&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Netfos_90_Access_IPAM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span> &lt;span class="n">Disk&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Vcpu&lt;/span> &lt;span class="n">Sockets&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Vcpus&lt;/span> &lt;span class="n">Per&lt;/span> &lt;span class="n">Socket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Conditions&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="n">Transition&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="n">Transition&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">39&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ControlPlaneInitialized&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="n">Transition&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ControlPlaneReady&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="n">Transition&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">InfrastructureReady&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="n">Transition&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">46&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">KommanderInitialized&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Last&lt;/span> &lt;span class="n">Transition&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">41&lt;/span>&lt;span class="n">Z&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">TopologyReconciled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Control&lt;/span> &lt;span class="ne">Plane&lt;/span> &lt;span class="n">Ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Infrastructure&lt;/span> &lt;span class="n">Ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Observed&lt;/span> &lt;span class="n">Generation&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Phase&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Provisioned&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Events&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># kubectl --kubeconfig=nkp-mgmt.conf describe cluster nkp-mgmt |grep UID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">UID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">b1e6c594&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7132&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="n">cd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ae06&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">80623&lt;/span>&lt;span class="n">ce81de0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="license">License
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>在Support Portal 可以看到有購買的License&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001135632620.png"
loading="lazy"
alt="image-20241001135632620"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Manage Licenses ，選擇 Nutanix Kubernetes Plaform&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001135718674.png"
loading="lazy"
alt="image-20241001135718674"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入NKP 叢集名稱、UUID (optional)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143111547.png"
loading="lazy"
alt="image-20241001143111547"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇License NKP Ultimate&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143154561.png"
loading="lazy"
alt="image-20241001143154561"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇License的種類，這裡是POC License&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143221418.png"
loading="lazy"
alt="image-20241001143221418"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇叢集&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143255790.png"
loading="lazy"
alt="image-20241001143255790"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇 vCPU 數量&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143448697.png"
loading="lazy"
alt="image-20241001143448697"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Save 然後 Next&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143511224.png"
loading="lazy"
alt="image-20241001143511224"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最後確認完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143551177.png"
loading="lazy"
alt="image-20241001143551177"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Generate license keys&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143623309.png"
loading="lazy"
alt="image-20241001143623309"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>即可產生 License key&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">AEAAQ-AAAQS-L5N22-FU6P2-6NGKV-9QKLU-UF8S7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renew
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AEAAQ-AAASU-57YDC-4PVGR-EJ233-N5AKR-3T5XG
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143657849.png"
loading="lazy"
alt="image-20241001143657849"
>&lt;/p>
&lt;p>renew&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125174055439.png"
loading="lazy"
alt="image-20241125174055439"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Support Portal 即可看到使用的License&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143823066.png"
loading="lazy"
alt="image-20241001143823066"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到NKP Dashboard 的 Licensing 頁面，點選移除License&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001143936967.png"
loading="lazy"
alt="image-20241001143936967"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144009276.png"
loading="lazy"
alt="image-20241001144009276"
>&lt;/p>
&lt;p>renew&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125174303231.png"
loading="lazy"
alt="image-20241125174303231"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>未授權狀態，可以看到的畫面與NKP Starter 一樣&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144031075.png"
loading="lazy"
alt="image-20241001144031075"
>&lt;/p>
&lt;p>renew ，機器人的button會被拿掉，但其他正常&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125174337757.png"
loading="lazy"
alt="image-20241125174337757"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選 Activate License，輸入 License key&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144210411.png"
loading="lazy"
alt="image-20241001144210411"
>&lt;/p>
&lt;p>renew&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125174644264.png"
loading="lazy"
alt="image-20241125174644264"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>授權匯入完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144234995.png"
loading="lazy"
alt="image-20241001144234995"
>&lt;/p>
&lt;p>renew 完成，機器人就正常了&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125174657723.png"
loading="lazy"
alt="image-20241125174657723"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125174855765.png"
loading="lazy"
alt="image-20241125174855765"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>License 到期前告警&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241121141917439.png"
loading="lazy"
alt="image-20241121141917439"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Licesne 到期後影響：AI機器人無法使用，其他應用程式看起來正常，按鈕沒被拔掉，Dashboard 也正常&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125092518667.png"
loading="lazy"
alt="image-20241125092518667"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>AI 機器人壞掉，服務應該跟License無關，但修復後有跳出License異常，所以到期後應該是無法使用AI機器人&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125092017318.png"
loading="lazy"
alt="image-20241125092017318"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125092320825.png"
loading="lazy"
alt="image-20241125092320825"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125092746272.png"
loading="lazy"
alt="image-20241125092746272"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>修復動作&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 先將scale 調整成0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl scale deployment ai-navigator-cluster-info-api -n kommander --replicas=0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 刪除失敗的pods 用Label來表示所有相關的pods
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl delete pod -l app.kubernetes.io/name=ai-navigator-cluster-info-api -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;ai-navigator-cluster-info-api-6b78d6449-226cv&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;ai-navigator-cluster-info-api-6b78d6449-249pv&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;ai-navigator-cluster-info-api-6b78d6449-2564c&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;ai-navigator-cluster-info-api-6b78d6449-267s7&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">最後會卡著要用 Control+C 退出
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 刪除完成
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-app-554f86cd46-797tq 1/1 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-agent-76bfb65f49-qdrqx 1/1 Running 0 38d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-postgresql-0 1/1 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager-kube-prometheus-stack-alertmanager-0 2/2 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">centralized-grafana-7d7b874996-w658s 2/2 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster-observer-2360587938-5fc8b86cd6-9kpgn 1/1 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 刪除完將scale 調整回5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl scale deployment ai-navigator-cluster-info-api -n kommander --replicas=5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-app-554f86cd46-797tq 1/1 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-agent-76bfb65f49-qdrqx 1/1 Running 0 38d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-557c646c6b-5tkfj 0/1 Init:0/1 0 4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-557c646c6b-7sdmk 0/1 Init:0/1 0 4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-557c646c6b-htnr7 0/1 Init:0/1 0 4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-557c646c6b-wbn4g 0/1 Init:0/1 0 4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-557c646c6b-xkb8d 0/1 Init:0/1 0 4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 還是不行，修正錯誤，describe po 之後發現SizeLimit 超用，並且image有更新版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl describe pod ai-navigator-cluster-info-api-6c65f767b8-f5cgl -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl edit deployment ai-navigator-cluster-info-api -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/ai-navigator-cluster-info-api edited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image 改為 image: mesosphere/ai-navigator-cluster-info-api:v0.1.0-model-revision-fix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Volumes SizeLimit改為 8Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - emptyDir:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sizeLimit: 8Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 修正ＯＫ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-app-554f86cd46-797tq 1/1 Running 0 54d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-agent-76bfb65f49-qdrqx 1/1 Running 0 38d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6c65f767b8-f5cgl 1/1 Running 0 3m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6c65f767b8-jpn96 1/1 Running 0 3m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6c65f767b8-tx69k 1/1 Running 0 3m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6c65f767b8-vm926 0/1 Running 0 3m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6c65f767b8-xwsbx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl logs ai-navigator-cluster-info-api-6c65f767b8-f5cgl -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-11-25 02:37:24,745 urllib3.connectionpool DEBUG http://weaviate:80 &amp;#34;GET /v1/meta HTTP/1.1&amp;#34; 200 64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-11-25 02:37:24,752 urllib3.connectionpool DEBUG Starting new HTTPS connection (1): pypi.org:443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-11-25 02:37:24,946 urllib3.connectionpool DEBUG https://pypi.org:443 &amp;#34;GET /pypi/weaviate-client/json HTTP/1.1&amp;#34; 200 61151
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/app/.venv/lib/python3.11/site-packages/weaviate/warnings.py:121: DeprecationWarning: Dep005: You are using weaviate-client version 3.25.3. The latest version is 4.9.4.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Please consider upgrading to the latest version. See https://weaviate.io/developers/weaviate/client-libraries/python for details.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> warnings.warn(
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO: Started server process [1]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO: Waiting for application startup.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO: Application startup complete.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO: Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl rollout restart deployment ai-navigator-cluster-info-agent -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl rollout restart deployment ai-navigator-app -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl rollout restart deployment ai-navigator-cluster-info-api -n kommander
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>AI 服務正常，但有跳出License Error (有使用就會多一筆)&lt;/p>
&lt;p>kubectl logs ai-navigator-app-5945846b57-5c6gl -n kommander |grep licesne&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125124904258.png" alt="image-20241125124904258" style="zoom:50%;" />
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241125114846644.png"
loading="lazy"
alt="image-20241125114846644"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="nkp-ultimate">NKP Ultimate
&lt;/h3>&lt;h4 id="畫面擷取-1">畫面擷取
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Dashboard&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144342650.png"
loading="lazy"
alt="image-20241001144342650"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144415725.png"
loading="lazy"
alt="image-20241001144415725"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Clusters&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144438786.png"
loading="lazy"
alt="image-20241001144438786"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144455447.png"
loading="lazy"
alt="image-20241001144455447"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Workspaces&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144513817.png"
loading="lazy"
alt="image-20241001144513817"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Infrastructure Providers 可以新增其他的 （原先的會被移除，要重新加入）&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144642139.png"
loading="lazy"
alt="image-20241001144642139"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144654156.png"
loading="lazy"
alt="image-20241001144654156"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Access Control 多了一些預設角色，也可以新增其他的角色
Identity Providers 與 NKP Starter 相同&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144807105.png"
loading="lazy"
alt="image-20241001144807105"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Banners&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001144848455.png"
loading="lazy"
alt="image-20241001144848455"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點進去Management Cluster workspaces&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145016633.png"
loading="lazy"
alt="image-20241001145016633"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145034200.png"
loading="lazy"
alt="image-20241001145034200"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>各元件也都有Dashboard可查看&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145117659.png"
loading="lazy"
alt="image-20241001145117659"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Kubernetes Dashboard 除了看到比較詳細的畫面外，也可以直接從 UI 部署新資源&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145203867.png"
loading="lazy"
alt="image-20241001145203867"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145233001.png"
loading="lazy"
alt="image-20241001145233001"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Grafana&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145336112.png"
loading="lazy"
alt="image-20241001145336112"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Traefik&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145408776.png"
loading="lazy"
alt="image-20241001145408776"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prometheus ，這邊就可以設定告警值等等&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145457519.png"
loading="lazy"
alt="image-20241001145457519"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145510044.png"
loading="lazy"
alt="image-20241001145510044"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>AI 測試&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001145946920.png"
loading="lazy"
alt="image-20241001145946920"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001150004325.png"
loading="lazy"
alt="image-20241001150004325"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Application&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001150104478.png"
loading="lazy"
alt="image-20241001150104478"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001150119975.png"
loading="lazy"
alt="image-20241001150119975"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001150135142.png"
loading="lazy"
alt="image-20241001150135142"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001150147622.png"
loading="lazy"
alt="image-20241001150147622"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001150201548.png"
loading="lazy"
alt="image-20241001150201548"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>kubecost&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001152432840.png"
loading="lazy"
alt="image-20241001152432840"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ceph&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001153157559.png"
loading="lazy"
alt="image-20241001153157559"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>所有Pod 資訊 ，相較於 NKP Starter 多了很多東西 AI 也是匯入授權後自動建立&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># kubectl --kubeconfig=nkp-mgmt.conf get pods -A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caaph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">caaph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7557&lt;/span>&lt;span class="n">bfbd76&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cdx7d&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capa&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">549&lt;/span>&lt;span class="n">fff5698&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">zdlh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">54&lt;/span>&lt;span class="n">df78c867&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">zqlw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">589&lt;/span>&lt;span class="n">f87d995&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gqjh6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeadm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">869&lt;/span>&lt;span class="n">b46bd8d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tqmr5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bd8c69994&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">c5h9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cappp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cappp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cc595974c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dlj27&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">c6679579f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sj4vc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capvcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capvcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">647&lt;/span>&lt;span class="n">bbc5685&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">74&lt;/span>&lt;span class="n">qnv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">b4c9976f6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f29bg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capz&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">azureserviceoperator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">697&lt;/span>&lt;span class="n">d757c4b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bpwmm&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">capz&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">capz&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="n">c684766c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mp5bb&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caren&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">runtime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">extensions&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">869&lt;/span>&lt;span class="n">f6bc85d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clcgv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">caren&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">repository&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">86&lt;/span>&lt;span class="n">c695db8f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t7cgs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c49657b87&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kvv2q&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h17m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b9b545679&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">w867w&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h17m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">647&lt;/span>&lt;span class="n">c6946df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qwvnk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h17m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01924623&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">02&lt;/span>&lt;span class="n">df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">cb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a348&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">158120974&lt;/span>&lt;span class="n">c65&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">ff7rp7&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">585&lt;/span>&lt;span class="n">cc87d78&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bgl8w&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h10m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h10m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federj7xjn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fe25f2t&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fxpv6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dc4455cd5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">frdrw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h11m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">kustomize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">755&lt;/span>&lt;span class="n">bbdfc55&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kd8rh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h11m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">notification&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">86&lt;/span>&lt;span class="n">c44d47f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nzvf7&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h11m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">source&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">bc9cbf4d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fn7x5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h11m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">554&lt;/span>&lt;span class="n">f86cd46&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">797&lt;/span>&lt;span class="n">tq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">b78d6449&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fh756&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">b78d6449&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fn6pn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">ai&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">navigator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">centralized&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">d7b874996&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">w658s&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m30s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2360587938&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fc8b86cd6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">kpgn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h1m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">create&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">thanos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stores&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configmap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mblkt&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">ff688ddc5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bs87d&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">88&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84656677&lt;/span>&lt;span class="n">b7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t7jtq&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dex&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authenticator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cd94b9bfb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t6jq5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">88&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">dkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prereq&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f7wqt&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">hm42&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">p8r8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mxnlz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">audit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">57&lt;/span>&lt;span class="n">b899b497&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">msjzc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h8m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84456&lt;/span>&lt;span class="n">b75f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">r8h4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h8m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">gatekeeper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84456&lt;/span>&lt;span class="n">b75f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nf66v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h8m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b655598b9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="n">gqn&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loki&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x56fg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">f8cf7cb76&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hllxr&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b7bbdf54f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdcfw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">677&lt;/span>&lt;span class="n">d49d6d4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bwgrw&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h6m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">appmanagement&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">765&lt;/span>&lt;span class="n">c8c99f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cknr5&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h6m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authorizedlister&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">69586&lt;/span>&lt;span class="n">f8664&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tl5wq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kjrcc&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">capimate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">db846987&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d9br9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">capimate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">db846987&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kp44s&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cdb956ddc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pbqcn&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84976&lt;/span>&lt;span class="n">cdbd7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l6mkt&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ui&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">594&lt;/span>&lt;span class="n">c784fb9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fb5rp&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">licensing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">79&lt;/span>&lt;span class="n">db86b6f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hfh9b&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">licensing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">f48d69f4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n8n2t&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">ddcf7797f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">mw9k&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h9m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reloader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reloader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">fb77b665&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nw854&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h4m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bbc46f4f5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">bvxs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h4m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bbc46f4f5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">nxt8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h4m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b758645bd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xkk57&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">oidc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b8ccdf676&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svvqs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c965665bf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zgvft&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">state&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">c5d9876b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">wnf9s&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8458&lt;/span>&lt;span class="n">bfb4df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jstdm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="n">dg4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">k45l&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">87&lt;/span>&lt;span class="n">q9v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fbpj9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hpkzs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdnq4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n8cdq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analyzer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5874&lt;/span>&lt;span class="n">fc47d5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5587&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">96&lt;/span>&lt;span class="n">d5947cd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kllf4&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">state&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6645&lt;/span>&lt;span class="n">c45576&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d2lmv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">55&lt;/span>&lt;span class="n">f9cf456b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">89&lt;/span>&lt;span class="n">w8z&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">776&lt;/span>&lt;span class="n">b57c895&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">nbmn&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c455687b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">q8dzq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">f5b7994c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kzbgt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m7s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">c7546cfc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hcfdn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m7s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kong&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">699&lt;/span>&lt;span class="n">fffc989&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">znmdv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m7s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scraper&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5998&lt;/span>&lt;span class="n">c4d7d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pshrt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m7s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">f4466f486&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ww949&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m7s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubetunnel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">59598865&lt;/span>&lt;span class="n">c5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">q97c&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">kubetunnel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">55&lt;/span>&lt;span class="n">d9974f85&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nlv86&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5497588957&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">x4hs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">52&lt;/span>&lt;span class="n">p52&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">88&lt;/span>&lt;span class="n">mbm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">pszh&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">ContainerCreating&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">drgdp&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dsbct&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prhkn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentbit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vnrjl&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m23s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">ContainerCreating&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m24s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fluentd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configcheck&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">82&lt;/span>&lt;span class="n">fdd7bc&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">m35s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insights&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">management&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">d4dddd996&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l8gr8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m56s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cd86fdf97&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">fppm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="n">m59s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">677&lt;/span>&lt;span class="n">d4b4dlnmz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h2m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">detect&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v5mk2&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">PodInitializing&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="n">m2s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bb9c5bb9f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gvgjs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m4s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">rook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ceph&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5995&lt;/span>&lt;span class="n">cd86bd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">b9xk&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">ContainerCreating&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="n">m3s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">runtime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">extension&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="n">d9c676b7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vdk76&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h15m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">thanos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">84&lt;/span>&lt;span class="n">b7859896&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fmc4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b4848595b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z4kpq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">175&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">velero&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bqxxz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span> &lt;span class="n">weaviate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">admission&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">575&lt;/span>&lt;span class="n">c45986d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">c4ff&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h4m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c6d6989b8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">77&lt;/span>&lt;span class="n">bwd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubefed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c6d6989b8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">m48r&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h3m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">s6jn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">rssh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mswcf&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">n7h7f&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="n">c5d5d6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sxxp8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="n">c5d5d6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vknvd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p89dz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ph4px&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cilium&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prc67&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">f75df574&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tnk7v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">f75df574&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">w84hk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76j&lt;/span>&lt;span class="n">cm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">96&lt;/span>&lt;span class="n">pjt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">qrlm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cxw6r&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jkl95&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kr5wg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ljlhh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="n">zsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnjn6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzxnp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gg88v&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">598&lt;/span>&lt;span class="n">b4c7669&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">q8j8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c7f9fc58&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">zjjg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubecost&lt;/span> &lt;span class="n">copy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">grafana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">datasource&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mv7cm&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">m33s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubecost&lt;/span> &lt;span class="n">create&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">thanos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stores&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configmap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">j84tx&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubecost&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analyzer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dbbfd778c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pfs97&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubecost&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">thanos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">656956&lt;/span>&lt;span class="n">b46b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xmltk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubecost&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">thanos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">frontend&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">f5774f6f&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xsznt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">94&lt;/span>&lt;span class="n">f95d674&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="n">z4s&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">lclp&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c78xt&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cnljr&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dklnr&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fmbzv&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nwq8b&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">speaker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nxhz6&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0192467&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9888&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7536&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8266&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ed9e557d46a1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">66&lt;/span>&lt;span class="n">qkh7z&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">91&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">102&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">observer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1774060518&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">68&lt;/span>&lt;span class="n">b9989d54&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dzcqt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">karma&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federatish7kf&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">kubecost&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federn6pf9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">traefik&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">x6hx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">k79n&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fedh9vpc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">f54d58d99&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zvgnb&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ccf75997b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dp7q4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h21m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="n">bxq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h19m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">478&lt;/span>&lt;span class="n">dl&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">79&lt;/span>&lt;span class="n">lmw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">kvw6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">tvvn&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dlj8p&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hpbmp&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h20m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">754&lt;/span>&lt;span class="n">fcf5f85&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c9vtt&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h14m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">754&lt;/span>&lt;span class="n">fcf5f85&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sfrpb&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h14m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">d9gs&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">qhkx&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h17m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dbxm8&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h16m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qvkv9&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">s2wn7&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h17m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tq5bt&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">h16m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vz87g&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">h18m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="infrastructure-providers">Infrastructure Providers
&lt;/h2>&lt;h3 id="nutanix">Nutanix
&lt;/h3>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001153625463.png"
loading="lazy"
alt="image-20241001153625463"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001153942117.png"
loading="lazy"
alt="image-20241001153942117"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001154001678.png"
loading="lazy"
alt="image-20241001154001678"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001154014865.png"
loading="lazy"
alt="image-20241001154014865"
>&lt;/p>
&lt;h2 id="add-cluster">Add Cluster
&lt;/h2>&lt;h3 id="attach-ocp">Attach OCP
&lt;/h3>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001154845204.png"
loading="lazy"
alt="image-20241001154845204"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001154903514.png"
loading="lazy"
alt="image-20241001154903514"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001154938137.png"
loading="lazy"
alt="image-20241001154938137"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155058938.png"
loading="lazy"
alt="image-20241001155058938"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155118242.png"
loading="lazy"
alt="image-20241001155118242"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155215935.png"
loading="lazy"
alt="image-20241001155215935"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155311069.png"
loading="lazy"
alt="image-20241001155311069"
>&lt;/p>
&lt;p>Enable Dashboard&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155331923.png"
loading="lazy"
alt="image-20241001155331923"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155440515.png"
loading="lazy"
alt="image-20241001155440515"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155522350.png"
loading="lazy"
alt="image-20241001155522350"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155550632.png"
loading="lazy"
alt="image-20241001155550632"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241001155642007.png"
loading="lazy"
alt="image-20241001155642007"
>&lt;/p>
&lt;p>Enable Kubecost&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017143816425.png"
loading="lazy"
alt="image-20241017143816425"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017143836312.png"
loading="lazy"
alt="image-20241017143836312"
>&lt;/p>
&lt;h2 id="ldap">LDAP
&lt;/h2>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/kbs/details?targetId=kA0VO0000001mcT0AQ" target="_blank" rel="noopener"
>KB-16668&lt;/a>&lt;/p>
&lt;p>連線 AD 設定RBAC&lt;/p>
&lt;ol>
&lt;li>
&lt;p>新增 Identitiy Providers ，選擇 LDAP&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004133412971.png"
loading="lazy"
alt="image-20241004133412971"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004133438174.png"
loading="lazy"
alt="image-20241004133438174"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入資訊&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Workspaces: All Workspaces # 也可以針對不同workspaces去設定
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: dc01.nutanixlab.local # 可辨識名稱即可
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host: 192.168.102.1:389 # IP + Port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bind DN: CN=Administrator,CN=Users,DC=nutanixlab,DC=local # 綁定的管理員帳號
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Bind Password: ****
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004133902167.png"
loading="lazy"
alt="image-20241004133902167"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004144717369.png"
loading="lazy"
alt="image-20241004144717369"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入資訊&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Root CA: # 如果有的話才需要
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search Base DN: DC=nutanixlab,DC=local # 搜尋整個目錄
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search Username: sAMAccountName # 登入會輸入的帳號格式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search Filter: (objectClass=person)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search Scope: sub # 整個樹系或是一個Level
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search ID Attribute: DN
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004150808142.png"
loading="lazy"
alt="image-20241004150808142"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入資訊&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">User Search E-Mail: mail # 或是UPN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search Name: name # 登入後右上角顯示的名稱
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User Search E-mail Suffix: # 留空
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group Search Base DN: CN=Users,DC=nutanixlab,DC=local # 搜尋Group的地方
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group Search Filter: (objectClass=group) # Group的object class
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group Search Scope: sub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Group Search Name Attribute: cn # 顯示的group名稱
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004143715589.png"
loading="lazy"
alt="image-20241004143715589"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004140340501.png"
loading="lazy"
alt="image-20241004140340501"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004150431207.png"
loading="lazy"
alt="image-20241004150431207"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定完成 Save&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004143741938.png"
loading="lazy"
alt="image-20241004143741938"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增Group&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004143813995.png"
loading="lazy"
alt="image-20241004143813995"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004144350520.png"
loading="lazy"
alt="image-20241004144350520"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004144415237.png"
loading="lazy"
alt="image-20241004144415237"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Access Control 新增 Role Bindings&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004144451254.png"
loading="lazy"
alt="image-20241004144451254"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004144513748.png"
loading="lazy"
alt="image-20241004144513748"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入測試 dc01.nutanixlab.local&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004144532799.png"
loading="lazy"
alt="image-20241004144532799"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004150544942.png"
loading="lazy"
alt="image-20241004150544942"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241004150525532.png"
loading="lazy"
alt="image-20241004150525532"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>其他使用者登入驗證OK&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017115248113.png"
loading="lazy"
alt="image-20241017115248113"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get Connector.dex.mesosphere.io -n kommander -o yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">items:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- apiVersion: dex.mesosphere.io/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: Connector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: &amp;#34;2024-10-04T06:37:26Z&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> generateName: ldap-identity-provider-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> generation: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ldap-identity-provider-hg4bx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceVersion: &amp;#34;8127529&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid: 709bdf88-b4d5-44be-98ba-0f3b5ee70db3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> displayName: dc01.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ldap:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bindDN: CN=Administrator,CN=Users,DC=nutanixlab,DC=local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bindPW: Nutanix/Lab123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bindSecretRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: connector-ldap-bindsecret-lf6zq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> groupSearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baseDN: CN=Users,DC=nutanixlab,DC=local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filter: (objectClass=group)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nameAttr: cn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scope: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> userMatchers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - groupAttr: member
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> userAttr: DN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> host: 192.168.102.1:389
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> insecureNoSSL: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> insecureSkipVerify: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> startTLS: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> userSearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baseDN: DC=nutanixlab,DC=local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> emailAttr: mail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> emailSuffix: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> filter: (objectClass=person)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> idAttr: DN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nameAttr: name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scope: sub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: sAMAccountName
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: ldap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: List
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceVersion: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Check Logs&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl logs dex-55978d4bcc-ksgsg -n kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time=&amp;#34;2024-10-04T07:06:36Z&amp;#34; level=info msg=&amp;#34;Dex Version: v2.37.0-d2iq.5-dirty, Go Version: go1.20.4, Go OS/ARCH: linux amd64&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time=&amp;#34;2024-10-04T07:06:36Z&amp;#34; level=info msg=&amp;#34;config using log level: debug&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time=&amp;#34;2024-10-04T07:06:36Z&amp;#34; level=info msg=&amp;#34;config issuer: https://172.16.90.209/dex&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time=&amp;#34;2024-10-17T03:34:21Z&amp;#34; level=info msg=&amp;#34;username \&amp;#34;ken.wang\&amp;#34; mapped to entry CN=Ken Wang,OU=NutanixTeam,OU=NetfosTaipei,DC=nutanixlab,DC=local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time=&amp;#34;2024-10-17T03:34:21Z&amp;#34; level=info msg=&amp;#34;performing ldap search CN=Users,DC=nutanixlab,DC=local sub (&amp;amp;(objectClass=group)(member=CN=Ken Wang,OU=NutanixTeam,OU=NetfosTaipei,DC=nutanixlab,DC=local))&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">time=&amp;#34;2024-10-17T03:34:21Z&amp;#34; level=info msg=&amp;#34;login successful: connector \&amp;#34;dex-controller_kommander_ldap-identity-provider-hg4bx\&amp;#34;, username=\&amp;#34;Ken Wang\&amp;#34;, preferred_username=\&amp;#34;\&amp;#34;, email=\&amp;#34;ken.wang@nutanixlab.local\&amp;#34;, groups=[\&amp;#34;Schema Admins\&amp;#34; \&amp;#34;Enterprise Admins\&amp;#34; \&amp;#34;Domain Admins\&amp;#34; \&amp;#34;Group Policy Creator Owners\&amp;#34; \&amp;#34;NKPAdmins\&amp;#34;]&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ai-navigator">AI Navigator
&lt;/h2>&lt;p>啟用 NKP Ultimate License 後，會自動安裝 AI 聊天機器人，主要功能為 直覺的查詢處理、即時問題處理協助、整合NKP&lt;/p>
&lt;p>另外還有NKP AI Navigator Cluster Info Agent，描述的功能與NKP AI Navigator 相同，主要可以偵測整個叢集的版本等資訊&lt;/p>
&lt;p>AI 助理回答如下：&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017140922240.png" alt="image-20241017140922240" style="zoom:50%;" />
&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017141627809.png" alt="image-20241017141627809" style="zoom:50%;" />
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Key&lt;/span> &lt;span class="n">Features&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Intuitive&lt;/span> &lt;span class="n">Query&lt;/span> &lt;span class="n">Processing&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Empowered&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">Natural&lt;/span> &lt;span class="n">Language&lt;/span> &lt;span class="n">Processing&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">NLP&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">AI&lt;/span> &lt;span class="n">Navigator&lt;/span> &lt;span class="n">interprets&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="n">queries&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">even&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">they&lt;/span>&lt;span class="err">’&lt;/span>&lt;span class="n">re&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">phrased&lt;/span> &lt;span class="n">technically&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">making&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span> &lt;span class="k">tool&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">both&lt;/span> &lt;span class="n">novices&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">experts&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Real&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">time&lt;/span> &lt;span class="n">Troubleshooting&lt;/span> &lt;span class="n">Assistance&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">With&lt;/span> &lt;span class="n">its&lt;/span> &lt;span class="n">vast&lt;/span> &lt;span class="n">database&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">common&lt;/span> &lt;span class="n">NKP&lt;/span> &lt;span class="n">issues&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">solutions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">AI&lt;/span> &lt;span class="n">Navigator&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">provide&lt;/span> &lt;span class="n">instant&lt;/span> &lt;span class="n">solutions&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dramatically&lt;/span> &lt;span class="n">reducing&lt;/span> &lt;span class="n">downtime&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">enhancing&lt;/span> &lt;span class="n">productivity&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Seamless&lt;/span> &lt;span class="n">NKP&lt;/span> &lt;span class="n">Integration&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Being&lt;/span> &lt;span class="n">native&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">NKP&lt;/span> &lt;span class="n">platform&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">AI&lt;/span> &lt;span class="n">Navigator&lt;/span> &lt;span class="n">ensures&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">most&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">their&lt;/span> &lt;span class="n">NKP&lt;/span> &lt;span class="n">environments&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">offering&lt;/span> &lt;span class="n">insights&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">best&lt;/span> &lt;span class="n">practices&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">performance&lt;/span> &lt;span class="n">optimization&lt;/span> &lt;span class="n">tips&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Privacy&lt;/span> &lt;span class="n">First&lt;/span> &lt;span class="n">Approach&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Data&lt;/span> &lt;span class="n">privacy&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">security&lt;/span> &lt;span class="n">remain&lt;/span> &lt;span class="n">paramount&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ensuring&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="n">trust&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">compliance&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>AI Navigator 所安裝的 pod&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n kommander |grep ai-navigator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-app-554f86cd46-797tq 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-fh756 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-fn6pn 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-postgresql-0 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl -n kommander describe pod ai-navigator-app-554f86cd46-797tq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: ai-navigator-app-554f86cd46-797tq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: kommander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Priority: 100001000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Priority Class Name: dkp-high-priority
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Service Account: ai-navigator-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Node: nkp-mgmt-md-0-l965p-fczv8-n6tlc/172.16.90.171
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Start Time: Tue, 01 Oct 2024 14:42:44 +0800
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: app=ai-navigator-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pod-template-hash=554f86cd46
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status: Running
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 192.168.1.226
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> IP: 192.168.1.226
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Controlled By: ReplicaSet/ai-navigator-app-554f86cd46
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ai-navigator-app:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Container ID: containerd://32691c6af7bcb6942c7d11de6a0c331c6aa75faf27d8cd9c98bc8e692b8a055c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image: mesosphere/ai-navigator-app:v0.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image ID: docker.io/mesosphere/ai-navigator-app@sha256:2026ed7aabb265eead86917ad95de623aef7c13a775c7901a4629909460f5bce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Port: 8080/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Host Port: 0/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SeccompProfile: RuntimeDefault
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> State: Running
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Started: Tue, 01 Oct 2024 14:42:56 +0800
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ready: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017120511998.png"
loading="lazy"
alt="image-20241017120511998"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017120050371.png"
loading="lazy"
alt="image-20241017120050371"
>&lt;/p>
&lt;p>啟用NKP AI Navigator Cluster Info Agent 前的回答&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017141711072.png" alt="image-20241017141711072" style="zoom:50%;" />
&lt;p>啟用Agent&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017141740569.png"
loading="lazy"
alt="image-20241017141740569"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017141750580.png"
loading="lazy"
alt="image-20241017141750580"
>&lt;/p>
&lt;p>大約等3分鐘後 ， Pod 新增一個 agent&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n kommander |grep ai-navigator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-app-554f86cd46-797tq 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-agent-76bfb65f49-qdrqx 1/1 Running 0 77s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-fh756 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-fn6pn 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-postgresql-0 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>同樣問題已可回答&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017142131014.png"
loading="lazy"
alt="image-20241017142131014"
>&lt;/p>
&lt;p>驗證版本稍微有點不一樣，而且多問幾次的回答也不同，應該還要多點時間學習&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017143333852.png"
loading="lazy"
alt="image-20241017143333852"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client Version: v1.28.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server Version: v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-hzxnp-28zsd Ready control-plane 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-hzxnp-cnjn6 Ready control-plane 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-hzxnp-gg88v Ready control-plane 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-md-0-l965p-fczv8-mspnw Ready &amp;lt;none&amp;gt; 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-md-0-l965p-fczv8-n6tlc Ready &amp;lt;none&amp;gt; 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-md-0-l965p-fczv8-t5xmd Ready &amp;lt;none&amp;gt; 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-mgmt-md-0-l965p-fczv8-w7sxk Ready &amp;lt;none&amp;gt; 16d v1.29.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n kommander |grep ai-navigator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-app-554f86cd46-797tq 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-agent-76bfb65f49-qdrqx 1/1 Running 0 9m25s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-24v4r 1/1 Running 0 7m51s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-bmxk2 1/1 Running 0 7m51s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-c5z4s 1/1 Running 0 7m51s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-fh756 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-6b78d6449-fn6pn 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ai-navigator-cluster-info-api-postgresql-0 1/1 Running 0 15d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/10/image-20241017142451188.png"
loading="lazy"
alt="image-20241017142451188"
>&lt;/p>
&lt;h2 id="ndb-operator">NDB Operator
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/nutanix-cloud-native/ndb-operator?tab=readme-ov-file" target="_blank" rel="noopener"
>https://github.com/nutanix-cloud-native/ndb-operator?tab=readme-ov-file&lt;/a>&lt;/p>
&lt;h3 id="pre-install">Pre-install
&lt;/h3>&lt;h4 id="安裝-operator-sdk">安裝 Operator-SDK
&lt;/h4>&lt;p>( Helm Install 可略過 )&lt;/p>
&lt;ol>
&lt;li>
&lt;p>設定OS 版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">ARCH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">case&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">uname&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">x86_64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">amd64&lt;/span> &lt;span class="p">;;&lt;/span> &lt;span class="n">aarch64&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">arm64&lt;/span> &lt;span class="p">;;&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">uname&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">;;&lt;/span> &lt;span class="n">esac&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="ne">OS&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">uname&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">awk&lt;/span> &lt;span class="s1">&amp;#39;{print tolower($0)}&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>下載Binary&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">OPERATOR_SDK_DL_URL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">framework&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sdk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">37.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">LO&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">OPERATOR_SDK_DL_URL&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sdk_&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="ne">OS&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">ARCH&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">91.6&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">91.6&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">1994&lt;/span>&lt;span class="n">k&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">47&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">47&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">2059&lt;/span>&lt;span class="n">k&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認Binary&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ gpg --keyserver keyserver.ubuntu.com --recv-keys 052996E2A20B5C7E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg: directory &amp;#39;/home/nkp/.gnupg&amp;#39; created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg: keybox &amp;#39;/home/nkp/.gnupg/pubring.kbx&amp;#39; created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg: /home/nkp/.gnupg/trustdb.gpg: trustdb created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg: key 052996E2A20B5C7E: public key &amp;#34;Operator SDK (release) &amp;lt;cncf-operator-sdk@cncf.io&amp;gt;&amp;#34; imported
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg: Total number processed: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gpg: imported: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ curl -LO ${OPERATOR_SDK_DL_URL}/checksums.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ curl -LO ${OPERATOR_SDK_DL_URL}/checksums.txt.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ gpg -u &amp;#34;Operator SDK (release) &amp;lt;cncf-operator-sdk@cncf.io&amp;gt;&amp;#34; --verify checksums.txt.asc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ grep operator-sdk_${OS}_${ARCH} checksums.txt | sha256sum -c -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">operator-sdk_linux_amd64: OK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝並複製到/usr/loca/bin&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ chmod +x operator-sdk_${OS}_${ARCH} &amp;amp;&amp;amp; sudo mv operator-sdk_${OS}_${ARCH} /usr/local/bin/operator-sdk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for nkp:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>下載 git 跟 go&lt;/p>
&lt;p>&lt;a class="link" href="https://git-scm.com/downloads" target="_blank" rel="noopener"
>https://git-scm.com/downloads&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://go.dev/dl/" target="_blank" rel="noopener"
>https://go.dev/dl/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ git --version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git version 2.31.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ go version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go version go1.22.2 linux/amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="確認-cert-manager-安裝">確認 cert-manager 安裝
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get pods -n cert-manager --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-556c9f47d-c4d6q 1/1 Running 0 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-cainjector-57d8d7ff64-cbzfg 1/1 Running 0 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-webhook-844cfb8858-g8ftz 1/1 Running 0 11d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="確認-ndb-連線">確認 NDB 連線
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">NDB: 172.16.90.196
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get nodes -o wide --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-cluster01-9swsx-zwgx9 Ready control-plane 11d v1.29.6 172.16.90.126 &amp;lt;none&amp;gt; Rocky Linux 9.4 (Blue Onyx) 5.14.0-427.31.1.el9_4.x86_64 containerd://1.6.33-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-cluster01-md-0-ztljf-l4nbq-5xnsc Ready &amp;lt;none&amp;gt; 11d v1.29.6 172.16.90.127 &amp;lt;none&amp;gt; Rocky Linux 9.4 (Blue Onyx) 5.14.0-427.31.1.el9_4.x86_64 containerd://1.6.33-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-cluster01-md-0-ztljf-l4nbq-vhfvq Ready &amp;lt;none&amp;gt; 11d v1.29.6 172.16.90.128 &amp;lt;none&amp;gt; Rocky Linux 9.4 (Blue Onyx) 5.14.0-427.31.1.el9_4.x86_64 containerd://1.6.33-d2iq.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ ssh nkp@172.16.90.126
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@nkp-cluster01-9swsx-zwgx9 ~]$ ping 172.16.90.196
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PING 172.16.90.196 (172.16.90.196) 56(84) bytes of data.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 172.16.90.196: icmp_seq=1 ttl=64 time=2.92 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- 172.16.90.196 ping statistics ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 packets transmitted, 1 received, 0% packet loss, time 0ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rtt min/avg/max/mdev = 2.921/2.921/2.921/0.000 ms
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="install">Install
&lt;/h3>&lt;h4 id="github-repo">Github Repo
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>git clone&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ git clone https://github.com/nutanix-cloud-native/ndb-operator.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cloning into &amp;#39;ndb-operator&amp;#39;...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Enumerating objects: 3345, done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Counting objects: 100% (1264/1264), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Compressing objects: 100% (520/520), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Total 3345 (delta 974), reused 793 (delta 743), pack-reused 2081 (from 1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Receiving objects: 100% (3345/3345), 772.31 KiB | 1.58 MiB/s, done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resolving deltas: 100% (2073/2073), done.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ ls -l |grep ndb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x. 13 nkp nkp 4096 Nov 11 09:55 ndb-operator
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>cd ndb-operator 後安裝於 kubernetes 中&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ cd ndb-operator/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb-operator]$ make deploy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="helm-chart">Helm Chart
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Add Nutanix Repository&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ helm repo add nutanix https://nutanix.github.io/helm/ --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;nutanix&amp;#34; has been added to your repositories
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ helm repo list --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix https://nutanix.github.io/helm/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Install Chart&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl create ns ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/ndb-operator created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ helm install netfos-ndb-operator -n ndb-operator nutanix/ndb-operator --version 0.5.3 --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: netfos-ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Mon Nov 11 10:20:27 2024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="create-secret-and-connet">Create Secret and Connet
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>建立 ndb-secret 連線用的secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ vim netfos-ndb-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: netfos-ndb-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type: Opaque
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: Nutanix/Lab123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl apply -f netfos-ndb-secret.yaml -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>連線 ndb-server&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1alpha1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NDBServer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndbserver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">instance&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndbserver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">part&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">managed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">by&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">kustomize&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">by&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Name of the secret that holds the credentials for NDB: username, password and ca_certificate created earlier&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">credentialSecret&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">secret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># NDB Server&amp;#39;s API URL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.196&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">era&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Set to true to skip SSL certificate validation, should be false if ca_certificate is provided in the credential secret.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">skipCertificateVerification&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">xz49&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">xz49&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">describe&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">xz49&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yamlName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">xz49&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Priority&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Service&lt;/span> &lt;span class="n">Account&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">account&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">Node&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ztljf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">l4nbq&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vhfvq&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.128&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Start&lt;/span> &lt;span class="n">Time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">2024&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">0800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Labels&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pod&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">hash&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Annotations&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">kubectl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">2.57&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">IPs&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">2.57&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Controlled&lt;/span> &lt;span class="n">By&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ReplicaSet&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Containers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Container&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">a8754ee1381f2bb87fdffe202ae91770f19642d690f552086e1b451d3869fcf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ghcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">native&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">5.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ghcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">native&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5579&lt;/span>&lt;span class="n">d0349f5dc8b7f45d0eaddfe6ad087aa92ad925c799d4fe83eda7beba4ac5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span> &lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Args&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">health&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">probe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8081&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">leader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">elect&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Started&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">2024&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">0800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Restart&lt;/span> &lt;span class="n">Count&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Limits&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpu&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="n">Mi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Requests&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpu&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="n">Mi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Liveness&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">get&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8081&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">healthz&lt;/span> &lt;span class="n">delay&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="c1">#success=1 #failure=3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Readiness&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">get&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8081&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">readyz&lt;/span> &lt;span class="n">delay&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="c1">#success=1 #failure=3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Environment&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Mounts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">serving&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">cert&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ro&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">secrets&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">serviceaccount&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hmp6h&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ro&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Container&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="n">c40b65d22a766217ce8ead5db6ed7d6d3316a676c733f916e859cdf6f87557&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubebuilder&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">16.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Image&lt;/span> &lt;span class="n">ID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubebuilder&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">771&lt;/span>&lt;span class="n">a9a173e033a3ad8b46f5c00a7036eaa88c8d8d1fbd89217325168998113ea&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Host&lt;/span> &lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Args&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">listen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">address&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">upstream&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">logtostderr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Started&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">2024&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mi">0800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Restart&lt;/span> &lt;span class="n">Count&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Limits&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpu&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="n">Mi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Requests&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpu&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">64&lt;/span>&lt;span class="n">Mi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">Environment&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Mounts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">secrets&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">serviceaccount&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hmp6h&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ro&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Conditions&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Type&lt;/span> &lt;span class="n">Status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PodReadyToStartContainers&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Initialized&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Ready&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ContainersReady&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PodScheduled&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pod&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">xz49&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">TYPE&lt;/span> &lt;span class="n">CLUSTER&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">EXTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">PORT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="n">ClusterIP&lt;/span> &lt;span class="mf">10.107&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">170.244&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">8443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="n">ClusterIP&lt;/span> &lt;span class="mf">10.109&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">133.195&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">UP&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">TO&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">DATE&lt;/span> &lt;span class="n">AVAILABLE&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">DESIRED&lt;/span> &lt;span class="n">CURRENT&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">replicaset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">netfos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c77798ddf&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="post-install">Post-install
&lt;/h3>&lt;h4 id="create-postgres">Create postgres
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Create db-instance-secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ cat db-postgres-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ndb-postgres-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type: Opaque
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: P@55w.rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssh_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCVN+q1hhDCFrbW4Gw+wPryGl2BQbLi9NNOv+hXLgI+NXJqhTT0XEL6Uun5WKd7ceNznfiCHee2AkQXm9nrvVyPpFU5zQ91j9zQbMsFylSDv7RALFyEaXO45u6bzKRvVnL4lsKygBcMwxSW8yIrv0qTeDl3rChfkxjhpWR+C7gbn6uIVINRoC/5L1xNGcThbF0CiHgOt5P03ZV4tsm6C7Z65Wj41vczaH460qqq//kaf2uNveOZhi4juIQMc0FcE4kvGwtqRJ5HIs8CRq1N/wX+uIIQEKsqtmQqSujcHOwosYPSNvVXvVgqvy9t0jfEU4Y3bcBkoF5zfq98OCG0978ewjb8yR909bQM2s2QRoQML8Gb6Be+EV7+xtUcqZOpAkyZOmWXN8yoL5EMcelgDZoyK3yH9FgKuz1sbB0f+4b1B8LM/SULTq8Lv7ww6ps3EIvKDwbH5rMQIxf3IEIuk7qvjyQlAZiE2nxiU88fcPB54WUoQBNd3uUjr0YVt1i5GM0= nkp@ken-rhel9.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl apply -f db-postgres-secret.yaml -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl get secret -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE DATA AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">db-postgres-secret Opaque 2 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos-ndb-secret Opaque 2 38m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sh.helm.release.v1.netfos-ndb-operator.v1 helm.sh/release.v1 1 50m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">webhook-server-cert kubernetes.io/tls 3 50m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Cluster ID ( Nutanix PE Cluster 有註冊在NDB上的 )&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111112958254.png"
loading="lazy"
alt="image-20241111112958254"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create Postgres DB&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ cat db-postgres-deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: ndb.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nkp-postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ndbRef: ndb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> isClone: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> databaseInstance:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterId: &amp;#34;b9ab1352-1673-4ce1-a9d8-174771f3dcbb&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;nkp-postgres&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> description: This for testing NDB Operator in NKP Cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> databaseNames:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - nkp_database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> credentialSecret: db-postgres-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> size: 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timezone: &amp;#34;UTC&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # You can specify any (or none) of these types of profiles: compute, software, network, dbParam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # If not specified, the corresponding Out-of-Box (OOB) profile will be used wherever applicable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Name is case-sensitive. ID is the UUID of the profile. Profile should be in the &amp;#34;READY&amp;#34; state
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;#34;id&amp;#34; &amp;amp; &amp;#34;name&amp;#34; are optional. If none provided, OOB may be resolved to any profile of that type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;8adb0c25-4136-4aa9-bf48-d0801d01e3e4&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_OOB_SMALL_COMPUTE&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # A Software profile is a mandatory input for closed-source engines: SQL Server &amp;amp; Oracle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> software:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;POSTGRES_15.5_Rocky8.10&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;71466901-fba3-4391-a9b3-b77d8933de46&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;731cf689-e55a-4b05-a8ac-98ff8a18af13&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_OOB_POSTGRESQL_NETWORK&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dbParam:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_POSTGRES_PARAMS&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;c6c8517a-3697-4090-b5b7-08632c77bdce&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl apply -f db-postgres-deploy.yaml -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">看logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl logs -f netfos-ndb-operator-controller-manager-5c77798ddf-7xz49 -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>從NDB查看進度&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122150444883.png"
loading="lazy"
alt="image-20241122150444883"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122151313720.png"
loading="lazy"
alt="image-20241122151313720"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>查看Logs&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122150620515.png"
loading="lazy"
alt="image-20241122150620515"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署完成即可看到此Service&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122152959990.png"
loading="lazy"
alt="image-20241122152959990"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml get all -n ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/netfos-ndb-operator-controller-manager-5c77798ddf-7xz49 2/2 Running 1 (6d22h ago) 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/netfos-ndb-operator-controller-manager-metrics-service ClusterIP 10.107.170.244 &amp;lt;none&amp;gt; 8443/TCP 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/netfos-ndb-operator-webhook-service ClusterIP 10.109.133.195 &amp;lt;none&amp;gt; 443/TCP 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/netfos-nkp-mssql-svc ClusterIP 10.108.221.85 &amp;lt;none&amp;gt; 80/TCP 10d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/nkp-postgres-svc ClusterIP 10.96.183.27 &amp;lt;none&amp;gt; 80/TCP 5m40s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/netfos-ndb-operator-controller-manager 1/1 1 1 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/netfos-ndb-operator-controller-manager-5c77798ddf 1 1 1 11d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml describe service/nkp-postgres-svc -n ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: nkp-postgres-svc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Selector: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type: ClusterIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP Family Policy: SingleStack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP Families: IPv4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.96.183.27
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPs: 10.96.183.27
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port: &amp;lt;unset&amp;gt; 80/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TargetPort: 5432/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Endpoints: 172.16.90.164:5432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Session Affinity: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 列出 database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml get database -n ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME IP ADDRESS STATUS TYPE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos-nkp-mssql 172.16.90.163 READY mssql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkp-postgres 172.16.90.164 READY postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 描述 database (包含Cloen會用到的database ID)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml describe database nkp-postgres -n ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: nkp-postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API Version: ndb.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kind: Database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Timestamp: 2024-11-22T06:58:19Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Finalizers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ndb.nutanix.com/finalizerinstance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ndb.nutanix.com/finalizerserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Resource Version: 18657950
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UID: c9ae56f5-a86e-44ba-a6be-b96e3ac89767
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Clone:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Additional Arguments:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Credential Secret:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Description:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Db Param:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Db Param Instance:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Software:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Snapshot Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Source Database Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Timezone:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Database Instance:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Additional Arguments:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Id: b9ab1352-1673-4ce1-a9d8-174771f3dcbb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Credential Secret: db-postgres-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Database Names:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nkp_database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Description: This for testing NDB Operator in NKP Cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: nkp-postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id: 8adb0c25-4136-4aa9-bf48-d0801d01e3e4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: DEFAULT_OOB_SMALL_COMPUTE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Db Param:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id: c6c8517a-3697-4090-b5b7-08632c77bdce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: DEFAULT_POSTGRES_PARAMS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Db Param Instance:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id: 731cf689-e55a-4b05-a8ac-98ff8a18af13
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: DEFAULT_OOB_POSTGRESQL_NETWORK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Software:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id: 71466901-fba3-4391-a9b3-b77d8933de46
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: POSTGRES_15.5_Rocky8.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Size: 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time Machine:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Daily Snapshot Time: 04:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Description:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Log Catch Up Frequency: 30
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Monthly Snapshot Day: 15
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Quarterly Snapshot Month: Jan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Sla: NONE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Snapshots Per Day: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Weekly Snapshot Day: FRIDAY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Timezone: UTC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Is Clone: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ndb Ref: ndb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Operation Id: c60d8a4a-7c20-4a22-8006-f48fa28b9ff7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Db Server Id: 4ef4c7d0-c891-460d-9c9a-4b71032a3d5a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Deregistration Operation Id:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Id: 7e9f5189-adbf-4228-abb1-b6f69cb13d3e ## Clone 會用到此Database Id
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ip Address: 172.16.90.164
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: READY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認Endpoints&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122153104705.png"
loading="lazy"
alt="image-20241122153104705"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試連線 用kubernetes service 方式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 啟動測試容器
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml -n ndb-operator run -i --tty postgres --image=postgres --restart=Never -- sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 連線 kubernetes service （預設帶80 port）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># psql -U postgres -p 80 -h nkp-postgres-svc -W
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">psql (17.1 (Debian 17.1-1.pgdg120+1), server 15.5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type &amp;#34;help&amp;#34; for help.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 列出 database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">postgres=# \l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> List of databases
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name | Owner | Encoding | Locale Provider | Collate | Ctype | Locale | ICU Rules | Access privileges
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------+----------+----------+-----------------+-------------+-------------+--------+-----------+-----------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nkp_database | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> postgres | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template0 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | | | | | | | postgres=CTc/postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template1 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | | | | | | | postgres=CTc/postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(4 rows)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 新增 test database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">postgres=# create database test;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE DATABASE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 列出 database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">postgres=# \l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> List of databases
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name | Owner | Encoding | Locale Provider | Collate | Ctype | Locale | ICU Rules | Access privileges
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------+----------+----------+-----------------+-------------+-------------+--------+-----------+-----------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nkp_database | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> postgres | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template0 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | | | | | | | postgres=CTc/postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template1 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | | | | | | | postgres=CTc/postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> test | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(5 rows)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 移除 test database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">postgres=# drop database test;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP DATABASE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 退出
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\q
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>測試連線 直連 VM IP 方式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 啟動測試容器
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml -n ndb-operator run -i --tty postgres --image=postgres --restart=Never -- sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 連線 VM 的 IP 以及 p 5432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># psql -U postgres -p 5432 -h 172.16.90.164 -W
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">psql (17.1 (Debian 17.1-1.pgdg120+1), server 15.5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type &amp;#34;help&amp;#34; for help.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 列出database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">postgres=# \l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> List of databases
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name | Owner | Encoding | Locale Provider | Collate | Ctype | Locale | ICU Rules | Access privileges
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------+----------+----------+-----------------+-------------+-------------+--------+-----------+-----------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nkp_database | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> postgres | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template0 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | | | | | | | postgres=CTc/postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template1 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres +
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | | | | | | | | postgres=CTc/postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(4 rows)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122172515700.png"
loading="lazy"
alt="image-20241122172515700"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122172535411.png"
loading="lazy"
alt="image-20241122172535411"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h5 id="clone-database">Clone Database
&lt;/h5>&lt;ol>
&lt;li>
&lt;p>建立Clone manifest
Snapshot Id 從 NDB API Exporter上查看&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apiVersion: ndb.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nkp-postgres-clone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ndbRef: ndb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> isClone: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clone:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterId: &amp;#34;b9ab1352-1673-4ce1-a9d8-174771f3dcbb&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;nkp-postgres-clone&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> description: This for testing NDB Operator Cloning in NKP Cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> credentialSecret: db-postgres-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timezone: &amp;#34;UTC&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # You can specify any (or none) of these types of profiles: compute, software, network, dbParam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # If not specified, the corresponding Out-of-Box (OOB) profile will be used wherever applicable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Name is case-sensitive. ID is the UUID of the profile. Profile should be in the &amp;#34;READY&amp;#34; state
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;#34;id&amp;#34; &amp;amp; &amp;#34;name&amp;#34; are optional. If none provided, OOB may be resolved to any profile of that type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;8adb0c25-4136-4aa9-bf48-d0801d01e3e4&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_OOB_SMALL_COMPUTE&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # A Software profile is a mandatory input for closed-source engines: SQL Server &amp;amp; Oracle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> software:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;POSTGRES_15.5_Rocky8.10&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;71466901-fba3-4391-a9b3-b77d8933de46&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;731cf689-e55a-4b05-a8ac-98ff8a18af13&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_OOB_POSTGRESQL_NETWORK&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dbParam:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_POSTGRES_PARAMS&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;c6c8517a-3697-4090-b5b7-08632c77bdce&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sourceDatabaseId: &amp;#34;7e9f5189-adbf-4228-abb1-b6f69cb13d3e&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> snapshotId: &amp;#34;942b39b7-ca20-461e-8313-baf17148a8ac&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Clone Database&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl --kubeconfig=nkp-cluster01-kubeconfig.yaml -n ndb-operator apply -f db-postgres-clone.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">database.ndb.nutanix.com/nkp-postgres-clone created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>NDB 查看狀態&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122180336412.png"
loading="lazy"
alt="image-20241122180336412"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Log 狀態&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241122180350421.png"
loading="lazy"
alt="image-20241122180350421"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Clone 完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241204152518617.png"
loading="lazy"
alt="image-20241204152518617"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241204152555070.png"
loading="lazy"
alt="image-20241204152555070"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NKP 可認得此Service&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241204152841083.png"
loading="lazy"
alt="image-20241204152841083"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="create-mssql">Create MSSQL
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Create mssql secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ vim db-mssql-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: db-mssql-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type: Opaque
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: P@ssw0rd123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssh_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCVN+q1hhDCFrbW4Gw+wPryGl2BQbLi9NNOv+hXLgI+NXJqhTT0XEL6Uun5WKd7ceNznfiCHee2AkQXm9nrvVyPpFU5zQ91j9zQbMsFylSDv7RALFyEaXO45u6bzKRvVnL4lsKygBcMwxSW8yIrv0qTeDl3rChfkxjhpWR+C7gbn6uIVINRoC/5L1xNGcThbF0CiHgOt5P03ZV4tsm6C7Z65Wj41vczaH460qqq//kaf2uNveOZhi4juIQMc0FcE4kvGwtqRJ5HIs8CRq1N/wX+uIIQEKsqtmQqSujcHOwosYPSNvVXvVgqvy9t0jfEU4Y3bcBkoF5zfq98OCG0978ewjb8yR909bQM2s2QRoQML8Gb6Be+EV7+xtUcqZOpAkyZOmWXN8yoL5EMcelgDZoyK3yH9FgKuz1sbB0f+4b1B8LM/SULTq8Lv7ww6ps3EIvKDwbH5rMQIxf3IEIuk7qvjyQlAZiE2nxiU88fcPB54WUoQBNd3uUjr0YVt1i5GM0= nkp@ken-rhel9.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl apply -f db-mssql-secret.yaml -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">secret/db-mssql-secret created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Create mssql manifests&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ vim db-mssql-deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: ndb.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: netfos-nkp-mssql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ndbRef: ndb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> isClone: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> databaseInstance:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterId: &amp;#34;b9ab1352-1673-4ce1-a9d8-174771f3dcbb&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;netfos-nkp-mssql&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> description: This for testing NDB Operator in NKP Cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> databaseNames:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - netfos_database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> credentialSecret: db-mssql-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> size: 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timezone: &amp;#34;UTC&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: mssql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # You can specify any (or none) of these types of profiles: compute, software, network, dbParam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # If not specified, the corresponding Out-of-Box (OOB) profile will be used wherever applicable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Name is case-sensitive. ID is the UUID of the profile. Profile should be in the &amp;#34;READY&amp;#34; state
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;#34;id&amp;#34; &amp;amp; &amp;#34;name&amp;#34; are optional. If none provided, OOB may be resolved to any profile of that type
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;79b6fd91-4d3d-4a30-9e7b-180bc4265922&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;SQL_Default_Compute&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # A Software profile is a mandatory input for closed-source engines: SQL Server &amp;amp; Oracle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> software:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;Win2022_SQL2019_NKP&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;3e2cb21d-073d-4b06-9815-07ebc85746f9&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;7248aa73-46d7-438f-bb42-0afb9fb4f996&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_OOB_SQLSERVER_NETWORK&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dbParam:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_SQLSERVER_DATABASE_PARAMS&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;530dc232-b664-4d01-b542-81b4c2befb7c&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Only applicable for MSSQL databases
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dbParamInstance:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;DEFAULT_SQLSERVER_INSTANCE_PARAMS&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: &amp;#34;90aa7e49-0ade-4122-b3ea-ba7c6fa4854c&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeMachine: # Optional block, if removed the SLA defaults to NONE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sla : &amp;#34;DEFAULT_OOB_BRASS_SLA&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dailySnapshotTime: &amp;#34;12:00:00&amp;#34; # Time for daily snapshot in hh:mm:ss format
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> snapshotsPerDay: 1 # Number of snapshots per day
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logCatchUpFrequency: 30 # Frequency (in minutes)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> weeklySnapshotDay: &amp;#34;MONDAY&amp;#34; # Day of the week for weekly snapshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> monthlySnapshotDay: 11 # Day of the month for monthly snapshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalArguments:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sql_user_name: &amp;#34;nkpuser&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> authentication_mode: &amp;#34;mixed&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sql_user_password: &amp;#34;P@ssw0rd123&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Create MSSQL&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl apply -f db-mssql-deploy.yaml -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">database.ndb.nutanix.com/netfos-nkp-mssql created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">看logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl logs -f netfos-ndb-operator-controller-manager-5c77798ddf-7xz49 -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2024-11-12T00:28:18Z INFO Database CR Status: {&amp;#34;ipAddress&amp;#34;:&amp;#34;172.16.90.163&amp;#34;,&amp;#34;id&amp;#34;:&amp;#34;2582b1e6-f6c2-4eca-85f0-da5837845bff&amp;#34;,&amp;#34;status&amp;#34;:&amp;#34;READY&amp;#34;,&amp;#34;dbServerId&amp;#34;:&amp;#34;649e5d21-0c2b-4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">139-9a14-a617473ebfd3&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;mssql&amp;#34;,&amp;#34;creationOperationId&amp;#34;:&amp;#34;73c5a0d6-d46d-47b2-9e5f-ec972158efd3&amp;#34;,&amp;#34;deregistrationOperationId&amp;#34;:&amp;#34;&amp;#34;} {&amp;#34;controller&amp;#34;: &amp;#34;database&amp;#34;, &amp;#34;control
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lerGroup&amp;#34;: &amp;#34;ndb.nutanix.com&amp;#34;, &amp;#34;controllerKind&amp;#34;: &amp;#34;Database&amp;#34;, &amp;#34;Database&amp;#34;: {&amp;#34;name&amp;#34;:&amp;#34;netfos-nkp-mssql&amp;#34;,&amp;#34;namespace&amp;#34;:&amp;#34;ndb-operator&amp;#34;}, &amp;#34;namespace&amp;#34;: &amp;#34;ndb-operator&amp;#34;, &amp;#34;name&amp;#34;: &amp;#34;netfo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">s-nkp-mssql&amp;#34;, &amp;#34;reconcileID&amp;#34;: &amp;#34;89bae2ea-bdad-40c8-b9cb-137f56a8f99e&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>NDB 查看進度&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111135100239.png"
loading="lazy"
alt="image-20241111135100239"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111152326244.png"
loading="lazy"
alt="image-20241111152326244"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111154004240.png"
loading="lazy"
alt="image-20241111154004240"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>從 NKP Cluster 可以看到此 Database 的 Service&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl get svc -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos-ndb-operator-controller-manager-metrics-service ClusterIP 10.107.170.244 &amp;lt;none&amp;gt; 8443/TCP 5h2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos-ndb-operator-webhook-service ClusterIP 10.109.133.195 &amp;lt;none&amp;gt; 443/TCP 5h2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos-nkp-mssql-svc ClusterIP 10.100.14.241 &amp;lt;none&amp;gt; 80/TCP 47m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl describe svc netfos-nkp-mssql-svc -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: netfos-nkp-mssql-svc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: ndb-operator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Selector: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type: ClusterIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP Family Policy: SingleStack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP Families: IPv4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP: 10.100.14.241
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPs: 10.100.14.241
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port: &amp;lt;unset&amp;gt; 80/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TargetPort: 1433/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Endpoints: 172.16.90.163:1433
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Session Affinity: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111152436685.png"
loading="lazy"
alt="image-20241111152436685"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試連線&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ nc -zv 172.16.90.163 1433
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: Version 7.92 ( https://nmap.org/ncat )
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: Connected to 172.16.90.163:1433.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ncat: 0 bytes sent, 0 bytes received in 0.25 seconds.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝sqlcmd 來確認連線&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">microsoft&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rhel&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">prod&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">repo&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">tee&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">yum&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">repos&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mssql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">repo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">yum&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="n">mssql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools18&lt;/span> &lt;span class="n">unixODBC&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Installed&lt;/span> &lt;span class="n">products&lt;/span> &lt;span class="n">updated&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Installed&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libtool&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ltdl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">45.&lt;/span>&lt;span class="n">el9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">msodbcsql18&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">18.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">mssql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tools18&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">18.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">unixODBC&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">rh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">unixODBC&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">rh&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Complete&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;export PATH=&amp;#34;$PATH:/opt/mssql-tools18/bin&amp;#34;&amp;#39;&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bash_profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndb&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">bash_profile&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>sqlcmd連線測試&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ sqlcmd -S 172.16.90.163 -U nkpuser -p -Q &amp;#34;SELECT @@VERSION&amp;#34; -C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Oct 8 2022 05:58:25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Copyright (C) 2022 Microsoft Corporation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Enterprise Edition (64-bit) on Windows Server 2019 Standard 10.0 &amp;lt;X64&amp;gt; (Build 17763: ) (Hypervisor)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(1 rows affected)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Network packet size (bytes): 4096
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 xact[s]:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Clock Time (ms.): total 1 avg 1.0 (1000.0 xacts per sec.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ sqlcmd -S 172.16.90.163 -U nkpuser -p -Q &amp;#34;SELECT name from sys.databases&amp;#34; -C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tempdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">model
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos_database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(5 rows affected)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Network packet size (bytes): 4096
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 xact[s]:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Clock Time (ms.): total 37 avg 37.0 (27.0 xacts per sec.)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Create Database&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ sqlcmd -S 172.16.90.163 -U nkpuser -p -C -Q &amp;#34;CREATE DATABASE nkpdev&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Network packet size (bytes): 4096
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 xact[s]:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Clock Time (ms.): total 379 avg 379.0 (2.6 xacts per sec.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ sqlcmd -S 172.16.90.163 -U nkpuser -p -Q &amp;#34;SELECT name from sys.databases&amp;#34; -C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tempdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">model
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">msdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netfos_database
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nkpdev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(6 rows affected)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Network packet size (bytes): 4096
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 xact[s]:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Clock Time (ms.): total 3 avg 3.0 (333.3 xacts per sec.)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Delete Database VM&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ndb]$ kubectl delete -f db-mssql-deploy.yaml -n ndb-operator --kubeconfig=nkp-cluster01-kubeconfig.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">database.ndb.nutanix.com &amp;#34;netfos-nkp-mssql&amp;#34; deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111173936985.png"
loading="lazy"
alt="image-20241111173936985"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/11/image-20241111174412927.png"
loading="lazy"
alt="image-20241111174412927"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="workspace--project">Workspace &amp;amp; Project
&lt;/h2>&lt;p>建立Project 設定權限&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209163958365.png"
loading="lazy"
alt="image-20241209163958365"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209164310858.png"
loading="lazy"
alt="image-20241209164310858"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209164041292.png"
loading="lazy"
alt="image-20241209164041292"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209164123945.png"
loading="lazy"
alt="image-20241209164123945"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209164138754.png"
loading="lazy"
alt="image-20241209164138754"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209164026129.png"
loading="lazy"
alt="image-20241209164026129"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">workspace&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">adminconfig&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">DISPLAY&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">WORKSPACE&lt;/span> &lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">Default&lt;/span> &lt;span class="n">Workspace&lt;/span> &lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="mi">69&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workspace&lt;/span> &lt;span class="n">Management&lt;/span> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">Workspace&lt;/span> &lt;span class="n">kommander&lt;/span> &lt;span class="mi">69&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">WORKSPACE_NAME&lt;/span>&lt;span class="o">=&amp;lt;&lt;/span>&lt;span class="n">name_target_workspace&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">export&lt;/span> &lt;span class="n">WORKSPACE_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">kommandercluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">kommander&lt;/span> &lt;span class="n">host&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{ .status.ingress.address }&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">landing&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">WORKSPACE_NAME&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">WORKSPACE_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">adminconfig&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">kommandercluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">kommander&lt;/span> &lt;span class="n">host&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{ .status.ingress.address }&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">landing&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">WORKSPACE_NAME&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.209&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">landing&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209162859507.png"
loading="lazy"
alt="image-20241209162859507"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209163415226.png"
loading="lazy"
alt="image-20241209163415226"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209163426947.png"
loading="lazy"
alt="image-20241209163426947"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209163439110.png"
loading="lazy"
alt="image-20241209163439110"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">~/.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusters&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">certificate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">authority&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">certs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ca&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dkp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">contexts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cluster&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">current&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">preferences&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">users&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">vpnuser12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.211&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">token&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">eyJhbGciOiJSUzI1NiIsImtpZCI6IjRjOWY5NGZjM2I0ZThmYzJmN2YyN2I5NmUwMzc2YzIyNGViMzVhNjMifQ&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">eyJhdF9oYXNoIjoidERPS2Z2cG5fRXY0T2xfVFpLSDBNUSIsImF1ZCI6WyJkZXgtY29udHJvbGxlci1kZXh0ZmEtY2xpZW50LW5rcC1jbHVzdGVyMDEtMjZrYmgiLCJkZXgtY29udHJvbGxlci1kZXgtZGthLWNsaWVudC1rdWJlLWFwaXNlcnZlciJdLCJhenAiOiJkZXgtY29udHJvbGxlci1kZXgtZGthLWNsaWVudC1rdWJlLWFwaXNlcnZlciIsImNfaGFzaCI6Ik5Rb0haSUFrekNJblpZcEJCdXRUdlEiLCJlbWFpbCI6InZwbnVzZXIxMkBudXRhbml4bGFiLmxvY2FsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImV4cCI6MTczMzgxOTUwMCwiZmVkZXJhdGVkX2NsYWltcyI6bnVsbCwiZ3JvdXBzIjpbIk5LUFVzZXJzIl0sImlhdCI6MTczMzczMzEwMCwiaXNzIjoiaHR0cHM6Ly8xNzIuMTYuOTAuMjA5L2RleCIsIm5hbWUiOiJ2cG51c2VyMTIiLCJub25jZSI6IiIsInByZWZlcnJlZF91c2VybmFtZSI6IiIsInN1YiI6IkNrQkRUajEyY0c1MWMyVnlNVElzVDFVOVEzVnpkRzl0WlhKekxFOVZQVTVsZEdadmMxUmhhWEJsYVN4RVF6MXVkWFJoYm1sNGJHRmlMRVJEUFd4dlkyRnNFalZrWlhndFkyOXVkSEp2Ykd4bGNsOXJiMjF0WVc1a1pYSmZiR1JoY0MxcFpHVnVkR2wwZVMxd2NtOTJhV1JsY2kxb1p6UmllQSJ9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">a7NGtbrz2cHHxXYSIvXjQwUXQubOPQWCHVjPpFrREK0uuW8B7__t0Nc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v10uhRsHNCPIAmHwo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bnGkyjk8fGwcGDRFg9iDTTKy35Zsx_nc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">OuHblKOG8tU42aUiGKG5fftd0vfHgzGaBolQ&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dKbk45hn_h7y9l60eYYU5yUCIdI7kX5OgNV2eWksm3qhHathkF1vzC022Yo6Q2QmZceMSFQp9ckn9K033EHAIsSK3CEuyZcTqejA23XItE6Sfh3UOdwjzqRi7H810XSaQVnEMrctgIDnpbSUZMpLE2UCt0jAFXB841Ce7oNQvfzteCcHDvd9wiMfUY1gHIR5mbZL7g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Error&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Forbidden&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">nodes&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">forbidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">User&lt;/span> &lt;span class="s2">&amp;#34;vpnuser12@nutanixlab.local&amp;#34;&lt;/span> &lt;span class="n">cannot&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;nodes&amp;#34;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">API&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">scope&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">No&lt;/span> &lt;span class="n">resources&lt;/span> &lt;span class="n">found&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span> &lt;span class="n">namespace&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">ns&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">npbwm&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kommander&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flux&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">federation&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lease&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">public&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metallb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">28&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nkp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workload&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">feature&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">discovery&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在別的namespace無法新增pod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Error&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Forbidden&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">forbidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">User&lt;/span> &lt;span class="s2">&amp;#34;vpnuser12@nutanixlab.local&amp;#34;&lt;/span> &lt;span class="n">cannot&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="s2">&amp;#34;pods&amp;#34;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">API&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">namespace&lt;/span> &lt;span class="s2">&amp;#34;default&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 可在指定的namespace新增pod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">npbwm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pod&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">expose&lt;/span> &lt;span class="n">po&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">NodePort&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svc&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">npbwm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svc&lt;/span> &lt;span class="n">exposed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 確認pod與服務並連線&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">npbwm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pod&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">44&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">TYPE&lt;/span> &lt;span class="n">CLUSTER&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">EXTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">PORT&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svc&lt;/span> &lt;span class="n">NodePort&lt;/span> &lt;span class="mf">10.98&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">244.223&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">31403&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nkpuser&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">describe&lt;/span> &lt;span class="n">service&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">npbwm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">svc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">dev&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">npbwm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Labels&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Annotations&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Selector&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NodePort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">IP&lt;/span> &lt;span class="n">Family&lt;/span> &lt;span class="n">Policy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">SingleStack&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">IP&lt;/span> &lt;span class="n">Families&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">IPv4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">IP&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">10.98&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">244.223&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">IPs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">10.98&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">244.223&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">unset&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TargetPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NodePort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">unset&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">31403&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Endpoints&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.163&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Session&lt;/span> &lt;span class="n">Affinity&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">External&lt;/span> &lt;span class="n">Traffic&lt;/span> &lt;span class="n">Policy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Events&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241209171829715.png"
loading="lazy"
alt="image-20241209171829715"
>&lt;/p>
&lt;h2 id="metallb-system">Metallb-system
&lt;/h2>&lt;p>新增 loadbalancer ip 到 ip pool 裡面&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get ipaddresspools -n metallb-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AUTO ASSIGN AVOID BUGGY IPS ADDRESSES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metallb true false [&amp;#34;172.16.90.209-172.16.90.209&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl edit ipaddresspools -n metallb-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ipaddresspool.metallb.io/metallb edited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl describe ipaddresspools -n metallb-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: metallb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: metallb-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API Version: metallb.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kind: IPAddressPool
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Timestamp: 2024-10-01T03:37:31Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Generation: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Resource Version: 318510970
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UID: 3cba6b6f-06c6-4002-a039-12774eedda72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Addresses:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 172.16.90.209-172.16.90.211
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Auto Assign: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Avoid Buggy I Ps: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250220095215314.png"
loading="lazy"
alt="image-20250220095215314"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nkp@ken-rhel9 ~]$ kubectl get svc -n ken-ns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carts ClusterIP 10.99.139.74 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carts-db ClusterIP 10.99.20.222 &amp;lt;none&amp;gt; 27017/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">catalogue ClusterIP 10.106.141.207 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">catalogue-db ClusterIP 10.102.80.220 &amp;lt;none&amp;gt; 3306/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">front-end LoadBalancer 10.103.0.112 172.16.90.211 80:30239/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">orders ClusterIP 10.106.57.160 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">orders-db ClusterIP 10.110.189.178 &amp;lt;none&amp;gt; 27017/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">payment ClusterIP 10.102.165.251 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">queue-master ClusterIP 10.96.248.113 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rabbitmq ClusterIP 10.109.56.231 &amp;lt;none&amp;gt; 5672/TCP,9090/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">session-db ClusterIP 10.98.29.122 &amp;lt;none&amp;gt; 6379/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shipping ClusterIP 10.97.155.46 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user ClusterIP 10.99.13.238 &amp;lt;none&amp;gt; 80/TCP 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user-db ClusterIP 10.105.150.252 &amp;lt;none&amp;gt; 27017/TCP 18h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2025/02/image-20250220095316530.png"
loading="lazy"
alt="image-20250220095316530"
>&lt;/p></description></item><item><title>Nutanix_NDK-v1.0.0_On_OCP-4.13</title><link>https://wangken0129.github.io/p/nutanix_ndk-v1.0.0_on_ocp-4.13/</link><pubDate>Thu, 23 May 2024 08:00:46 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix_ndk-v1.0.0_on_ocp-4.13/</guid><description>&lt;h1 id="ndk-v100-on-ocp-v413">NDK v1.0.0 on OCP v4.13
&lt;/h1>&lt;p>NDK ( Nutanix Data Service for Kubernetes ) ：針對Kubernetes 的容器備份還原&lt;/p>
&lt;p>目前備援功能只支援在同一個供應商提供的 Kubernetes 叢集，且目前只有Volume 的PVC才可快照&lt;/p>
&lt;p>排程備份只支援Async ，此測試僅有針對 Namespace 內全部的項目做手動快照還原&lt;/p>
&lt;p>OCP IPI 安裝此篇不贅述，請參考其他篇&lt;/p>
&lt;p>2024.05.23&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2030-Red-Hat-OpenShift-on-Nutanix:TN-2030-Red-Hat-OpenShift-on-Nutanix" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2030-Red-Hat-OpenShift-on-Nutanix:TN-2030-Red-Hat-OpenShift-on-Nutanix&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Data-Services-for-Kubernetes-v1_0:Nutanix-Data-Services-for-Kubernetes-v1_0" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Data-Services-for-Kubernetes-v1_0:Nutanix-Data-Services-for-Kubernetes-v1_0&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Release-Notes-Nutanix-Data-Services-for-Kubernetes-v1_0:Release-Notes-Nutanix-Data-Services-for-Kubernetes-v1_0" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Release-Notes-Nutanix-Data-Services-for-Kubernetes-v1_0:Release-Notes-Nutanix-Data-Services-for-Kubernetes-v1_0&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/nutanix/helm/tree/nutanix-csi-snapshot-6.3.2/charts/nutanix-csi-snapshot#install" target="_blank" rel="noopener"
>https://github.com/nutanix/helm/tree/nutanix-csi-snapshot-6.3.2/charts/nutanix-csi-snapshot#install&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/nutanix/helm/tree/csi-v3.0.0-beta-beta1/charts/nutanix-csi-storage" target="_blank" rel="noopener"
>https://github.com/nutanix/helm/tree/csi-v3.0.0-beta-beta1/charts/nutanix-csi-storage&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html/building_applications/working-with-helm-charts" target="_blank" rel="noopener"
>https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html/building_applications/working-with-helm-charts&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/u010918487/article/details/115509935" target="_blank" rel="noopener"
>https://blog.csdn.net/u010918487/article/details/115509935&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/kbs/details?targetId=kA0VO00000008Qb0AI" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/kbs/details?targetId=kA0VO00000008Qb0AI&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://quay.io/repository/karbon/k8s-agent?tab=tags" target="_blank" rel="noopener"
>https://quay.io/repository/karbon/k8s-agent?tab=tags&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/nutanix/helm-releases/releases" target="_blank" rel="noopener"
>https://github.com/nutanix/helm-releases/releases&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/orgs/nutanix-cloud-native/repositories?type=all" target="_blank" rel="noopener"
>https://github.com/orgs/nutanix-cloud-native/repositories?type=all&lt;/a>&lt;/p>
&lt;h2 id="requirements">Requirements
&lt;/h2>&lt;p>NKE v2.9 以上&lt;/p>
&lt;p>Prism Central 2023.4 以上&lt;/p>
&lt;p>Kubernetes version v1.26 以上&lt;/p>
&lt;p>Nutanix CSI Driver v3.0 (beta) 以上&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523120449110.png"
loading="lazy"
alt="image-20240523120449110"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240515115102568.png"
loading="lazy"
alt="image-20240515115102568"
>&lt;/p>
&lt;h2 id="lab-enviroments">Lab Enviroments
&lt;/h2>&lt;p>Prism Central : 2024.1&lt;/p>
&lt;p>AOS: 6.7.1&lt;/p>
&lt;p>NKE: 2.9&lt;/p>
&lt;p>OpenShift : 4.13&lt;/p>
&lt;p>Openshift IPI on Nutanix AHV&lt;/p>
&lt;h2 id="ndk-install-lab">NDK install Lab
&lt;/h2>&lt;h3 id="install-helm-chart-on-bastion">install helm chart on bastion
&lt;/h3>&lt;p>&lt;a class="link" href="https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html/building_applications/working-with-helm-charts" target="_blank" rel="noopener"
>https://access.redhat.com/documentation/zh-tw/openshift_container_platform/4.13/html/building_applications/working-with-helm-charts&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ sudo curl -L https://mirror.openshift.com/pub/openshift-v4/clients/helm/latest/helm-linux-amd64 -o /usr/local/bin/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo chmod +x /usr/local/bin/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version.BuildInfo{Version:&amp;#34;v3.13.2+35.el9&amp;#34;, GitCommit:&amp;#34;fa6e939d7984e1be0d6fbc2dc920b6bbcf395932&amp;#34;, GitTreeState:&amp;#34;clean&amp;#34;, GoVersion:&amp;#34;go1.20.12&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm repo add nutanix https://nutanix.github.io/helm/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="nutanix--csi-30-beta">Nutanix CSI 3.0 (beta)
&lt;/h3>&lt;h4 id="create-ocp-secret">Create OCP Secret
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Create Secret pc and pe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vi ntnx-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # prism-element-ip:prism-port:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: pe-ip:9440:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vi ntnx-pc-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-pc-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # prism-pc-ip:prism-port:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: pc-ip:9440:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f ntnx-pc-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f ntnx-secret.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="install-csi-driver">Install CSI Driver
&lt;/h4>&lt;ol>
&lt;li>Download CSI Driver and Edit value.yaml&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">beta&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1912.&lt;/span>&lt;span class="n">tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xvf&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">beta&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1912.&lt;/span>&lt;span class="n">tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Chart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">NOTES&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">_helpers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tpl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">driver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">machine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configmap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">secret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">helmignore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Nutanix&lt;/span> &lt;span class="n">core_k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi_beta1&lt;/span> &lt;span class="n">Notice&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">questions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yml&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>
&lt;p>Edit values.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cd nutanix-csi-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># all namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">createPrismCentralSecret: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># prismCentralEndPoint: 00.00.00.00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># pcUsername: username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># pcPassword: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pcSecretName: ntnx-pc-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">createSecret: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># prismEndPoint: 00.00.000.000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># username: username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># password: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">peSecretName: ntnx-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Install CSI Driver using helm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WARNING&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Kubernetes&lt;/span> &lt;span class="n">configuration&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">group&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">readable&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">This&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">insecure&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Location&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LAST&lt;/span> &lt;span class="n">DEPLOYED&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Mon&lt;/span> &lt;span class="n">May&lt;/span> &lt;span class="mi">20&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">01&lt;/span> &lt;span class="mi">2024&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STATUS&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">deployed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REVISION&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TEST&lt;/span> &lt;span class="n">SUITE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTES&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Driver&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Nutanix&lt;/span> &lt;span class="n">CSI&lt;/span> &lt;span class="n">provider&lt;/span> &lt;span class="n">was&lt;/span> &lt;span class="n">deployed&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">namespace&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Check&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="s1">&amp;#39;s status by running:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubectl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;nutanix-csi&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">describe&lt;/span> &lt;span class="n">daemonset&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">----&lt;/span> &lt;span class="o">-------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Warning&lt;/span> &lt;span class="n">FailedCreate&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x19&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">daemonset&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span> &lt;span class="n">Error&lt;/span> &lt;span class="n">creating&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-node-&amp;#34;&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">forbidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">unable&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">validate&lt;/span> &lt;span class="n">against&lt;/span> &lt;span class="n">any&lt;/span> &lt;span class="n">security&lt;/span> &lt;span class="n">context&lt;/span> &lt;span class="n">constraint&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">provider&lt;/span> &lt;span class="s2">&amp;#34;anyuid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Forbidden&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">usable&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">serviceaccount&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Apply privilege to openshift-cluster-csi-drivers namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">project&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Now&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">project&lt;/span> &lt;span class="s2">&amp;#34;ntnx-system&amp;#34;&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="s2">&amp;#34;https://api.ocplab.nutanixlab.local:6443&amp;#34;&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">privileged&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-controller&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">privileged&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-node&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">anyuid&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">anyuid&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-controller&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">adm&lt;/span> &lt;span class="n">policy&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span> &lt;span class="n">anyuid&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">clusterrole&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authorization&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">scc&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">anyuid&lt;/span> &lt;span class="n">added&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nutanix-csi-node&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Check CSI installed&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc get all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-controller-844589fc9f-4jr5m 7/7 Running 3 (16h ago) 16h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-controller-844589fc9f-wwq7m 7/7 Running 4 (16h ago) 16h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-node-fkmdd 3/3 Running 0 16h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-node-hjnwg 3/3 Running 0 16h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-csi-node-pwqwl 3/3 Running 0 16h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/nutanix-csi-metrics ClusterIP 172.30.168.77 &amp;lt;none&amp;gt; 9809/TCP,9810/TCP,9811/TCP,9812/TCP 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY UP-TO-DATE AVAILABLE NODE SELECTOR AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">daemonset.apps/nutanix-csi-node 3 3 3 3 3 kubernetes.io/os=linux 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/nutanix-csi-controller 2/2 2 2 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nutanix-csi-controller-844589fc9f 2 2 2 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc describe daemonset.apps/nutanix-csi-node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal SuccessfulCreate 40s daemonset-controller Created pod: nutanix-csi-node-cgdvs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal SuccessfulCreate 40s daemonset-controller Created pod: nutanix-csi-node-c49f5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal SuccessfulCreate 40s daemonset-controller Created pod: nutanix-csi-node-4j69r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>OCP Console&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240509134700168.png"
loading="lazy"
alt="image-20240509134700168"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="create-storageclass">Create StorageClass
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>create nutanix-volume.yaml&lt;/p>
&lt;/li>
&lt;li>
&lt;p>oc apply -f nutanix-volume.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim nutanix-volume.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageclass.kubernetes.io/is-default-class: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanixvolume
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/fstype: ext4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dataServiceEndPoint: IP:3260 # Prism data service ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageContainer: NX_1365_AHV_cr # Prism 上建立的Storage Container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixVolumes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #whitelistIPMode: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #chapAuth: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allowVolumeExpansion: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reclaimPolicy: Delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f nutanix-volume.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Check StorageClass&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc get storageclass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanixvolume csi.nutanix.com Delete Immediate true 121m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240509140930382.png"
loading="lazy"
alt="image-20240509140930382"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create test-pvc&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240509140956018.png"
loading="lazy"
alt="image-20240509140956018"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240509141008518.png"
loading="lazy"
alt="image-20240509141008518"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="cert-manager">Cert-manager
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>Install cert-manager tools&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">路徑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">new&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">project&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">14.5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5658&lt;/span>&lt;span class="n">d944df&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">tqqp&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">34&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cb99ff845&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="n">r6d&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">34&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">fd74b8dc7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ts6pk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">34&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="onboard-ocp-to-pc">Onboard OCP to PC
&lt;/h3>&lt;p>建立Project 把 ocp相關的VM放進去 (ocp-lab)&lt;/p>
&lt;p>用Support Portal 上下載的k8s-agent.tar 需要自行上傳到Dokcer Hub或是其他私倉，並且修改value.yaml 內的image路徑&lt;/p>
&lt;ol>
&lt;li>
&lt;p>get cluster uid and name&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">ns&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">json&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">grep&lt;/span> &lt;span class="n">uid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;openshift.io/sa.scc.uid-range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;1000020000/10000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;25c8543a-3df0-442a-83eb-5af1ab1b7be3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">infrastructure&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">yaml&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="n">infrastructureName&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">infrastructureName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qx6t5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{.status.infrastructureName}{&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#34;}&amp;#39;&lt;/span> &lt;span class="n">infrastructure&lt;/span> &lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qx6t5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">CLUSTER_UUID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="n">c8543a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">df0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">442&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">83&lt;/span>&lt;span class="n">eb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">af1ab1b7be3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">CLUSTER_INFRA_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ocplab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qx6t5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PC上的VG會多k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="err">的&lt;/span>&lt;span class="n">prefix&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="n">c8543a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">df0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">442&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">83&lt;/span>&lt;span class="n">eb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">af1ab1b7be3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Download k8s-agent.tar and ndk-1.0.0.tar&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 下載連結要重新產生&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/ndk/1.0.0/k8s-agent-1.0.0.tar?Expires=1715275315306&amp;amp;Key-Pair-Id=APKAJTTNCWPEI42QKMSA&amp;amp;Signature=exuDWlLvpFIhLfN6YpDd9SyAz1a8o0CudJabSf8j~FEAVpwd6CjFe2WgCae2Jp5gZjNwwIEvHq4lXbvRMqDWm~LEVxO9E84ribrxu2uDNbkbAuG7I0OeWEDROsdpM1-qN~g9fp16-X~Y8lG-sh1cOLz-N8hjgq83vDMeusfTUrRMQOjlrGV7h44QL0-LlIs8GkkoIJbh3rxhZO~vavCvs4EJ9uec9qH6BrQLMfstVZr7j6uLu4juf6hnEsWJzalJXZ04YaA8onpgm-jhNBj2m5fxjXlJ-iCsu6u6BSLmm2ffpzSkUUlFpoSJZX~QODiHHiQi9V9xe9R8wdkQPfo-1g__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">59.2&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">59.2&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mf">10.4&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mf">13.2&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O&lt;/span> &lt;span class="s2">&amp;#34;https://download.nutanix.com/downloads/ndk/1.0.0/ndk-1.0.0.tar?Expires=1715276310943&amp;amp;Key-Pair-Id=APKAJTTNCWPEI42QKMSA&amp;amp;Signature=A8y8JoJupVvWedB~jSHTysEZK18eyITvdT6DFw9C9JpVOhKc9jnZraaDir2DZDeRVpnPaOraMF2lR5lFqlSaikGj274ETgetuz33R0jcJ-fB44~xfXL~eK5cpqNhuuG3Yufs0biq1b8CC-frrVeupzKzOdmJyBEWXPe4GSCLWwqPubPjhUAHMKyoOgcxSd-A6kS9f~c0eEikartUrgtCjyZP-iZwPxn6gg3jGoZuHK3f2Nf~HjmyrJqwBmLQA0ibVdRTN0YkYVfplpkr5ucp8MLMPFbhdmAJZIAot8vc2-qMPoidczgU1Msd1w8NsXWMUFQBnO-Y73VZ31d4yxI31A__&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">ls&lt;/span> &lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">mv&lt;/span> &lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvf&lt;/span> &lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Chart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">helmignore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">predelete&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">preinstall&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postdelete&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postupgrade&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postinstall&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">templates&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix_agent_deployment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">schema&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">./&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core_k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Notice&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>push image to docker hub&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="s1">&amp;#39;kenxxxxxxxx:xuxxxxxxxx&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">base64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dockerconfigVubnxxxxxxxxxxxxxxxx2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;auths&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;https://index.docker.io/v1/&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;auth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;a2Vua2Vubnxxxxxxxxxxxxxxxx2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="n">dockerconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="n">dockerconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">base64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dockerconfigVubnxxxxxxxxxxxxxxxx2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">668&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">668&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240510154840948.png"
loading="lazy"
alt="image-20240510154840948"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Install k8s-agent&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">安裝失敗時可用刪除指令
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc delete clusterroles.rbac.authorization.k8s.io &amp;#34;nke-k8s-agent-preinstall&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc delete ClusterRoleBinding nke-k8s-agent-preinstall
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc delete project ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc new-project ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">!用最新版本的需要自行上傳!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Docker Hub (版本較新 v668)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">agent:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespaceOverride: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 8080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> repository: docker.io/kenkennyinfo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nke-k8s-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pullPolicy: IfNotPresent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag: 668
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> privateRegistry: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imageCredentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dockerconfig: &amp;#34;dockerconfigVubnxxxxxxxxxxxxxxxx2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> updateConfigInMin: 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> updateMetricsInMin: 360
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pc:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> insecure: false #set this to true if PC does not have https enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> endpoint: &amp;#34;&amp;#34; # eg: ip or fqdn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: &amp;#34;&amp;#34; # eg: admin or any other user with Kubernetes Infrastructure provision role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sClusterName: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sClusterUUID: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sDistribution: &amp;#34;OCP&amp;#34; # eg: CAPX or NKE or OCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">categoryMappings: &amp;#34;&amp;#34; # &amp;#34;one or more comma separated key=value&amp;#34; eg: &amp;#34;key1=value1&amp;#34; or &amp;#34;key1=value1,key2=value2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 官方quay.io (版本較舊 v594)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">agent:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespaceOverride: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 8080
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> repository: quay.io/karbon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: k8s-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pullPolicy: IfNotPresent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag: 594
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> privateRegistry: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> updateConfigInMin: 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> updateMetricsInMin: 360
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pc:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> insecure: false #set this to true if PC does not have https enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> endpoint: &amp;#34;&amp;#34; # eg: ip or fqdn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: &amp;#34;&amp;#34; # eg: admin or any other user with Kubernetes Infrastructure provision role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sClusterName: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sClusterUUID: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sDistribution: &amp;#34;OCP&amp;#34; # eg: CAPX or NKE or OCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">categoryMappings: &amp;#34;&amp;#34; # &amp;#34;one or more comma separated key=value&amp;#34; eg: &amp;#34;key1=value1&amp;#34; or &amp;#34;key1=value1,key2=value2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Helm 安裝
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm install k8s-agent-1.0.0 /home/nutanix/k8s-agent-1.0.0 --set pc.endpoint=172.16.90.75,pc.username=ocpadmin,pc.password=password,pc.insecure=true,k8sClusterName=ocplab-qx6t5,k8sClusterUUID=25c8543a-3df0-442a-83eb-5af1ab1b7be3,k8sDistribution=OCP -n ntnx-system --create-namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: k8s-agent-594
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Wed May 15 14:09:01 2024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 安裝新版本或是更改密碼可以使用helm upgrade (修改values.yaml)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm upgrade k8s-agent-594 /home/nutanix/k8s-agent-1.0.0 --set pc.endpoint=172.16.90.75,pc.username=ocpadmin,pc.password=password,pc.insecure=true,k8sClusterName=ocplab-qx6t5,k8sClusterUUID=25c8543a-3df0-442a-83eb-5af1ab1b7be3 -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Release &amp;#34;k8s-agent-594&amp;#34; has been upgraded. Happy Helming!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: k8s-agent-594
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Wed May 15 14:13:56 2024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm upgrade k8s-agent-594 /home/nutanix/k8s-agent-1.0.0 --set pc.endpoint=172.16.90.75,pc.username=ocpadmin,pc.password=password,pc.insecure=true,k8sClusterName=ocplab-qx6t5,k8sClusterUUID=25c8543a-3df0-442a-83eb-5af1ab1b7be3 -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Release &amp;#34;k8s-agent-594&amp;#34; has been upgraded. Happy Helming!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: k8s-agent-594
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Wed May 15 15:18:35 2024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## Check pods and deployments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get all -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-agent-75df9d879b-98smz 1/1 Running 0 80s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/nutanix-agent 1/1 1 1 70m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nutanix-agent-75df9d879b 1 1 1 80s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nutanix-agent-7c4b644996 0 0 0 70m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc describe deployment.apps/nutanix-agent -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CreationTimestamp: Wed, 15 May 2024 14:09:31 +0800
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: app.kubernetes.io/managed-by=Helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: deployment.kubernetes.io/revision: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> meta.helm.sh/release-name: k8s-agent-594
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> meta.helm.sh/release-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Selector: app=nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Replicas: 1 desired | 1 updated | 1 total | 1 available | 0 unavailable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">StrategyType: RollingUpdate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MinReadySeconds: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RollingUpdateStrategy: 25% max unavailable, 25% max surge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pod Template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Labels: app=nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Service Account: nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix-agent:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image: docker.io/kenkennyinfo/nke-k8s-agent:668
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Port: 8080/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Host Port: 0/TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /k8s-agent/k8s-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -pc-endpoint=172.16.90.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -pc-port=9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -insecure=true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -k8s-cluster-name=ocplab-qx6t5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -k8s-cluster-uuid=25c8543a-3df0-442a-83eb-5af1ab1b7be3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -k8s-distribution=OCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -k8s-cluster-category=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -update-config-in-min=10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -update-metrics-in-min=360
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: 500m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: 128Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: 250m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: 64Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Liveness: http-get http://:8080/health delay=5s timeout=5s period=15s #success=1 #failure=3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Readiness: http-get http://:8080/readiness delay=5s timeout=1s period=10s #success=1 #failure=3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Environment: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Mounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /certs from pc-creds-volume (ro)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pc-creds-volume:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: Secret (a volume populated by a Secret)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> SecretName: nutanix-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Optional: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Conditions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Status Reason
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Available True MinimumReplicasAvailable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Progressing True NewReplicaSetAvailable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OldReplicaSets: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NewReplicaSet: nutanix-agent-75df9d879b (1/1 replicas created)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Reason Age From Message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ---- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal ScalingReplicaSet 70m deployment-controller Scaled up replica set nutanix-agent-7c4b644996 to 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal ScalingReplicaSet 84s deployment-controller Scaled up replica set nutanix-agent-75df9d879b to 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal ScalingReplicaSet 73s deployment-controller Scaled down replica set nutanix-agent-7c4b644996 to 0 from 1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安裝後進入Prism Central 確認已 Onboard 完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240515150336316.png"
loading="lazy"
alt="image-20240515150336316"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240515150407687.png"
loading="lazy"
alt="image-20240515150407687"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240515142010187.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240515142031619.png"
loading="lazy"
alt="image-20240515142031619"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240515142042758.png"
loading="lazy"
alt="image-20240515142042758"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ndk-install-without-tls">NDK Install without TLS
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>下載 ndk-1.0.0.tar 並解壓縮&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">Expires&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1715793783203&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">Key&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Pair&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">APKAJTTNCWPEI42QKMSA&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">Signature&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">bT&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">JG3wJjEQ3dvNO85khPiJq1yVxAH6YPV7PGtJvKaf4iJVRDfQIockkqSyH3ZubXpSvF2loZAXqvueSef41SZa9vSzEC1zrc&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">IzwcCjAcXnAbXC1LGy566yIBvwNaFm1qSr0jONb3zwzckNHidS8QmTRRyscaiHdF8xQ&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="n">gD0MQfKBlrl4hej3Pnae0ckMZoT5yCPzAv8vQU5XhvL0YECmy2T6LhBH13mxHpijM70aACCjdE5KdlCHFrSZhsDYYy5FWRYT02q70mM4SAUNYYcBnW4FNmmKuPWPyq0r2lcJRktIOgfQOHvUv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qw0vyrEdRj7QmgWpiCAAoSfqWl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lKA__&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xvf&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">tree&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="n">chart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">Chart&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">crds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_applicationsnapshotcontents&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_applicationsnapshotreplications&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_applicationsnapshotrestores&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_applicationsnapshots&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_applications&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_appprotectionplans&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_protectionplans&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_remotes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_replicationtargets&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">dataservices&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_storageclusters&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">└──&lt;/span> &lt;span class="n">scheduler&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com_jobschedulers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">Nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Disclosure&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">Nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">juno&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Disclosure&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">Nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">juno&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Disclosure&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">Nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Disclosure&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">templates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">precheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">_helpers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tpl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">intercom&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">leader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">election&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reader&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pvc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">secret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">├──&lt;/span> &lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certificate&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">│&lt;/span>   &lt;span class="err">└──&lt;/span> &lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">│&lt;/span>   &lt;span class="err">└──&lt;/span> &lt;span class="n">values&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">└──&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">3&lt;/span> &lt;span class="n">directories&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">36&lt;/span> &lt;span class="n">files&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>儲存Container image 並上傳至Docker hub or 私倉&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Load Images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Writing&lt;/span> &lt;span class="n">manifest&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">destination&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Storing&lt;/span> &lt;span class="n">signatures&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Loaded&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Loaded&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Loaded&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Loaded&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Tag Images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&amp;lt;&lt;/span>&lt;span class="n">conatiner&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">tag&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># batch tag images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">img&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">docker&lt;/span> &lt;span class="n">tag&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">img&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">img&lt;/span>&lt;span class="p">};&lt;/span> &lt;span class="n">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Emulate&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">CLI&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">podman&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nodocker&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Emulate&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">CLI&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">podman&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nodocker&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">known&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Emulate&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">CLI&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">podman&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nodocker&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Emulate&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">CLI&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">podman&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nodocker&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">quiet&lt;/span> &lt;span class="n">msg&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rhel9&lt;/span> &lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REPOSITORY&lt;/span> &lt;span class="n">TAG&lt;/span> &lt;span class="n">IMAGE&lt;/span> &lt;span class="n">ID&lt;/span> &lt;span class="n">CREATED&lt;/span> &lt;span class="n">SIZE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">ebffd7549ea5&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">69.2&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">ebffd7549ea5&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">69.2&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2982&lt;/span>&lt;span class="n">ed521b0e&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mi">60&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2982&lt;/span>&lt;span class="n">ed521b0e&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mi">60&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">bda464636b6&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">61.7&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="mi">668&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">bda464636b6&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">61.7&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">bda464636b6&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">61.7&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">bda464636b6&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">61.7&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">quay&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="mi">594&lt;/span> &lt;span class="mi">171&lt;/span>&lt;span class="n">ea3376596&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">58.4&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">d594a3e567b7&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">59.1&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">d594a3e567b7&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">months&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">59.1&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span> &lt;span class="n">ad393d6a4d1b&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">years&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">50.2&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">localhost&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span> &lt;span class="n">ad393d6a4d1b&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">years&lt;/span> &lt;span class="n">ago&lt;/span> &lt;span class="mf">50.2&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Push Images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rbac&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">podman&lt;/span> &lt;span class="n">push&lt;/span> &lt;span class="n">kenkennyinfo&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ndk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立Secret，修改 chart/values.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 建立Docker hub secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim nutanix-k8s-agent-pull-secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanix-k8s-agent-pull-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type: kubernetes.io/dockerconfigjson
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .dockerconfigjson: &amp;#34;dockerconfigVubnxxxxxxxxxxxxxxxx2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim ntnx-pc-secret2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-pc-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # prism-pc-ip:prism-port:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: 172.16.90.75:9440:ocpadmin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f nutanix-k8s-agent-pull-secret.yaml -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f ntnx-pc-secret2.yaml -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get secret -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE DATA AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix-k8s-agent-pull-secret kubernetes.io/dockerconfigjson 1 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim /home/nutanix/ndk-1.0.0/chart/values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">manager:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image Repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> repository: kenkennyinfo/ndk-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image tag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # @default -- .Chart.AppVersion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag: 1.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image pull policy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pullPolicy: Always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infraManager:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image Repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> repository: kenkennyinfo/ndk-infra-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image tag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # @default -- .Chart.AppVersion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag: 1.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image pull policy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pullPolicy: Always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubeRbacProxy:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image Repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> repository: kenkennyinfo/ndk-kube-rbac-proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image tag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # @default -- .Chart.AppVersion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag: v0.8.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jobScheduler:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image Repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> repository: kenkennyinfo/ndk-job-scheduler
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image tag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # @default -- .Chart.AppVersion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag: 1.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # -- Image pull policy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pullPolicy: Always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">imageCredentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Name of the secret containing the credentials to pull image from the container registry.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imagePullSecretName: nutanix-k8s-agent-pull-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterName: ocplab.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> intercomService:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - port: 2021
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> targetPort: 2021
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: NodePort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝NDK&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"> helm install ndk -n ntnx-system &amp;lt;chart-location&amp;gt; --set tls.server.enable=false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm install ndk -n ntnx-system /home/nutanix/ndk-1.0.0/chart/ --set tls.server.enable=false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: ndk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Wed May 15 17:14:37 2024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pods -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ndk-controller-manager-55bf75f64b-blnfc 4/4 Running 0 3m57s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix-agent-75df9d879b-98smz 1/1 Running 0 120m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc adm policy add-scc-to-user anyuid -z ndk-controller-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/system:openshift:scc:anyuid added: &amp;#34;ndk-controller-manager&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ helm upgrade ndk -n ntnx-system /home/nutanix/ndk-1.0.0/chart/ --set tls.server.enable=false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/nutanix/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Release &amp;#34;ndk&amp;#34; has been upgraded. Happy Helming!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: ndk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Mon May 20 17:57:43 2024
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝完成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc get all -n ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/ndk-controller-manager-55bf75f64b-blnfc 4/4 Running 0 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nutanix-agent-75df9d879b-98smz 1/1 Running 0 19h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/ndk-controller-manager-metrics-service ClusterIP 172.30.186.204 &amp;lt;none&amp;gt; 8443/TCP 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/ndk-intercom-service NodePort 172.30.237.126 &amp;lt;none&amp;gt; 2021:30998/TCP 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/ndk-scheduler-webhook-service ClusterIP 172.30.64.110 &amp;lt;none&amp;gt; 9444/TCP 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/ndk-webhook-service ClusterIP 172.30.66.56 &amp;lt;none&amp;gt; 443/TCP 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/ndk-controller-manager 1/1 1 1 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/nutanix-agent 1/1 1 1 20h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/ndk-controller-manager-55bf75f64b 1 1 1 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nutanix-agent-75df9d879b 1 1 1 19h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nutanix-agent-7c4b644996 0 0 0 20h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240516110205960.png"
loading="lazy"
alt="image-20240516110205960"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試NDK 連線 grpcurl&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ podman pull fullstorydev/grpcurl:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ podman run fullstorydev/grpcurl -plaintext 172.16.90.180:30998 list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grpc.reflection.v1.ServerReflection
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grpc.reflection.v1alpha.ServerReflection
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">juno_interface.Juno
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="storage-cluster">Storage Cluster
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>取得PC、PE的Cluster UUID&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">on Prism Central CVM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ncli cluster info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Id : 8c52e6be-697b-42a4-bacd-8e6ada7994f2::4237199414008583410
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Uuid : 8c52e6be-697b-42a4-bacd-8e6ada7994f2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Name : NTNXSELABPC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Version : pc.2023.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Full Version : el7.3-release-fraser-2023.4-stable-e10760423ef518a91beb02b784c7ff2e0cf3a45c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster FQDN : NTNXSELABPC.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Is LTS : false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> External Data Services... :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Support Verbosity Level : BASIC_COREDUMP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Lock Down Status : Disabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Password Remote Login ... : Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Timezone : America/Los_Angeles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NCC Version : ncc-4.6.6.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Degraded Node Monitoring : Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">on Prism Element CVM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ncli cluster info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Id : 00060f36-1379-a8ba-0000-000000028e95::167573
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Uuid : 00060f36-1379-a8ba-0000-000000028e95
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Name : NX1365G6PE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Version : 6.7.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Full Version : el7.3-release-fraser-6.7.1-stable-104e6662e8b936a9225379d2d68efd93b5448289
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> External IP address : 172.16.90.74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Node Count : 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Block Count : 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Shadow Clones Status : Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Has Self Encrypting Disk : no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Masquerading I... :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cluster Masquerading PORT :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Is registered to PC : true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Rf1 Container Support : Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Rebuild Reservation : Disabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Encryption In Transit : Disabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Is LTS : false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> External Data Services... : 172.16.90.76
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Support Verbosity Level : BASIC_COREDUMP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Lock Down Status : Disabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Password Remote Login ... : Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Timezone : Asia/Taipei
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NCC Version : ncc-4.6.6.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Degraded Node Monitoring : Enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立StorageCluster.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim storagecluster-1365g6.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageCluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nx1365g6pe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageServerUuid: 00060f36-1379-a8ba-0000-000000028e95
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> managementServerUuid: 8c52e6be-697b-42a4-bacd-8e6ada7994f2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f storagecluster-1365g6.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get storagecluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AVAILABLE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">storagecluster-1365g6 true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get storagecluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AVAILABLE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nx1365g6pe false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="create-sample-app">Create Sample App
&lt;/h3>&lt;h4 id="mysql">MySQL
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Mysql 測試，建立mysql.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deploy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Secret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">opaque&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">stringData&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">MYSQL_ROOT_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">StatefulSet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">serviceName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;mysql&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">replicas&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">template&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">terminationGracePeriodSeconds&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">containers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">8.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">containerPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">store&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mysql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">env&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">MYSQL_ROOT_PASSWORD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valueFrom&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">secretKeyRef&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">key&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">MYSQL_ROOT_PASSWORD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volumeClaimTemplates&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">store&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">accessModes&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ReadWriteOnce&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">storageClassName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nutanixvolume&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resources&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">requests&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">storage&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">mysql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">accessModes&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ReadWriteOnce&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">storageClassName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">nutanixvolume&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resources&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">requests&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">storage&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">Gi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立Mysql app&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc new-project ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f mysql-deploy.yaml -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">secret/mysql-password created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps/mysql-set created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pods
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-set-0 0/1 ContainerCreating 0 42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pods
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-set-0 1/1 Running 0 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-set-1 1/1 Running 0 2m22s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-set-2 1/1 Running 0 72s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pvc,pv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-data-1-mysql-set-0 Bound pvc-276ea905-a815-4635-98c0-3a4fade1bc44 3Gi RWO nutanixvolume 6m24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-data-1-mysql-set-1 Bound pvc-5638dc79-8271-4a49-94b9-d22c6212e232 3Gi RWO nutanixvolume 5m28s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-data-1-mysql-set-2 Bound pvc-a4e832f4-e99b-4bdc-bc5b-253731447ce4 3Gi RWO nutanixvolume 4m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-store-mysql-set-0 Bound pvc-262a52dc-1861-4992-b2aa-e41f448a6db5 5Gi RWO nutanixvolume 6m24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-store-mysql-set-1 Bound pvc-1e809e1d-2190-4220-80ba-35712900d3a6 5Gi RWO nutanixvolume 5m28s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-store-mysql-set-2 Bound pvc-fafd94af-11be-4b02-aef1-4d959607c0cf 5Gi RWO nutanixvolume 4m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-127de2ed-452d-4fc2-a08e-f320cc4c85e0 1Gi RWO Delete Bound default/my-pvc nutanixvolume 6d23h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-1e809e1d-2190-4220-80ba-35712900d3a6 5Gi RWO Delete Bound ndk-mysql/mysql-store-mysql-set-1 nutanixvolume 5m22s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-262a52dc-1861-4992-b2aa-e41f448a6db5 5Gi RWO Delete Bound ndk-mysql/mysql-store-mysql-set-0 nutanixvolume 6m15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-276ea905-a815-4635-98c0-3a4fade1bc44 3Gi RWO Delete Bound ndk-mysql/mysql-data-1-mysql-set-0 nutanixvolume 6m14s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-5638dc79-8271-4a49-94b9-d22c6212e232 3Gi RWO Delete Bound ndk-mysql/mysql-data-1-mysql-set-1 nutanixvolume 5m21s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-8468392e-a564-4d05-81f1-175820eceba2 1Gi RWO Delete Bound default/test-pvc nutanixvolume 20h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-a4e832f4-e99b-4bdc-bc5b-253731447ce4 3Gi RWO Delete Bound ndk-mysql/mysql-data-1-mysql-set-2 nutanixvolume 4m9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-fafd94af-11be-4b02-aef1-4d959607c0cf 5Gi RWO Delete Bound ndk-mysql/mysql-store-mysql-set-2 nutanixvolume 4m9s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240521094917993.png"
loading="lazy"
alt="image-20240521094917993"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240521094932643.png"
loading="lazy"
alt="image-20240521094932643"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Application CR&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim mysql-cr.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: mysql-cr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> applicationSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc apply -f mysql-cr.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get application
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AGE LAST-STATUS-UPDATE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-cr 31s 31s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="ndk-snapshot">NDK Snapshot
&lt;/h3>&lt;h4 id="manual-local-snapshot">Manual Local Snapshot
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Create Application Snapshot CR&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim mysql-snap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ApplicationSnapshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: mysql-snap-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> source:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> applicationRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: mysql-cr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Apply Snapshot&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc apply -f mysql-snap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">applicationsnapshot.dataservices.nutanix.com/mysql-snap-1 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get applicationsnapshot -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AGE READY-TO-USE BOUND-SNAPSHOTCONTENT SNAPSHOT-AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-snap-1 8s false asc-8889156a-43f2-4d95-9075-11ccd52c9457
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get applicationsnapshot -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AGE READY-TO-USE BOUND-SNAPSHOTCONTENT SNAPSHOT-AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-snap-1 58s true asc-8889156a-43f2-4d95-9075-11ccd52c9457 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc describe applicationsnapshot -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: mysql-snap-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kind: ApplicationSnapshot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Timestamp: 2024-05-22T10:10:24Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Finalizers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dataservices.nutanix.com/app-snap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Managed Fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fields Type: FieldsV1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldsV1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:kubectl.kubernetes.io/last-applied-configuration:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:source:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:applicationRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Manager: kubectl-client-side-apply
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Operation: Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time: 2024-05-22T10:10:24Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fields Type: FieldsV1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldsV1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:finalizers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v:&amp;#34;dataservices.nutanix.com/app-snap&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Manager: manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Operation: Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time: 2024-05-22T10:10:24Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fields Type: FieldsV1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldsV1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:boundApplicationSnapshotContentName:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:creationTime:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:readyToUse:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:summary:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:snapshotArtifacts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:apps/v1/StatefulSet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:authorization.openshift.io/v1/RoleBinding:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:rbac.authorization.k8s.io/v1/RoleBinding:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:v1/ConfigMap:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:v1/PersistentVolumeClaim:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:v1/Secret:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:v1/ServiceAccount:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Manager: manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Operation: Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subresource: status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time: 2024-05-22T10:10:52Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Resource Version: 48052327
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UID: 8889156a-43f2-4d95-9075-11ccd52c9457
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Source:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Application Ref:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-cr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Bound Application Snapshot Content Name: asc-8889156a-43f2-4d95-9075-11ccd52c9457
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Time: 2024-05-22T10:10:52Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ready To Use: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Summary:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Snapshot Artifacts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apps/v1/StatefulSet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-set
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> authorization.openshift.io/v1/RoleBinding:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: system:image-builders
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: system:deployers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: system:image-pullers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rbac.authorization.k8s.io/v1/RoleBinding:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: system:image-builders
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: system:image-pullers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: system:deployers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v1/ConfigMap:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: openshift-service-ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: kube-root-ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v1/PersistentVolumeClaim:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-store-mysql-set-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-store-mysql-set-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-data-1-mysql-set-0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-data-1-mysql-set-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-data-1-mysql-set-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-store-mysql-set-0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v1/Secret:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: default-token-rpqq4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: mysql-password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: deployer-token-cc92m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: builder-token-xk5g4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v1/ServiceAccount:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: deployer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: builder
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>OCP 上的 Volume Snapshot&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523091131334.png"
loading="lazy"
alt="image-20240523091131334"
>&lt;/p>
&lt;p>OCP Volume SnapshotContents&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523091201873.png"
loading="lazy"
alt="image-20240523091201873"
>&lt;/p>
&lt;p>Nutanix Prism Central - VG Recovery Point&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523091508568.png"
loading="lazy"
alt="image-20240523091508568"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ndk-restore">NDK Restore
&lt;/h3>&lt;h4 id="restore--local-snapshot">Restore Local Snapshot
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>Delete mysql.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 nutanix nutanix 393 May 16 13:45 mysql-cr.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 nutanix nutanix 1213 May 16 11:18 mysql-deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 nutanix nutanix 183 May 20 15:45 mysql-snap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pvc -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-data-1-mysql-set-0 Bound pvc-276ea905-a815-4635-98c0-3a4fade1bc44 3Gi RWO nutanixvolume 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-data-1-mysql-set-1 Bound pvc-5638dc79-8271-4a49-94b9-d22c6212e232 3Gi RWO nutanixvolume 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-data-1-mysql-set-2 Bound pvc-a4e832f4-e99b-4bdc-bc5b-253731447ce4 3Gi RWO nutanixvolume 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-store-mysql-set-0 Bound pvc-262a52dc-1861-4992-b2aa-e41f448a6db5 5Gi RWO nutanixvolume 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-store-mysql-set-1 Bound pvc-1e809e1d-2190-4220-80ba-35712900d3a6 5Gi RWO nutanixvolume 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql-store-mysql-set-2 Bound pvc-fafd94af-11be-4b02-aef1-4d959607c0cf 5Gi RWO nutanixvolume 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/mysql-set-0 1/1 Running 0 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/mysql-set-1 1/1 Running 0 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/mysql-set-2 1/1 Running 0 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps/mysql-set 3/3 4d4h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc delete app mysql-cr -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">application.dataservices.nutanix.com &amp;#34;mysql-cr&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc delete -f mysql-deploy.yaml -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">secret &amp;#34;mysql-password&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps &amp;#34;mysql-set&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc delete pvc --all -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;mysql-data-1-mysql-set-0&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;mysql-data-1-mysql-set-1&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;mysql-data-1-mysql-set-2&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;mysql-store-mysql-set-0&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;mysql-store-mysql-set-1&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;mysql-store-mysql-set-2&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pvc -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No resources found in ndk-mysql namespace.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get all -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No resources found in ndk-mysql namespace.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240520160111632.png" alt="image-20240520160111632" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>Create Application Restore CR&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim mysql-restore.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ApplicationSnapshotRestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: restore-mysql-snap-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> applicationSnapshotName: mysql-snap-1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>oc apply restore CR&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc apply -f mysql-restore.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">applicationsnapshotrestore.dataservices.nutanix.com/restore-mysql-snap-1 created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get applicationsnapshotrestore -n ndk-mysql -o yaml -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME SNAPSHOT-NAME COMPLETED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restore-mysql-snap-1 mysql-snap-1 true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc describe applicationsnapshotrestore restore-mysql-snap-1 -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: restore-mysql-snap-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Namespace: ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kind: ApplicationSnapshotRestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Creation Timestamp: 2024-05-22T10:14:26Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Finalizers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dataservices.nutanix.com/application-restore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Managed Fields:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fields Type: FieldsV1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldsV1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:kubectl.kubernetes.io/last-applied-configuration:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:applicationSnapshotName:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Manager: kubectl-client-side-apply
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Operation: Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time: 2024-05-22T10:14:26Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fields Type: FieldsV1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldsV1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:finalizers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> v:&amp;#34;dataservices.nutanix.com/application-restore&amp;#34;:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Manager: manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Operation: Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time: 2024-05-22T10:14:26Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API Version: dataservices.nutanix.com/v1alpha1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Fields Type: FieldsV1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldsV1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:completed:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> f:conditions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Manager: manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Operation: Update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subresource: status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Time: 2024-05-22T10:14:43Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Resource Version: 48054533
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> UID: 7a10fa58-3aaa-4592-8bdf-f6db2e9c4a0d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Application Snapshot Name: mysql-snap-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Completed: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Conditions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2024-05-22T10:14:26Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Message:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observed Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reason: RequestCompleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: False
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: Progressing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2024-05-22T10:14:27Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Message: All prechecks passed and finalizers on dependent resources set. Skipped restoring resources since they already exist: [&amp;#34;/v1, Kind=ConfigMap, ndk-mysql/openshift-service-ca.crt&amp;#34;,&amp;#34;/v1, Kind=ServiceAccount, ndk-mysql/default&amp;#34;,&amp;#34;/v1, Kind=Secret, ndk-mysql/builder-token-xk5g4&amp;#34;,&amp;#34;/v1, Kind=ServiceAccount, ndk-mysql/deployer&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/admin&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/admin&amp;#34;,&amp;#34;/v1, Kind=Secret, ndk-mysql/default-token-rpqq4&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/system:image-pullers&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/system:image-pullers&amp;#34;,&amp;#34;/v1, Kind=Secret, ndk-mysql/deployer-token-cc92m&amp;#34;,&amp;#34;/v1, Kind=ServiceAccount, ndk-mysql/builder&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/system:image-builders&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/system:image-builders&amp;#34;,&amp;#34;/v1, Kind=ConfigMap, ndk-mysql/kube-root-ca.crt&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/system:deployers&amp;#34;,&amp;#34;rbac.authorization.k8s.io/v1, Kind=RoleBinding, ndk-mysql/system:deployers&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observed Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reason: PrechecksPassed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: PrechecksPassed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2024-05-22T10:14:27Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Message: All eligible volumes restored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observed Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reason: VolumesRestored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: VolumesRestored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2024-05-22T10:14:28Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Message: All eligible application configs restored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observed Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reason: ApplicationConfigRestored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: ApplicationConfigRestored
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last Transition Time: 2024-05-22T10:14:43Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Message: Application restore successfully finalised
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Observed Generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Reason: ApplicationRestoreFinalised
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Status: True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type: ApplicationRestoreFinalised
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Reason Age From Message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ---- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal WaitingForVolumeBound 55s (x2 over 55s) NDK Waiting for PVCs to get Bound. Unbound PVCs: [mysql-store-mysql-set-2 mysql-data-1-mysql-set-0 mysql-store-mysql-set-1 mysql-data-1-mysql-set-2 mysql-data-1-mysql-set-1 mysql-store-mysql-set-0]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認Application 、PVC、PV 復原完成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc get all -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/mysql-set-0 1/1 Running 0 2m9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/mysql-set-1 1/1 Running 0 106s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/mysql-set-2 1/1 Running 0 92s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps/mysql-set 3/3 2m10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get pv,pvc -n ndk-mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-06e3f4c4-c4f1-415f-8194-2e4d356570d0 5Gi RWO Delete Bound ndk-mysql/mysql-store-mysql-set-1 nutanixvolume 3m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-094bda7b-6a4d-44f1-a275-288d73b5545a 3Gi RWO Delete Bound ndk-mysql/mysql-data-1-mysql-set-2 nutanixvolume 3m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-5cc840da-2fc9-431f-8c99-9948fe8b70f1 5Gi RWO Delete Bound ndk-mysql/mysql-store-mysql-set-2 nutanixvolume 3m39s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-928e91ad-87db-41b6-96bd-e12d86608cbf 5Gi RWO Delete Bound ndk-mysql/mysql-store-mysql-set-0 nutanixvolume 3m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-9b9aba57-c449-419f-9a09-5e4960604321 3Gi RWO Delete Bound ndk-mysql/mysql-data-1-mysql-set-1 nutanixvolume 3m40s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-dccfcf6d-c9fd-45c0-9a93-53d94e96fdf6 3Gi RWO Delete Bound ndk-mysql/mysql-data-1-mysql-set-0 nutanixvolume 3m40s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-data-1-mysql-set-0 Bound pvc-dccfcf6d-c9fd-45c0-9a93-53d94e96fdf6 3Gi RWO nutanixvolume 3m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-data-1-mysql-set-1 Bound pvc-9b9aba57-c449-419f-9a09-5e4960604321 3Gi RWO nutanixvolume 3m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-data-1-mysql-set-2 Bound pvc-094bda7b-6a4d-44f1-a275-288d73b5545a 3Gi RWO nutanixvolume 3m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-store-mysql-set-0 Bound pvc-928e91ad-87db-41b6-96bd-e12d86608cbf 5Gi RWO nutanixvolume 3m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-store-mysql-set-1 Bound pvc-06e3f4c4-c4f1-415f-8194-2e4d356570d0 5Gi RWO nutanixvolume 3m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/mysql-store-mysql-set-2 Bound pvc-5cc840da-2fc9-431f-8c99-9948fe8b70f1 5Gi RWO nutanixvolume 3m48s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523091940333.png"
loading="lazy"
alt="image-20240523091940333"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523092014313.png"
loading="lazy"
alt="image-20240523092014313"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523092030321.png"
loading="lazy"
alt="image-20240523092030321"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prism Central - Kubernetes Clusters&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/05/image-20240523091852050.png"
loading="lazy"
alt="image-20240523091852050"
>&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>OCP-4.12.45_on_Nutanix(IPI)</title><link>https://wangken0129.github.io/p/ocp-4.12.45_on_nutanixipi/</link><pubDate>Mon, 04 Mar 2024 08:15:21 +0800</pubDate><guid>https://wangken0129.github.io/p/ocp-4.12.45_on_nutanixipi/</guid><description>&lt;h1 id="ocp41245-on-nutanix---ipi">OCP4.12.45 on Nutanix - IPI
&lt;/h1>&lt;p>Using IPI method install ocp 4.12.45 ( Stable )&lt;/p>
&lt;p>大致步驟&lt;/p>
&lt;ol>
&lt;li>建立Bastion&lt;/li>
&lt;li>建立Nutanix Prism Central CA&lt;/li>
&lt;li>建立Install-config.yaml&lt;/li>
&lt;li>建立OCP Cluster&lt;/li>
&lt;li>Nutanix CSI Operator&lt;/li>
&lt;li>Worker node autoscale&lt;/li>
&lt;/ol>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;p>Disk Resize:&lt;/p>
&lt;p>&lt;a class="link" href="https://www.geekersdigest.com/how-to-extend-grow-linux-file-systems-without-downtime/#using-disk-partitions-vm" target="_blank" rel="noopener"
>https://www.geekersdigest.com/how-to-extend-grow-linux-file-systems-without-downtime/#using-disk-partitions-vm&lt;/a>&lt;/p>
&lt;p>CA:&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nutanix.dev/2023/09/26/generating-a-self-signed-san-certificate-to-use-red-hat-openshift-in-nutanix-marketplace/" target="_blank" rel="noopener"
>https://www.nutanix.dev/2023/09/26/generating-a-self-signed-san-certificate-to-use-red-hat-openshift-in-nutanix-marketplace/&lt;/a>&lt;/p>
&lt;p>Installation:&lt;/p>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=G8fFB6EUiOA" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=G8fFB6EUiOA&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.12/installing/installing_nutanix/installing-restricted-networks-nutanix-installer-provisioned.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.12/installing/installing_nutanix/installing-restricted-networks-nutanix-installer-provisioned.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nutanix.dev/2022/08/16/red-hat-openshift-ipi-on-nutanix-cloud-platform/" target="_blank" rel="noopener"
>https://www.nutanix.dev/2022/08/16/red-hat-openshift-ipi-on-nutanix-cloud-platform/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.12/installing/disconnected_install/installing-mirroring-disconnected.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.12/installing/disconnected_install/installing-mirroring-disconnected.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/weixin_43902588/article/details/107727804" target="_blank" rel="noopener"
>https://blog.csdn.net/weixin_43902588/article/details/107727804&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/clients/ocp/4.12.45/" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/clients/ocp/4.12.45/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231214105046158.png"
loading="lazy"
alt="image-20231214105046158"
>&lt;/p>
&lt;h2 id="cluster-information">Cluster Information
&lt;/h2>&lt;p>Prism Central: IP + DNS FQDN&lt;/p>
&lt;p>Prism Element: IP + DNS FQDN&lt;/p>
&lt;p>iSCSI Data Service: IP&lt;/p>
&lt;p>DNS Server: IP&lt;/p>
&lt;p>NTP: IP&lt;/p>
&lt;p>Network Subnet: Name
VM Network IPAM: IP Range&lt;/p>
&lt;hr>
&lt;p>bastion: IP&lt;/p>
&lt;p>OCP Cluster Name: poc&lt;/p>
&lt;p>OCP Cluster Base Domain: Domain Name&lt;/p>
&lt;p>OCP API VIP: IP + DNS FQDN&lt;/p>
&lt;p>OCP Ingress VIP: IP + DNS FQDN&lt;/p>
&lt;h2 id="create-bastion-vm-rhel93">Create Bastion VM rhel9.3
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>從Prism建立rhel 9.3 VM，配置vCPU, Memory, Disk, Network，掛rhel 9.3 的 iso檔案並開機&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231228092100302.png"
loading="lazy"
alt="image-20231228092100302"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231228092139601.png"
loading="lazy"
alt="image-20231228092139601"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開機後點選Console, 設定基本的帳號密碼、網路、硬碟等&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231214143007168.png"
loading="lazy"
alt="image-20231214143007168"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完成ssh 進入bastion&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載ccoctl、openshift-install、oc client&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ wget https://mirror.openshift.com/pub/openshift-v4/clients/ocp/4.12.45/ccoctl-linux-4.12.45.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wget https://mirror.openshift.com/pub/openshift-v4/clients/ocp/4.12.45/openshift-client-linux-4.12.45.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ wget https://mirror.openshift.com/pub/openshift-v4/clients/ocp/4.12.45/openshift-install-linux-4.12.45.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221102507731.png"
loading="lazy"
alt="image-20231221102507731"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>解壓縮下載的bin檔，並放到/usr/local/bin、建立ocp-install資料夾&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ tar xvf ccoctl-linux-4.12.45.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tar xvf openshift-client-linux-4.12.45.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ tar xvf openshift-install-linux-4.12.45.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ chmod 775 ccoctl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo cp ccoctl oc kubectl openshift-install /usr/local/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir ocp-install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cp openshift-install ocp-install/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client Version: 4.12.45
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kustomize Version: v4.5.7
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221102521345.png"
loading="lazy"
alt="image-20231221102521345"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221102532790.png"
loading="lazy"
alt="image-20231221102532790"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載pull-secret from registry.redhat.io&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">{&amp;#34;auths&amp;#34;:{&amp;#34;cloud.openshift.com&amp;#34;:{&amp;#34;auth&amp;#34;:.....}}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Create SSH Key&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ssh-keygen
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221102325288.png"
loading="lazy"
alt="image-20231221102325288"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="prism-central-ca">Prism Central CA
&lt;/h2>&lt;ol>
&lt;li>產生CA&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PC_IP&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">PC_IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PC_FQDN&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">PC_FQDN&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span> &lt;span class="n">openssl&lt;/span> &lt;span class="n">req&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">x509&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">nodes&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">days&lt;/span> &lt;span class="mi">3650&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">newkey&lt;/span> &lt;span class="n">rsa&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2048&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">keyout&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">PC_IP&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">key&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">out&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">PC_IP&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crt&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">subj&lt;/span> &lt;span class="s2">&amp;#34;/C=US/ST=CA/L=San Jose/O=Nutanix Inc./OU=Manageability/CN=*.nutanix.local&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">addext&lt;/span> &lt;span class="s2">&amp;#34;subjectAltName=IP:${PC_IP},DNS:${PC_FQDN}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221102352813.png"
loading="lazy"
alt="image-20231221102352813"
>&lt;/p>
&lt;ol start="2">
&lt;li>
&lt;p>置換Prism Central CA&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221102428912.png"
loading="lazy"
alt="image-20231221102428912"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221102436959.png"
loading="lazy"
alt="image-20231221102436959"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221102446241_.png"
loading="lazy"
alt="image-20231221102446241"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221102454156.png"
loading="lazy"
alt="image-20231221102454156"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>加入CA至Bastion&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ sudo cp xxx.crt /etc/pki/ca-trust/source/anchors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo cp xxx.key /etc/pki/ca-trust/source/anchors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ sudo update-ca-trust extract
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="install-ocp">Install OCP
&lt;/h2>&lt;h3 id="requirements">Requirements
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>Storage Space: 800GB&lt;/p>
&lt;/li>
&lt;li>
&lt;p>1 Cluster VIP for load balancer on control plane&lt;/p>
&lt;/li>
&lt;li>
&lt;p>1 Ingress VIP for load balancer on worker node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DNS record :
vip.(cluster name).(base domain)
*.apps.(cluster name).(base domain)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>IPAM with 7 ip addresses.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Virtual machines:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>1 temporary bootstrap node&lt;/li>
&lt;li>3 control plane nodes&lt;/li>
&lt;li>3 compute machines&lt;/li>
&lt;li>1 installation bastion machines&lt;/li>
&lt;/ul>
&lt;ol start="7">
&lt;li>SSH Key&lt;/li>
&lt;li>download oc , ccoctl, openshift-install,&lt;/li>
&lt;li>CoreOS image on web server or Nutanix Object&lt;/li>
&lt;li>Prism Central CA&lt;/li>
&lt;/ol>
&lt;h3 id="create-install-configyaml">Create Install-config.yaml
&lt;/h3>&lt;p>利用openshift-install建立install-config.yaml檔案，依序輸入ssh key、Nutanix資訊、OCP Cluster資訊&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ./openshift-install create install-config --dir &amp;lt;installation_directory&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221102751103.png"
loading="lazy"
alt="image-20231221102751103"
>&lt;/p>
&lt;h4 id="修改-install-configyaml">修改 install-config.yaml
&lt;/h4>&lt;p>additionalTrustBundle: 加入 Prism Central 的 root CA&lt;/p>
&lt;p>additionalTrustBundlePolicy: 改為 Always&lt;/p>
&lt;p>machineNetwork: 改為與VM相同網段 xxx.xxx.xxx.xxx/24&lt;/p>
&lt;p>platform 自定義cpu、memory、disk&lt;/p>
&lt;p>完成後如下，建議備份此檔案以利部署到其他地方或是重新部署&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseDomain: XXX.XXX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">additionalTrustBundle: |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -----BEGIN CERTIFICATE-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> MIID8zCCAtugAwIBAgIUPE0LteDWc8JLjEm5LlqJF0s17n0wDQYJKoZIhvcNAQEL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> XXX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -----END CERTIFICATE-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">additionalTrustBundlePolicy: Always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- architecture: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpus: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> coresPerSocket: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memoryMiB: 16384
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osDisk:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskSizeGiB: 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controlPlane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> architecture: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpus: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> coresPerSocket: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memoryMiB: 16384
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osDisk:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskSizeGiB: 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">credentialsMode: Manual
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: poc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networking:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: 10.128.0.0/14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hostPrefix: 23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: xxx.xxx.xxx.xxx/24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networkType: OVNKubernetes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.30.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nutanix:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiVIPs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - xxx.xxx.xxx.xxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ingressVIPs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - xxx.xxx.xxx.xxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismCentral:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address: xxx.xxx.xxx.xxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismElements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - endpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address: xxx.xxx.xxx.xxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 9440
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uuid: xxxxxxx-cd36-0cc8-0f4a-xxxxxxxxxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> subnetUUIDs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - xxxxxxxx-27ab-46ab-a0b1-xxxxxxxxxx3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">publish: External
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pullSecret: &amp;#39;{&amp;#34;auths&amp;#34;:.....}}}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sshKey: |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssh-rsa AAAAxxxxxxxxxxxxxxxxxxxxxxx nutanix@ocp-bastion
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="設定cco">設定CCO
&lt;/h3>&lt;p>安裝Cluster需要Cloud Credential Operator (CCO)，讓OCP能與Prism溝通&lt;/p>
&lt;p>大致作法為&lt;/p>
&lt;ol>
&lt;li>
&lt;p>建立帳號密碼檔案&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立要求帳密的目錄及檔案&lt;/p>
&lt;/li>
&lt;li>
&lt;p>利用上述檔案建立OCP Shared Secret&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在 ocp-install 資料夾內建立 credentials.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vim credentials.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">credentials:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- type: basic_auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismCentral:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: P@ssw0rd123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prismElements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: AHV-Cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: P@ssw0rd123
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定Image環境變數&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ RELEASE_IMAGE=$(./openshift-install version | awk &amp;#39;/release image/ {print $3}&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立credrequests資料夾&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ mkdir credrequests
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立0000_30_machine-api-operator_00_credentials-request.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc adm release extract --credentials-requests --cloud=nutanix --to=./credrequests $RELEASE_IMAGE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立 CCO Secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ccoctl nutanix create-shared-secrets --credentials-requests-dir=/home/nutanix/ocp_install/credrequests --output-dir=/home/nutanix/ocp-install --credentials-source-filepath=/home/nutanix/ocp_install/credentials.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221103631965.png"
loading="lazy"
alt="image-20231221103631965"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221103640795.png"
loading="lazy"
alt="image-20231221103640795"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221103812824.png"
loading="lazy"
alt="image-20231221103812824"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221103830445.png"
loading="lazy"
alt="image-20231221103830445"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="create-cluster">Create Cluster
&lt;/h3>&lt;h4 id="create-manifests">Create Manifests
&lt;/h4>&lt;p>建立 manifests資料夾，確認openshift-machine-api-nutanix-credentials-credentials.yaml有在裡面&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ./openshift-install create manifests --dir /home/nutanix/ocp-install/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221103956961.png"
loading="lazy"
alt="image-20231221103956961"
>&lt;/p>
&lt;h4 id="create-cluster-1">Create Cluster
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>ocp-install&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ./openshift-install create cluster --dir /home/nutanix/ocp-install/ --log-level=debug
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221104222075.png"
loading="lazy"
alt="image-20231221104222075"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝過程，會先建立OS image&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231221104256996.png"
loading="lazy"
alt="image-20231221104256996"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231221104311871.png"
loading="lazy"
alt="image-20231221104311871"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>install completed&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231228101028495.png"
loading="lazy"
alt="image-20231228101028495"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完後在安裝目錄底下會有auth的資料夾，裡面含有kubeadmin的帳密、kubeconfig檔案&lt;/p>
&lt;p>建議將kubeconfig檔案複製到~/.kube/config ，這樣就可以直接使用 oc 指令連線到該叢集&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">in /home/nutanix/ocp-install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir ~/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ cp auth/kubeconfig ~/.kube/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>oc get nodes&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231228101001702.png"
loading="lazy"
alt="image-20231228101001702"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>get console url&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231228101053013.png"
loading="lazy"
alt="image-20231228101053013"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>login page，密碼在/home/nutanix/ocp-install/auth/&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231228101115835.png"
loading="lazy"
alt="image-20231228101115835"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>login&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231228101128534.png"
loading="lazy"
alt="image-20231228101128534"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231228101140167.png"
loading="lazy"
alt="image-20231228101140167"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完有遇到預設ntp無法連通，需改為內部的ntp server
修改MachineConfig方法為撰寫bu設定檔，再透過bu去轉成yaml檔案，最後部署上去OCP&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120824457.png"
loading="lazy"
alt="image-20231229120824457"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="nutanix-csi">Nutanix CSI
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>在OCP Console上點選OperatorHub，搜尋Nutanix&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229112011014.png"
loading="lazy"
alt="image-20231229112011014"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點進去點選Install，描述內容比較重要的像支援Nutanix Volumes (rwo)、Nutanix FIles (rwx)&lt;/p>
&lt;p>以及下方有部署yaml範例，可以先複製下來&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229112814864.png"
loading="lazy"
alt="image-20231229112814864"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選安裝版本、Namespace、更新方式&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113026621.png"
loading="lazy"
alt="image-20231229113026621"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113056589.png"
loading="lazy"
alt="image-20231229113056589"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Nutanix CSI Storage，點Create NutanixCsiStorage&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113122565.png"
loading="lazy"
alt="image-20231229113122565"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立NutanixCsiStorage，點選Create即可&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113155776.png"
loading="lazy"
alt="image-20231229113155776"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113229946.png"
loading="lazy"
alt="image-20231229113229946"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立一個 Secret 讓OCP可以透過該Secret與Prism做溝通&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stringData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # prism-element-ip:prism-port:admin:password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: PE-IP:9440:admin:P@ssw0rd123
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113317508.png"
loading="lazy"
alt="image-20231229113317508"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Volume的Storage Class ，需修改dataServiceEndPoint、storageContainer&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi nutanix-volume.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanix-volume
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/fstype: ext4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dataServiceEndPoint: IP:3260 # Prism data service ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageContainer: default-container # Prism 上建立的Storage Container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixVolumes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #whitelistIPMode: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #chapAuth: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allowVolumeExpansion: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reclaimPolicy: Delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229113507440.png"
loading="lazy"
alt="image-20231229113507440"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Nutanix Files的Storage Class&lt;/p>
&lt;p>有分為兩種：NFS Servers、Dynamic NFS Shares (Valid Design)&lt;/p>
&lt;p>NFS Share Server：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi ntnx-files.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanix-files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageclass.kubernetes.io/is-default-class: &amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfsServer: files.poc.xxx.xxx.xxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfsPath: /ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixFiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squashType: &amp;#34;root-squash&amp;#34; # 若沒有資安疑慮可以用none，比較簡單
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reclaimPolicy: Delete or Retain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229114237696.png"
loading="lazy"
alt="image-20231229114237696"
>&lt;/p>
&lt;p>Dynamic NFS Shares&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi ntnx-dynamic-files.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nutanix-dynfiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dynamicProv: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/node-publish-secret-namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-name: ntnx-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/controller-expand-secret-namespace: openshift-cluster-csi-drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixFiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squashType: &amp;#34;root-squash&amp;#34; # 若沒有資安疑慮可以用none，比較簡單
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfsServerName: files # 對應Nutanix Files Server的名稱
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allowVolumeExpansion: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229114932023.png"
loading="lazy"
alt="image-20231229114932023"
>&lt;/p>
&lt;p>兩者建PVC在Nutanix Files Console上的差異如下：&lt;/p>
&lt;p>選擇第一種會建立在ocp這個share內，選擇第二種會建立各個PVC對應的share&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120003104.png"
loading="lazy"
alt="image-20231229120003104"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立PVC去確認Status為Bound即可，Volume測試&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120126695.png"
loading="lazy"
alt="image-20231229120126695"
>&lt;/p>
&lt;p>在Nutanix Prism上的Volume Group&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120205001.png"
loading="lazy"
alt="image-20231229120205001"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>擴充PVC&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120324056.png"
loading="lazy"
alt="image-20231229120324056"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120337732.png"
loading="lazy"
alt="image-20231229120337732"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120352157.png"
loading="lazy"
alt="image-20231229120352157"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120408383.png"
loading="lazy"
alt="image-20231229120408383"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Files PVC測試&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120613807.png"
loading="lazy"
alt="image-20231229120613807"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120634249.png"
loading="lazy"
alt="image-20231229120634249"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>檢視PV確認都為Bound&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229120448778.png"
loading="lazy"
alt="image-20231229120448778"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="autoscaler">Autoscaler
&lt;/h2>&lt;p>Nutanix 結合Openshift的Autoscaler做到Worker Node的自動擴展&lt;/p>
&lt;p>名詞解釋：&lt;/p>
&lt;p>Machine：為透過Openshift部署的機器&lt;/p>
&lt;p>Nodes：為部署完加入OCP Cluster內的節點&lt;/p>
&lt;p>scale up：對於Openshift 來說是整體的Resource增加，以實際看到的意思就是worker node新增，因為master node不能被使用&lt;/p>
&lt;p>scale down：相對scale up 就是整體的Resource減少，意思就是減少worker node的數量&lt;/p>
&lt;p>Clusterautoscaler：針對整個Cluster做Resource管控的設定，例如整體CPU、Memory、整體最大節點等&lt;/p>
&lt;p>Machinesets：machine的設定值，包含有多種不同的環境例如 AWS、GCP、Nutanix，就會有多個Machinesets&lt;/p>
&lt;p>Machineautoscaler：針對Machinesets去做scale的設定，例如最大12個節點、最小2個節點等&lt;/p>
&lt;h3 id="config">Config
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>確認現有的Machinesets、Machine數量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">在Bastion上
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get machinesets -n openshift-machine-api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc get machine -n openshift-machine-api
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/12/image-20231229132903201.png"
loading="lazy"
alt="image-20231229132903201"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增ClusterAutoscaler設定檔，這邊還可自定義Cluster的Resource資源總共多少、Woker Node使用量到多少時需要擴展
預設是單一Work Node 使用量達50%時會自動擴展，詳情見Redhat 官方連結
&lt;a class="link" href="https://docs.openshift.com/container-platform/4.12/machine_management/applying-autoscaling.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.12/machine_management/applying-autoscaling.html&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi clusterautoscaler.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: &amp;#34;autoscaling.openshift.io/v1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: &amp;#34;ClusterAutoscaler&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;default&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceLimits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> maxNodesTotal: 10 # 最大的worker node數量
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scaleDown: # scaleDown 參數
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delayAfterAdd: 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delayAfterDelete: 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delayAfterFailure: 10s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229133058122.png"
loading="lazy"
alt="image-20231229133058122"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增MachineAutoscaler設定檔&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi machineautoscaler.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: &amp;#34;autoscaling.openshift.io/v1beta1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: &amp;#34;MachineAutoscaler&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;poc-gqwvb-worker&amp;#34; # 這裡請對應machineset的名稱
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: &amp;#34;openshift-machine-api&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> minReplicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> maxReplicas: 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scaleTargetRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiVersion: machine.openshift.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: MachineSet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: poc-gqwvb-worker # 這裡請對應machineset的名稱
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229133331596.png"
loading="lazy"
alt="image-20231229133331596"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署兩個設定檔案到ocp cluster內，即可看到MachineAutoscalers內有該設定檔&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc create -f clusterautoscaler.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterautoscaler.autoscaling.openshift.io/default created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ oc create -f machineautoscaler.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">machineautoscaler.autoscaling.openshift.io/ocp-demo-t82dn-worker created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229133835454.png"
loading="lazy"
alt="image-20231229133835454"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="test">Test
&lt;/h3>&lt;p>現有Machine及Nodes&lt;/p>
&lt;p>Machine&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229134502956.png"
loading="lazy"
alt="image-20231229134502956"
>&lt;/p>
&lt;p>Nodes&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229134439968.png"
loading="lazy"
alt="image-20231229134439968"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>建立測試用的Project (namespace)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc adm new-project autoscale-example &amp;amp;&amp;amp; oc project autoscale-example
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立測試的Pod，50個pod、480秒後自動關閉&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ vi demo-job.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: batch/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Job
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> generateName: demo-job-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: work
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: busybox
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> command: [&amp;#34;sleep&amp;#34;, &amp;#34;480&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: 1000Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: 1000m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restartPolicy: Never
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> backoffLimit: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> completions: 50
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> parallelism: 50
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>部署到OCP Cluster內&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ oc apply -f demo-job.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229134951317.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135114899.png"
loading="lazy"
alt="image-20231229135114899"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當OCP的autoscaler偵測到時，即會自動開始新增worker node (scale up 約10分鐘)
可在Machines的頁面查看&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135203313.png"
loading="lazy"
alt="image-20231229135203313"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prism Central上也可以看到VM在建立中&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135249675.png"
loading="lazy"
alt="image-20231229135249675"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Machinesets 會看到應該有的machines要有4個現在只有3個&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135323816.png"
loading="lazy"
alt="image-20231229135323816"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Machine Provision完成後，會自動加入OCP Cluster，自動安裝叢集所需的Pod、CSI Driver等&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135432143.png"
loading="lazy"
alt="image-20231229135432143"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Node加入完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135533396.png"
loading="lazy"
alt="image-20231229135533396"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135557129.png"
loading="lazy"
alt="image-20231229135557129"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135618865.png"
loading="lazy"
alt="image-20231229135618865"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135634076.png"
loading="lazy"
alt="image-20231229135634076"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當Pod的時間到了自動關閉之後，即會開始做縮減的動作 (scale down 約3分鐘完成 )&lt;/p>
&lt;p>OCP會自動選擇其中一個Worker Node做刪除，會排除該節點上有local PV、使用量低於50%的Worker Node&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229140147396.png"
loading="lazy"
alt="image-20231229140147396"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229135806745.png"
loading="lazy"
alt="image-20231229135806745"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最後回歸為原本的狀態&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229140933239.png"
loading="lazy"
alt="image-20231229140933239"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/03/image-20231229140947045.png"
loading="lazy"
alt="image-20231229140947045"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>以上為使用Nutanix 透過 IPI Online的方式安裝Red Hat Openshift 叢集的測試過程。&lt;/p></description></item><item><title>Nutanix-NKE-v2.8</title><link>https://wangken0129.github.io/p/nutanix-nke-v2.8/</link><pubDate>Wed, 11 Oct 2023 05:34:51 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix-nke-v2.8/</guid><description>&lt;h1 id="nutanix-nke-karbon-實作">Nutanix NKE (Karbon) 實作
&lt;/h1>&lt;h2 id="前言">前言
&lt;/h2>&lt;p>此測試主要目的為安裝NKE、測試CSI Driver、驗證服務及升級，&lt;/p>
&lt;p>並且能夠執行擴充、刪減、升級等操作，皆使用非離線的方式完成。&lt;/p>
&lt;h2 id="版本資訊">版本、資訊
&lt;/h2>&lt;p>PC2023.3 預設NKE版本為v2.2.3，已先升級到v2.8.0，以測試更高的Kubernetes版本。&lt;/p>
&lt;p>參考連結：https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_8:Nutanix-Kubernetes-Engine-v2_8&lt;/p>
&lt;p>Port需求：&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/list?type=software&amp;amp;filterKey=software&amp;amp;filterVal=Ports%20and%20Protocols&amp;amp;productType=Nutanix%20Kubernetes%20Engine" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/list?type=software&amp;filterKey=software&amp;filterVal=Ports%20and%20Protocols&amp;productType=Nutanix%20Kubernetes%20Engine&lt;/a>&lt;/p>
&lt;p>Calico vs Flannel (Calico不支援Node在不同Vlan)：&lt;/p>
&lt;p>&lt;a class="link" href="https://www.modb.pro/db/152417" target="_blank" rel="noopener"
>https://www.modb.pro/db/152417&lt;/a>&lt;/p>
&lt;p>Shell：https://blog.csdn.net/low5252/article/details/103646475&lt;/p>
&lt;p>版本：&lt;/p>
&lt;p>AOS: 6.5.3.6&lt;/p>
&lt;p>Prism Central: 2023.3&lt;/p>
&lt;p>NKE: 2.8.0&lt;/p>
&lt;p>Kubernetes: 1.24.10&lt;/p>
&lt;p>架構：&lt;/p>
&lt;p>共會有八個VM：Control Plane *2 、etcd *3 、Worker Node *3&lt;/p>
&lt;p>NKE 運作架構&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/nke_multi-cluster_onprem_diagram_v2.svg"
loading="lazy"
alt="The Nutanix Bible"
>&lt;/p>
&lt;h2 id="安裝步驟">安裝步驟
&lt;/h2>&lt;h3 id="check-nke-enabled">Check NKE Enabled
&lt;/h3>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231002180337566.png"
loading="lazy"
alt="image-20231002180337566"
>&lt;/p>
&lt;h3 id="check-nke-version">Check NKE Version
&lt;/h3>&lt;p>NKE: v2.7.0&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231002180455854.png"
loading="lazy"
alt="image-20231002180455854"
>&lt;/p>
&lt;p>v2.7.0 UI出不來，故升級到v2.8.0&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003113901890.png"
loading="lazy"
alt="image-20231003113901890"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003113957749.png"
loading="lazy"
alt="image-20231003113957749"
>&lt;/p>
&lt;h3 id="download-os-image">Download OS Image
&lt;/h3>&lt;p>下載的是ntnx-1.5&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003114547878.png"
loading="lazy"
alt="image-20231003114547878"
>&lt;/p>
&lt;h3 id="create-cluster">Create Cluster
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>配置IPAM&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003095321526.png"
loading="lazy"
alt="image-20231003095321526"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>到Kubernetes Management &amp;ndash;&amp;gt; Create Cluster &amp;ndash;&amp;gt; Production Cluster &amp;ndash;&amp;gt; Next&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003130720675.png"
loading="lazy"
alt="image-20231003130720675"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003114440806.png"
loading="lazy"
alt="image-20231003114440806"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入Cluster Name、版本等資訊，先安裝1.24.10&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003134121155.png"
loading="lazy"
alt="image-20231003134121155"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇Node的子網，Additional可不選，Woker Node數量&lt;/p>
&lt;p>Control Plane可選擇External Loadbalance or Active-Passive，&lt;/p>
&lt;p>前者需建立好Loadbalance，可擴充性較高，&lt;/p>
&lt;p>後者只能使用兩個Control Plane，作為主要跟備援的Node，且要提供一個VIP在IPAM的管理範圍外面。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003135441332.png"
loading="lazy"
alt="image-20231003135441332"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>etcd的數量&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003135458249.png"
loading="lazy"
alt="image-20231003135458249"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇Kubenetes網路 Calico or Flannel ，兩者比較在上面的連結，這裡選擇Flannel 其他預設&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003135128065.png"
loading="lazy"
alt="image-20231003135128065"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇預設的Storage Class ，預設的會使用iSCSI Data Service的IP去連結Nutanix Cluster的Volume空間&lt;/p>
&lt;p>後續有需要NFS可以再加入，其他預設即可點選Create&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003135239648.png"
loading="lazy"
alt="image-20231003135239648"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>之後會開始自動安裝NKE Cluster&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003135634766.png"
loading="lazy"
alt="image-20231003135634766"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>順序大概是 Create etcd VM &amp;ndash;&amp;gt; Create etcd Cluster &amp;ndash;&amp;gt; Create Master VM &amp;ndash;&amp;gt; Create Worker VM &amp;ndash;&amp;gt; Create NKE Cluster&lt;/p>
&lt;p>會自動建立一些PVC給Cluster內部使用&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003140541856.png"
loading="lazy"
alt="image-20231003140541856"
>&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003141114844.png" alt="image-20231003141114844" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>建立的VM 以及VIP已掛在Master Node上面&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003141434688.png"
loading="lazy"
alt="image-20231003141434688"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>約15分鐘Cluster就建立完成了&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003141957766.png"
loading="lazy"
alt="image-20231003141957766"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到Kubenetes Management 可看到NKE Cluster建立完成，Status: Healthy&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142114057.png"
loading="lazy"
alt="image-20231003142114057"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142215697.png"
loading="lazy"
alt="image-20231003142215697"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="驗證-nke-叢集">驗證 NKE 叢集
&lt;/h2>&lt;h3 id="介面">介面
&lt;/h3>&lt;p>Node Pools：Worker可以再加，etcd跟 Control Plane是不能再新增&lt;/p>
&lt;p>Woker Node&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003144146664.png"
loading="lazy"
alt="image-20231003144146664"
>&lt;/p>
&lt;p>Control Plane Node&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142534886.png"
loading="lazy"
alt="image-20231003142534886"
>&lt;/p>
&lt;p>etcd Node&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142549532.png"
loading="lazy"
alt="image-20231003142549532"
>&lt;/p>
&lt;p>Storage Class為預設的 Nutanix Volume&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142618575.png"
loading="lazy"
alt="image-20231003142618575"
>&lt;/p>
&lt;h3 id="enter-cluster">Enter Cluster
&lt;/h3>&lt;h4 id="ssh-access">SSH Access：
&lt;/h4>&lt;p>此方法可直接進入被鎖定的節點上面，下載.sh檔案並執行，裡面會內含Private Key&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142742864.png"
loading="lazy"
alt="image-20231003142742864"
>&lt;/p>
&lt;h4 id="download-kubeconfig">Download Kubeconfig：
&lt;/h4>&lt;p>下載Kubeconfig並設定環境變數，需要安裝kubectl&lt;/p>
&lt;p>此檔案可能會自動rotate certicifate，記得再重新下載即可&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003142830309.png"
loading="lazy"
alt="image-20231003142830309"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>安裝Kubectl ( Mac )&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % curl -LO &lt;span class="s2">&amp;#34;https://dl.k8s.io/release/v1.24.10/bin/darwin/amd64/kubectl&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> % Total % Received % Xferd Average Speed Time Time Time Current
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Dload Upload Total Spent Left Speed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">100&lt;/span> &lt;span class="m">138&lt;/span> &lt;span class="m">100&lt;/span> &lt;span class="m">138&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">518&lt;/span> &lt;span class="m">0&lt;/span> --:--:-- --:--:-- --:--:-- &lt;span class="m">532&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">100&lt;/span> 50.2M &lt;span class="m">100&lt;/span> 50.2M &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> 717k &lt;span class="m">0&lt;/span> 0:01:11 0:01:11 --:--:-- 984k
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">104600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">5&lt;/span> wangken staff &lt;span class="m">160&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 14:52 .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr--+ &lt;span class="m">73&lt;/span> wangken staff &lt;span class="m">2336&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 14:30 ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">3497&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 14:28 ken-nke1-kubectl.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">4538&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 14:26 ken-nke1-ssh-access.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">52739872&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 14:45 kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % chmod +x kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./kubectl version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: This version information is deprecated and will be replaced with the output from kubectl version --short. Use --output&lt;span class="o">=&lt;/span>yaml&lt;span class="p">|&lt;/span>json to get the full version.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client Version: version.Info&lt;span class="o">{&lt;/span>Major:&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>, Minor:&lt;span class="s2">&amp;#34;24&amp;#34;&lt;/span>, GitVersion:&lt;span class="s2">&amp;#34;v1.24.10&amp;#34;&lt;/span>, GitCommit:&lt;span class="s2">&amp;#34;5c1d2d4295f9b4eb12bfbf6429fdf989f2ca8a02&amp;#34;&lt;/span>, GitTreeState:&lt;span class="s2">&amp;#34;clean&amp;#34;&lt;/span>, BuildDate:&lt;span class="s2">&amp;#34;2023-01-18T19:15:31Z&amp;#34;&lt;/span>, GoVersion:&lt;span class="s2">&amp;#34;go1.19.5&amp;#34;&lt;/span>, Compiler:&lt;span class="s2">&amp;#34;gc&amp;#34;&lt;/span>, Platform:&lt;span class="s2">&amp;#34;darwin/amd64&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kustomize Version: v4.5.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The connection to the server localhost:8080 was refused - did you specify the right host or port?
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>可直接執行或是把kubectl 丟到 /usr/local/bin&lt;/p>
&lt;/li>
&lt;li>
&lt;p>直接執行需要帶入 &amp;ndash;kubeconfig + 下載的config檔案&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./kubectl get nodes --kubeconfig ken-nke1-kubectl.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-0 Ready control-plane,master 55m v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-1 Ready control-plane,master 54m v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-0 Ready node 51m v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-1 Ready node 51m v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-2 Ready node 51m v1.24.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>另一種就是把kubectl 放到預設指令執行的地方，可用echo $PATH去找&lt;/p>
&lt;p>再輸入export KUBECONFIG=下載的kubeconfig 存放的路徑即可直接執行kubectl get nodes等指令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">Library&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Frameworks&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Python&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">framework&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Versions&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.11&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">homebrew&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">homebrew&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Cryptexes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">App&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">X11&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Library&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Apple&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apple&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">security&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cryptexd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">codex&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apple&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">security&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cryptexd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">codex&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apple&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">security&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cryptexd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">codex&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">appleinternal&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>因為我不想把kubectl放到系統裡面(日後可能還要更新)，所以我直接做一個執行檔案來連線此NKE叢集&lt;/p>
&lt;p>日後就透過nke-ctl這個執行檔來連線&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % cat nke-ctl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./kubectl --kubeconfig&lt;span class="o">=&lt;/span>./ken-nke1-kubectl.cfg &lt;span class="nv">$*&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">範例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">master&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">control&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plane&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">master&lt;/span> &lt;span class="mi">78&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">storageclass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">PROVISIONER&lt;/span> &lt;span class="n">RECLAIMPOLICY&lt;/span> &lt;span class="n">VOLUMEBINDINGMODE&lt;/span> &lt;span class="n">ALLOWVOLUMEEXPANSION&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">storageclass&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="n">Delete&lt;/span> &lt;span class="n">Immediate&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="mi">74&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">ns&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">84&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lease&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">84&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">public&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">84&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">84&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">Active&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fc6f8f5c4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bq96&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">78957&lt;/span>&lt;span class="n">b8ddd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">c9n8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">67&lt;/span>&lt;span class="n">vdl&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">kxjz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fgnrx&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gffxw&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rs5n8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">state&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bcb7f8cb6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tkjwf&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">events&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">printer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">d4c49454&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">m9ss6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">gtjl&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dl7k8&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g7jw7&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mv6xt&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nvk6w&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">864&lt;/span>&lt;span class="n">cc4767b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gl2sx&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">c2cc&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sf6wd&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shkkl&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">79&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="n">d64b7bc7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t8slv&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">76&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nv7jk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xxwgf&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">r6j2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dp5jv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gqz5j&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slmqt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z7hnh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">x8c2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">892&lt;/span>&lt;span class="n">ch&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">frrjt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkfrm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pf9xm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d1h&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="nutanix-files-串接">Nutanix Files 串接
&lt;/h2>&lt;h3 id="files">Files
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>建立一個File Server，DNS設定 192.168.101.198 &amp;gt; ken-files.nutanixlab.local&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003165718907.png"
loading="lazy"
alt="image-20231003165718907"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇一個Files VM就好&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003165749736.png"
loading="lazy"
alt="image-20231003165749736"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Client Network&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003165917669.png" alt="image-20231003165917669" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>設定gateway、IP等&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003170011745.png" alt="image-20231003170011745" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>設定Storage Network&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003170149444.png" alt="image-20231003170149444" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>選擇SMB、NFS Protocol，然後Create&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003170257630.png" alt="image-20231003170257630" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>建立完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005100336390.png"
loading="lazy"
alt="image-20231005100336390"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立一個NFS Share : ken-nke&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003163145985.png"
loading="lazy"
alt="image-20231003163145985"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇Authentication: System、Root Squash (後續因redmine需要修改資料夾權限為777，故改為none)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003163212281.png"
loading="lazy"
alt="image-20231003163212281"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立完後複製Mount Path、Share Path&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003180229922.png"
loading="lazy"
alt="image-20231003180229922"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="create-storage-class">Create Storage Class
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>點回Kubenetes Management &amp;ndash;&amp;gt; Storage &amp;ndash;&amp;gt; Storage Class&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003163529624.png"
loading="lazy"
alt="image-20231003163529624"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入 Endpoint、Export Path，&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003180314869.png" alt="image-20231003180314869" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>建立完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231003164104978.png"
loading="lazy"
alt="image-20231003164104978"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認Storageclass&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get storageclass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-storageclass (default) csi.nutanix.com Delete Immediate true 154m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-files csi.nutanix.com Delete Immediate false 3m35s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立測試pvc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % cat test.pvc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: test-pv-claim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: ntnx-files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteOnce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 20Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl create -f test.pvc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/test-pv-claim created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認為bond狀態代表OK&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-pv-claim Bound pvc-3f91422b-03d6-469e-940a-da87691be83a 20Gi RWO ntnx-files 7s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl delete -f test.pvc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;test-pv-claim&amp;#34; deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="部署服務">部署服務
&lt;/h2>&lt;p>之後有其他服務部署上去會再更新。&lt;/p>
&lt;h3 id="部署redmine">部署redmine
&lt;/h3>&lt;p>redmine是開源的專案管理軟體，部署時會需要使用PostgreSQL作為Database&lt;/p>
&lt;p>部署在redmine的namespace，共會有以下幾個檔案&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">244&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 17:30 pg-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">1106&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 17:30 pg-deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">255&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 17:30 pg-pvc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">222&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 15:47 pg-svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">1070&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 16:24 redmine-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">2461&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 17:29 redmine-deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">264&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">5&lt;/span> 10:05 redmine-svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">218&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">3&lt;/span> 16:40 test.pvc.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>
&lt;p>建立Namespace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl create ns redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/redmine created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立PostgreSQL&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl create -f pg-pvc.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/redmine-postgres-pv-claim created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl create -f pg-config.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/redmine-postgres-config created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl create -f pg-deploy.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl create -f pg-svc.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get all -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-postgres-deployment-7bd9859c6d-8c4b5 1/1 Running 0 67s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service NodePort 172.19.78.32 &amp;lt;none&amp;gt; 5432:31432/TCP 60s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment 1/1 1 1 67s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-postgres-deployment-7bd9859c6d 1 1 1 67s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>驗證PostgreSQL，可以下載 pgAdmin連線確認&lt;/p>
&lt;p>&lt;a class="link" href="https://www.pgadmin.org/download/pgadmin-4-macos/" target="_blank" rel="noopener"
>https://www.pgadmin.org/download/pgadmin-4-macos/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005102945359.png"
loading="lazy"
alt="image-20231005102945359"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認有redmine database存在&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005103031353.png"
loading="lazy"
alt="image-20231005103031353"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立redmine服務，service選用cluster vip，Port 8000&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl apply -f redmine-pvc.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/redmine-files created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl apply -f redmine-config.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/redmine-config created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl apply -f redmine-deploy.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl apply -f redmine-svc.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-service created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get pvc -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redmine-files Bound pvc-fa7253bf-da76-4048-a622-e6b159a94124 1Gi RWO ntnx-files 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redmine-postgres-pv-claim Bound pvc-532dc4e2-876e-4ebf-b3c5-481226c0eb4f 20Gi RWO default-storageclass 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get all -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-7fd78679f9-cwxg4 1/1 Running &lt;span class="m">0&lt;/span> 6m31s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-postgres-deployment-7bd9859c6d-fv5pb 1/1 Running &lt;span class="m">0&lt;/span> 53m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service NodePort 172.19.193.158 &amp;lt;none&amp;gt; 5432:31432/TCP 53m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-service ClusterIP 172.19.139.23 192.168.101.199 8000/TCP 2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 6m31s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 53m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-7fd78679f9 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 6m31s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-postgres-deployment-7bd9859c6d &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 53m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認config file可以存在ntnx-files這個storageclass&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005153105877.png"
loading="lazy"
alt="image-20231005153105877"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>網頁連線redmine : http://192.168.101.199:8000 ，預設 admin/admin 再進去修改&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005153419432.png"
loading="lazy"
alt="image-20231005153419432"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005153452116.png"
loading="lazy"
alt="image-20231005153452116"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認OK&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005155001640.png"
loading="lazy"
alt="image-20231005155001640"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>後續就可以透由redmine去做專案管理，甚至是結合CI/CD&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="options--add-ons">Options &amp;amp; Add-Ons
&lt;/h2>&lt;h3 id="infra-logging">Infra Logging
&lt;/h3>&lt;p>說明：如果沒有Logging stack的話，可以啟用Infra logging (Elasticsearch and Kibana)來使用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Note:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> You can deploy the ELK-based NKE logging stack to provide a simplified experience for users with environments that do not have the logging stack implementation. In environments where the logging implementation exists or where there are no explicit requirements for logging, disable the logging stack to reduce resource consumption.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> The minimum uplink speed recommended is 30 Mb/s.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>
&lt;p>從Prism Central VM 登入Karbon&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-75-A-PCVM:~$ karbon/karbonctl login --pc-username ken.wang@nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the password for the PC user: ken.wang@nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login successful
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-75-A-PCVM:~$ karbon/karbonctl cluster list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name UUID Control Plane IPs (VIP) Version OS Version Status Worker IPs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1 906a075d-e27b-47bd-59c3-b71701147650 192.168.101.213, 192.168.101.215 (192.168.101.199) 1.24.10-0 ntnx-1.5 kSuccess 192.168.101.208, 192.168.101.201, 192.168.101.207
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>enable infra logging&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-75-A-PCVM:~$ karbon/karbonctl cluster infra-logging enable --cluster-name=ken-nke1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully enabled infra logging: [POST /karbon/v1-alpha.1/k8s/clusters/{name}/enable-infra-logging][200] postEnableInfraLoggingO
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>回到NKE Cluster確認 pod status&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nv7jk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xxwgf&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">r6j2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dp5jv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gqz5j&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slmqt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z7hnh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">x8c2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">892&lt;/span>&lt;span class="n">ch&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">frrjt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nkfrm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pf9xm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fc6f8f5c4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bq96&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">78957&lt;/span>&lt;span class="n">b8ddd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">c9n8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">elasticsearch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m45s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cjst&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">74&lt;/span>&lt;span class="n">fw9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m42s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dn9qc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gwrsq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xdq2n&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m43s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kibana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">ccd475856&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cb4dd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m45s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">state&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bcb7f8cb6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tkjwf&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">events&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">printer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">d4c49454&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">m9ss6&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">gtjl&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dl7k8&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">g7jw7&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mv6xt&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nvk6w&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">864&lt;/span>&lt;span class="n">cc4767b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gl2sx&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">c2cc&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sf6wd&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shkkl&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="n">d64b7bc7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">t8slv&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">d2h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">redmine&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">fd78679f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cwxg4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">redmine&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bd9859c6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fv5pb&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>多了以下幾個pod出現&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ntnx-system elasticsearch-logging-0 1/1 Running 0 2m45s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system fluent-bit-6cjst 1/1 Running 0 2m43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system fluent-bit-74fw9 1/1 Running 0 2m42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system fluent-bit-dn9qc 1/1 Running 0 2m43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system fluent-bit-gwrsq 1/1 Running 0 2m43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system fluent-bit-xdq2n 1/1 Running 0 2m43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-system kibana-logging-6ccd475856-cb4dd 1/2 Running 0 2m45s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>從Prism 介面上去看多了Logging的選項&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005164515179.png"
loading="lazy"
alt="image-20231005164515179"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點進去Logging介面，預設使用worker node的30950 port，點選Explore on my own&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005164742058.png"
loading="lazy"
alt="image-20231005164742058"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005170115884.png"
loading="lazy"
alt="image-20231005170115884"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選左邊的選單&amp;ndash;&amp;gt; Analytics &amp;ndash;&amp;gt; Discover&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005170207799.png"
loading="lazy"
alt="image-20231005170207799"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立新的index pattern，名稱輸入*&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005170304609.png"
loading="lazy"
alt="image-20231005170304609"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005170428292.png"
loading="lazy"
alt="image-20231005170428292"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點回Discover確認有抓到資訊&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005170840491.png"
loading="lazy"
alt="image-20231005170840491"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="擴充節點">擴充節點
&lt;/h2>&lt;p>兩個方式，第一個是新增Node Pool，第二種是在現有的Node Pool 調整 Node的數量&lt;/p>
&lt;h3 id="add-node-pool">Add Node Pool
&lt;/h3>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005172622386.png"
loading="lazy"
alt="image-20231005172622386"
>&lt;/p>
&lt;p>原本的Node數量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-0 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-1 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-0 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-1 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-2 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新增後約3~5分鐘就完成建立，並帶有dev的前綴詞&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-dev-worker-0 Ready node 54s v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-0 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-1 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-0 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-1 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-2 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005173405029.png"
loading="lazy"
alt="image-20231005173405029"
>&lt;/p>
&lt;p>要刪除Node Pool 要先刪除那個Node&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005173856946.png"
loading="lazy"
alt="image-20231005173856946"
>&lt;/p>
&lt;p>約3~5分鐘後就刪除完成，再刪除Node Pool&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005174024769.png"
loading="lazy"
alt="image-20231005174024769"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-0 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-1 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-0 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-1 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-2 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="resize-node-pool">Resize Node Pool
&lt;/h3>&lt;p>點選Node Pool &amp;ndash;&amp;gt; Actions &amp;ndash;&amp;gt; Resize ，從 3 調整到4&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005174203052.png"
loading="lazy"
alt="image-20231005174203052"
>&lt;/p>
&lt;p>約3~5分鐘就出現新的worker node 3&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ken-nke1 % ./nke-ctl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-0 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-master-1 Ready control-plane,master 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-0 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-1 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-2 Ready node 2d3h v1.24.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ken-nke1-906a07-worker-3 Ready node 54s v1.24.10
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005174557923.png"
loading="lazy"
alt="image-20231005174557923"
>&lt;/p>
&lt;p>除了用Delete的方式移除worker-3之外，也可以用resize調整worker node數量&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005174749203.png"
loading="lazy"
alt="image-20231005174749203"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005174815545.png"
loading="lazy"
alt="image-20231005174815545"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231005175011853.png"
loading="lazy"
alt="image-20231005175011853"
>&lt;/p>
&lt;p>驗證OK&lt;/p>
&lt;h2 id="升級kubernetes">升級Kubernetes
&lt;/h2>&lt;p>理論上順序應為 LCM 升級NKE版本 &amp;ndash;&amp;gt; OS image 升級 &amp;ndash;&amp;gt; Kubernetes version 升級&lt;/p>
&lt;p>這裡NKE、OS image已經為最新版本，故只做Kubernetes version升級&lt;/p>
&lt;h3 id="步驟">步驟
&lt;/h3>&lt;p>點進NKE Cluster &amp;ndash;&amp;gt; More &amp;ndash;&amp;gt; Upgrade Kubernetes&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011093836949.png"
loading="lazy"
alt="image-20231011093836949"
>&lt;/p>
&lt;p>點選要升級的版本 1.25.6-0 &amp;ndash;&amp;gt; Upgrade&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011093920386.png"
loading="lazy"
alt="image-20231011093920386"
>&lt;/p>
&lt;p>開始跑 Health ckeck&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011094057124.png"
loading="lazy"
alt="image-20231011094057124"
>&lt;/p>
&lt;p>現行版本&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011094304560.png"
loading="lazy"
alt="image-20231011094304560"
>&lt;/p>
&lt;p>會先進行master的升級，再來執行worker node滾動升級&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011094357148.png"
loading="lazy"
alt="image-20231011094357148"
>&lt;/p>
&lt;p>我的服務replica 只有設定1，所以服務會暫時中斷&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011094815399.png"
loading="lazy"
alt="image-20231011094815399"
>&lt;/p>
&lt;p>Cluster內也會有服務重啟，Kubenetes 已升級完成，因為只做Kubernetes升級所以Kernel 跟Container-runtime都不會升級&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011095351235.png"
loading="lazy"
alt="image-20231011095351235"
>&lt;/p>
&lt;p>約30分鐘內即升級完畢&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011100949610.png"
loading="lazy"
alt="image-20231011100949610"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011101014871.png"
loading="lazy"
alt="image-20231011101014871"
>&lt;/p>
&lt;p>因redmine服務需要先啟動DB再啟動redmine，所以將redmine的pod刪除，服務才會正常&lt;/p>
&lt;p>這個可以去設定啟動順序，但因測試使用，故沒特別設定&lt;/p>
&lt;p>確認服務正常&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011101550166.png"
loading="lazy"
alt="image-20231011101550166"
>&lt;/p>
&lt;h2 id="advanced-kubernetes-tp">Advanced Kubernetes (TP)
&lt;/h2>&lt;p>進階的Kubernetes是Nutanix目前正在開發中的功能，啟用方式是會有一個管理用的NKE Cluster，然後去部署Agent到被管理的叢集&lt;/p>
&lt;p>運作模式有點像是Rancher的管理方式，都需要一個Management的Cluster，這樣好處是Management掛了不會去影響現有服務。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011103506802.png"
loading="lazy"
alt="image-20231011103506802"
>&lt;/p>
&lt;h3 id="新增management-cluster">新增Management Cluster
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>官方建議是要至少兩個worker node，先用一個來測試功能&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011110314489.png"
loading="lazy"
alt="image-20231011110314489"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>給予名稱、版本&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011110355671.png"
loading="lazy"
alt="image-20231011110355671"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇網段、worker node數量&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011110436588.png"
loading="lazy"
alt="image-20231011110436588"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇 Network Provider&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011110520814.png"
loading="lazy"
alt="image-20231011110520814"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇Storage class，之後點選Create&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011110617541.png"
loading="lazy"
alt="image-20231011110617541"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立中&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011111332153.png"
loading="lazy"
alt="image-20231011111332153"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NKE Cluster 建立完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011113040549.png"
loading="lazy"
alt="image-20231011113040549"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ssh 進入PCVM ， 針對ken-mgmt cluster啟用Advance Management&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-75-A-PCVM:~$ /home/nutanix/karbon/karbonctl login --pc-username ken.wang@nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the password for the PC user: ken.wang@nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login successful
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-75-A-PCVM:~$ /home/nutanix/karbon/karbonctl karbon-management enable --cluster-name ken-mgmt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.711Z client_wrapper.go:300: [INFO] Successfully created new resource: &amp;amp;{karbon-mgmt false 0xc0005340e0 0xc0008925e0 /v1, Kind=Namespace karbon-mgmt}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.784Z client_wrapper.go:317: [INFO] Successfully patched existing resource. NS: karbon-mgmt, Name: servicemonitors.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.805Z client_wrapper.go:300: [INFO] Successfully created new resource: &amp;amp;{karbon-mgmt true 0xc000e66ee0 0xc00103e1f0 networking.k8s.io/v1, Kind=NetworkPolicy traefik}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.832Z client_wrapper.go:300: [INFO] Successfully created new resource: &amp;amp;{karbon-mgmt true 0xc0001f7490 0xc000c5a300 /v1, Kind=ConfigMap traefik-dynamic-configmap}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.881Z client_wrapper.go:300: [INFO] Successfully created new resource: &amp;amp;{karbon-mgmt false 0xc00062b3b0 0xc000c5a428 apiextensions.k8s.io/v1, Kind=CustomResourceDefinition ingressroutes.traefik.containo.us}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.92Z client_wrapper.go:300: [INFO] Successfully created new resource: &amp;amp;{karbon-mgmt false 0xc0001dc7e0 0xc000c5a4b8 apiextensions.k8s.io/v1, Kind=CustomResourceDefinition ingressroutetcps.traefik.containo.us}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-10-11T03:32:34.999Z client_wrapper.go:300: [INFO] Successfully created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting on 172.16.90.75 (Up, ZeusLeader) to start: KarbonUI KarbonCore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting on 172.16.90.75 (Up, ZeusLeader) to start: KarbonUI KarbonCore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting on 172.16.90.75 (Up, ZeusLeader) to start:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2b7839f469 karbon-ui:v2.8.0 Up 38 seconds (healthy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2ef4e4d10f karbon-core:v2.8.0 Up 35 seconds (healthy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2b7839f469 karbon-ui:v2.8.0 Up 43 seconds (healthy)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully enabled karbon management!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Deploy Agent 在ken-nke1 Cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">NTNX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">PCVM&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~$&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mgmt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">30.244&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">k8s_versioning&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">181&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ERROR&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Failed&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">Namespace&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">verification&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">namespaces&lt;/span> &lt;span class="s2">&amp;#34;karbon-agent&amp;#34;&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">found&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">30.28&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">client_wrapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">300&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Successfully&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">resource&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">{&lt;/span> &lt;span class="bp">false&lt;/span> &lt;span class="mh">0xc001142850&lt;/span> &lt;span class="mh">0xc001136038&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Kind&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Namespace&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">30.302&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">karbon_mgmt_sentry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">169&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">Karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Mgmt&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">30.303&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">karbon_mgmt_sentry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">173&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ERROR&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Empty&lt;/span> &lt;span class="n">payload&lt;/span> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">30.325&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">karbon_mgmt_sentry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">169&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">Karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Mgmt&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">karbon_mgmt_sentry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">169&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">Karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Mgmt&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">33.758&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">agent_installer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">187&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Edgemgmt&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">passed&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sherlock&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">edgemgmt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3274&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">33.758&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">agent_installer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">194&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Controller&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">passed&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">datastream&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2490&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">33.947060&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">resource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">33.971481&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Clearing&lt;/span> &lt;span class="n">discovery&lt;/span> &lt;span class="n">cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">33.971530&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">beginning&lt;/span> &lt;span class="n">wait&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="n">resources&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">timeout&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m0s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">37.401949&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="mi">29&lt;/span> &lt;span class="n">resource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">37.635612&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">beginning&lt;/span> &lt;span class="n">wait&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="mi">29&lt;/span> &lt;span class="n">resources&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">timeout&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="n">m0s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">37.803750&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Deployment&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">expected&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">39.845704&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Deployment&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">expected&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">53.847939&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Deployment&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">expected&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">55.865197&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Deployment&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">edgemgmt&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">expected&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">38&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">57.851395&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">Deployment&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">edgemgmt&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">expected&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">ready&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">39&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">25.875878&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="n">installed&lt;/span> &lt;span class="n">successfully&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">servicedomain&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">39&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">25.875&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">helm_agent_installer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">66&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Deployed&lt;/span> &lt;span class="n">Agent&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sherlock_edge_deployer_pc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tgz&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">chart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="n">T03&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">39&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">25.875&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">karbonagent_enable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">182&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Successfully&lt;/span> &lt;span class="n">deployed&lt;/span> &lt;span class="n">karbon&lt;/span> &lt;span class="n">agent&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Successfully&lt;/span> &lt;span class="n">Enabled&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">Karbon&lt;/span> &lt;span class="n">Agent&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>原本的 pod&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">po&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">zqhg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qhszt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dp5jv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gqz5j&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slmqt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z7hnh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="n">tnd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lqmzt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qwzcd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rcqfv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">105&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">blackbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">d494dffb6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">w2zm&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fc6f8f5c4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hvcsj&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">78957&lt;/span>&lt;span class="n">b8ddd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pwggj&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">elasticsearch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cjst&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d18h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">74&lt;/span>&lt;span class="n">fw9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d18h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dn9qc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d18h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gwrsq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d18h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kibana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">ccd475856&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xgmjz&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">state&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">758&lt;/span>&lt;span class="n">b544d66&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ns667&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">events&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">printer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">d4c49454&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kjtkm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9698&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">102&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hhqzn&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">wkg4z&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z5d8f&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">102&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">864&lt;/span>&lt;span class="n">cc4767b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mhftm&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">c2cc&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sf6wd&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">56755&lt;/span>&lt;span class="n">b575c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clhp2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">104&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">56755&lt;/span>&lt;span class="n">b575c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fb979&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">103&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">655&lt;/span>&lt;span class="n">cf4b548&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tr7kv&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">redmine&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">fd78679f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7682&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">redmine&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bd9859c6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">thrcv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>部署Agent完成後的pod，新增了兩個Namespace: karbon-agent、project-ingress&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ctl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">po&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">788&lt;/span>&lt;span class="n">c9df5b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rg47k&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">119&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="n">edgemgmt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c97765dc7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fhs6d&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">119&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span> &lt;span class="n">nats&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c9bd445bb&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lzvdg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">72&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">zqhg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">b95cd4468&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qhszt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">117&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">117&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nke1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">906&lt;/span>&lt;span class="n">a07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">117&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">117&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dp5jv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gqz5j&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slmqt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">flannel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z7hnh&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="n">tnd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lqmzt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">qwzcd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ds&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rcqfv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">alertmanager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">blackbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">d494dffb6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">w2zm&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">fc6f8f5c4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hvcsj&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">78957&lt;/span>&lt;span class="n">b8ddd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pwggj&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">elasticsearch&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">cjst&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d19h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">74&lt;/span>&lt;span class="n">fw9&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d19h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dn9qc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d19h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">fluent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gwrsq&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">d19h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kibana&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">logging&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">ccd475856&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xgmjz&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">state&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">758&lt;/span>&lt;span class="n">b544d66&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ns667&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">events&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">printer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">d4c49454&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kjtkm&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9698&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">106&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hhqzn&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">107&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">wkg4z&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">z5d8f&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">106&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">864&lt;/span>&lt;span class="n">cc4767b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mhftm&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">113&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">c2cc&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">csi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sf6wd&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">d21h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">56755&lt;/span>&lt;span class="n">b575c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clhp2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">adapter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">56755&lt;/span>&lt;span class="n">b575c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fb979&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">108&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">prometheus&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">655&lt;/span>&lt;span class="n">cf4b548&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tr7kv&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">project&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span> &lt;span class="n">datastream&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mqtt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">54&lt;/span>&lt;span class="n">b8c67bdd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">d7kbl&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">56&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">project&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span> &lt;span class="n">datastream&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rtsp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">59&lt;/span>&lt;span class="n">c47c8f7c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pgwpc&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">56&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">project&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span> &lt;span class="n">nats&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">bc8494cd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">vxs4b&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">72&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">redmine&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">fd78679f9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7682&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">redmine&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">bd9859c6d&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">thrcv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="完成前後對照">完成前後對照
&lt;/h3>&lt;p>原本的畫面&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011092930911.png"
loading="lazy"
alt="image-20231011092930911"
>&lt;/p>
&lt;p>因爲測試使用，故把Worker Node數量降到2&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011105655407.png"
loading="lazy"
alt="image-20231011105655407"
>&lt;/p>
&lt;p>完成後多了一個Namespace的選項&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011114956233.png"
loading="lazy"
alt="image-20231011114956233"
>&lt;/p>
&lt;p>權限部分應該是還沒做好，登出後用local admin帳號登入就看得到namespace內容&lt;/p>
&lt;p>然後ken-mgmt的worker node數量調整為2後，就可以看到namespace裡面的Deployment跟其他資訊&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011120129274.png"
loading="lazy"
alt="image-20231011120129274"
>&lt;/p>
&lt;p>Workloads&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011132124834.png"
loading="lazy"
alt="image-20231011132124834"
>&lt;/p>
&lt;p>Workloads : Deployments&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011125442631.png"
loading="lazy"
alt="image-20231011125442631"
>&lt;/p>
&lt;p>Deployment詳細資訊&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011125601847.png"
loading="lazy"
alt="image-20231011125601847"
>&lt;/p>
&lt;p>Deployment詳細資訊，Pod名稱跟Yaml格式&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011125620243.png"
loading="lazy"
alt="image-20231011125620243"
>&lt;/p>
&lt;p>Config有 ConfigMaps跟Secrets&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011125748609.png"
loading="lazy"
alt="image-20231011125748609"
>&lt;/p>
&lt;p>Network裡面的Service，看是走Nodeport or ClusterIP or Ingress&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011125845677.png"
loading="lazy"
alt="image-20231011125845677"
>&lt;/p>
&lt;p>Endpoints&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011125950105.png"
loading="lazy"
alt="image-20231011125950105"
>&lt;/p>
&lt;p>PVC&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011130008347.png"
loading="lazy"
alt="image-20231011130008347"
>&lt;/p>
&lt;p>點進去都可以看到Yaml格式，就跟使用kubectl edit 會出現的yaml是一樣的，但這邊無法編輯&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011130058520.png"
loading="lazy"
alt="image-20231011130058520"
>&lt;/p>
&lt;p>Charts還不確定會有什麼可以呈現&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/10/image-20231011130156905.png"
loading="lazy"
alt="image-20231011130156905"
>&lt;/p>
&lt;h2 id="總結">總結
&lt;/h2>&lt;p>NKE 的部署很簡單、快速，透過CSI Driver 可以結合Nutanix本身的檔案系統 ( Volume / Files ) 來做儲存&lt;/p>
&lt;p>其實是很適合現有使用Nutanix ，但又同時想要擁有Kuberntes來做開發測試，或是高階玩家想省授權費用的人，&lt;/p>
&lt;p>因為NKE 本身的監控、Log沒有像Redhat Openshift 有很多預設做好的介面跟Operator，&lt;/p>
&lt;p>所以若是正式環境會需要自己部署ELK、Prometheus、Service Mesh等軟體。&lt;/p></description></item><item><title>製作Blog Part3 (半自動腳本)</title><link>https://wangken0129.github.io/p/blog-part3/</link><pubDate>Sat, 23 Sep 2023 15:47:05 +0800</pubDate><guid>https://wangken0129.github.io/p/blog-part3/</guid><description>&lt;h1 id="製作blog-part3">製作Blog Part3
&lt;/h1>&lt;p>&lt;strong>工欲善其事，必先利其器&lt;/strong>&lt;/p>
&lt;p>我依照我目前的使用情境寫了三個Shell Script，&lt;/p>
&lt;p>來達到半自動上傳筆記到Github的效果，&lt;/p>
&lt;p>為何是半自動呢? 因為寫筆記時覺得還要特別加上Hugo的Front Matter有點麻煩，&lt;/p>
&lt;p>所以用後製的方式來撰寫Front Matter，而Script執行過程會有交互式的問答，&lt;/p>
&lt;p>如此一來就可以順便填入Date、Tags、Category等參數，&lt;/p>
&lt;p>而有時候也會有只執行其中一個腳本的時候，所以分了三個來寫。&lt;/p>
&lt;h2 id="半自動上傳筆記到github">半自動上傳筆記到Github
&lt;/h2>&lt;h3 id="資料夾結構">資料夾結構
&lt;/h3>&lt;p>我的資料夾會依照不同的廠牌or產品來分類，&lt;/p>
&lt;p>所以每個廠牌資料夾內都會有個Notes的資料夾，&lt;/p>
&lt;p>目前總共分為SUSE、Redhat、Nutanix等三個資料夾，&lt;/p>
&lt;p>例如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC Desktop % tree -L &lt;span class="m">1&lt;/span> RedHat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">RedHat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── Certification
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── Courses
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── Document
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── Notes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── iso
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>再來會有個工作目錄是Pull下來Repository的上層資料夾，&lt;/p>
&lt;p>會在上面執行腳本。&lt;/p>
&lt;p>工作目錄：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC myblog % &lt;span class="nb">pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/Users/wangken/myblog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC myblog % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">4342&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">23&lt;/span> 17:35 cp_to_blog.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">499&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">23&lt;/span> 17:44 deploy-blog.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">457&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">19&lt;/span> 15:20 gitpush.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">16&lt;/span> wangken staff &lt;span class="m">512&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">21&lt;/span> 10:26 hugo-blog
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="script-1-複製到工作目錄">Script 1 複製到工作目錄
&lt;/h3>&lt;p>這個稍微有點戎長，但也是讓我在腳本執行時看得比較清楚一點&lt;/p>
&lt;p>主要內容為：&lt;/p>
&lt;ol>
&lt;li>定義廠牌筆記的資料夾路徑&lt;/li>
&lt;li>選擇廠牌的資料夾為何&lt;/li>
&lt;li>尋找該資料夾內的.md檔案&lt;/li>
&lt;li>利用該檔案的名稱建立文章的資料夾在工作目錄上&lt;/li>
&lt;li>輸入Front Matter的參數 ( Category、Tags )&lt;/li>
&lt;li>建立含Front Matter的預設index.md在文章的資料夾內&lt;/li>
&lt;li>將筆記的內容貼到index.md的下方&lt;/li>
&lt;/ol>
&lt;p>cp_to_blog.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If a command fails then the deploy stops&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Define Path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">blog_path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/Users/wangken/myblog/hugo-blog/content/post/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ntnx_path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/Users/wangken/Desktop/Nutanix/Notes&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">redhat_path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/Users/wangken/Desktop/RedHat/Notes/*&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">suse_path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/Users/wangken/Desktop/SUSE/Notes&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Enter product to identify notes path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Choose product to identify notes path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pdtype&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s2">&amp;#34;suse&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;redhat&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;nutanix&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Quit&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span> &lt;span class="nb">type&lt;/span> in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">pdtype&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nv">$type&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;suse&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">pd&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;suse&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;redhat&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">pd&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;redhat&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;nutanix&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">pd&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;nutanix&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Quit&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;end selection&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;invalid option &lt;/span>&lt;span class="nv">$REPLY&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;choosing &lt;/span>&lt;span class="nv">$pd&lt;/span>&lt;span class="s2"> to use &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check if name input with error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># And process the next step&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$pd&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;suse&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$pd&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;rhel&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$pd&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;nutanix&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$pd&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Please check again &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$pd&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;suse&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$pd&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Check OK&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Notes directory is &lt;/span>&lt;span class="nv">$suse_path&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Select md file to blog&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Select notes path .md file to blog&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">files&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="nv">$suse_path&lt;/span>/*.md&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$pd&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;redhat&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$pd&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Check OK&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Notes directory is &lt;/span>&lt;span class="nv">$redhat_path&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Select md file to blog&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Select notes path .md file to blog&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">files&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="nv">$redhat_path&lt;/span>/*.md&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$pd&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;nutanix&amp;#39;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">$pd&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Check OK&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Notes directory is &lt;/span>&lt;span class="nv">$ntnx_path&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;--------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Select md file to blog&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Select notes path .md file to blog&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">files&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="nv">$ntnx_path&lt;/span>/*.md&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># End loop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PS3&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Select file to blog, or 0 to exit: &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span> file in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">files&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$REPLY&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;Bye!&amp;#39;&lt;/span> &amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="o">[[&lt;/span> -z &lt;span class="nv">$file&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;Invalid choice, try again&amp;#39;&lt;/span> &amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Using file name to path_name &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">path_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>basename &lt;span class="nv">$file&lt;/span> .md&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Choosing &lt;/span>&lt;span class="nv">$path_name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create blog post directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Create blog post directory using &lt;/span>&lt;span class="nv">$path_name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$blog_path&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="nv">$path_name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nv">post_path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$_&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$post_path&lt;/span>&lt;span class="s2"> has been created&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Input Front Matter Attribute&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Front Matter attribute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># date&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">now&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>date -u +&lt;span class="s2">&amp;#34;%Y-%m-%dT%T+08:00&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># category&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">categories&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="s2">&amp;#34;Lab Category&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Knowledge Base Category&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;Quit&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span> &lt;span class="nb">type&lt;/span> in &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">categories&lt;/span>&lt;span class="p">[@]&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="nv">$type&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Lab Category&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">category&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Lab Category&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Knowledge Base Category&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">category&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Knowledge Base Category&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Quit&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;end selection&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> *&lt;span class="o">)&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;invalid option &lt;/span>&lt;span class="nv">$REPLY&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;choosing &lt;/span>&lt;span class="nv">$category&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tag1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Input main tag: &amp;#34;&lt;/span> tag
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tag2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Input second tag: &amp;#34;&lt;/span> tag2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tag3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Input third tag: &amp;#34;&lt;/span> tag3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Generate default index.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generate Default Front Matter In &lt;/span>&lt;span class="nv">$post_path&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 0.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &amp;gt; &lt;span class="nv">$post_path&lt;/span>/index.md &lt;span class="s">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">---
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">title: $path_name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">description: $path_name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">slug: $path_name
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">date: $now
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">categories:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> - $category
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">tags:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> - $tag
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> - $tag2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> - $tag3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">weight: 1 # You can add weight to some posts to override the default sorting (date descending)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">---
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Copy &lt;/span>&lt;span class="nv">$file&lt;/span>&lt;span class="s2"> to &lt;/span>&lt;span class="nv">$post_path&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &lt;span class="nv">$file&lt;/span> &amp;gt;&amp;gt; &lt;span class="nv">$post_path&lt;/span>/index.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-------------------&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;End of the create index.md&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="script-2-上傳到github">Script 2 上傳到Github
&lt;/h3>&lt;p>主要內容為：&lt;/p>
&lt;ol>
&lt;li>進入工作目錄&lt;/li>
&lt;li>新增改變的內容到git ( git add )&lt;/li>
&lt;li>確認改變的項目並加入訊息 ( git commit )&lt;/li>
&lt;li>推送到Github的Master branch ( git push )&lt;/li>
&lt;/ol>
&lt;p>gitpush.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If a command fails then the deploy stops&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;\033[0;32mDeploying updates to GitHub...\033[0m\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build the project.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># hugo # if using a theme, replace with `hugo -t &amp;lt;YOURTHEME&amp;gt;`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Go To Public folder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> hugo-blog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Add changes to git.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Commit changes.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;rebuilding site &lt;/span>&lt;span class="k">$(&lt;/span>date&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$*&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$*&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$msg&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Push source and build repos.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push origin master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># come back zero&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ..
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="script-3-結合script-12">Script 3 結合Script 1&amp;amp;2
&lt;/h3>&lt;p>主要內容為：&lt;/p>
&lt;ol>
&lt;li>定義前面兩個Script作為變數&lt;/li>
&lt;li>詢問是否要複製筆記 ( 執行Script 1 )&lt;/li>
&lt;li>若回答y (yes)，會再問一次，回答n (no)，則進行下一步&lt;/li>
&lt;li>詢問是否執行推送到Github上 ( 執行Script 2 )&lt;/li>
&lt;/ol>
&lt;p>deploy-blog.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Define Script&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">cp&lt;/span>&lt;span class="o">=&lt;/span>/Users/wangken/myblog/cp_to_blog.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">push&lt;/span>&lt;span class="o">=&lt;/span>/Users/wangken/myblog/gitpush.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ask for copy or not&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> true&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Do you want to copy md file? (y/n) &amp;#34;&lt;/span> yn1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="nv">$yn1&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Yy&lt;span class="o">]&lt;/span>* &lt;span class="o">)&lt;/span> &lt;span class="nv">$cp&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Nn&lt;span class="o">]&lt;/span>* &lt;span class="o">)&lt;/span> break&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">)&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Please answer yes or no.&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ask for Push or not&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> true&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">read&lt;/span> -p &lt;span class="s2">&amp;#34;Do you want to push to github? (y/n) &amp;#34;&lt;/span> yn2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">case&lt;/span> &lt;span class="nv">$yn2&lt;/span> in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Yy&lt;span class="o">]&lt;/span>* &lt;span class="o">)&lt;/span> &lt;span class="nv">$push&lt;/span>&lt;span class="p">;&lt;/span> break&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>Nn&lt;span class="o">]&lt;/span>* &lt;span class="o">)&lt;/span> break&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">)&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Please answer yes or no.&amp;#34;&lt;/span>&lt;span class="p">;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">esac&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="執行結果截圖">執行結果截圖
&lt;/h3>&lt;p>執行deply-blog.sh ，詢問廠牌後會用前面定義好的筆記資料夾來搜尋筆記&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230923174928576.png"
loading="lazy"
alt="image-20230923174928576"
>&lt;/p>
&lt;p>填寫參數後選擇自動上傳到github (y)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230923174957203.png"
loading="lazy"
alt="image-20230923174957203"
>&lt;/p>
&lt;p>確認 index.md 前面已自動加入了Front Matter&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230923175024090.png"
loading="lazy"
alt="image-20230923175024090"
>&lt;/p>
&lt;p>以上就是我半自動化讓筆記上傳到Github的過程，再加上原先Hugo Stack的範本，&lt;/p>
&lt;p>讓部落格網站可以自動更新文章，如有其他建議歡迎不吝指教，謝謝。&lt;/p></description></item><item><title>Nutanix-Notes</title><link>https://wangken0129.github.io/p/nutanix-notes/</link><pubDate>Sat, 23 Sep 2023 08:25:49 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix-notes/</guid><description>&lt;h1 id="筆記區">筆記區
&lt;/h1>&lt;p>純粹筆記，隨時更新。&lt;/p>
&lt;h2 id="查詢interface-status">查詢interface status
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>登入一台CVM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下指令查詢 &amp;ldquo;allssh manage_ovs show_interfaces&amp;rdquo;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-18FM6J330088-B-CVM:172.16.90.66:~$ allssh manage_ovs show_interfaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">================== 172.16.90.65 =================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name mode link speed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth0 10000 True 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth1 10000 True 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth2 10000 True 10000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth3 10000 True 10000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">================== 172.16.90.67 =================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name mode link speed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth0 10000 True 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth1 10000 True 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth2 10000 True 10000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth3 10000 True 10000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">================== 172.16.90.66 =================
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name mode link speed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth0 10000 True 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth1 10000 True 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth2 10000 True 10000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eth3 10000 True 10000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="確認cluster-status">確認Cluster Status
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">登入&lt;/span>&lt;span class="n">CVM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="err">查看&lt;/span>&lt;span class="n">node投票機制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">nodetool&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">ring&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="err">查看叢集狀態&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">cs&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="n">UP&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span class="err">有&lt;/span>&lt;span class="n">down的會show出來&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="n">status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="err">確認&lt;/span>&lt;span class="n">PE上的ata&lt;/span> &lt;span class="n">Resiliency&lt;/span> &lt;span class="n">Status&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">or&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">ncli&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">get&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">domain&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fault&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tolerance&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">status&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="關機流程-換記憶體">關機流程 (換記憶體)
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">登入&lt;/span>&lt;span class="n">CVM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="err">查看叢集狀態&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">cs&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">grep&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="n">UP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">nodetool&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">ring&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="err">關閉&lt;/span>&lt;span class="n">CVM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">$&lt;/span>&lt;span class="n">cvm_shutdown&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span> &lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="move-windows-2003">Move Windows 2003
&lt;/h2>&lt;h3 id="步驟">步驟
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://portal.nutanix.com/page/documents/kbs/details?targetId=kA00e000000Cr6CCAS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. MergeIDE.bat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. MOVE vm data (uncheck preparation, check only data seed)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. poweroff vm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. acli change scsi to ide , delete scsi.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. boot to windows
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6. install virtIO (NetKVM、Balloon、VIOSCSI)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7. acli change hdd bus to pci sata
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">8. boot again
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>
&lt;p>將MergeIDE.bat的資料夾上傳到Windows 2003,並執行MergeIDE.bat
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/MergeIDE.png"
loading="lazy"
alt="MergeIDE"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開啟Move將vCenter上的VM移轉到Nutanix Cluster&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move01.png"
loading="lazy"
alt="Move01"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move02.png"
loading="lazy"
alt="Move02"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move03.png"
loading="lazy"
alt="Move03"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move_SelectVM.png"
loading="lazy"
alt="Move_SelectVM"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move_Network.png"
loading="lazy"
alt="Move_Network"
>&lt;/p>
&lt;p>&lt;strong>勾選Bypass Guest Operations&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move_Prep.png"
loading="lazy"
alt="Move_Prep"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move_prep02.png"
loading="lazy"
alt="Move_prep02"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move_VMsetting.png"
loading="lazy"
alt="Move_VMsetting"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Move_Save&amp;amp;Start.png"
loading="lazy"
alt="Move_Save&amp;Start"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>關閉移轉過後的VM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ssh 登入Cluster內其中一台CVM&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">執行指令取得scsi.0的硬碟uuid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$acli vm.get VM_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$acli vm.get VM_win2003
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------scsi to IDE ----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">＄acli vm.disk_create VM_NAME clone_from_vmdisk=uuid bus=ide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------delete scsi.0 ----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$acli vm.disk_delete VM_NAME disk_addr=scsi.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------vm.get VM_NAME----------------
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>開啟VM,執行Device Clenup&lt;/p>
&lt;/li>
&lt;li>
&lt;p>掛載ISO檔,把檔案複製到C槽再安裝Driver&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## 開啟裝置管理員新增以下路徑的Driver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ballon Controller、PCI Device
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. Windows_2003_Tools/virtio-win-0.1-81/WLH/x86
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console滑鼠、SCSI Passthrough Controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. Windows_2003_Tools/virtio-win-0.1-81/WLH/x86
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">網卡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. Windows_2003_Tools/virtio-win-0.1.189/NetKVM/2k3/x86
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USB Device、PCI Device
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. Windows_2003_Tools/virtio-win-0.1.189/Balloon/2k3/x86
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>調整ide to pci or scsi (prefer)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">執行指令取得ide.0的硬碟uuid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$acli&lt;/span> vm.get VM_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$acli&lt;/span> vm.get VM_win2003
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------ide to pci ----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">＄acli vm.disk_create VM_NAME &lt;span class="nv">clone_from_vmdisk&lt;/span>&lt;span class="o">=&lt;/span>uuid &lt;span class="nv">bus&lt;/span>&lt;span class="o">=&lt;/span>pci
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------delete ide.0 ----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$acli&lt;/span> vm.disk_delete VM_NAME &lt;span class="nv">disk_addr&lt;/span>&lt;span class="o">=&lt;/span>ide.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------vm.get VM_NAME----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$acli&lt;/span> vm.get VM_NAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>boot win2003&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="把disk-clone到image-service">把Disk Clone到image service
&lt;/h2>&lt;p>&lt;a class="link" href="https://next.nutanix.com/ncm-intelligent-operations-formerly-prism-pro-ultimate-26/ahv-vdisk-part-3-creating-an-image-of-or-from-an-existing-vdisk-33686" target="_blank" rel="noopener"
>https://next.nutanix.com/ncm-intelligent-operations-formerly-prism-pro-ultimate-26/ahv-vdisk-part-3-creating-an-image-of-or-from-an-existing-vdisk-33686&lt;/a>&lt;/p>
&lt;h3 id="eks-on-nutanix">EKS on Nutanix
&lt;/h3>&lt;p>&lt;a class="link" href="https://rural-gazelle-46d.notion.site/EKS-Anywhere-On-Nutanix-e6e7764e3daa4267a12cefe6c7a4b7e9" target="_blank" rel="noopener"
>https://rural-gazelle-46d.notion.site/EKS-Anywhere-On-Nutanix-e6e7764e3daa4267a12cefe6c7a4b7e9&lt;/a>&lt;/p>
&lt;h2 id="lab">LAB
&lt;/h2>&lt;h3 id="welcome-banner">Welcome Banner
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&amp;lt;h1 &lt;span class="nv">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text-align:center; color:black;&amp;#34;&lt;/span>&amp;gt;NetFos Nutanix Lab公告&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;br&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;br&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p &lt;span class="nv">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text-align:justify; color:blue;&amp;#34;&lt;/span>&amp;gt;1. 請將您建的虛擬機加上前輟_VM名稱，如Arthur_Jump，方便管理員管理。&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p &lt;span class="nv">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text-align:justify; color:red;&amp;#34;&lt;/span>&amp;gt;2. 2023-02-06調整網路架構，以能配置VPC為目標。&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p &lt;span class="nv">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text-align:justify; color:black;&amp;#34;&lt;/span>&amp;gt; Netfos Nutanix Team 敬上，更新於2023-02-07&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;img &lt;span class="nv">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/console/nutanix_welcome.jpg&amp;#34;&lt;/span> &lt;span class="nv">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;width:400px:height:200px&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/apache/www/console
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-13SM35330024-B-CVM:172.16.90.62:/home/apache/www/console$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">128&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-x---. &lt;span class="m">1&lt;/span> nutanix apache &lt;span class="m">4800&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 access_denied.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">2&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">4&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 api-explorer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">7&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">2&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 dev-mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">2&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 downloads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-x---. &lt;span class="m">1&lt;/span> nutanix apache &lt;span class="m">2532&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-x---. &lt;span class="m">1&lt;/span> nutanix apache &lt;span class="m">2532&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 index_qa.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">41&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 lib
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">5&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 minerva
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-x---. &lt;span class="m">1&lt;/span> nutanix apache &lt;span class="m">18753&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 not_found.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">2&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 nutanixapi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-------. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">48351&lt;/span> Mar &lt;span class="m">2&lt;/span> 16:45 nutanix_welcome.jpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">3&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 prism
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">2&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 v2api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---. &lt;span class="m">2&lt;/span> nutanix apache &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">2&lt;/span> 12:55 vnc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % scp -O nutanix@172.16.90.72:/home/apache/www/console/nutanix_welcome.jpg /Users/wangken/Desktop/Nutanix/Notes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Prism Central VM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@172.16.90.72&lt;span class="err">&amp;#39;&lt;/span>s password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix_welcome.jpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="擴充node-error">擴充Node Error
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>新的Node檢查Disk型號&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-23SG3G330009-A-CVM:192.168.208.43:~$ list_disks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR:root:Could not reach zookeeper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR:root:Unable to connect to zookeeper session
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Slot Disk Model Serial Size
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---- -------- ---------------- -------------- ------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> /dev/sda MZILG7T6HBLA/A07 S70KNE0W500857 7.7 TB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> /dev/sdb MZILG7T6HBLA/A07 S70KNE0W500855 7.7 TB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-23SG3G330009-A-CVM:192.168.208.43:~$ grep -A6 -B12 MZILG7T6HBLA/A07 /etc/nutanix/hcl.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;approved_by&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;Nutanix&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;blacklisted_firmware&amp;#34;&lt;/span>: &lt;span class="o">[]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;boot&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;capacity_gb&amp;#34;&lt;/span>: 7681.51,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;diagnostics_test&amp;#34;&lt;/span>: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;endurance&amp;#34;&lt;/span>: 1,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;include_in_hcl&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;interface&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;SAS&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;manufacturer&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;Samsung&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;metadata&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;model&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;MZILG7T6HBLA/A07&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;model_string&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;SAMSUNG PM1653 SAS 7.6TB RI&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;nand_type&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;TLC&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;recommended_firmware&amp;#34;&lt;/span>: &lt;span class="o">[]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;trim_enabled&amp;#34;&lt;/span>: true,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;SSD&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;uuid&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;772da35d-4621-4f8c-80bb-2f1a26648be0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230830153417504.png"
loading="lazy"
alt="image-20230830153417504"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>原來的Cluster內檢查/etc/nutanix/hcl.json 是否有此型號&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果沒有，下載最新的Foundation Platform，並解壓縮
裡面有hcl.json，上傳至CVM並傳到每個Node CVM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重啟genesis 後即可再次Expand Cluster&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>OCP-4.11.9_on_vSphere(UPI)</title><link>https://wangken0129.github.io/p/ocp-4.11.9_on_vsphereupi/</link><pubDate>Sat, 23 Sep 2023 08:19:11 +0800</pubDate><guid>https://wangken0129.github.io/p/ocp-4.11.9_on_vsphereupi/</guid><description>&lt;h1 id="install-openshift-4119-on-vsphereupi">Install Openshift 4.11.9 on vSphere(UPI)
&lt;/h1>&lt;h3 id="說明">說明
&lt;/h3>&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/installing/installing_vsphere/installing-vsphere.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/installing/installing_vsphere/installing-vsphere.html&lt;/a>
&lt;a class="link" href="https://cloud.redhat.com/blog/deploying-openshift-4.4-to-vmware-vsphere-7?hsLang=en-us" target="_blank" rel="noopener"
>https://cloud.redhat.com/blog/deploying-openshift-4.4-to-vmware-vsphere-7?hsLang=en-us&lt;/a>&lt;/p>
&lt;ol>
&lt;li>用Mac 當作Client&lt;/li>
&lt;li>需要事先安裝好Bastion&lt;/li>
&lt;li>Bastion安裝設定Named、HAProxy、Web Server (這裡用Nginx)&lt;/li>
&lt;li>用rhcos-4.11.9.ova 來ESXi 部署ovf 範本&lt;/li>
&lt;/ol>
&lt;h3 id="下載oc-client">下載OC Client
&lt;/h3>&lt;p>&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-mac-4.11.9.tar.gz" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-mac-4.11.9.tar.gz&lt;/a>&lt;/p>
&lt;h3 id="下載ocp-installer">下載OCP Installer
&lt;/h3>&lt;p>&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-install-mac-4.11.9.tar.gz" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-install-mac-4.11.9.tar.gz&lt;/a>&lt;/p>
&lt;h3 id="下載coreos-4119ova">下載CoreOS-4.11.9.ova
&lt;/h3>&lt;p>&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.9/rhcos-4.11.9-x86_64-vmware.x86_64.ova" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.9/rhcos-4.11.9-x86_64-vmware.x86_64.ova&lt;/a>&lt;/p>
&lt;h3 id="下載pull-secret">下載Pull-Secret
&lt;/h3>&lt;p>&lt;a class="link" href="https://console.redhat.com/openshift/downloads#tool-pull-secret" target="_blank" rel="noopener"
>https://console.redhat.com/openshift/downloads#tool-pull-secret&lt;/a>&lt;/p>
&lt;h3 id="named">Named
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dns" data-lang="dns">&lt;span class="line">&lt;span class="cl">&lt;span class="nc">Named&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">設定檔&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">~]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">/etc/&lt;/span>&lt;span class="nc">named.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">named.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">Provided&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">Red&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">Hat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">bind&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">package&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">configure&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">ISC&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">BIND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">named&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">8&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">DNS&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">server&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">caching&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">only&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">nameserver&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">as&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">DNS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">resolver&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">only&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">See&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">/usr/share/doc/bind*/sample/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">example&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">named&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">configuration&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">files.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">options&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">listen-on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">53&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">any&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">listen-on-v6&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">53&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">::&lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">directory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">dump-file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/data/&lt;/span>&lt;span class="nc">cache_dump.db&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">statistics-file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/data/&lt;/span>&lt;span class="nc">named_stats.txt&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">memstatistics-file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/data/&lt;/span>&lt;span class="nc">named_mem_stats.txt&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">secroots-file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/data/&lt;/span>&lt;span class="nc">named.secroots&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">recursing-file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/data/&lt;/span>&lt;span class="nc">named.recursing&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">allow-query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">any&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">##&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">設定轉寄站&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">forwarders&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.2.12&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.2.11&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">/*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">If&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">building&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">AUTHORITATIVE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">DNS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">server,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">do&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">NOT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">recursion.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">If&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">building&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">RECURSIVE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="err">caching&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">DNS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">server,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">need&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">enable&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="py">recursion. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">If&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">recursive&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">DNS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">server&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">has&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">IP&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">address,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">MUST&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">access&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">control&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">limit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">queries&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">legitimate&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">users. &lt;/span>&lt;span class="err">Failing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">do&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">so&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">will&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">cause&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">server&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">become&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">part&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">large&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">scale&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">DNS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">amplification&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="py">attacks. &lt;/span>&lt;span class="err">Implementing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">BCP38&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">within&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">network&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">greatly&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">reduce&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">such&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">attack&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">surface&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">*/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">recursion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">yes&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">dnssec-enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">yes&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">dnssec-validation&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">yes&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">managed-keys-directory&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/dynamic&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">pid-file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/run/named/&lt;/span>&lt;span class="nc">named.pid&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">session-keyfile&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/run/named/&lt;/span>&lt;span class="nc">session.key&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">/*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">https://&lt;/span>&lt;span class="nc">fedoraproject.org&lt;/span>&lt;span class="err">/wiki/Changes/CryptoPolicy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">*/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">include&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/etc/crypto-policies/back-ends/&lt;/span>&lt;span class="nc">bind.config&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">logging&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">channel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">default_debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;data/&lt;/span>&lt;span class="nc">named.run&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">severity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">dynamic&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">zone&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">hint&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="err">file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="nc">named.ca&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">zone&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="nc">ocp.infotech.com.tw&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">master&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/&lt;/span>&lt;span class="nc">forward.bastion.ocp&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">allow-update&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">none&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">allow-query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">any&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">allow-transfer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">none&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">zone&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="nc">.168.192.in-addr.arpa&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">type&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">master&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">file&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/var/named/&lt;/span>&lt;span class="nc">reverse.bastion.ocp&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">allow-update&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">none&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">allow-query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">any&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">allow-transfer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">none&lt;/span>&lt;span class="c">; };&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">}&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">include&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/etc/&lt;/span>&lt;span class="nc">named.rfc1912.zones&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">include&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">&amp;#34;/etc/&lt;/span>&lt;span class="nc">named.root.key&lt;/span>&lt;span class="err">&amp;#34;&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">------&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">正向解析&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">~]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">/var/named/&lt;/span>&lt;span class="nc">forward.bastion.ocp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">$TTL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">@&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SOA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">ns1.infotech.com.tw. &lt;/span>&lt;span class="err">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2019070700&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; serial&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="err">H&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; refresh (3 hours)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">30&lt;/span>&lt;span class="err">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; retry (30 minutes)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; expiry (2 weeks)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; minimum (1 week)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">ns1.infotech.com.tw.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">MX&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">10&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">smtp.infotech.com.tw.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">ns1.infotech.com.tw. &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">smtp.infotech.com.tw. &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">helper.infotech.com.tw. &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">helper.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">api.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">api-int.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">*&lt;/span>&lt;span class="nc">.apps.ocp.infotech.com.tw.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.37&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">bootstrap.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.36&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">master1.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.31&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">master2.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.32&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">master3.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.33&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">worker1.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.34&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">worker2.ocp.infotech.com.tw. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.3.35&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">-------&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">反向解析&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">~]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">/var/named/&lt;/span>&lt;span class="nc">reverse.bastion.ocp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">$TTL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">@&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SOA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">ns1.infotech.com.tw. &lt;/span>&lt;span class="err">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2019070700&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; serial&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="err">H&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; refresh (3 hours)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">30&lt;/span>&lt;span class="err">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; retry (30 minutes)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; expiry (2 weeks)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; minimum (1 week)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">ns1.infotech.com.tw.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">37.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">api.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">37.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">api-int.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">36.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bootstrap.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">31.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">master1.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">32.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">master2.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">33.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">master3.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">34.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">worker1.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">35.3.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">worker2.ocp.infotech.com.tw. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="haproxy">HAProxy
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/haproxy/haproxy.cfg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">global&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span> &lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">local2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">haproxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxconn&lt;/span> &lt;span class="mi">4000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">daemon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">defaults&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">http&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span> &lt;span class="n">global&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span> &lt;span class="n">dontlognull&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">close&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span> &lt;span class="n">redispatch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">retries&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">request&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">queue&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">connect&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keep&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alive&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxconn&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">frontend&lt;/span> &lt;span class="n">stats&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1936&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">http&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span> &lt;span class="n">global&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxconn&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">hide&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">refresh&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">show&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">show&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">desc&lt;/span> &lt;span class="n">Stats&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">ocp&lt;/span> &lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">auth&lt;/span> &lt;span class="n">admin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">ocp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">uri&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">stats&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">bootstrap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">backup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master1&lt;/span> &lt;span class="n">master1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master2&lt;/span> &lt;span class="n">master2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master3&lt;/span> &lt;span class="n">master3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">machine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">22623&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">bootstrap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">backup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master1&lt;/span> &lt;span class="n">master1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master2&lt;/span> &lt;span class="n">master2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master3&lt;/span> &lt;span class="n">master3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">balance&lt;/span> &lt;span class="n">source&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker1&lt;/span> &lt;span class="n">worker1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker2&lt;/span> &lt;span class="n">worker2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">balance&lt;/span> &lt;span class="n">source&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker1&lt;/span> &lt;span class="n">worker1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker2&lt;/span> &lt;span class="n">worker2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">infotech&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tw&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="nginx">Nginx
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">根目錄&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">html&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/nginx/nginx.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># For more information on configuration, see:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># * Official English Documentation: http://nginx.org/en/docs/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># * Official Russian Documentation: http://nginx.org/ru/docs/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">user&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">worker_processes&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">error_log&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pid&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modules&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">events&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">worker_connections&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">http&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">log_format&lt;/span> &lt;span class="n">main&lt;/span> &lt;span class="s1">&amp;#39;$remote_addr - $remote_user [$time_local] &amp;#34;$request&amp;#34; &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;$status $body_bytes_sent &amp;#34;$http_referer&amp;#34; &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#34;$http_user_agent&amp;#34; &amp;#34;$http_x_forwarded_for&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">access_log&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sendfile&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tcp_nopush&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tcp_nodelay&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">keepalive_timeout&lt;/span> &lt;span class="mi">65&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">types_hash_max_size&lt;/span> &lt;span class="mi">2048&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default_type&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">octet&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Load modular configuration files from the /etc/nginx/conf.d directory.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># See http://nginx.org/en/docs/ngx_core_module.html#include&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for more information.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">8000&lt;/span> &lt;span class="n">default_server&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="p">[::]:&lt;/span>&lt;span class="mi">8000&lt;/span> &lt;span class="n">default_server&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_name&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">root&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Load configuration files for the default server block.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">location&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">error_page&lt;/span> &lt;span class="mi">404&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="mf">404.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">location&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">error_page&lt;/span> &lt;span class="mi">500&lt;/span> &lt;span class="mi">502&lt;/span> &lt;span class="mi">503&lt;/span> &lt;span class="mi">504&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">location&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Settings for a TLS enabled server.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># server {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># listen 443 ssl http2 default_server;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># listen [::]:443 ssl http2 default_server;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># server_name _;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># root /usr/share/nginx/html;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ssl_certificate &amp;#34;/etc/pki/nginx/server.crt&amp;#34;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ssl_certificate_key &amp;#34;/etc/pki/nginx/private/server.key&amp;#34;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ssl_session_cache shared:SSL:1m;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ssl_session_timeout 10m;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ssl_ciphers PROFILE=SYSTEM;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ssl_prefer_server_ciphers on;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># # Load configuration files for the default server block.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># include /etc/nginx/default.d/*.conf;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># location / {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># error_page 404 /404.html;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># location = /40x.html {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># error_page 500 502 503 504 /50x.html;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># location = /50x.html {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="產生安裝檔案">產生安裝檔案
&lt;/h2>&lt;h3 id="確認-cli-tool">確認 cli tool
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 2232728
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 8 wangken staff 256 12 13 15:36 .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x---+ 41 wangken staff 1312 12 13 15:35 ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ 1 wangken staff 706 10 8 18:41 README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ 2 wangken staff 98436592 10 6 20:06 kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ 2 wangken staff 98436592 10 6 20:06 oc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ 1 wangken staff 44116650 12 13 15:06 openshift-client-mac-4.11.9.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ 1 wangken staff 528956912 10 8 18:41 openshift-install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ 1 wangken staff 363543317 12 13 15:07 openshift-install-mac-4.11.9.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./oc version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client Version: 4.11.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kustomize Version: v4.5.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ./openshift-install version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./openshift-install 4.11.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">built from commit 01a6869a6f1208fb4d112060c5971432fdd619cf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">release image quay.io/openshift-release-dev/ocp-release@sha256:94b611f00f51c9acc44ca3f4634e46bd79d7d28b46047c7e3389d250698f0c99
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">release architecture amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="產生ssh-key-bastion">產生SSH key (Bastion)
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion .ssh]# cat id_rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----BEGIN OPENSSH PRIVATE KEY-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">QyNTUxOQAAACDF/jswkiYiL+jXDMMUpwga7CGV79kXtcMnOpbzO5xOwQAAAKjY1yrT2Ncq
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0wAAAAtzc2gtZWQyNTUxOQAAACDF/jswkiYiL+jXDMMUpwga7CGV79kXtcMnOpbzO5xOwQ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AAAEBIWOmAtlitDdZXhb+1vtMnSbNBRQfyANPR/eHUPuisK8X+OzCSJiIv6NcMwxSnCBrs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IZXv2Re1wyc6lvM7nE7BAAAAIWRldm9wQGJhc3Rpb24ub2NwLmluZm90ZWNoLmNvbS50dw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ECAwQ=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----END OPENSSH PRIVATE KEY-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion .ssh]# cat id_rsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMX+OzCSJiIv6NcMwxSnCBrsIZXv2Re1wyc6lvM7nE7B devop@bastion.ocp.infotech.com.tw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立install-configyaml">建立Install-config.yaml
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseDomain: infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controlPlane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networking:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: 10.128.0.0/14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hostPrefix: 23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networkType: OpenShiftSDN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.30.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vsphere:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vcenter: tpeinfovcsa7p.infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: cisadmin@vsphere.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: P@55w.rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> datacenter: TPECIS_Datacenter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> defaultDatastore: v7000_CIS01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskType: thin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fips: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pullSecret: &amp;#39;{&amp;#34;auths&amp;#34;:{&amp;#34;cloud.openshift.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K29jbV9hY2Nlc3NfMzEwNjVjNmVmMTk5NDZmNWEwNmUzZmI4MTVmNzk2OTE6NEJRVk1FVk9CTDRZQVRBT0pONEhQVkIyUExFQTdKNDE3WExFU1IzVDk3NU1YUTJXWE9FSjBNTVk0MzFQQk9RUA==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;quay.io&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K29jbV9hY2Nlc3NfMzEwNjVjNmVmMTk5NDZmNWEwNmUzZmI4MTVmNzk2OTE6NEJRVk1FVk9CTDRZQVRBT0pONEhQVkIyUExFQTdKNDE3WExFU1IzVDk3NU1YUTJXWE9FSjBNTVk0MzFQQk9RUA==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;registry.connect.redhat.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;fHVoYy1wb29sLTc5MzgwY2YyLTUxNTEtNGRiNi04YjA3LTRiNzQ4NDcxNWE2NDpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSmxOak5rWVdWbU1tSXlaRFEwTVdKaVlUTXpObVUwTkdGbVl6WmtPVEUwWVNKOS5RMlp6Q1JaWWltVDIxM2dpYU9CRWtNWEVkYUtjbnc4WHN1bTY3VEVOdjEyRjBjQUgyNWNZMVdWTjZNUEY2R21CNjh3TmF4TnoxRHVpVnBtY0ZKM2JZTW0yNVVzZGJxeFc4cEd1dGszSzF5NlNUWk9VejlkU0V4UGg4aUxha05qSEQ4Tml6emNmM1lUQjRNUXdhYTVFSG1PMXVTUERUZFRBTXFYS3FFa2gwRXpHOUpKZTlUMnM4bVJXWkVIbndoZW84cktncVZuV1VCeGhqTldFNElfWG1JZnBPRl91akpFNHdXNzRJWjd5UmdoUGExQVVwS3BsY0NJQ2ZGdGtaS29WUTFwNTBzUzNabkxWYjd6ZHdXR21WcXVsNUFoZUNiSHNoNEtpSjFnYXRSbkwtMG92THZoNGdseUZqd0c0Z3lMMEdyS1ItbU5WMFZYc01mVzJDNXNVaXBzVmhKcmhmY01vQjRNSDRDbjZKcjJXS2plbEdqSVdHQzBUV1BBNlZQZDBmc0lyLTRCY2RBdUFmcm5SaWpGM3d0Mng3RFdXQ1RScFVPbUVMY3U5bDR6Wm5uZkVSejNMd01rNmhCWTFyYXV1TGhCWXJraFlzQURqWEl3bGxPTkwyc01GMUU2OVNIVG1vV0tvNU5fdHdoWE5fX1BtT1ozMzc5ZVNDVGdnTFNZd3hyR1VwS3FXRDFva3JWZlRIWmNlcTk4WHQ2QjFtZHIxcmxLV2RiRmhsRDQ3Q1pldEhrNW1xQUlianp1UzlONENJWllhd0lIZE5LWVotN2tRNFQyUFg4QWdadHFNdHdjY2c0bWx3ME40c09LbWVZN2Q2bGw0bXpXV201bVo0aktTeHdpYmJ3STEwOFcxWVFlSlQ4QW9WZFlkc09YWkdWc3ZxZVVZOU9qbzR2RQ==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;registry.redhat.io&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;fHVoYy1wb29sLTc5MzgwY2YyLTUxNTEtNGRiNi04YjA3LTRiNzQ4NDcxNWE2NDpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSmxOak5rWVdWbU1tSXlaRFEwTVdKaVlUTXpObVUwTkdGbVl6WmtPVEUwWVNKOS5RMlp6Q1JaWWltVDIxM2dpYU9CRWtNWEVkYUtjbnc4WHN1bTY3VEVOdjEyRjBjQUgyNWNZMVdWTjZNUEY2R21CNjh3TmF4TnoxRHVpVnBtY0ZKM2JZTW0yNVVzZGJxeFc4cEd1dGszSzF5NlNUWk9VejlkU0V4UGg4aUxha05qSEQ4Tml6emNmM1lUQjRNUXdhYTVFSG1PMXVTUERUZFRBTXFYS3FFa2gwRXpHOUpKZTlUMnM4bVJXWkVIbndoZW84cktncVZuV1VCeGhqTldFNElfWG1JZnBPRl91akpFNHdXNzRJWjd5UmdoUGExQVVwS3BsY0NJQ2ZGdGtaS29WUTFwNTBzUzNabkxWYjd6ZHdXR21WcXVsNUFoZUNiSHNoNEtpSjFnYXRSbkwtMG92THZoNGdseUZqd0c0Z3lMMEdyS1ItbU5WMFZYc01mVzJDNXNVaXBzVmhKcmhmY01vQjRNSDRDbjZKcjJXS2plbEdqSVdHQzBUV1BBNlZQZDBmc0lyLTRCY2RBdUFmcm5SaWpGM3d0Mng3RFdXQ1RScFVPbUVMY3U5bDR6Wm5uZkVSejNMd01rNmhCWTFyYXV1TGhCWXJraFlzQURqWEl3bGxPTkwyc01GMUU2OVNIVG1vV0tvNU5fdHdoWE5fX1BtT1ozMzc5ZVNDVGdnTFNZd3hyR1VwS3FXRDFva3JWZlRIWmNlcTk4WHQ2QjFtZHIxcmxLV2RiRmhsRDQ3Q1pldEhrNW1xQUlianp1UzlONENJWllhd0lIZE5LWVotN2tRNFQyUFg4QWdadHFNdHdjY2c0bWx3ME40c09LbWVZN2Q2bGw0bXpXV201bVo0aktTeHdpYmJ3STEwOFcxWVFlSlQ4QW9WZFlkc09YWkdWc3ZxZVVZOU9qbzR2RQ==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;}}}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sshKey: &amp;#39;ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMX+OzCSJiIv6NcMwxSnCBrsIZXv2Re1wyc6lvM7nE7B devop@bastion.ocp.infotech.com.tw&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capabilities:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baselineCapabilitySet: vCurrent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vsphere:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vcenter: tpeinfovcsa7p.infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> username: cisadmin@vsphere.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: P@55w.rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> datacenter: TPECIS_Datacenter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> defaultDatastore: v7000_CIS01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskType: thin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="產生ignition-file">產生Ignition file
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">./openshift-install create manifests --dir install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./openshift-install create ignition-configs --dir install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Openshift Manifests from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Common Manifests from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Worker Machines from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Master Machines from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming OpenShift Install (Manifests) from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Ignition-Configs created in: install and install/auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 2960
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 9 wangken staff 288 12 13 16:27 .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 11 wangken staff 352 12 13 15:56 ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 wangken staff 67239 12 13 16:27 .openshift_install.log
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- 1 wangken staff 1154395 12 13 16:27 .openshift_install_state.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-x--- 4 wangken staff 128 12 13 16:27 auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- 1 wangken staff 275583 12 13 16:27 bootstrap.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- 1 wangken staff 1721 12 13 16:27 master.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- 1 wangken staff 94 12 13 16:27 metadata.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- 1 wangken staff 1721 12 13 16:27 worker.ign
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="複製ignition-file-到web">複製Ignition File 到Web
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">scp *.ign root@192.168.3.37:/usr/share/nginx/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@192.168.3.37&amp;#39;s password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bootstrap.ign 100% 269KB 3.5MB/s 00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master.ign 100% 1721 86.9KB/s 00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker.ign 100% 1721 188.5KB/s 00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat merge-bootstrap.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;ignition&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;config&amp;#34;: {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;merge&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;source&amp;#34;: &amp;#34;http://192.168.3.37:8000/bootstrap.ign&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;verification&amp;#34;: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;timeouts&amp;#34;: {},
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;version&amp;#34;: &amp;#34;3.2.0&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> },
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;networkd&amp;#34;: {},
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;passwd&amp;#34;: {},
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;storage&amp;#34;: {},
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;systemd&amp;#34;: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----轉檔為Base64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod 644 *.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion html]# base64 -w0 merge-bootstrap.ign &amp;gt; merge-bootstrap.64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ewogICJpZ25pdGlvbiI6IHsKICAgICJjb25maWciOiB7CiAgICAgICJtZXJnZSI6IFsKICAgICAgICB7CiAgICAgICAgICAic291cmNlIjogImh0dHA6Ly8xOTIuMTY4LjMuMzc6ODAwMC9ib290c3RyYXAuaWduIiwKICAgICAgICAgICJ2ZXJpZmljYXRpb24iOiB7fQogICAgICAgIH0KICAgICAgXQogICAgfSwKICAgICJ0aW1lb3V0cyI6IHt9LAogICAgInZlcnNpb24iOiAiMy4yLjAiCiAgfSwKICAibmV0d29ya2QiOiB7fSwKICAicGFzc3dkIjoge30sCiAgInN0b3JhZ2UiOiB7fSwKICAic3lzdGVtZCI6IHt9Cn0K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion html]# base64 -w0 master.ign &amp;gt; master.64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion html]# base64 -w0 worker.ign &amp;gt; worker.64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="複製ovf至vm">複製OVF至VM
&lt;/h2>&lt;h3 id="調整參數">調整參數
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vApp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. base64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bootstrap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ewogICJpZ25pdGlvbiI6IHsKICAgICJjb25maWciOiB7CiAgICAgICJtZXJnZSI6IFsKICAgICAgICB7CiAgICAgICAgICAic291cmNlIjogImh0dHA6Ly8xOTIuMTY4LjMuMzc6ODAwMC9ib290c3RyYXAuaWduIiwKICAgICAgICAgICJ2ZXJpZmljYXRpb24iOiB7fQogICAgICAgIH0KICAgICAgXQogICAgfSwKICAgICJ0aW1lb3V0cyI6IHt9LAogICAgInZlcnNpb24iOiAiMy4yLjAiCiAgfSwKICAibmV0d29ya2QiOiB7fSwKICAicGFzc3dkIjoge30sCiAgInN0b3JhZ2UiOiB7fSwKICAic3lzdGVtZCI6IHt9Cn0K
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eyJpZ25pdGlvbiI6eyJjb25maWciOnsibWVyZ2UiOlt7InNvdXJjZSI6Imh0dHBzOi8vYXBpLWludC5vY3AuaW5mb3RlY2guY29tLnR3OjIyNjIzL2NvbmZpZy9tYXN0ZXIifV19LCJzZWN1cml0eSI6eyJ0bHMiOnsiY2VydGlmaWNhdGVBdXRob3JpdGllcyI6W3sic291cmNlIjoiZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LExTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVVJGUkVORFFXWnBaMEYzU1VKQlowbEpXV1JoZUZwMFZXVkVha2wzUkZGWlNrdHZXa2xvZG1OT1FWRkZURUpSUVhkS2FrVlRUVUpCUjBFeFZVVUtRM2hOU21JelFteGliazV2WVZkYU1FMVNRWGRFWjFsRVZsRlJSRVYzWkhsaU1qa3dURmRPYUUxQ05GaEVWRWw1VFZSSmVFMTZRVFJPUkZVeFRteHZXQXBFVkUxNVRWUkplRTFFUVRST1JGVXhUbXh2ZDBwcVJWTk5Ra0ZIUVRGVlJVTjRUVXBpTTBKc1ltNU9iMkZYV2pCTlVrRjNSR2RaUkZaUlVVUkZkMlI1Q21JeU9UQk1WMDVvVFVsSlFrbHFRVTVDWjJ0eGFHdHBSemwzTUVKQlVVVkdRVUZQUTBGUk9FRk5TVWxDUTJkTFEwRlJSVUV6U0hWcVNHc3haaTlCWWxNS2FHcEdhemxtV0hOelZqZFJNVzlJUVRkVFNqQnVlVkpqTDJNMmR6aERPV1ZUV1dkTWNIWnJjSEZEY3pCdFR5dE9NMHRGTW5Kb2VTdDVVVUZyUVN0eEt3cE5TVkJXVURWRU9HRjFkM3BwWTFOUFZERm5WR2xTTmpreWFFVTFVVEUwYmtaS1N6bE5UMGRaWkdJeFJFTklNazlJYkZkMWRqRktlVlJvUW5admJuRXhDamw2VG01SldreG5iMWRUUm5SWGNtMVFhR05vY3pJeE5sVTVhREpDY0U1QmIwbzJXbU01TjBZM09UWnRLMFpLVlVKeGRFSnhVMVU1UW0xMmEwbHZSa3dLVFd0dE5HczVORk50UzFCRVpURnpPSEZGY0ZGM2FDdDVhbGRPV214aFkyeHRaMGRTTVdkRFptbGxPRGt3UjJ4dWRUazFSbWMwWjBORVFXMHpNRkZ4V2dvdk1tVkNXVEJ2ZW5kMFkyOTZVakZVVkU1cVpUSnpXaTlPZEhBMUwyRTBiR3RMYjNweGJXSnpURE13U25aaFNtbzVlVmh4T1VRelZtRnZVV2xIWkhWbENsQkpMMlJ6WkZsTWEzZEpSRUZSUVVKdk1FbDNVVVJCVDBKblRsWklVVGhDUVdZNFJVSkJUVU5CY1ZGM1JIZFpSRlpTTUZSQlVVZ3ZRa0ZWZDBGM1JVSUtMM3BCWkVKblRsWklVVFJGUm1kUlZXdEljR1IyVG5sUlVuZzFkVWhoTjJoWmJ6Tm9RM0Y2ZDJ4M1VYZEVVVmxLUzI5YVNXaDJZMDVCVVVWTVFsRkJSQXBuWjBWQ1FVbzVlRnBRTlRNeVZqWjBaa3RVVGxSVGFGTllWbEZVTlRCdmF6VkRUR3h1ZVVaNWRtRkNjV2huZEhwVlZsZGpPR2xGVTFocWFYbHJSRlZxQ2twallXcFZOSEZaU1ZkSmVGWlJNVmR3Um5GcFNqQlpkbTV4TXpOa2JFMUdORTg1U1VWT1owTXdkRGx3UjI1R1NGSlpLMUV6YjA5WVkzUXdWRlF2UkhVS1JuSnpXbFpoTTJsVE1rZDRaSGc1ZDFsV1pFbHVUVzV2V0VscFFrRlliMDlaTTBaNVYwRlROakJOV1RkMmVXTkhObXRLVFZWdVpUbDRVbGRyWjBsRFJBcDZOVXBXU0RSUE1FZ3pZVGxaTVhsSFowODBTVVpSVVN0c1JsZENiMmhOU2xrelpXaEpXR05oVDJORGJsWTNZV1pvUXpKcVVHbFpPRTFrZFdsWU9HRkRDblExUkdVM1psQjRUMmsxVWpSclZWQmtWRFYwYkhGeldHdEliWEJFU3lzM1ZVaFZLMk13ZFdGd1FVTjVObVUzU1U1U1dGbHViVkpMTlVadFJUSkZPVVFLUmxoc2NXdEtTM1JITVVoVU5rSXdZbnB5UzBsU05ucDVPVVJyUFFvdExTMHRMVVZPUkNCRFJWSlVTVVpKUTBGVVJTMHRMUzB0Q2c9PSJ9XX19LCJ2ZXJzaW9uIjoiMy4yLjAifX0=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eyJpZ25pdGlvbiI6eyJjb25maWciOnsibWVyZ2UiOlt7InNvdXJjZSI6Imh0dHBzOi8vYXBpLWludC5vY3AuaW5mb3RlY2guY29tLnR3OjIyNjIzL2NvbmZpZy93b3JrZXIifV19LCJzZWN1cml0eSI6eyJ0bHMiOnsiY2VydGlmaWNhdGVBdXRob3JpdGllcyI6W3sic291cmNlIjoiZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LExTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVVJGUkVORFFXWnBaMEYzU1VKQlowbEpXV1JoZUZwMFZXVkVha2wzUkZGWlNrdHZXa2xvZG1OT1FWRkZURUpSUVhkS2FrVlRUVUpCUjBFeFZVVUtRM2hOU21JelFteGliazV2WVZkYU1FMVNRWGRFWjFsRVZsRlJSRVYzWkhsaU1qa3dURmRPYUUxQ05GaEVWRWw1VFZSSmVFMTZRVFJPUkZVeFRteHZXQXBFVkUxNVRWUkplRTFFUVRST1JGVXhUbXh2ZDBwcVJWTk5Ra0ZIUVRGVlJVTjRUVXBpTTBKc1ltNU9iMkZYV2pCTlVrRjNSR2RaUkZaUlVVUkZkMlI1Q21JeU9UQk1WMDVvVFVsSlFrbHFRVTVDWjJ0eGFHdHBSemwzTUVKQlVVVkdRVUZQUTBGUk9FRk5TVWxDUTJkTFEwRlJSVUV6U0hWcVNHc3haaTlCWWxNS2FHcEdhemxtV0hOelZqZFJNVzlJUVRkVFNqQnVlVkpqTDJNMmR6aERPV1ZUV1dkTWNIWnJjSEZEY3pCdFR5dE9NMHRGTW5Kb2VTdDVVVUZyUVN0eEt3cE5TVkJXVURWRU9HRjFkM3BwWTFOUFZERm5WR2xTTmpreWFFVTFVVEUwYmtaS1N6bE5UMGRaWkdJeFJFTklNazlJYkZkMWRqRktlVlJvUW5admJuRXhDamw2VG01SldreG5iMWRUUm5SWGNtMVFhR05vY3pJeE5sVTVhREpDY0U1QmIwbzJXbU01TjBZM09UWnRLMFpLVlVKeGRFSnhVMVU1UW0xMmEwbHZSa3dLVFd0dE5HczVORk50UzFCRVpURnpPSEZGY0ZGM2FDdDVhbGRPV214aFkyeHRaMGRTTVdkRFptbGxPRGt3UjJ4dWRUazFSbWMwWjBORVFXMHpNRkZ4V2dvdk1tVkNXVEJ2ZW5kMFkyOTZVakZVVkU1cVpUSnpXaTlPZEhBMUwyRTBiR3RMYjNweGJXSnpURE13U25aaFNtbzVlVmh4T1VRelZtRnZVV2xIWkhWbENsQkpMMlJ6WkZsTWEzZEpSRUZSUVVKdk1FbDNVVVJCVDBKblRsWklVVGhDUVdZNFJVSkJUVU5CY1ZGM1JIZFpSRlpTTUZSQlVVZ3ZRa0ZWZDBGM1JVSUtMM3BCWkVKblRsWklVVFJGUm1kUlZXdEljR1IyVG5sUlVuZzFkVWhoTjJoWmJ6Tm9RM0Y2ZDJ4M1VYZEVVVmxLUzI5YVNXaDJZMDVCVVVWTVFsRkJSQXBuWjBWQ1FVbzVlRnBRTlRNeVZqWjBaa3RVVGxSVGFGTllWbEZVTlRCdmF6VkRUR3h1ZVVaNWRtRkNjV2huZEhwVlZsZGpPR2xGVTFocWFYbHJSRlZxQ2twallXcFZOSEZaU1ZkSmVGWlJNVmR3Um5GcFNqQlpkbTV4TXpOa2JFMUdORTg1U1VWT1owTXdkRGx3UjI1R1NGSlpLMUV6YjA5WVkzUXdWRlF2UkhVS1JuSnpXbFpoTTJsVE1rZDRaSGc1ZDFsV1pFbHVUVzV2V0VscFFrRlliMDlaTTBaNVYwRlROakJOV1RkMmVXTkhObXRLVFZWdVpUbDRVbGRyWjBsRFJBcDZOVXBXU0RSUE1FZ3pZVGxaTVhsSFowODBTVVpSVVN0c1JsZENiMmhOU2xrelpXaEpXR05oVDJORGJsWTNZV1pvUXpKcVVHbFpPRTFrZFdsWU9HRkRDblExUkdVM1psQjRUMmsxVWpSclZWQmtWRFYwYkhGeldHdEliWEJFU3lzM1ZVaFZLMk13ZFdGd1FVTjVObVUzU1U1U1dGbHViVkpMTlVadFJUSkZPVVFLUmxoc2NXdEtTM1JITVVoVU5rSXdZbnB5UzBsU05ucDVPVVJyUFFvdExTMHRMVVZPUkNCRFJWSlVTVVpKUTBGVVJTMHRMUzB0Q2c9PSJ9XX19LCJ2ZXJzaW9uIjoiMy4yLjAifX0=
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="設定ip">設定IP
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">guestinfo.afterburn.initrd.network-kargs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip=192.168.3.36::192.168.3.251:255.255.255.0:::none nameserver=192.168.3.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip=192.168.3.31::192.168.3.251:255.255.255.0:::none nameserver=192.168.3.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip=192.168.3.32::192.168.3.251:255.255.255.0:::none nameserver=192.168.3.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip=192.168.3.33::192.168.3.251:255.255.255.0:::none nameserver=192.168.3.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip=192.168.3.34::192.168.3.251:255.255.255.0:::none nameserver=192.168.3.37
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip=192.168.3.35::192.168.3.251:255.255.255.0:::none nameserver=192.168.3.37
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="先啟動bootstrap">先啟動bootstrap
&lt;/h2>&lt;h2 id="再啟動master">再啟動Master
&lt;/h2>&lt;h2 id="啟動worker後-approve-csr">啟動Worker後 Approve CSR
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$oc adm certificate approve &amp;lt;csr_name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$oc get csr -o go-template=&amp;#39;{{range .items}}{{if not .status}}{{.metadata.name}}{{&amp;#34;\n&amp;#34;}}{{end}}{{end}}&amp;#39; | xargs --no-run-if-empty oc adm certificate approve
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="storage-class">Storage Class
&lt;/h2>&lt;p>&lt;a class="link" href="https://access.redhat.com/solutions/4618011" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/4618011&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://access.redhat.com/solutions/5900501" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/5900501&lt;/a>
&lt;a class="link" href="https://www.ibm.com/support/pages/creating-persistent-volume-claim-fails-not-found-openshift" target="_blank" rel="noopener"
>https://www.ibm.com/support/pages/creating-persistent-volume-claim-fails-not-found-openshift&lt;/a>
&lt;a class="link" href="https://docs.openshift.com/container-platform/4.9/storage/persistent_storage/persistent-storage-vsphere.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.9/storage/persistent_storage/persistent-storage-vsphere.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/rancher/rancher/issues/24258" target="_blank" rel="noopener"
>https://github.com/rancher/rancher/issues/24258&lt;/a>&lt;/p>
&lt;p>on vmware vsphere&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221214141836955.png"
loading="lazy"
alt="image-20221214141836955"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get machineset ocp-7hb6g-worker -n openshift-machine-api -o yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: machine.openshift.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: MachineSet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/memoryMb: &amp;#34;16384&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/vCPU: &amp;#34;4&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: &amp;#34;2022-12-13T09:05:14Z&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-cluster: ocp-7hb6g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ocp-7hb6g-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: openshift-machine-api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceVersion: &amp;#34;12244&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid: e52a023d-bc9f-4fb5-a66a-776768e1aa7c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-cluster: ocp-7hb6g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-machineset: ocp-7hb6g-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-cluster: ocp-7hb6g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-machine-role: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-machine-type: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machine.openshift.io/cluster-api-machineset: ocp-7hb6g-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lifecycleHooks: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> providerSpec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiVersion: machine.openshift.io/v1beta1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> credentialsSecret:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: vsphere-cloud-credentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> diskGiB: 120
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: VSphereMachineProviderSpec
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memoryMiB: 16384
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - networkName: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> numCPUs: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> numCoresPerSocket: 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> snapshot: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template: ocp-7hb6g-rhcos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> userDataSecret:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: worker-user-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> workspace:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> datacenter: TPECIS_Datacenter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> datastore: v7000_CIS01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> folder: /TPECIS_Datacenter/vm/ocp-7hb6g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourcePool: /TPECIS_Datacenter/host//Resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: tpeinfovcsa7p.infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">status:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observedGeneration: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get cm cloud-provider-config -n openshift-config -o yaml | grep folder
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> folder = &amp;#34;/TPECIS_Datacenter/vm/ocp-7hb6g&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221214151017424.png"
loading="lazy"
alt="image-20221214151017424"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221214151029390.png"
loading="lazy"
alt="image-20221214151029390"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221214151038817.png"
loading="lazy"
alt="image-20221214151038817"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221214151215733.png"
loading="lazy"
alt="image-20221214151215733"
>&lt;/p></description></item><item><title>OCP-4.11.7_on_Bare-metal</title><link>https://wangken0129.github.io/p/ocp-4.11.7_on_bare-metal/</link><pubDate>Sat, 23 Sep 2023 08:18:45 +0800</pubDate><guid>https://wangken0129.github.io/p/ocp-4.11.7_on_bare-metal/</guid><description>&lt;h1 id="install-openshift-v4117-on-bare-metal">Install Openshift v4.11.7 on Bare-metal
&lt;/h1>&lt;p>Ken Wang 2022/10/03&lt;/p>
&lt;p>Ken Wang 2022/11/23 v4.11.9&lt;/p>
&lt;h2 id="參考連結">參考連結
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/welcome/index.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/welcome/index.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.11/html/installing/installing-on-bare-metal#installing-bare-metal" target="_blank" rel="noopener"
>https://access.redhat.com/documentation/en-us/openshift_container_platform/4.11/html/installing/installing-on-bare-metal#installing-bare-metal&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/installing/installing_bare_metal/installing-bare-metal.html#installing-bare-metal" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/installing/installing_bare_metal/installing-bare-metal.html#installing-bare-metal&lt;/a>&lt;/p>
&lt;p>CoreOS:
&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.2/" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.2/&lt;/a>
&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/x86_64/dependencies/rhcos/4.11/4.11.9/rhcos-4.11.9-x86_64-live.x86_64.iso" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/x86_64/dependencies/rhcos/4.11/4.11.9/rhcos-4.11.9-x86_64-live.x86_64.iso&lt;/a>&lt;/p>
&lt;p>OC Client:
&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-linux.tar.gz" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-linux.tar.gz&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/post_installation_configuration/index.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/post_installation_configuration/index.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/I8C/installing-openshift-on-single-vmware-esxi-host/blob/master/installBastion.sh" target="_blank" rel="noopener"
>https://github.com/I8C/installing-openshift-on-single-vmware-esxi-host/blob/master/installBastion.sh&lt;/a>&lt;/p>
&lt;p>僅供參考 &lt;a class="link" href="https://github.com/alanadiprastyo/openshift-4.6" target="_blank" rel="noopener"
>https://github.com/alanadiprastyo/openshift-4.6&lt;/a>&lt;/p>
&lt;p>automated&lt;/p>
&lt;p>&lt;a class="link" href="https://cloud.redhat.com/blog/fully-automated-openshift-deployments-with-vmware-vsphere" target="_blank" rel="noopener"
>https://cloud.redhat.com/blog/fully-automated-openshift-deployments-with-vmware-vsphere&lt;/a>&lt;/p>
&lt;h2 id="架構">架構
&lt;/h2>&lt;p>針對各版本的coreOS、Openshift-install 都要更新&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">主機名稱&lt;/th>
&lt;th>IP&lt;/th>
&lt;th>Mac&lt;/th>
&lt;th>版本&lt;/th>
&lt;th>功能&lt;/th>
&lt;th>磁碟空間&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">bastion.ken.lab&lt;/td>
&lt;td>192.168.33.21&lt;/td>
&lt;td>00:50:56:91:7c:24&lt;/td>
&lt;td>RHEL 9.0&lt;/td>
&lt;td>management&lt;/td>
&lt;td>100G、200G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">bootstrap.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.22&lt;/td>
&lt;td>00:50:56:91:47:e9&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>bootstrap&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">master1.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.23&lt;/td>
&lt;td>00:50:56:91:88:f4&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>master&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">master2.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.24&lt;/td>
&lt;td>00:50:56:91:27:ed&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>master&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">master3.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.25&lt;/td>
&lt;td>00:50:56:91:08:33&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>master&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">worker1.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.26&lt;/td>
&lt;td>00:50:56:91:c6:29&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>worker&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">worker2.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.27&lt;/td>
&lt;td>00:50:56:91:d7:b4&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>worker&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">infra1.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.31&lt;/td>
&lt;td>00:50:56:91:14:ab&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>infra node&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">infra2.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.32&lt;/td>
&lt;td>00:50:56:91:0a:53&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>infra node&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">infra3.ocp.ken.lab&lt;/td>
&lt;td>192.168.33.33&lt;/td>
&lt;td>00:50:56:91:78:05&lt;/td>
&lt;td>core 4.11-2&lt;/td>
&lt;td>infra node&lt;/td>
&lt;td>100G&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主機名稱&lt;/th>
&lt;th>使用者帳密&lt;/th>
&lt;th>安裝目錄&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>bastion.ken.lab&lt;/td>
&lt;td>devop / redhat&lt;/td>
&lt;td>/home/devop/ocp&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="安裝bastion">安裝Bastion
&lt;/h2>&lt;h3 id="安裝rhel-90--on-esxi">安裝RHEL 9.0 on ESXi
&lt;/h3>&lt;p>&lt;a class="link" href="https://kb.vmware.com/s/article/57122" target="_blank" rel="noopener"
>https://kb.vmware.com/s/article/57122&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>用iso 檔開機進入安裝引導畫面
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221003152533576.png"
loading="lazy"
alt="image-20221003152533576"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定磁碟、註冊、安裝軟體&lt;/p>
&lt;ul>
&lt;li>磁碟配置
/ &amp;raquo; 65GiB
/home &amp;raquo; 29GiB
/boot &amp;raquo; 500MiB
/boot/efi &amp;raquo; 1GiB&lt;/li>
&lt;li>軟體安裝 使用GUI畫面
Server With GUI&lt;/li>
&lt;li>註冊
&lt;a class="link" href="mailto:ken.wang@infotech.com.tw" >ken.wang@infotech.com.tw&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>開始安裝，安裝完畢後進入OS
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221003153827189.png"
loading="lazy"
alt="image-20221003153827189"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定sudo&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# echo &amp;#34;devop ALL=(ALL) ALL&amp;#34; &amp;gt;&amp;gt; /etc/sudoers.d/devop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="設定-ssh-key">設定 SSH Key
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>產生ssh keygen &amp;ndash; devop user
用來登入各節點使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ ssh-keygen -t ed25519 -N &amp;#39;&amp;#39; -f ~/.ssh/id_ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating public/private ed25519 key pair.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created directory &amp;#39;/home/devop/.ssh&amp;#39;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your identification has been saved in /home/devop/.ssh/id_ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your public key has been saved in /home/devop/.ssh/id_ed25519.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key fingerprint is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHA256:G91wVoISB5qA881zCUi71a2hHj2Y+3zPD6RJQW5+edM devop@bastion.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key&amp;#39;s randomart image is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+--[ED25519 256]--+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| oo. ooo.. . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o .o.+.=. o |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o.o+.oo* o |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .o+=o* * . . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . =oS + = o E|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| . o = = . . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o . o . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o .. . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| o. .o.. |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----[SHA256]-----+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>查看public key &amp;raquo; 之後會寫入install-config.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ cat .ssh/id_ed25519.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIN1Z2jXmGnPWGAVrtltN9A2q5D8QtJlRvhvdB2QXoZG devop@bastion.ocp.ken.lab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>加入私密金鑰到ssh agent&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ ssh-add .ssh/id_ed25519
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Identity added: .ssh/id_ed25519 (devop@bastion.ocp.ken.lab)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;/li>
&lt;/ol>
&lt;h3 id="安裝oc-cli">安裝OC CLI
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>從此處下載OC Client
&lt;a class="link" href="https://access.redhat.com/downloads/content/290/ver=4.11/rhel---8/4.11.7/x86_64/product-software" target="_blank" rel="noopener"
>https://access.redhat.com/downloads/content/290/ver=4.11/rhel---8/4.11.7/x86_64/product-software&lt;/a>
&lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-linux.tar.gz" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/4.11.9/openshift-client-linux.tar.gz&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝OC Client&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion oc]$ pwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/devop/oc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion oc]$ tar xvzf oc-4.11.7-linux.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion oc]$ sudo cp oc kubectl /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for devop:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion oc]$ oc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OpenShift Client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This client helps you develop, build, deploy, and run your applications on any
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OpenShift or Kubernetes cluster. It also includes the administrative
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>啟用 tab 自動完成功能&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc completion bash &amp;gt; oc_bash_completion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ sudo cp oc_bash_completion /etc/bash_completion.d/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for devop:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 重新啟動terminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;/li>
&lt;/ol>
&lt;h3 id="安裝dhcp-server-optional">安裝DHCP Server (optional)
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>安裝dhcpd&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# yum install dhcp-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改dhcpd設定檔 /etc/dhcp/dhcpd.conf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion dhcp]# cat dhcpd.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># DHCP Server Configuration file.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># see /usr/share/doc/dhcp-server/dhcpd.conf.example
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># see dhcpd.conf(5) man page
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># dhcpd.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 2022.10.11 ken wang
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-lease-time 600;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">max-lease-time 7200;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option broadcast-address 192.168.33.255;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">subnet 192.168.33.0 netmask 255.255.255.0 {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## gateway
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option routers 192.168.33.251;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option domain-name &amp;#34;ocp.ken.lab&amp;#34;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">option domain-name-servers 192.168.33.21, 168.95.1.1;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Use this to send dhcp log messages to a different log file (you also
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># have to hack syslog.conf to complete the redirection).
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log-facility local7;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># range 192.168.33.22 192.168.33.40;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host bootstrap {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:47:e9;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.22;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host master1 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:88:f4;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.23;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host master2 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:27:ed;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.24;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host master3 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:08:33;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.25;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host worker1 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:c6:29;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.26;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host worker2 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:d7:b4;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.27;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host infra1 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:14:ab;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.31;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host infra2 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:0a:53;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.32;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host infra3 {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hardware ethernet 00:50:56:91:78:05;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fixed-address 192.168.33.33;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動dhcp-server測試&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">dhcp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># systemctl status dhcpd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">●&lt;/span> &lt;span class="n">dhcpd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">DHCPv4&lt;/span> &lt;span class="n">Server&lt;/span> &lt;span class="n">Daemon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Loaded&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">loaded&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dhcpd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">disabled&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">vendor&lt;/span> &lt;span class="n">preset&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">disabled&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Active&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">active&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">since&lt;/span> &lt;span class="n">Tue&lt;/span> &lt;span class="mi">2022&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">11&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">07&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">02&lt;/span> &lt;span class="n">CST&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">ago&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="安裝dns-server-named">安裝DNS Server (named)
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>安裝named&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion dhcp]# yum install bind bind-libs bind-chroot bind-utils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改named 設定檔 /etc/named.conf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/named.conf &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">named&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Provided&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">Red&lt;/span> &lt;span class="n">Hat&lt;/span> &lt;span class="n">bind&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">ISC&lt;/span> &lt;span class="n">BIND&lt;/span> &lt;span class="n">named&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">DNS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">caching&lt;/span> &lt;span class="n">only&lt;/span> &lt;span class="n">nameserver&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">as&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">localhost&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">resolver&lt;/span> &lt;span class="n">only&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">See&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">doc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="o">*/&lt;/span>&lt;span class="n">sample&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">example&lt;/span> &lt;span class="n">named&lt;/span> &lt;span class="n">configuration&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">options&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">on&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">53&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.21&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="n">listen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">on&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v6&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">53&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">::&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/var/named&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dump&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/cache_dump.db&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">statistics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named_stats.txt&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memstatistics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named_mem_stats.txt&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">secroots&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named.secroots&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named.recursing&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">## 設定轉寄站&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">forwarders&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">2.12&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">2.11&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">building&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">AUTHORITATIVE&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">NOT&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">recursion&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">building&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">RECURSIVE&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">caching&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursion&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">recursive&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">address&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">MUST&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">access&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">control&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">limit&lt;/span> &lt;span class="n">queries&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">legitimate&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Failing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">so&lt;/span> &lt;span class="n">will&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cause&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">become&lt;/span> &lt;span class="n">part&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">large&lt;/span> &lt;span class="n">scale&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">amplification&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">attacks&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Implementing&lt;/span> &lt;span class="n">BCP38&lt;/span> &lt;span class="n">within&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">network&lt;/span> &lt;span class="n">would&lt;/span> &lt;span class="n">greatly&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reduce&lt;/span> &lt;span class="n">such&lt;/span> &lt;span class="n">attack&lt;/span> &lt;span class="n">surface&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursion&lt;/span> &lt;span class="n">yes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnssec&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">validation&lt;/span> &lt;span class="n">yes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnssec&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="n">yes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">managed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/var/named/dynamic&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">geoip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/usr/share/GeoIP&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pid&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/run/named/named.pid&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">session&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keyfile&lt;/span> &lt;span class="s2">&amp;#34;/run/named/session.key&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/*&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">fedoraproject&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wiki&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Changes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CryptoPolicy&lt;/span> &lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/crypto-policies/back-ends/bind.config&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">logging&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">channel&lt;/span> &lt;span class="n">default_debug&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;data/named.run&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">severity&lt;/span> &lt;span class="n">dynamic&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zone&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span> &lt;span class="n">IN&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">hint&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;named.ca&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/named.rfc1912.zones&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/named.root.key&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zone&lt;/span> &lt;span class="s2">&amp;#34;ocp.ken.lab.&amp;#34;&lt;/span> &lt;span class="n">IN&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">master&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;ken.zone&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">update&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transfer&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zone&lt;/span> &lt;span class="s2">&amp;#34;33.168.192.in-addr.arpa&amp;#34;&lt;/span> &lt;span class="n">IN&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">master&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;ken.reverse&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">update&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transfer&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改正向解析 /var/named/ken.zone&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dns" data-lang="dns">&lt;span class="line">&lt;span class="cl">&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">named]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">ken.zone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">$TTL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">@&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SOA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.ken.lab. &lt;/span>&lt;span class="err">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2019070700&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; serial&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="err">H&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; refresh (3 hours)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">30&lt;/span>&lt;span class="err">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; retry (30 minutes)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; expiry (2 weeks)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; minimum (1 week)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.ken.lab.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">bastion.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.21&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">helper.ken.lab. &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.21&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">helper.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.21&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">api.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.21&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">api-int.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.21&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">*&lt;/span>&lt;span class="nc">.apps.ocp.ken.lab.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.21&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">bootstrap.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.22&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">master1.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.23&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">master2.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.24&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">master3.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.25&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">worker1.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.26&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">worker2.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.27&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">infra1.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.31&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">infra2.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.32&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">infra3.ocp.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.33.33&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改反解析 /var/named/ken.reverse&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dns" data-lang="dns">&lt;span class="line">&lt;span class="cl">&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">named]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">ken.reverse&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">$TTL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">@&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SOA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.ken.lab. &lt;/span>&lt;span class="err">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2019070700&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; serial&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="err">H&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; refresh (3 hours)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">30&lt;/span>&lt;span class="err">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; retry (30 minutes)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; expiry (2 weeks)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; minimum (1 week)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.ken.lab.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">21.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">21.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">api.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">21.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">api-int.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">22.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bootstrap.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">23.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">master1.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">24.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">master2.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">25.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">master3.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">26.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">worker1.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">27.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">worker2.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">31.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">infra1.ocp.ken.lab. &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">32.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">infra2.ocp.ken.lab.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">33.33.168.192&lt;/span>&lt;span class="py">.in-addr.arpa. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">PTR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">infra3.ocp.ken.lab.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>調整防火牆&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-service=dns --permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --reload&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# systemctl enable named --now
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>驗證DNS&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">##測試api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ~]# dig +noall +answer @192.168.33.21 api.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">api.ocp.ken.lab. 604800 IN A 192.168.33.21
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ~]# nslookup 192.168.33.21
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21.33.168.192.in-addr.arpa name = api.ocp.ken.lab.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21.33.168.192.in-addr.arpa name = bastion.ocp.ken.lab.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21.33.168.192.in-addr.arpa name = api-int.ocp.ken.lab.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 測試 wild card
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ~]# dig +noall +answer @192.168.33.21 random.apps.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">random.apps.ocp.ken.lab. 604800 IN A 192.168.33.21
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##測試反解析
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ~]# dig +noall +answer @192.168.33.21 -x 192.168.33.21
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21.33.168.192.in-addr.arpa. 10 IN PTR api.ocp.ken.lab.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21.33.168.192.in-addr.arpa. 10 IN PTR api-int.ocp.ken.lab.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">21.33.168.192.in-addr.arpa. 10 IN PTR bastion.ocp.ken.lab.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="安裝ha-proxy">安裝HA Proxy
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>安裝haproxy&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# yum install haproxy -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定HAProxy&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">將文件上的設定檔複製貼上，再用&lt;/span>&lt;span class="n">sed&lt;/span> &lt;span class="err">指令修改&lt;/span>&lt;span class="n">domain&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">haproxy&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># sed -i &amp;#34;s/ocp4.example.com/ocp.ken.lab/g&amp;#34; /etc/haproxy/haproxy.cfg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/haproxy/haproxy.cfg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">global&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span> &lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">local2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pidfile&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">haproxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxconn&lt;/span> &lt;span class="mi">4000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">daemon&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">defaults&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">http&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span> &lt;span class="n">global&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span> &lt;span class="n">dontlognull&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">close&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">option&lt;/span> &lt;span class="n">redispatch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">retries&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">request&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">queue&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">connect&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">client&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keep&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alive&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">timeout&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxconn&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">frontend&lt;/span> &lt;span class="n">stats&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1936&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">http&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span> &lt;span class="n">global&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maxconn&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">hide&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">refresh&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">show&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">show&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">desc&lt;/span> &lt;span class="n">Stats&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">ocp4&lt;/span> &lt;span class="n">cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">auth&lt;/span> &lt;span class="n">admin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">ocp4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stats&lt;/span> &lt;span class="n">uri&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">stats&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">api&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">bootstrap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">backup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master1&lt;/span> &lt;span class="n">master1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master2&lt;/span> &lt;span class="n">master3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master3&lt;/span> &lt;span class="n">master3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">machine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">22623&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">bootstrap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">backup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master1&lt;/span> &lt;span class="n">master1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master2&lt;/span> &lt;span class="n">master2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">master3&lt;/span> &lt;span class="n">master3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">22623&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">balance&lt;/span> &lt;span class="n">source&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker1&lt;/span> &lt;span class="n">worker1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker2&lt;/span> &lt;span class="n">worker2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">infra1&lt;/span> &lt;span class="n">infra1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">infra2&lt;/span> &lt;span class="n">infra2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">infra3&lt;/span> &lt;span class="n">infra3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">listen&lt;/span> &lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bind&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mode&lt;/span> &lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">balance&lt;/span> &lt;span class="n">source&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker1&lt;/span> &lt;span class="n">worker1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">worker2&lt;/span> &lt;span class="n">worker2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">infra1&lt;/span> &lt;span class="n">infra1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">infra2&lt;/span> &lt;span class="n">infra2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="n">infra3&lt;/span> &lt;span class="n">infra3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">check&lt;/span> &lt;span class="n">inter&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>防火牆開通、SELinux設定&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=80/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=443/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=6443/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=1936/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=22623/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=9000-9999/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=10250-10259/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=4789/udp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=6081/udp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=9000-9999/udp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=500/udp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=4500/udp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=30000-32767/udp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=30000-32767/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --list-all&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">public&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">icmp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">block&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">inversion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">interfaces&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ens192&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sources&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">services&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cockpit&lt;/span> &lt;span class="n">dhcpv6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span> &lt;span class="n">dns&lt;/span> &lt;span class="n">ssh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">53&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">6443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">1936&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">22623&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">9000&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9999&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">10250&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10259&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="mi">4789&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">6081&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">9000&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9999&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">500&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">4500&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">30000&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">32767&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">udp&lt;/span> &lt;span class="mi">30000&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">32767&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocols&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">forward&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">masquerade&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">forward&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">source&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">icmp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">blocks&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rich&lt;/span> &lt;span class="n">rules&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## SELinux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># semanage port --add --type http_port_t --proto tcp 1936&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># semanage port --add --type http_port_t --proto tcp 6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># semanage port --add --type http_port_t --proto tcp 22623&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">or&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># setsebool -P haproxy_connect_any=on&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# systemctl enable haproxy --now
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="下載pull-secret-token">下載Pull Secret Token
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>網頁連線至https://console.redhat.com/openshift/downloads&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載 Pull Secret Token
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011144551465.png"
loading="lazy"
alt="image-20221011144551465"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>將 pull-secret放到安裝目錄下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ cp ../pull-secret .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 devop devop 2795 Oct 11 15:07 pull-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;/li>
&lt;/ol>
&lt;h3 id="下載安裝openshift-installer">下載安裝openshift installer
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>網頁連線至 &lt;a class="link" href="https://console.redhat.com/openshift/downloads#tool-pull-secret" target="_blank" rel="noopener"
>https://console.redhat.com/openshift/downloads#tool-pull-secret&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載 OpenShift for x86_64 Installer
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011145410398.png"
loading="lazy"
alt="image-20221011145410398"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>創建目錄並解壓縮&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ mkdir ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ mv openshift-install-linux.tar.gz ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ cd ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 336508
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. 1 devop devop 344582118 Oct 11 14:59 openshift-install-linux.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ tar xzvf openshift-install-linux.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openshift-install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>將openshift installer 放到 /usr/local/bin&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ sudo cp openshift-install /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for devop:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ openshift-install --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creates OpenShift clusters
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openshift-install [command]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ..
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="下載-coreos">下載 CoreOS
&lt;/h3>&lt;ol>
&lt;li>連線至 &lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.2/" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.2/&lt;/a>&lt;/li>
&lt;li>下載 &lt;a class="link" href="https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.2/rhcos-4.11.2-x86_64-live.x86_64.iso" target="_blank" rel="noopener"
>https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.11/4.11.2/rhcos-4.11.2-x86_64-live.x86_64.iso&lt;/a>&lt;/li>
&lt;li>放到ESXi主機上並掛給各虛擬機
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011150628575.png"
loading="lazy"
alt="image-20221011150628575"
>&lt;/li>
&lt;li>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011151238082.png"
loading="lazy"
alt="image-20221011151238082"
>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h3 id="準備安裝soruce">準備安裝Soruce
&lt;/h3>&lt;h4 id="創建install-configyaml">創建install-config.yaml
&lt;/h4>&lt;p>在/home/devop/ocp目錄下 新增install-config.yaml
重裝時記得將此目錄清除乾淨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ vim install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ cat install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseDomain: ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controlPlane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networking:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: 10.128.0.0/14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hostPrefix: 23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networkType: OpenShiftSDN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.30.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> none: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fips: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pullSecret: &amp;#39;{&amp;#34;auths&amp;#34;:{&amp;#34;cloud.openshift.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K29jbV9hY2Nlc3NfMzEwNjVjNmVmMTk5NDZmNWEwNmUzZmI4MTVmNzk2OTE6NEJRVk1FVk9CTDRZQVRBT0pONEhQVkIyUExFQTdKNDE3WExFU1IzVDk3NU1YUTJXWE9FSjBNTVk0MzFQQk9RUA==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;quay.io&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K29jbV9hY2Nlc3NfMzEwNjVjNmVmMTk5NDZmNWEwNmUzZmI4MTVmNzk2OTE6NEJRVk1FVk9CTDRZQVRBT0pONEhQVkIyUExFQTdKNDE3WExFU1IzVDk3NU1YUTJXWE9FSjBNTVk0MzFQQk9RUA==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;registry.connect.redhat.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;fHVoYy1wb29sLTc5MzgwY2YyLTUxNTEtNGRiNi04YjA3LTRiNzQ4NDcxNWE2NDpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSmxOak5rWVdWbU1tSXlaRFEwTVdKaVlUTXpObVUwTkdGbVl6WmtPVEUwWVNKOS5RMlp6Q1JaWWltVDIxM2dpYU9CRWtNWEVkYUtjbnc4WHN1bTY3VEVOdjEyRjBjQUgyNWNZMVdWTjZNUEY2R21CNjh3TmF4TnoxRHVpVnBtY0ZKM2JZTW0yNVVzZGJxeFc4cEd1dGszSzF5NlNUWk9VejlkU0V4UGg4aUxha05qSEQ4Tml6emNmM1lUQjRNUXdhYTVFSG1PMXVTUERUZFRBTXFYS3FFa2gwRXpHOUpKZTlUMnM4bVJXWkVIbndoZW84cktncVZuV1VCeGhqTldFNElfWG1JZnBPRl91akpFNHdXNzRJWjd5UmdoUGExQVVwS3BsY0NJQ2ZGdGtaS29WUTFwNTBzUzNabkxWYjd6ZHdXR21WcXVsNUFoZUNiSHNoNEtpSjFnYXRSbkwtMG92THZoNGdseUZqd0c0Z3lMMEdyS1ItbU5WMFZYc01mVzJDNXNVaXBzVmhKcmhmY01vQjRNSDRDbjZKcjJXS2plbEdqSVdHQzBUV1BBNlZQZDBmc0lyLTRCY2RBdUFmcm5SaWpGM3d0Mng3RFdXQ1RScFVPbUVMY3U5bDR6Wm5uZkVSejNMd01rNmhCWTFyYXV1TGhCWXJraFlzQURqWEl3bGxPTkwyc01GMUU2OVNIVG1vV0tvNU5fdHdoWE5fX1BtT1ozMzc5ZVNDVGdnTFNZd3hyR1VwS3FXRDFva3JWZlRIWmNlcTk4WHQ2QjFtZHIxcmxLV2RiRmhsRDQ3Q1pldEhrNW1xQUlianp1UzlONENJWllhd0lIZE5LWVotN2tRNFQyUFg4QWdadHFNdHdjY2c0bWx3ME40c09LbWVZN2Q2bGw0bXpXV201bVo0aktTeHdpYmJ3STEwOFcxWVFlSlQ4QW9WZFlkc09YWkdWc3ZxZVVZOU9qbzR2RQ==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;registry.redhat.io&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;fHVoYy1wb29sLTc5MzgwY2YyLTUxNTEtNGRiNi04YjA3LTRiNzQ4NDcxNWE2NDpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSmxOak5rWVdWbU1tSXlaRFEwTVdKaVlUTXpObVUwTkdGbVl6WmtPVEUwWVNKOS5RMlp6Q1JaWWltVDIxM2dpYU9CRWtNWEVkYUtjbnc4WHN1bTY3VEVOdjEyRjBjQUgyNWNZMVdWTjZNUEY2R21CNjh3TmF4TnoxRHVpVnBtY0ZKM2JZTW0yNVVzZGJxeFc4cEd1dGszSzF5NlNUWk9VejlkU0V4UGg4aUxha05qSEQ4Tml6emNmM1lUQjRNUXdhYTVFSG1PMXVTUERUZFRBTXFYS3FFa2gwRXpHOUpKZTlUMnM4bVJXWkVIbndoZW84cktncVZuV1VCeGhqTldFNElfWG1JZnBPRl91akpFNHdXNzRJWjd5UmdoUGExQVVwS3BsY0NJQ2ZGdGtaS29WUTFwNTBzUzNabkxWYjd6ZHdXR21WcXVsNUFoZUNiSHNoNEtpSjFnYXRSbkwtMG92THZoNGdseUZqd0c0Z3lMMEdyS1ItbU5WMFZYc01mVzJDNXNVaXBzVmhKcmhmY01vQjRNSDRDbjZKcjJXS2plbEdqSVdHQzBUV1BBNlZQZDBmc0lyLTRCY2RBdUFmcm5SaWpGM3d0Mng3RFdXQ1RScFVPbUVMY3U5bDR6Wm5uZkVSejNMd01rNmhCWTFyYXV1TGhCWXJraFlzQURqWEl3bGxPTkwyc01GMUU2OVNIVG1vV0tvNU5fdHdoWE5fX1BtT1ozMzc5ZVNDVGdnTFNZd3hyR1VwS3FXRDFva3JWZlRIWmNlcTk4WHQ2QjFtZHIxcmxLV2RiRmhsRDQ3Q1pldEhrNW1xQUlianp1UzlONENJWllhd0lIZE5LWVotN2tRNFQyUFg4QWdadHFNdHdjY2c0bWx3ME40c09LbWVZN2Q2bGw0bXpXV201bVo0aktTeHdpYmJ3STEwOFcxWVFlSlQ4QW9WZFlkc09YWkdWc3ZxZVVZOU9qbzR2RQ==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;}}}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sshKey: &amp;#39;ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIN1Z2jXmGnPWGAVrtltN9A2q5D8QtJlRvhvdB2QXoZG devop@bastion.ocp.ken.lab&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capabilities:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baselineCapabilitySet: vCurrent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-------### 只裝Operator Hub ###---------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capabilities:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baselineCapabilitySet: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalEnabledCapabilities:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - marketplace
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="建立k8s-manifest--files">建立K8S manifest files
&lt;/h4>&lt;p>在相同目錄下執行
重裝時記得將此目錄清除乾淨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ openshift-install create manifests --dir /home/devop/ocp/install/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Install Config from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING Making control-plane schedulable by setting MastersSchedulable to true for Scheduler cluster settings
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Manifests created in: /home/devop/ocp/install/manifests and /home/devop/ocp/install/openshift
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="ｍastersschedulablefalse">ＭastersSchedulable:false
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ cd manifests/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion manifests]$ cat cluster-scheduler-02-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: config.openshift.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Scheduler
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mastersSchedulable: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> policy:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">status: {}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="創建ignition-config-file">創建Ignition config file
&lt;/h4>&lt;p>重裝時記得將此目錄清除乾淨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ openshift-install create ignition-configs --dir /home/devop/ocp/install/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Worker Machines from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Openshift Manifests from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Common Manifests from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming OpenShift Install (Manifests) from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Consuming Master Machines from target directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO Ignition-Configs created in: /home/devop/ocp/install and /home/devop/ocp/install/auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ tree install/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">install/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── kubeadmin-password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── kubeconfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── bootstrap.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── master.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── metadata.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── worker.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 directory, 6 files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##確認 sha512sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ocp]# sha512sum bootstrap.ign
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">460f76f9bc8b1df7095326c6b581b60f1150e477ae416b065c7b18ae040dc530a3086857d649ae04f646ccf9cce16ea9a4c32c8fe48b3630413f8ebe3f924329 bootstrap.ign
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安裝http-web-server">安裝Http Web Server
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>安裝httpd&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# yum install httpd -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定httpd 預設port 8989、修改SELinux&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># vim /etc/httpd/conf/httpd.conf &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Listen&lt;/span> &lt;span class="mi">8989&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-port=8989/tcp --permanent &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --reload &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># semanage port -a -t http_port_t -p tcp 8989&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>將ignition檔案複製到 /var/www/html&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cp /home/devop/ocp/*.ign /var/www/html/ocp/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cp /var/www/html/ocp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># chmod 644 *.ign&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動httpd並測試連線&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ocp]# systemctl enable httpd --now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ocp]# curl http://192.168.33.21:8989/ocp/bootstrap.ign
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="安裝bootstrap">安裝BootStrap
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>將虛擬機開機，並使用rhel core os 的iso檔開機，
若前面dhcp server、dns server設定成功，即會自動拿到FQDN、IP
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011155843248.png"
loading="lazy"
alt="image-20221011155843248"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在bootstrap執行安裝指令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo coreos-installer install --ignition-url=http://192.168.33.21:8989/ocp/bootstrap.ign /dev/sda --insecure-ignition
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(--insecure-ignition can replace using --ignition-hash=sha512-xxxxxxxxxxxxx)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>出現此畫面後 執行重新啟動 reboot
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011165057146.png"
loading="lazy"
alt="image-20221011165057146"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開機後確認已寫入硬碟
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011165808592.png"
loading="lazy"
alt="image-20221011165808592"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在bastion登入bootstrap&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ssh&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">authenticity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bootstrap (192.168.33.22)&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="s1">&amp;#39;t be established.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ED25519 key fingerprint is SHA256:pnQoMRtW8f/3EjIQ7qNG4+NIB+ObrTd4E8aEbvRqMQw.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">This key is not known by any other names
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Warning: Permanently added &amp;#39;&lt;/span>&lt;span class="n">bootstrap&lt;/span>&lt;span class="s1">&amp;#39; (ED25519) to the list of known hosts.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">client_global_hostkeys_private_confirm: server gave bad signature for RSA key 0: error in libcrypto
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Red Hat Enterprise Linux CoreOS 411.86.202208112011-0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Part of OpenShift 4.11, RHCOS is a Kubernetes native operating system
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> managed by the Machine Config Operator (`clusteroperator/machine-config`).
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">WARNING: Direct SSH access to machines is not recommended; instead,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">make configuration changes via `machineconfig` objects:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> https://docs.openshift.com/container-platform/4.11/architecture/architecture-rhcos.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">---
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">This is the bootstrap node; it will be destroyed when the master is fully up.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">The primary services are release-image.service followed by bootkube.service. To watch their status, run e.g.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> journalctl -b -f -u release-image.service -u bootkube.service
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>查看log，到出現machine api時才可接續安裝&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[core@bootstrap ~]$ journalctl -b -f -u release-image.service -u bootkube.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create &amp;#34;99_openshift-cluster-api_worker-user-data-secret.yaml&amp;#34; secrets.v1./worker-user-data -n openshift-machine-api
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>此時才可繼續安裝 master01、master02、master03
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011173412330.png"
loading="lazy"
alt="image-20221011173412330"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>出現此畫面即可關閉bootstrap&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221011172057819.png"
loading="lazy"
alt="image-20221011172057819"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221013110951260.png"
loading="lazy"
alt="image-20221013110951260"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="安裝-ｍaster-node">安裝 Ｍaster Node
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>將虛擬機開機，並使用rhel core os 的iso檔開機，
若前面dhcp server、dns server設定成功，即會自動拿到FQDN、IP&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在master執行安裝指令，三台相同 (若設定ＭastersSchedulable:false，則worker需一起安裝）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo coreos-installer install --ignition-url=http://192.168.33.21:8989/ocp/master.ign /dev/sda --insecure-ignition
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">出現install complete 即可reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012012023876.png"
loading="lazy"
alt="image-20221012012023876"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>持續監控bootstrap的 Log&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[core@bootstrap ~]$ journalctl -b -f -u release-image.service -u bootkube.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Master Node裝完會自動重開機&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在bastion 驗證節點&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab Ready master 4m22s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab Ready master 3m37s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab Ready master 3m21s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>查看bootstrap的 Log,確認安裝完成&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012013436842.png"
loading="lazy"
alt="image-20221012013436842"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012014537780.png"
loading="lazy"
alt="image-20221012014537780"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在Bastion 執行oc 指令確認ocp cluster CSR&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab Ready master 18m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab Ready master 17m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab Ready master 17m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get csr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AGE SIGNERNAME REQUESTOR REQUESTEDDURATION CONDITION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-7sgfx 18m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-lphdj 17m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-ndft5 17m kubernetes.io/kubelet-serving system:node:master3.ocp.ken.lab &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-p42p5 17m kubernetes.io/kubelet-serving system:node:master2.ocp.ken.lab &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-vgmd9 17m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-zpfw4 18m kubernetes.io/kubelet-serving system:node:master1.ocp.ken.lab &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">system:openshift:openshift-authenticator-2zxkf 15m kubernetes.io/kube-apiserver-client system:serviceaccount:openshift-authentication-operator:authentication-operator &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">system:openshift:openshift-monitoring-ln69x 15m kubernetes.io/kube-apiserver-client system:serviceaccount:openshift-monitoring:cluster-monitoring-operator &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認cluster operator&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion install]$ oc get co -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME VERSION AVAILABLE PROGRESSING DEGRADED SINCE MESSAGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">authentication 4.11.7 False False False 76s APIServicesAvailable: PreconditionNotReady...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cloud-controller-manager 4.11.7 True False False 2m36s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cloud-credential True False False 13m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster-autoscaler
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config-operator 4.11.7 True False False 40s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">console
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-snapshot-controller 4.11.7 True False False 1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image-registry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">insights
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver Unknown False False 112s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager False True False 75s StaticPodsAvailable: 0 nodes are active; 3 nodes are at revision 0; 0 nodes have achieved new revision 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler False True False 35s StaticPodsAvailable: 0 nodes are active; 3 nodes are at revision 0; 0 nodes have achieved new revision 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-storage-version-migrator 4.11.7 True False False 59s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">machine-api
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">machine-approver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">machine-config True Working towards 4.11.7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">marketplace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monitoring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">network False True False 2m53s The network is starting up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-tuning
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openshift-apiserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openshift-controller-manager False True False 100s Available: no daemon pods available on any node.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openshift-samples
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">operator-lifecycle-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">operator-lifecycle-manager-catalog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">operator-lifecycle-manager-packageserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service-ca 4.11.7 True False False 33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">storage 4.11.7 True False False 49s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>關閉bootstrap，安裝worker node&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="安裝-workerinfra-node">安裝 Worker＆Infra Node
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/machine_management/user_infra/adding-bare-metal-compute-user-infra.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/machine_management/user_infra/adding-bare-metal-compute-user-infra.html&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>將虛擬機開機，並使用rhel core os 的iso檔開機，
若前面dhcp server、dns server設定成功，即會自動拿到FQDN、IP&lt;/p>
&lt;/li>
&lt;li>
&lt;p>執行安裝指令 (worker1、worker2、infra1、infra2、infra3)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo coreos-installer install --ignition-url=http://192.168.33.21:8989/ocp/worker.ign /dev/sda --insecure-ignition
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">出現install complete 即可reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在bastion 確認nodes、csr (會有很多需approve的 csr，後續加node後還會有)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab Ready master 36m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab Ready master 35m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab Ready master 35m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get csr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AGE SIGNERNAME REQUESTOR REQUESTEDDURATION CONDITION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-7sgfx 37m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-lphdj 37m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-ndft5 36m kubernetes.io/kubelet-serving system:node:master3.ocp.ken.lab &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-nwplh 0s kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-p42p5 36m kubernetes.io/kubelet-serving system:node:master2.ocp.ken.lab &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-pcsl2 115s kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-vgmd9 36m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-zpfw4 37m kubernetes.io/kubelet-serving system:node:master1.ocp.ken.lab &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">system:openshift:openshift-authenticator-2zxkf 35m kubernetes.io/kube-apiserver-client system:serviceaccount:openshift-authentication-operator:authentication-operator &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">system:openshift:openshift-monitoring-ln69x 34m kubernetes.io/kube-apiserver-client system:serviceaccount:openshift-monitoring:cluster-monitoring-operator &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Approve All CSR&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$oc adm certificate approve &amp;lt;csr_name&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$oc get csr -o go-template=&amp;#39;{{range .items}}{{if not .status}}{{.metadata.name}}{{&amp;#34;\n&amp;#34;}}{{end}}{{end}}&amp;#39; | xargs --no-run-if-empty oc adm certificate approve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion auth]$ oc get csr -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME AGE SIGNERNAME REQUESTOR REQUESTEDDURATION CONDITION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-2trmm 18m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-9xhq4 16m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-b4jns 2m45s kubernetes.io/kubelet-serving system:node:infra1.ocp.ken.lab &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-b55jd 3m57s kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-bdtnw 16m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-bngbr 2m40s kubernetes.io/kubelet-serving system:node:infra2.ocp.ken.lab &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-kd66h 2m51s kubernetes.io/kubelet-serving system:node:infra2.ocp.ken.lab &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-lzk6w 2m46s kubernetes.io/kubelet-serving system:node:worker1.ocp.ken.lab &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-rtkr6 2m46s kubernetes.io/kubelet-serving system:node:worker2.ocp.ken.lab &amp;lt;none&amp;gt; Pending
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-swwhm 18m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-v67v6 16m kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csr-vhlqb 3m56s kubernetes.io/kube-apiserver-client-kubelet system:serviceaccount:openshift-machine-config-operator:node-bootstrapper &amp;lt;none&amp;gt; Approved,Issued
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion auth]$ oc get csr -o go-template=&amp;#39;{{range .items}}{{if not .status}}{{.metadata.name}}{{&amp;#34;\n&amp;#34;}}{{end}}{{end}}&amp;#39; | xargs --no-run-if-empty oc adm certificate approve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-2trmm approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-9xhq4 approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-b55jd approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-bdtnw approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-swwhm approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-v67v6 approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-vhlqb approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion auth]$ oc get csr -o go-template=&amp;#39;{{range .items}}{{if not .status}}{{.metadata.name}}{{&amp;#34;\n&amp;#34;}}{{end}}{{end}}&amp;#39; | xargs --no-run-if-empty oc adm certificate approve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-b4jns approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-bngbr approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-cq46l approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-kd66h approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-lzk6w approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-rtkr6 approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesigningrequest.certificates.k8s.io/csr-t6l2b approved
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>再次確認node狀態&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion auth]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra1.ocp.ken.lab Ready worker 2m32s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra2.ocp.ken.lab Ready,SchedulingDisabled worker 2m38s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab NotReady master 78m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab NotReady master 78m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab NotReady master 78m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker1.ocp.ken.lab Ready worker 2m33s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker2.ocp.ken.lab Ready worker 2m34s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab Ready master 39m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab Ready master 39m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab Ready master 38m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker1.ocp.ken.lab Ready worker 95s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker2.ocp.ken.lab Ready worker 90s v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get po -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="安裝後的設定">安裝後的設定
&lt;/h2>&lt;h4 id="設定nfs">設定NFS
&lt;/h4>&lt;p>&lt;a class="link" href="https://access.redhat.com/solutions/4618011" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/4618011&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://access.redhat.com/solutions/5900501" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/5900501&lt;/a>&lt;/p>
&lt;p>on vmware vsphere&lt;/p>
&lt;p>&lt;a class="link" href="https://vergiehadiana.medium.com/guide-deploy-nfs-storage-for-dynamic-provisioning-and-image-registry-for-red-hat-openshift-b15e16f357b4" target="_blank" rel="noopener"
>https://vergiehadiana.medium.com/guide-deploy-nfs-storage-for-dynamic-provisioning-and-image-registry-for-red-hat-openshift-b15e16f357b4&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://hackmd.io/@kd-ocp/S1EIu6V25" target="_blank" rel="noopener"
>https://hackmd.io/@kd-ocp/S1EIu6V25&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">groundhog2k/nfs-subdir-external-provisioner:v3.2.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="設定外部image-registry">設定外部Image Registry
&lt;/h4>&lt;p>&lt;a class="link" href="https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.6/html/images/images-configuration-file_image-configuration" target="_blank" rel="noopener"
>https://access.redhat.com/documentation/zh-cn/openshift_container_platform/4.6/html/images/images-configuration-file_image-configuration&lt;/a>&lt;/p>
&lt;h4 id="設定htpasswd-provider">設定Htpasswd Provider
&lt;/h4>&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/authentication/identity_providers/configuring-htpasswd-identity-provider.html" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/authentication/identity_providers/configuring-htpasswd-identity-provider.html&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>利用htpasswd 產生htpasswd檔案&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ htpasswd -c -B -b users.htpasswd admin redhat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Adding password for user admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ htpasswd -B -b users.htpasswd ken xxxxxxxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Adding password for user ken
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ htpasswd -B -b users.htpasswd view redhat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Adding password for user view
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>產生secret 將 htpasswd 放入secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc whoami
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">system:admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc create secret generic users-htpasswd --from-file htpasswd=users.htpasswd -n openshift-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">secret/users-htpasswd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get secret -n openshift-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE DATA AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">builder-dockercfg-r46z8 kubernetes.io/dockercfg 1 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">builder-token-cgvp8 kubernetes.io/service-account-token 4 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-dockercfg-8mhbj kubernetes.io/dockercfg 1 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-token-nfc27 kubernetes.io/service-account-token 4 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployer-dockercfg-qdwcq kubernetes.io/dockercfg 1 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployer-token-bfplj kubernetes.io/service-account-token 4 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-client kubernetes.io/tls 2 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-metric-client kubernetes.io/tls 2 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-metric-signer kubernetes.io/tls 2 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-signer kubernetes.io/tls 2 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">initial-service-account-private-key Opaque 1 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pull-secret kubernetes.io/dockerconfigjson 1 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">users-htpasswd Opaque 1 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">webhook-authentication-integrated-oauth Opaque 1 8h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增 htpasswd provider&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get oauth cluster -o yaml &amp;gt; oauth.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ vim oauth.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ cat oauth.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: config.openshift.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: OAuth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include.release.openshift.io/ibm-cloud-managed: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include.release.openshift.io/self-managed-high-availability: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include.release.openshift.io/single-node-developer: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> release.openshift.io/create-only: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: &amp;#34;2022-10-11T17:14:37Z&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> generation: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ownerReferences:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiVersion: config.openshift.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: ClusterVersion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid: d1c0dbf6-000f-4b1e-aa27-1bd8a667afac
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceVersion: &amp;#34;1533&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid: 3e95cfe7-7c02-47eb-8b4e-7f0d61766461
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> identityProviders:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: htpasswd_provider
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mappingMethod: claim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: HTPasswd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> htpasswd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fileData:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: users-htpasswd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc apply -f oauth.yaml -n openshift-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: resource oauths/cluster is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by oc apply. oc apply should only be used on resources created declaratively by either oc create --save-config or oc apply. The missing annotation will be patched automatically.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oauth.config.openshift.io/cluster configured
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ watch oc get po -n openshift-authentication
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012094929634.png"
loading="lazy"
alt="image-20221012094929634"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>調整角色權限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## 將cluster-admin role 加給 admin、ken
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc adm policy add-cluster-role-to-user cluster-admin admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/cluster-admin added: &amp;#34;admin&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc adm policy add-cluster-role-to-user cluster-admin ken
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: User &amp;#39;ken&amp;#39; not found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/cluster-admin added: &amp;#34;ken&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 將cluster-view role 加給 view
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get clusterroles | grep view
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">view 2022-10-11T17:13:19Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc adm policy add-cluster-role-to-user view view
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: User &amp;#39;view&amp;#39; not found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/view added: &amp;#34;view&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>將預設可建立project的權限刪除，只給admin、ken&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## 取得 self-provisioner的role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc get clusterrolebindings | grep self-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">self-provisioners ClusterRole/self-provisioner 8h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 取得 self-provisioners role binding的group
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc describe clusterrolebindings self-provisioners
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: self-provisioners
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: rbac.authorization.kubernetes.io/autoupdate: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Role:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Kind: ClusterRole
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name: self-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Subjects:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Kind Name Namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ---- ---------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Group system:authenticated:oauth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##移除 self-provisioner的rolebinding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc adm policy remove-cluster-role-from-group self-provisioner system:authenticated:oauth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Your changes may get lost whenever a master is restarted, unless you prevent reconciliation of this rolebinding using the following command: oc annotate clusterrolebinding.rbac self-provisioners &amp;#39;rbac.authorization.kubernetes.io/autoupdate=false&amp;#39; --overwrite
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/self-provisioner removed: &amp;#34;system:authenticated:oauth&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##新增可以建立project的group
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc adm groups new new-project-group admin ken
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">group.user.openshift.io/new-project-group created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##將new-project-group再bind上self-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc adm policy add-cluster-role-to-group self-provisioner new-project-group
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/self-provisioner added: &amp;#34;new-project-group&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>取得console url&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">route&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">HOST&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">PORT&lt;/span> &lt;span class="n">PATH&lt;/span> &lt;span class="n">SERVICES&lt;/span> &lt;span class="n">PORT&lt;/span> &lt;span class="n">TERMINATION&lt;/span> &lt;span class="n">WILDCARD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">console&lt;/span> &lt;span class="n">console&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="n">console&lt;/span> &lt;span class="n">https&lt;/span> &lt;span class="n">reencrypt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Redirect&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">downloads&lt;/span> &lt;span class="n">downloads&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="n">downloads&lt;/span> &lt;span class="n">http&lt;/span> &lt;span class="n">edge&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Redirect&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### 刪除 kubeadmin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">delete&lt;/span> &lt;span class="n">secret&lt;/span> &lt;span class="n">kubeadmin&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>連線至console &lt;a class="link" href="https://console-openshift-console.apps.ocp.ken.lab" target="_blank" rel="noopener"
>https://console-openshift-console.apps.ocp.ken.lab&lt;/a> 並測試登入&lt;/p>
&lt;p>admin / redhat (cluster-admin)、view / redhat (view only)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012095225994.png"
loading="lazy"
alt="image-20221012095225994"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012095300179.png"
loading="lazy"
alt="image-20221012095300179"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012095339064.png"
loading="lazy"
alt="image-20221012095339064"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="註冊openshift-cluster">註冊openshift cluster
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>從console 點到 Administration &amp;gt; Cluster Settings &amp;gt; Manage subscription settings
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012101701215.png"
loading="lazy"
alt="image-20221012101701215"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Edit subscription settings&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012101731793.png"
loading="lazy"
alt="image-20221012101731793"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇 Self-Support 即可
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012101910450.png"
loading="lazy"
alt="image-20221012101910450"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>約 3~5 分鐘即可更新License&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012102253203.png"
loading="lazy"
alt="image-20221012102253203"
>12&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="設定oc-cli-ca">設定OC CLI CA
&lt;/h4>&lt;p>在openshift-authentication project內取得CA並將CA複製到bastion內&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc project openshift-authentication
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Now using project &amp;#34;openshift-authentication&amp;#34; on server &amp;#34;https://api.ocp.ken.lab:6443&amp;#34;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oauth-openshift-7885f5bd5b-4m5sh 1/1 Running 0 46m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oauth-openshift-7885f5bd5b-q6vbk 1/1 Running 0 46m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oauth-openshift-7885f5bd5b-vh4pz 1/1 Running 0 47m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc rsh oauth-openshift-7885f5bd5b-4m5sh cat /run/secrets/kubernetes.io/serviceaccount/ca.crt &amp;gt; ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">＃＃切換root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ocp]# cp /home/devop/ocp/ca.crt /etc/pki/ca-trust/source/anchors/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@bastion ocp]# update-ca-trust extract
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## 切換為devop測試登入
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ~]$ oc login -u admin -p redhat https://api.ocp.ken.lab:6443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login successful.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You have access to 66 projects, the list has been suppressed. You can list all projects with &amp;#39;oc projects&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using project &amp;#34;openshift-authentication&amp;#34;.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="拆分infra-node">拆分Infra Node
&lt;/h4>&lt;p>&lt;a class="link" href="https://docs.openshift.com/container-platform/4.11/post_installation_configuration/cluster-tasks.html#post-install-cluster-tasks" target="_blank" rel="noopener"
>https://docs.openshift.com/container-platform/4.11/post_installation_configuration/cluster-tasks.html#post-install-cluster-tasks&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://access.redhat.com/solutions/4601131" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/4601131&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>針對infra node 建立label&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc label node infra1.ocp.ken.lab node-role.kubernetes.io/infra=&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra1.ocp.ken.lab labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc label node infra2.ocp.ken.lab node-role.kubernetes.io/infra=&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra2.ocp.ken.lab labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc label node infra3.ocp.ken.lab node-role.kubernetes.io/infra=&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra3.ocp.ken.lab labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra1.ocp.ken.lab Ready infra,worker 4h1m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra2.ocp.ken.lab Ready infra,worker 4h1m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra3.ocp.ken.lab Ready infra,worker 3h19m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab Ready master 4h43m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab Ready master 4h42m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab Ready master 4h41m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker1.ocp.ken.lab Ready worker 4h17m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker2.ocp.ken.lab Ready worker 4h17m v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立machine config pool &amp;raquo; infra.mcp.yaml 並apply到 cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ vim infra.mcp.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: machineconfiguration.openshift.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: MachineConfigPool
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineConfigSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - {key: machineconfiguration.openshift.io/role, operator: In, values: [worker,infra]}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node-role.kubernetes.io/infra: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc apply -f infra.mcp.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">machineconfigpool.machineconfiguration.openshift.io/infra created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get machineconfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME GENERATEDBYCONTROLLER IGNITIONVERSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00-master b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00-worker b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">01-master-container-runtime b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">01-master-kubelet b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">01-worker-container-runtime b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">01-worker-kubelet b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">99-master-generated-registries b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">99-master-ssh 3.2.0 5h29m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">99-worker-generated-registries b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">99-worker-ssh 3.2.0 5h29m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rendered-infra-407eaba9df9f726f52f84b938fce9025 b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 3s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rendered-master-720c11fac56674c6fc876ab6161295aa b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rendered-worker-407eaba9df9f726f52f84b938fce9025 b7aa1d499f15ce7d211d30a823acf83f47aabbe3 3.2.0 5h12m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立 machine config &amp;raquo; infra.mc.yaml 並apply到cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ vim infra.mc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: machineconfiguration.openshift.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: MachineConfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: 51-infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/role: infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ignition:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: 3.2.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> files:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - path: /etc/infratest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode: 0644
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> contents:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> source: data:,infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc create -f infra.mc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">machineconfig.machineconfiguration.openshift.io/51-infra created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get mcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CONFIG UPDATED UPDATING DEGRADED MACHINECOUNT READYMACHINECOUNT UPDATEDMACHINECOUNT DEGRADEDMACHINECOUNT AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra rendered-infra-407eaba9df9f726f52f84b938fce9025 False True False 3 0 0 0 3m17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master rendered-master-720c11fac56674c6fc876ab6161295aa True False False 3 3 3 0 5h25m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker rendered-worker-407eaba9df9f726f52f84b938fce9025 True False False 2 2 2 0 5h25m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Add a Taint To Infra Node ，使Infra Node不會被app部署到
#此動作可搬完operator後再做&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">oc adm taint nodes node1 node-role.kubernetes.io/infra:NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc adm taint nodes infra3.ocp.ken.lab node-role.kubernetes.io/infra:NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra3.ocp.ken.lab tainted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc adm taint nodes infra2.ocp.ken.lab node-role.kubernetes.io/infra:NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra2.ocp.ken.lab tainted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc adm taint nodes infra1.ocp.ken.lab node-role.kubernetes.io/infra:NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra1.ocp.ken.lab tainted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc describe nodes infra1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: infra1.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Roles: infra,worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Labels: beta.kubernetes.io/arch=amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> beta.kubernetes.io/os=linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes.io/arch=amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes.io/hostname=infra1.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes.io/os=linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node-role.kubernetes.io/infra=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node-role.kubernetes.io/worker=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node.openshift.io/os_id=rhcos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: machineconfiguration.openshift.io/controlPlaneTopology: HighlyAvailable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/currentConfig: rendered-infra-c36859c83539d92df71208a425c004df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/desiredConfig: rendered-infra-c36859c83539d92df71208a425c004df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/desiredDrain: uncordon-rendered-infra-c36859c83539d92df71208a425c004df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/lastAppliedDrain: uncordon-rendered-infra-c36859c83539d92df71208a425c004df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/reason:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> machineconfiguration.openshift.io/state: Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes.kubernetes.io/controller-managed-attach-detach: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CreationTimestamp: Thu, 13 Oct 2022 11:26:50 +0800
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Taints: node-role.kubernetes.io/infra:NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Unschedulable: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Lease:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HolderIdentity: infra1.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AcquireTime: &amp;lt;unset&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> RenewTime: Thu, 13 Oct 2022 16:23:54 +0800
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>刪除infra node的 worker label&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc edit nodes infra1.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/infra1.ocp.ken.lab edited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> beta.kubernetes.io/arch: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> beta.kubernetes.io/os: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes.io/arch: amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes.io/hostname: infra2.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes.io/os: linux
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node-role.kubernetes.io/infra: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node-role.kubernetes.io/worker: &amp;#34;&amp;#34; &amp;gt;&amp;gt;&amp;gt;&amp;gt; 刪除此行
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node.openshift.io/os_id: rhcos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra1.ocp.ken.lab Ready infra 22h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra2.ocp.ken.lab Ready infra 22h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">infra3.ocp.ken.lab Ready infra 22h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master1.ocp.ken.lab Ready master 23h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master2.ocp.ken.lab Ready master 23h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master3.ocp.ken.lab Ready master 23h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker1.ocp.ken.lab Ready worker 22h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">worker2.ocp.ken.lab Ready worker 22h v1.24.0+3882f8f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="operator移動到infra-node">Operator移動到Infra Node
&lt;/h4>&lt;h5 id="router">Router
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">方法一&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">ingresscontroller&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">yaml&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">router&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="n">router&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="n">router&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">IngressController&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">creationTimestamp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T02:54:05Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">finalizers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ingresscontroller&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">finalizer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingresscontroller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">generation&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resourceVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;26400&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uid&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">d5c3f18&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="n">f53&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4140&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">be74&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">35&lt;/span>&lt;span class="n">df5edf4c8b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">clientTLS&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">clientCA&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">clientCertificatePolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">httpCompression&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">httpEmptyRequestsPolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Respond&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">httpErrorCodePages&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">replicas&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tuningOptions&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">unsupportedConfigOverrides&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodePlacement&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">availableReplicas&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conditions&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T02:54:13Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Valid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Admitted&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:12:03Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">PodsScheduled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:11:54Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">deployment&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">Available&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="n">condition&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DeploymentAvailable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DeploymentAvailable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:11:54Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Minimum&lt;/span> &lt;span class="n">replicas&lt;/span> &lt;span class="n">requirement&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">met&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DeploymentMinimumReplicasMet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DeploymentReplicasMinAvailable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:12:36Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">All&lt;/span> &lt;span class="n">replicas&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">available&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DeploymentReplicasAvailable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DeploymentReplicasAllAvailable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T02:54:13Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">configured&lt;/span> &lt;span class="n">endpoint&lt;/span> &lt;span class="n">publishing&lt;/span> &lt;span class="n">strategy&lt;/span> &lt;span class="n">does&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">include&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">managed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">load&lt;/span> &lt;span class="n">balancer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">EndpointPublishingStrategyExcludesManagedLoadBalancer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;False&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">LoadBalancerManaged&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T02:54:13Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">zones&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">defined&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">dns&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">NoDNSZones&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;False&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DNSManaged&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:11:54Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Available&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T02:54:13Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;False&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Progressing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:12:03Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;False&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Degraded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T02:54:13Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">IngressController&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">upgradeable&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Upgradeable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Upgradeable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">lastTransitionTime&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2022-10-13T03:12:02Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">message&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Canary&lt;/span> &lt;span class="n">route&lt;/span> &lt;span class="n">checks&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="n">ingress&lt;/span> &lt;span class="n">controller&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">successful&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reason&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">CanaryChecksSucceeding&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;True&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">CanaryChecksSucceeding&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">domain&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">apps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">endpointPublishingStrategy&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hostNetwork&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">httpPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">httpsPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">statsPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1936&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HostNetwork&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">observedGeneration&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selector&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ingresscontroller&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingresscontroller&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">default&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tlsProfile&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ciphers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ECDHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ECDSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AES128&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GCM&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SHA256&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ECDHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AES128&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GCM&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SHA256&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ECDHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ECDSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AES256&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GCM&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SHA384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ECDHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AES256&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GCM&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SHA384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ECDHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ECDSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">CHACHA20&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">POLY1305&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">ECDHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">CHACHA20&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">POLY1305&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">DHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AES128&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GCM&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SHA256&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">DHE&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RSA&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AES256&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GCM&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SHA384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">TLS_AES_128_GCM_SHA256&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">TLS_AES_256_GCM_SHA384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">TLS_CHACHA20_POLY1305_SHA256&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minTLSVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">VersionTLS12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">router&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Warning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="n">ingresscontrollers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">missing&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">kubectl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">last&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">applied&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">configuration&lt;/span> &lt;span class="n">annotation&lt;/span> &lt;span class="n">which&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">required&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">apply&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="n">should&lt;/span> &lt;span class="n">only&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">used&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">resources&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">declaratively&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">either&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">save&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">apply&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">missing&lt;/span> &lt;span class="n">annotation&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">patched&lt;/span> &lt;span class="n">automatically&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ingresscontroller&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openshift&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">方法二&lt;/span> &lt;span class="err">（官方建議）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">edit&lt;/span> &lt;span class="n">ingresscontroller&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">####加入下方 matchLabels&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodePlacement&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#### 確認ingress-operator已分配到Infra Node &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">NODE&lt;/span> &lt;span class="n">NOMINATED&lt;/span> &lt;span class="n">NODE&lt;/span> &lt;span class="n">READINESS&lt;/span> &lt;span class="n">GATES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c67b4db8b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">75&lt;/span>&lt;span class="n">pjr&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">h44m&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.26&lt;/span> &lt;span class="n">worker1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">c67b4db8b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">glwcq&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Terminating&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="n">h44m&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.27&lt;/span> &lt;span class="n">worker2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">c4cc569cc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">85&lt;/span>&lt;span class="n">sbm&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Pending&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">28&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">NODE&lt;/span> &lt;span class="n">NOMINATED&lt;/span> &lt;span class="n">NODE&lt;/span> &lt;span class="n">READINESS&lt;/span> &lt;span class="n">GATES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">c4cc569cc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">86&lt;/span>&lt;span class="n">ggk&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.32&lt;/span> &lt;span class="n">infra2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">router&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">c4cc569cc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">97&lt;/span>&lt;span class="n">mlv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">49&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.31&lt;/span> &lt;span class="n">infra1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="registry">Registry
&lt;/h5>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get configs.imageregistry.operator.openshift.io/cluster -o yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc edit configs.imageregistry.operator.openshift.io/cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logLevel: Normal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> managementState: Removed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> observedConfig: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operatorLogLevel: Normal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> read:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> maxWaitInQueue: 0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> write:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> maxWaitInQueue: 0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rolloutStrategy: RollingUpdate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> unsupportedConfigOverrides: null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node-role.kubernetes.io/infra: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ oc get pods -o wide -n openshift-image-registry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster-image-registry-operator-598c5664bd-qz8cs 1/1 Running 0 23h 10.128.0.34 master1.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">image-pruner-27761760-jh4fz 0/1 Completed 0 101m 10.131.2.8 infra3.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-cdt8j 1/1 Running 0 22h 192.168.33.23 master1.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-dpzzb 1/1 Running 1 22h 192.168.33.32 infra2.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-hfv8c 1/1 Running 1 21h 192.168.33.33 infra3.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-hjptk 1/1 Running 1 22h 192.168.33.31 infra1.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-k2qhs 1/1 Running 0 22h 192.168.33.24 master2.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-lgkg8 1/1 Running 0 22h 192.168.33.27 worker2.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-wqpn8 1/1 Running 0 22h 192.168.33.25 master3.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-ca-xt8dg 1/1 Running 0 22h 192.168.33.26 worker1.ocp.ken.lab &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="monitoring">Monitoring
&lt;/h5>&lt;p>Include: Prometheus, Thanos Querier, and Alertmanager
先建立ConfigMap cluster-monitor-config.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ConfigMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">|+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">alertmanagerMain&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">prometheusK8s&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">prometheusOperator&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">k8sPrometheusAdapter&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">kubeStateMetrics&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">telemeterClient&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openshiftStateMetrics&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">thanosQuerier&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nodeSelector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">role&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">infra&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&lt;/span> &lt;span class="err">建立此&lt;/span>&lt;span class="n">ConfigMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">configmap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span> &lt;span class="err">查看&lt;/span>&lt;span class="n">pod&lt;/span> &lt;span class="err">是否都移轉至&lt;/span>&lt;span class="n">infra&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="err">，若未移轉則&lt;/span>&lt;span class="n">delete該pod&lt;/span>&lt;span class="err">，使其重新部署&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator不用刪除&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">watch&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">grep&lt;/span> &lt;span class="n">worker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">ocp&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">oc&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">openshift&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span> &lt;span class="o">|&lt;/span>&lt;span class="n">grep&lt;/span> &lt;span class="n">master&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">monitoring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">operator&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">574&lt;/span>&lt;span class="n">c5f5b7b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sg6nh&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mf">10.128&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.33&lt;/span> &lt;span class="n">master1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hr22c&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.23&lt;/span> &lt;span class="n">master1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jnqkc&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.25&lt;/span> &lt;span class="n">master3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">exporter&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lzk6n&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.24&lt;/span> &lt;span class="n">master2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ocp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="問題排除">問題排除
&lt;/h2>&lt;h3 id="調整">調整
&lt;/h3>&lt;h5 id="operatorhub-blank">OperatorHub Blank
&lt;/h5>&lt;h6 id="畫面空白">畫面空白
&lt;/h6>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012115352528.png"
loading="lazy"
alt="image-20221012115352528"
>&lt;/p>
&lt;h6 id="在install-configyaml">在install-config.yaml
&lt;/h6>&lt;p>裡面就要加入 marketplace的參數，sample是用來起template、image stream的operator
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221012133723224.png"
loading="lazy"
alt="image-20221012133723224"
>&lt;/p>
&lt;h6 id="install-configyaml">install-config.yaml
&lt;/h6>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ vim install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@bastion ocp]$ cat install-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">baseDomain: ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">compute:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controlPlane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hyperthreading: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ocp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networking:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> clusterNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - cidr: 10.128.0.0/14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hostPrefix: 23
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networkType: OpenShiftSDN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.30.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">platform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> none: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fips: false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pullSecret: &amp;#39;{&amp;#34;auths&amp;#34;:{&amp;#34;cloud.openshift.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K29jbV9hY2Nlc3NfMzEwNjVjNmVmMTk5NDZmNWEwNmUzZmI4MTVmNzk2OTE6NEJRVk1FVk9CTDRZQVRBT0pONEhQVkIyUExFQTdKNDE3WExFU1IzVDk3NU1YUTJXWE9FSjBNTVk0MzFQQk9RUA==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;quay.io&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K29jbV9hY2Nlc3NfMzEwNjVjNmVmMTk5NDZmNWEwNmUzZmI4MTVmNzk2OTE6NEJRVk1FVk9CTDRZQVRBT0pONEhQVkIyUExFQTdKNDE3WExFU1IzVDk3NU1YUTJXWE9FSjBNTVk0MzFQQk9RUA==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;registry.connect.redhat.com&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;fHVoYy1wb29sLTc5MzgwY2YyLTUxNTEtNGRiNi04YjA3LTRiNzQ4NDcxNWE2NDpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSmxOak5rWVdWbU1tSXlaRFEwTVdKaVlUTXpObVUwTkdGbVl6WmtPVEUwWVNKOS5RMlp6Q1JaWWltVDIxM2dpYU9CRWtNWEVkYUtjbnc4WHN1bTY3VEVOdjEyRjBjQUgyNWNZMVdWTjZNUEY2R21CNjh3TmF4TnoxRHVpVnBtY0ZKM2JZTW0yNVVzZGJxeFc4cEd1dGszSzF5NlNUWk9VejlkU0V4UGg4aUxha05qSEQ4Tml6emNmM1lUQjRNUXdhYTVFSG1PMXVTUERUZFRBTXFYS3FFa2gwRXpHOUpKZTlUMnM4bVJXWkVIbndoZW84cktncVZuV1VCeGhqTldFNElfWG1JZnBPRl91akpFNHdXNzRJWjd5UmdoUGExQVVwS3BsY0NJQ2ZGdGtaS29WUTFwNTBzUzNabkxWYjd6ZHdXR21WcXVsNUFoZUNiSHNoNEtpSjFnYXRSbkwtMG92THZoNGdseUZqd0c0Z3lMMEdyS1ItbU5WMFZYc01mVzJDNXNVaXBzVmhKcmhmY01vQjRNSDRDbjZKcjJXS2plbEdqSVdHQzBUV1BBNlZQZDBmc0lyLTRCY2RBdUFmcm5SaWpGM3d0Mng3RFdXQ1RScFVPbUVMY3U5bDR6Wm5uZkVSejNMd01rNmhCWTFyYXV1TGhCWXJraFlzQURqWEl3bGxPTkwyc01GMUU2OVNIVG1vV0tvNU5fdHdoWE5fX1BtT1ozMzc5ZVNDVGdnTFNZd3hyR1VwS3FXRDFva3JWZlRIWmNlcTk4WHQ2QjFtZHIxcmxLV2RiRmhsRDQ3Q1pldEhrNW1xQUlianp1UzlONENJWllhd0lIZE5LWVotN2tRNFQyUFg4QWdadHFNdHdjY2c0bWx3ME40c09LbWVZN2Q2bGw0bXpXV201bVo0aktTeHdpYmJ3STEwOFcxWVFlSlQ4QW9WZFlkc09YWkdWc3ZxZVVZOU9qbzR2RQ==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;},&amp;#34;registry.redhat.io&amp;#34;:{&amp;#34;auth&amp;#34;:&amp;#34;fHVoYy1wb29sLTc5MzgwY2YyLTUxNTEtNGRiNi04YjA3LTRiNzQ4NDcxNWE2NDpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSmxOak5rWVdWbU1tSXlaRFEwTVdKaVlUTXpObVUwTkdGbVl6WmtPVEUwWVNKOS5RMlp6Q1JaWWltVDIxM2dpYU9CRWtNWEVkYUtjbnc4WHN1bTY3VEVOdjEyRjBjQUgyNWNZMVdWTjZNUEY2R21CNjh3TmF4TnoxRHVpVnBtY0ZKM2JZTW0yNVVzZGJxeFc4cEd1dGszSzF5NlNUWk9VejlkU0V4UGg4aUxha05qSEQ4Tml6emNmM1lUQjRNUXdhYTVFSG1PMXVTUERUZFRBTXFYS3FFa2gwRXpHOUpKZTlUMnM4bVJXWkVIbndoZW84cktncVZuV1VCeGhqTldFNElfWG1JZnBPRl91akpFNHdXNzRJWjd5UmdoUGExQVVwS3BsY0NJQ2ZGdGtaS29WUTFwNTBzUzNabkxWYjd6ZHdXR21WcXVsNUFoZUNiSHNoNEtpSjFnYXRSbkwtMG92THZoNGdseUZqd0c0Z3lMMEdyS1ItbU5WMFZYc01mVzJDNXNVaXBzVmhKcmhmY01vQjRNSDRDbjZKcjJXS2plbEdqSVdHQzBUV1BBNlZQZDBmc0lyLTRCY2RBdUFmcm5SaWpGM3d0Mng3RFdXQ1RScFVPbUVMY3U5bDR6Wm5uZkVSejNMd01rNmhCWTFyYXV1TGhCWXJraFlzQURqWEl3bGxPTkwyc01GMUU2OVNIVG1vV0tvNU5fdHdoWE5fX1BtT1ozMzc5ZVNDVGdnTFNZd3hyR1VwS3FXRDFva3JWZlRIWmNlcTk4WHQ2QjFtZHIxcmxLV2RiRmhsRDQ3Q1pldEhrNW1xQUlianp1UzlONENJWllhd0lIZE5LWVotN2tRNFQyUFg4QWdadHFNdHdjY2c0bWx3ME40c09LbWVZN2Q2bGw0bXpXV201bVo0aktTeHdpYmJ3STEwOFcxWVFlSlQ4QW9WZFlkc09YWkdWc3ZxZVVZOU9qbzR2RQ==&amp;#34;,&amp;#34;email&amp;#34;:&amp;#34;ken.wang@infotech.com.tw&amp;#34;}}}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sshKey: &amp;#39;ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIN1Z2jXmGnPWGAVrtltN9A2q5D8QtJlRvhvdB2QXoZG devop@bastion.ocp.ken.lab&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">capabilities:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> baselineCapabilitySet: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalEnabledCapabilities:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - marketplace
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Redhat_Quay&amp;Clair</title><link>https://wangken0129.github.io/p/redhat_quayclair/</link><pubDate>Sat, 23 Sep 2023 08:18:17 +0800</pubDate><guid>https://wangken0129.github.io/p/redhat_quayclair/</guid><description>&lt;h1 id="install-redhat-quay--clair">Install Redhat Quay &amp;amp; Clair
&lt;/h1>&lt;p>安裝單節點的Quay跟Clair在同一台VM上面執行，需先裝好Clair再安裝Quay。&lt;/p>
&lt;h1 id="參考文件">參考文件
&lt;/h1>&lt;p>1.原廠文件：https://access.redhat.com/documentation/en-us/red_hat_quay/2.9/html/manage_red_hat_quay/clair-initial-setup&lt;/p>
&lt;p>2.原廠文件：https://access.redhat.com/documentation/zh-tw/red_hat_quay/3.7/html/manage_red_hat_quay/clair-intro2&lt;/p>
&lt;p>3.quay&amp;amp;clair: &lt;a class="link" href="https://examples.openshift.pub/quay/" target="_blank" rel="noopener"
>https://examples.openshift.pub/quay/&lt;/a>
&lt;a class="link" href="https://www.modb.pro/db/109809" target="_blank" rel="noopener"
>https://www.modb.pro/db/109809&lt;/a> &amp;ndash;&amp;gt; 本篇參考
&lt;a class="link" href="https://docs.projectquay.io/deploy_quay.html" target="_blank" rel="noopener"
>https://docs.projectquay.io/deploy_quay.html&lt;/a>&lt;/p>
&lt;h1 id="架構-單節點">架構 (單節點)
&lt;/h1>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Clair&lt;/th>
&lt;th>說明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">OS_User&lt;/td>
&lt;td>root、devop / redhat&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">OS&lt;/td>
&lt;td>RHEL8.6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">OS_IP&lt;/td>
&lt;td>192.168.33.34&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">CPU、RAM&lt;/td>
&lt;td>4vCPU、16GB Ram、100GB Disk&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">HostName&lt;/td>
&lt;td>quay.ocp.ken.lab&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">WorkDir&lt;/td>
&lt;td>/home/devop/clair&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Postgresdb&lt;/td>
&lt;td>clairuser / welcome1 / clairdb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Clair&lt;/td>
&lt;td>v3.5.0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Quay&lt;/td>
&lt;td>v3.7.3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">clairpod&lt;/td>
&lt;td>-p 5433:5432 -p 8081:8081 -p 8089:8089&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Quay&lt;/th>
&lt;th>說明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">OS_User&lt;/td>
&lt;td>devop&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">OS&lt;/td>
&lt;td>RHEL8.5&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">OS_IP&lt;/td>
&lt;td>192.168.3.28&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">WorkDir&lt;/td>
&lt;td>/home/devop&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Postgresdb&lt;/td>
&lt;td>quayuser / welcome1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">quay admin&lt;/td>
&lt;td>quayadmin / welcome1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">redis password&lt;/td>
&lt;td>welcome1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">quay-pod port&lt;/td>
&lt;td>80:8080、3306:3306、5432:5432&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Quay Version&lt;/td>
&lt;td>v3.7.3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">Wordpresspod&lt;/td>
&lt;td>8989:80、3307:3306&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="安裝步驟">安裝步驟
&lt;/h1>&lt;h2 id="os-設定">OS 設定
&lt;/h2>&lt;h3 id="users">Users
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@quay ~]# useradd devop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@quay ~]# passwd devop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="disk">Disk
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@quay ~]# df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devtmpfs 7.8G 0 7.8G 0% /dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 7.8G 0 7.8G 0% /dev/shm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 7.8G 8.7M 7.8G 1% /run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 7.8G 0 7.8G 0% /sys/fs/cgroup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/rhel-root 61G 2.8G 59G 5% /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/sda2 1014M 207M 808M 21% /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/rhel-home 30G 245M 30G 1% /home
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/sda1 599M 5.9M 594M 1% /boot/efi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 1.6G 0 1.6G 0% /run/user/0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 1.6G 0 1.6G 0% /run/user/1000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="network">NetWork
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@quay ~]# nmcli c s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME UUID TYPE DEVICE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ens192 7e9a88db-859f-4580-bfc9-9fbe9c5985c6 ethernet ens192
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@quay ~]# nmcli c mod ens192 ipv4.method manual ipv4.address 192.168.33.34/24 ipv4.gateway 192.168.33.251 ipv4.dns 168.95.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@quay ~]# nmcli c u ens192
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@quay ~]# cat /etc/resolv.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Generated by NetworkManager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">search ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameserver 192.168.33.21
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nameserver 168.95.1.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="sudo">sudo
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@quay ~]# cat /etc/sudoers.d/devop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop ALL=(ALL) NOPASSWD: ALL
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="subsciption">subsciption
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@quay ~]# subscription-manager register
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Registering to: subscription.rhsm.redhat.com:443/subscription
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username: ken.wang@infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The system has been registered with ID: 77693b7f-9bbe-412d-9e15-210c55e799ef
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The registered system name is: quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="yum">yum
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@quay ~]# yum repolist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating Subscription Management repositories.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">repo id repo name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rhel-8-for-x86_64-appstream-rpms Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rhel-8-for-x86_64-baseos-rpms Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="install-podman">Install Podman
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@quay ~]# yum install podman -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@quay ~]# podman -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman version 4.1.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="環境設定">環境設定
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>建立 Clair_pod&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@uat-quay ~]$ cat create_clairpod.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman pod create --name=clairpod -p 5433:5432 -p 8081:8081 -p 8089:8089
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@uat-quay ~]$ ./create_clairpod.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立 Quay_pod&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@quay quay]$ cat createpod.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman pod create --name=quaypod -p 80:8080 -p 443:8443 -p 6379:6379 -p 5432:5432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay quay]$ ./createpod.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">f3fcbd51ffa7454c4e8825806a07252a9072ed7d26ad092e6bd21eb992033948
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定防火牆、SELinux&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="n">quay&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">disable&lt;/span> &lt;span class="n">firewalld&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="n">quay&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">su&lt;/span> &lt;span class="o">-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># setenforce 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># vim /etc/selinux/config &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/selinux/config &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file controls the state of SELinux on the system.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># SELINUX= can take one of these three values:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># enforcing - SELinux security policy is enforced.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># permissive - SELinux prints warnings instead of enforcing.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># disabled - No SELinux policy is loaded.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">SELINUX&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">disabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># SELINUXTYPE= can take one of these three values:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># targeted - Targeted processes are protected,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># minimum - Modification of targeted policy. Only selected processes are protected. &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># mls - Multi Level Security protection.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">SELINUXTYPE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">targeted&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>調整podman port binding權限&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo su -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo &amp;#34;net.ipv4.ip_unprivileged_port_start = 80&amp;#34; &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[root@quay ~]# reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>podman 登入 registry.redhat.io&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@quay clair]$ podman login registry.redhat.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username: ken.wang@infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login Succeeded!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>podman 登入 安裝quay時使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay ~&lt;span class="o">]&lt;/span>$ cat podmanlogin.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman login -u&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;redhat+quay&amp;#34;&lt;/span> -p&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;O81WSHRSJR14UAZBK54GQHJS0P1V4CLWAJV1X2C4SD7KO59CQ9N3RE12612XU1HR&amp;#34;&lt;/span> quay.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>產生CA&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$ cat gencert.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create certificate given a specific url name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$#&lt;/span> -ne &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;No arguments supplied or too many arguments&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Usage: &lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2"> domain_name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MYNAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generating a private key...for &lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl genrsa -out &lt;span class="nv">$MYNAME&lt;/span>.key &lt;span class="m">4096&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generating a CSR...for &lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl req -new -key &lt;span class="nv">$MYNAME&lt;/span>.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-out &lt;span class="nv">$MYNAME&lt;/span>.csr &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-subj &lt;span class="s2">&amp;#34;/C=TW/ST=TW/L=Taipei/O=KEN/OU=LAB/CN=&lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generating a certificate...for &lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl x509 -req -days &lt;span class="m">366&lt;/span> -in &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="nv">$MYNAME&lt;/span>.csr -signkey &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="nv">$MYNAME&lt;/span>.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-out &lt;span class="nv">$MYNAME&lt;/span>.crt -extensions v3_req -extfile quay.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$ cat quay.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>req&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">req_extensions&lt;/span> &lt;span class="o">=&lt;/span> v3_req
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">distinguished_name&lt;/span> &lt;span class="o">=&lt;/span> req_distinguished_name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>req_distinguished_name&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> v3_req &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">basicConstraints&lt;/span> &lt;span class="o">=&lt;/span> CA:FALSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">keyUsage&lt;/span> &lt;span class="o">=&lt;/span> nonRepudiation, digitalSignature, keyEncipherment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">subjectAltName&lt;/span> &lt;span class="o">=&lt;/span> @alt_names
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>alt_names&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DNS.1 &lt;span class="o">=&lt;/span> quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DNS.2 &lt;span class="o">=&lt;/span> quay
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay ~&lt;span class="o">]&lt;/span>$ ./gencert.sh quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating a private key...for quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating RSA private key, &lt;span class="m">2048&lt;/span> bit long modulus &lt;span class="o">(&lt;/span>&lt;span class="m">2&lt;/span> primes&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.....+++++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.................................+++++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">e is &lt;span class="m">65537&lt;/span> &lt;span class="o">(&lt;/span>0x010001&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating a CSR...for quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating a certificate...for quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Signature ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">subject&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">C&lt;/span> &lt;span class="o">=&lt;/span> TW, &lt;span class="nv">ST&lt;/span> &lt;span class="o">=&lt;/span> TW, &lt;span class="nv">L&lt;/span> &lt;span class="o">=&lt;/span> Taipei, &lt;span class="nv">O&lt;/span> &lt;span class="o">=&lt;/span> KEN, &lt;span class="nv">OU&lt;/span> &lt;span class="o">=&lt;/span> LAB, &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Getting Private key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxrwxr-x &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">600&lt;/span> Oct &lt;span class="m">17&lt;/span> 17:13 gencert.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">279&lt;/span> Oct &lt;span class="m">17&lt;/span> 17:12 quay.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">1988&lt;/span> Oct &lt;span class="m">17&lt;/span> 17:14 quay.ocp.ken.lab.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">1691&lt;/span> Oct &lt;span class="m">17&lt;/span> 17:14 quay.ocp.ken.lab.csr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">3243&lt;/span> Oct &lt;span class="m">17&lt;/span> 17:14 quay.ocp.ken.lab.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$ sudo cp quay.ocp.ken.lab.crt /etc/pki/ca-trust/source/anchors/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$ sudo update-ca-trust
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="安裝db-postgresql">安裝DB Postgresql
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>建立Clair_pgsql目錄&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">uat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgsql_clair&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">uat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="mi">777&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgsql_clair&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立Quay_pgsql目錄&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">uat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgsql&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">uat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">quay&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="mi">777&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgsql&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動Clair_pgsql&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay clair&lt;span class="o">]&lt;/span>$ cat start_pgsql_clair.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman run -d --pod&lt;span class="o">=&lt;/span>clairpod --name&lt;span class="o">=&lt;/span>clair-pgsql &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_ADMIN_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>welcome1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_USER&lt;/span>&lt;span class="o">=&lt;/span>clairuser &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>welcome1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_DATABASE&lt;/span>&lt;span class="o">=&lt;/span>clairdb &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/var/lib/pgsql_clair:/var/lib/pgsql/data:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> registry.redhat.io/rhel8/postgresql-10:1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay clair&lt;span class="o">]&lt;/span>$ ./start_pgsql_clair.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立Clairdb Extension&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay clair&lt;span class="o">]&lt;/span>$ cat test_pgsql_clair.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman &lt;span class="nb">exec&lt;/span> -it clair-pgsql /bin/bash -c &lt;span class="s1">&amp;#39;echo &amp;#34;CREATE EXTENSION IF NOT EXISTS \&amp;#34;uuid-ossp\&amp;#34;&amp;#34; | psql -d clairdb -U postgres&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay clair&lt;span class="o">]&lt;/span>$ ./test_pgsql_clair.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE EXTENSION
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動Quay_pgsql&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ cat start_pgsql.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman run -d --pod&lt;span class="o">=&lt;/span>quaypod --name&lt;span class="o">=&lt;/span>quay-pgsql &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_ADMIN_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>welcome1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_USER&lt;/span>&lt;span class="o">=&lt;/span>quayuser &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>welcome1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">POSTGRESQL_DATABASE&lt;/span>&lt;span class="o">=&lt;/span>quaydb &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/var/lib/pgsql:/var/lib/pgsql/data:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> registry.redhat.io/rhel8/postgresql-10:1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立 quaydb Extension&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@quay quay]$ podman exec -it quay-pgsql /bin/bash -c &amp;#39;echo &amp;#34;CREATE EXTENSION IF NOT EXISTS pg_trgm&amp;#34; | psql -d quaydb -U postgres&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="安裝redis">安裝Redis
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>建立redis資料夾&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chmod&lt;/span> &lt;span class="mi">777&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝redis&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay ~&lt;span class="o">]&lt;/span>$ cat start_redis.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman run -d --pod&lt;span class="o">=&lt;/span>quaypod --name&lt;span class="o">=&lt;/span>quay-redis &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/var/lib/redis:/var/lib/redis/data:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">REDIS_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>welcome1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> registry.redhat.io/rhel8/redis-5:1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ ./start_redis.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying to pull registry.redhat.io/rhel8/redis-5:1...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Getting image &lt;span class="nb">source&lt;/span> signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Checking &lt;span class="k">if&lt;/span> image destination supports signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob 8b33c6fa797f &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob f70d60810c69 &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob 545277d80005 &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob 399eb2b7226e &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying config c9df129d49 &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing manifest to image destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Storing signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c2576cc7542ec7637d0fa044c53adc1d2123ffdc99f851901f891084301d579c
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認container 狀態&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">podman ps
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="配置quay-config">配置Quay Config
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>podman 登入quay.io&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay ~&lt;span class="o">]&lt;/span>$ cat podmanlogin.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman login -u&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;redhat+quay&amp;#34;&lt;/span> -p&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;O81WSHRSJR14UAZBK54GQHJS0P1V4CLWAJV1X2C4SD7KO59CQ9N3RE12612XU1HR&amp;#34;&lt;/span> quay.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay ~&lt;span class="o">]&lt;/span>$ ./podmanlogin.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login Succeeded!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安裝quay-config&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay ~&lt;span class="o">]&lt;/span>$ cat start_quay_config.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman run --rm -it --pod&lt;span class="o">=&lt;/span>quaypod --name&lt;span class="o">=&lt;/span>quay-config &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> registry.redhat.io/quay/quay-rhel8:v3.7.3 config welcome1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20220831115811189.png"
loading="lazy"
alt="image-20220831115811189"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>連線網頁 &lt;a class="link" href="http://quay.ocp.ken.lab" target="_blank" rel="noopener"
>http://quay.ocp.ken.lab&lt;/a> quayconfig welcome1&lt;/p>
&lt;/li>
&lt;li>
&lt;p>左下角共有五項需設定 Hostname、DB、Redis，上傳憑證&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20220831115921288.png"
loading="lazy"
alt="image-20220831115921288"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Server Hostname &amp;amp; TLS : quay.ocp.ken.lab
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221014145935943.png"
loading="lazy"
alt="image-20221014145935943"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定DB 資訊&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Database Server: quay.ocp.ken.lab:5432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username: quayuser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password: welcome1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Database Name: quaydb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221014145956804.png"
loading="lazy"
alt="image-20221014145956804"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定redis Hostname&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Redis Hostname: quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Redis Port: 6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Redis password: welcome1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221014150016457.png"
loading="lazy"
alt="image-20221014150016457"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="enable-security-scanner">Enable Security Scanner
&lt;/h4>&lt;pre>&lt;code>##### Enable Security Scanner &amp;amp; Generate PSK
PSK: MTg4MDJnaTQ3OWRjYw==
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221014150103834.png"
loading="lazy"
alt="image-20221014150103834"
>&lt;/p>
&lt;ol start="9">
&lt;li>
&lt;p>保存設定並下載設定檔，並關閉quay-config&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20220831120853324.png"
loading="lazy"
alt="image-20220831120853324"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20220830154235463.png"
loading="lazy"
alt="image-20220830154235463"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="解壓縮config">解壓縮Config
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>下載後解壓縮&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@quay quay]$ tar xvf quay-config.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extra_ca_certs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssl.cert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssl.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="設定-clair並啟動">設定 Clair並啟動
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>建立Clair目錄&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@uat-quay ~]$ mkdir -p /home/devop/mnt/clair/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@uat-quay ~]$ chmod 777 /home/devop/mnt/clair/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>配置clair的config.yaml &amp;raquo; 要在quay_config階段時Enable Security Scanner 並Generate PSK&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@uat-quay ~]$ cat prekey.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MTg4MDJnaTQ3OWRjYw==
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@uat-quay clair]$ vim config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http_listen_addr: :8081
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">introspection_addr: :8089
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">log_level: info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">indexer:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> connstring: host=quay.ocp.ken.lab port=5433 dbname=clairdb user=clairuser password=welcome1 sslmode=disable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scanlock_retry: 10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> layer_scan_concurrency: 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> migrations: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">matcher:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> connstring: host=quay.ocp.ken.lab port=5433 dbname=clairdb user=clairuser password=welcome1 sslmode=disable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> max_conn_pool: 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> run: &amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> migrations: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> indexer_addr: clair-indexer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">notifier:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> connstring: host=quay.ocp.ken.lab port=5433 dbname=clairdb user=clairuser password=welcome1 sslmode=disable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delivery_interval: 1m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> poll_interval: 5m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> migrations: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> psk:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: &amp;#34;MTg4MDJnaTQ3OWRjYw==&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> iss: [&amp;#34;quay&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@uat-quay clair]$ cp config /home/devop/mnt/clair/config/config.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動Clair ( 先停止Quay )&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay clair&lt;span class="o">]&lt;/span>$ podman login registry.redhat.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username: ken.wang@infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login Succeeded!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay clair&lt;span class="o">]&lt;/span>$ cat start_clair.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman run -d --pod clairpod --name clair -e &lt;span class="nv">CLAIR_CONF&lt;/span>&lt;span class="o">=&lt;/span>/clair/config.yaml &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">CLAIR_MODE&lt;/span>&lt;span class="o">=&lt;/span>combo -e &lt;span class="nv">SSL_CERT_DIR&lt;/span>&lt;span class="o">=&lt;/span>/etc/pki/tls/certs &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/mnt/clair/config:/clair:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/mnt/quay/certs/quay.ocp.ken.lab.crt:/etc/pki/tls/certs/quay.ocp.ken.lab:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> registry.redhat.io/quay/clair-rhel8:v3.5.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay clair&lt;span class="o">]&lt;/span>$ ./start_clair.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying to pull registry.redhat.io/quay/clair-rhel8:v3.5.0...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Getting image &lt;span class="nb">source&lt;/span> signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Checking &lt;span class="k">if&lt;/span> image destination supports signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob d821702c1e09 &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob 13897c84ca57 &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob 64607cc74f9c &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying config 10e4c3931b &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing manifest to image destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Storing signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4d428098362e17ae606dad5412756f880ab40420af4f7a376170242064963154
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認container狀態&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@quay clair]$ podman ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eb65b55e9875 localhost/podman-pause:4.1.1-1657551413 About an hour ago Up About an hour ago 0.0.0.0:5433-&amp;gt;5432/tcp, 0.0.0.0:8081-&amp;gt;8081/tcp, 0.0.0.0:8089-&amp;gt;8089/tcp 535faabcd216-infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4b465bef2476 registry.redhat.io/rhel8/postgresql-10:1 run-postgresql About an hour ago Up About an hour ago 0.0.0.0:5433-&amp;gt;5432/tcp, 0.0.0.0:8081-&amp;gt;8081/tcp, 0.0.0.0:8089-&amp;gt;8089/tcp clair-pgsql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">154a0b6a0803 localhost/podman-pause:4.1.1-1657551413 About an hour ago Up About an hour ago 0.0.0.0:80-&amp;gt;8080/tcp, 0.0.0.0:443-&amp;gt;8443/tcp, 0.0.0.0:5432-&amp;gt;5432/tcp, 0.0.0.0:6379-&amp;gt;6379/tcp da7ca63d2ac6-infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">518b5db0591a registry.redhat.io/rhel8/postgresql-10:1 run-postgresql About an hour ago Up About an hour ago 0.0.0.0:80-&amp;gt;8080/tcp, 0.0.0.0:443-&amp;gt;8443/tcp, 0.0.0.0:5432-&amp;gt;5432/tcp, 0.0.0.0:6379-&amp;gt;6379/tcp quay-pgsql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c2576cc7542e registry.redhat.io/rhel8/redis-5:1 run-redis 46 minutes ago Up 46 minutes ago 0.0.0.0:80-&amp;gt;8080/tcp, 0.0.0.0:443-&amp;gt;8443/tcp, 0.0.0.0:5432-&amp;gt;5432/tcp, 0.0.0.0:6379-&amp;gt;6379/tcp quay-redis
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認更新完成即可啟動Quay (約3分鐘)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@uat-quay clair]$ podman logs --tail 10 clair
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;level&amp;#34;:&amp;#34;info&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;libvuln/New&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;libvuln/updateDriver/RunUpdaters&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;internal/updater/Executor&amp;#34;,&amp;#34;run_id&amp;#34;:1879968118,&amp;#34;updater&amp;#34;:&amp;#34;photon-updater-photon3&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;photon/Updater.Parse&amp;#34;,&amp;#34;time&amp;#34;:&amp;#34;2022-09-14T05:21:38Z&amp;#34;,&amp;#34;time&amp;#34;:&amp;#34;2022-09-14T05:21:38Z&amp;#34;,&amp;#34;message&amp;#34;:&amp;#34;starting parse&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;level&amp;#34;:&amp;#34;info&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;libvuln/New&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;libvuln/updateDriver/RunUpdaters&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;internal/updater/Executor&amp;#34;,&amp;#34;run_id&amp;#34;:1879968118,&amp;#34;updater&amp;#34;:&amp;#34;RHEL8-advanced-virtualization&amp;#34;,&amp;#34;ref&amp;#34;:&amp;#34;0f18ac9b-223f-460d-96ed-08ea268e278e&amp;#34;,&amp;#34;time&amp;#34;:&amp;#34;2022-09-14T05:22:38Z&amp;#34;,&amp;#34;time&amp;#34;:&amp;#34;2022-09-14T05:22:38Z&amp;#34;,&amp;#34;message&amp;#34;:&amp;#34;successful update&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{&amp;#34;level&amp;#34;:&amp;#34;info&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;libvuln/New&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;libvuln/updateDriver/RunUpdaters&amp;#34;,&amp;#34;component&amp;#34;:&amp;#34;internal/updater/Executor&amp;#34;,&amp;#34;run_id&amp;#34;:1879968118,&amp;#34;updater&amp;#34;:&amp;#34;photon-updater-photon1&amp;#34;,&amp;#34;ref&amp;#34;:&amp;#34;b1ea50fa-b89c-4f94-a182-a65a9284125a&amp;#34;,&amp;#34;time&amp;#34;:&amp;#34;2022-09-14T05:22:48Z&amp;#34;,&amp;#34;time&amp;#34;:&amp;#34;2022-09-14T05:22:48Z&amp;#34;,&amp;#34;message&amp;#34;:&amp;#34;successful update&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="啟動quay">啟動Quay
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>啟動Quay&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##建立quay資料夾 並將config 、 CA 放到&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ mkdir -p /home/devop/mnt/quay/storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ mkdir -p /home/devop/mnt/quay/storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ mkdir -P /home/devop/mnt/quay/certs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ chmod &lt;span class="m">777&lt;/span> /home/devop/mnt/quay/storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ chmod &lt;span class="m">777&lt;/span> /home/devop/mnt/quay/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ chmod &lt;span class="m">777&lt;/span> /home/devop/mnt/quay/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ cp config.yaml /home/devop/mnt/quay/config/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay certs&lt;span class="o">]&lt;/span>$ cp quay.ocp.ken.lab.* /home/devop/mnt/quay/certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay config&lt;span class="o">]&lt;/span>$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxrwxr-x &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">2365&lt;/span> Jan &lt;span class="m">1&lt;/span> &lt;span class="m">1970&lt;/span> config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxrwxr-x &lt;span class="m">2&lt;/span> devop devop &lt;span class="m">6&lt;/span> Jan &lt;span class="m">1&lt;/span> &lt;span class="m">1970&lt;/span> extra_ca_certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">3312&lt;/span> Oct &lt;span class="m">14&lt;/span> 16:10 quay-config.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxrwxr-x &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">1204&lt;/span> Jan &lt;span class="m">1&lt;/span> &lt;span class="m">1970&lt;/span> ssl.cert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxrwxr-x &lt;span class="m">1&lt;/span> devop devop &lt;span class="m">1679&lt;/span> Jan &lt;span class="m">1&lt;/span> &lt;span class="m">1970&lt;/span> ssl.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay config&lt;span class="o">]&lt;/span>$ &lt;span class="nb">cd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay ~&lt;span class="o">]&lt;/span>$ cat start_quay.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">podman run -d --pod&lt;span class="o">=&lt;/span>quaypod --name&lt;span class="o">=&lt;/span>quay &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/mnt/quay/config:/conf/stack:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/devop/mnt/quay/storage:/datastorage:Z &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> registry.redhat.io/quay/quay-rhel8:v3.7.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@uat-quay ~&lt;span class="o">]&lt;/span>$ ./start_quay.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5f1915f2038f4167fd6e37c4233903dbad7de00acd6e753957ed9ff66b2d8ba2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>devop@quay quay&lt;span class="o">]&lt;/span>$ podman ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">eb65b55e9875 localhost/podman-pause:4.1.1-1657551413 About an hour ago Up About an hour ago 0.0.0.0:5433-&amp;gt;5432/tcp, 0.0.0.0:8081-&amp;gt;8081/tcp, 0.0.0.0:8089-&amp;gt;8089/tcp 535faabcd216-infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4b465bef2476 registry.redhat.io/rhel8/postgresql-10:1 run-postgresql About an hour ago Up About an hour ago 0.0.0.0:5433-&amp;gt;5432/tcp, 0.0.0.0:8081-&amp;gt;8081/tcp, 0.0.0.0:8089-&amp;gt;8089/tcp clair-pgsql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">154a0b6a0803 localhost/podman-pause:4.1.1-1657551413 About an hour ago Up About an hour ago 0.0.0.0:80-&amp;gt;8080/tcp, 0.0.0.0:443-&amp;gt;8443/tcp, 0.0.0.0:5432-&amp;gt;5432/tcp, 0.0.0.0:6379-&amp;gt;6379/tcp da7ca63d2ac6-infra
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">518b5db0591a registry.redhat.io/rhel8/postgresql-10:1 run-postgresql About an hour ago Up About an hour ago 0.0.0.0:80-&amp;gt;8080/tcp, 0.0.0.0:443-&amp;gt;8443/tcp, 0.0.0.0:5432-&amp;gt;5432/tcp, 0.0.0.0:6379-&amp;gt;6379/tcp quay-pgsql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c2576cc7542e registry.redhat.io/rhel8/redis-5:1 run-redis About an hour ago Up About an hour ago 0.0.0.0:80-&amp;gt;8080/tcp, 0.0.0.0:443-&amp;gt;8443/tcp, 0.0.0.0:5432-&amp;gt;5432/tcp, 0.0.0.0:6379-&amp;gt;6379/tcp quay-redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3c9b87b803d3 registry.redhat.io/quay/clair-rhel8:v3.5.0 &lt;span class="m">12&lt;/span> minutes ago Up &lt;span class="m">12&lt;/span> minutes ago 0.0.0.0:5433-&amp;gt;5432/tcp, 0.0.0.0:8081-&amp;gt;8081/tcp, 0.0.0.0:8089-&amp;gt;8089/tcp clair
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>開啟瀏覽器連線 &lt;a class="link" href="https://quay.ocp.ken.lab" target="_blank" rel="noopener"
>https://quay.ocp.ken.lab&lt;/a> quayadmin/welcome1
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221017172605042.png"
loading="lazy"
alt="image-20221017172605042"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認憑證
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221017172616780.png"
loading="lazy"
alt="image-20221017172616780"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立管理員帳號、密碼，Create Account&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Username: quayadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">E-mail: quayadmin@email.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password: welcome1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20220831122552327.png"
loading="lazy"
alt="image-20220831122552327"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入確認
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20220831122620702.png"
loading="lazy"
alt="image-20220831122620702"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="測試clair">測試Clair
&lt;/h1>&lt;ol>
&lt;li>測試pull &amp;amp; push (憑證可透過 &amp;ndash;tls-verify=false解決 or 將憑證放到podman 設定檔路徑)&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ openssl x509 -in certs/quay.ocp.ken.lab.crt -out certs/quay.ocp.ken.lab.cert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ podman login quay.ocp.ken.lab --cert-dir=/home/devop/certs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username: quayadmin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login Succeeded!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ sudo mkdir /etc/containers/certs.d/quay.ocp.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ sudo cp /home/devop/certs/quay.ocp.ken.lab.crt /etc/containers/certs.d/quay.ocp.ken.lab/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">＃＃＃重開terminal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ podman pull docker.io/library/ubuntu:20.04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying to pull docker.io/library/ubuntu:20.04...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Getting image source signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob fb0b3276a519 done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying config 817578334b done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing manifest to image destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Storing signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">817578334b4dd5e2b0654610e895e08e1bea996c58119bb9c7e3bd9e74dd8936
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ podman tag docker.io/library/ubuntu:20.04 quay.ocp.ken.lab/quayadmin/ubuntu:20.04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[devop@quay ~]$ podman push quay.ocp.ken.lab/quayadmin/ubuntu:20.04 --cert-dir=/home/devop/certs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Getting image source signatures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying blob cdca8156a203 done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copying config 817578334b done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing manifest to image destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Storing signatures
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221017174835521.png"
loading="lazy"
alt="image-20221017174835521"
>&lt;/p>
&lt;ol start="2">
&lt;li>
&lt;p>查看Security Scan&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221017174905497.png"
loading="lazy"
alt="image-20221017174905497"
>&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Rancher_RKE2_Lab</title><link>https://wangken0129.github.io/p/rancher_rke2_lab/</link><pubDate>Sat, 23 Sep 2023 07:42:08 +0800</pubDate><guid>https://wangken0129.github.io/p/rancher_rke2_lab/</guid><description>&lt;h1 id="rancher-rke2-cluster">Rancher RKE2 Cluster
&lt;/h1>&lt;p>Rancher RKE2 安裝Lab&lt;/p>
&lt;h2 id="參考資料">參考資料
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.rke2.io/#how-is-this-different-from-rke-or-k3s" target="_blank" rel="noopener"
>https://docs.rke2.io/#how-is-this-different-from-rke-or-k3s&lt;/a>&lt;/p>
&lt;h2 id="rke2-vs-rke-vs-k3s">RKE2 vs RKE vs K3S
&lt;/h2>&lt;p>RKE2 combines the best-of-both-worlds from the 1.x version of RKE (hereafter referred to as RKE1) and K3s.&lt;/p>
&lt;p>From K3s, it inherits the usability, ease-of-operations, and deployment model.&lt;/p>
&lt;p>From RKE1, it inherits close alignment with upstream Kubernetes. In places K3s has diverged from upstream Kubernetes in order to optimize for edge deployments, but RKE1 and RKE2 can stay closely aligned with upstream.&lt;/p>
&lt;p>Importantly, RKE2 does not rely on Docker as RKE1 does. RKE1 leveraged Docker for deploying and managing the control plane components as well as the container runtime for Kubernetes. RKE2 launches control plane components as static pods, managed by the kubelet. The embedded container runtime is containerd.&lt;/p>
&lt;h2 id="架構">架構
&lt;/h2>&lt;p>devop/suse&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026120148575.png"
loading="lazy"
alt="image-20221026120148575"
>&lt;/p>
&lt;p>DownStream K8S&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026120458643.png"
loading="lazy"
alt="image-20221026120458643"
>&lt;/p>
&lt;h2 id="安裝作業系統-no-swap">安裝作業系統 (No Swap)
&lt;/h2>&lt;p>關閉防火牆&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025140147837.png"
loading="lazy"
alt="image-20221025140147837"
>&lt;/p>
&lt;h2 id="註冊作業系統">註冊作業系統
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">yast2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">email: ken.wang@infotech.com.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Registry Code: B8203D65240BDA3A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025145420736.png"
loading="lazy"
alt="image-20221025145420736"
>&lt;/p>
&lt;h2 id="安裝rms">安裝RMS
&lt;/h2>&lt;p>&lt;a class="link" href="https://kb.vmware.com/s/article/57122" target="_blank" rel="noopener"
>https://kb.vmware.com/s/article/57122&lt;/a>&lt;/p>
&lt;h3 id="安裝dns-server">安裝DNS Server
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; sudo zypper install -t pattern dhcp_dns_server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; sudo yast2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025153349050.png"
loading="lazy"
alt="image-20221025153349050"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025153502151.png"
loading="lazy"
alt="image-20221025153502151"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025153543482.png"
loading="lazy"
alt="image-20221025153543482"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025153718281.png"
loading="lazy"
alt="image-20221025153718281"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025153903862.png"
loading="lazy"
alt="image-20221025153903862"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025154021819.png"
loading="lazy"
alt="image-20221025154021819"
>&lt;/p>
&lt;h3 id="安裝ngnix">安裝Ngnix
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>安裝nginx&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">zypper&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的密碼：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在重新整理服務&lt;/span> &lt;span class="s1">&amp;#39;Basesystem_Module_15_SP4_x86_64&amp;#39;&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在重新整理服務&lt;/span> &lt;span class="s1">&amp;#39;Desktop_Applications_Module_15_SP4_x86_64&amp;#39;&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在重新整理服務&lt;/span> &lt;span class="s1">&amp;#39;SUSE_Linux_Enterprise_Server_15_SP4_x86_64&amp;#39;&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在重新整理服務&lt;/span> &lt;span class="s1">&amp;#39;Server_Applications_Module_15_SP4_x86_64&amp;#39;&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在載入套件庫資料&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在讀取已安裝的套件&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在解決套件相依性&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">將會安裝下列&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="err">個新的套件：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">1&lt;/span> &lt;span class="err">要安裝的新套件&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">全部下載大小：&lt;/span>&lt;span class="mf">702.9&lt;/span> &lt;span class="n">KiB&lt;/span>&lt;span class="err">。已快取：&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="err">。&lt;/span> &lt;span class="err">完成操作後，將使用額外的&lt;/span> &lt;span class="mf">2.3&lt;/span> &lt;span class="n">MiB&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">要繼續嗎？&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="o">/...&lt;/span>&lt;span class="err">?&lt;/span> &lt;span class="err">顯示所有選項&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="n">y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在取出&lt;/span> &lt;span class="err">套件&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.21&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150400.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">702.9&lt;/span> &lt;span class="n">KiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">已解開&lt;/span> &lt;span class="mf">2.3&lt;/span> &lt;span class="n">MiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在取回︰&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.21&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150400.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rpm&lt;/span> &lt;span class="o">......................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">正在檢查檔案衝突：&lt;/span> &lt;span class="o">.................................................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">useradd&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="n">User&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nologin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">正在安裝：&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.21&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150400.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="o">.....................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="err">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定ngnix&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">worker_processes&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">worker_rlimit_nofile&lt;/span> &lt;span class="mi">40000&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">load_module&lt;/span> &lt;span class="n">lib64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ngx_stream_module&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">events&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">worker_connections&lt;/span> &lt;span class="mi">8192&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#http {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># server {&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># listen 80;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># return 301 https://$host$request_uri;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">stream&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">upstream&lt;/span> &lt;span class="n">rancher_servers_http&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">least_conn&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#後端web server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">proxy_pass&lt;/span> &lt;span class="n">rancher_servers_http&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">upstream&lt;/span> &lt;span class="n">rancher_servers_https&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">least_conn&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">443&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">443&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">proxy_pass&lt;/span> &lt;span class="n">rancher_servers_https&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">upstream&lt;/span> &lt;span class="n">rancher_servers_6443&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">least_conn&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6443&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">6443&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">proxy_pass&lt;/span> &lt;span class="n">rancher_servers_6443&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">upstream&lt;/span> &lt;span class="n">rancher_servers_9345&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">least_conn&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9345&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9345&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9345&lt;/span> &lt;span class="n">max_fails&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="n">fail_timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">9345&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">proxy_pass&lt;/span> &lt;span class="n">rancher_servers_9345&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">log_format&lt;/span> &lt;span class="n">basic&lt;/span> &lt;span class="s1">&amp;#39;$remote_addr [$time_local] &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;$protocol $status $bytes_sent $bytes_received &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;$session_time &amp;#34;$upstream_addr&amp;#34; &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#34;$upstream_bytes_sent&amp;#34; &amp;#34;$upstream_bytes_received&amp;#34; &amp;#34;$upstream_connect_time&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">access_log&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span> &lt;span class="n">basic&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">error_log&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:/etc/nginx&amp;gt; sudo nginx -t
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx: configuration file /etc/nginx/nginx.conf test is successful
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:/etc/nginx&amp;gt; sudo systemctl enable nginx --now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /usr/lib/systemd/system/nginx.service.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="調整防火牆設定">調整防火牆設定
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">6443&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">9345&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tcp&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Inbound Rules for RKE2 Server Nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Protocol Port Source Description
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 9345 RKE2 agent nodes Kubernetes API
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 6443 RKE2 agent nodes Kubernetes API
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UDP 8472 RKE2 server and agent nodes Required only for Flannel VXLAN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 10250 RKE2 server and agent nodes kubelet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 2379 RKE2 server nodes etcd client port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 2380 RKE2 server nodes etcd peer port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 30000-32767 RKE2 server and agent nodes NodePort port range
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UDP 8472 RKE2 server and agent nodes Cilium CNI VXLAN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 4240 RKE2 server and agent nodes Cilium CNI health checks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ICMP 8/0 RKE2 server and agent nodes Cilium CNI health checks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 179 RKE2 server and agent nodes Calico CNI with BGP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UDP 4789 RKE2 server and agent nodes Calico CNI with VXLAN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 5473 RKE2 server and agent nodes Calico CNI with Typha
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 9098 RKE2 server and agent nodes Calico Typha health checks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 9099 RKE2 server and agent nodes Calico health checks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 5473 RKE2 server and agent nodes Calico CNI with Typha
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UDP 8472 RKE2 server and agent nodes Canal CNI with VXLAN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TCP 9099 RKE2 server and agent nodes Canal CNI health checks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UDP 51820 RKE2 server and agent nodes Canal CNI with WireGuard IPv4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">UDP 51821 RKE2 server and agent nodes Canal CNI with WireGuard IPv6/dual-stack
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>用ansible來執行開啟port (針對各個nodes)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC aps-rancher % cat inventory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[rke2-cluster]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.2.[71:73] ansible_ssh_pass=P@55w.rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[downstream]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.2.[74:78] ansible_ssh_pass=P@55w.rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC aps-rancher % cat ansible.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[defaults]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inventory = /Users/wangken/ansible/infoserver/aps-rancher/inventory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote_user = devop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo_user = root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host_key_checking = False
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[privilege_escalation]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">become = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">become_user = root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">become_ask_pass = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC aps-rancher % cat firewall.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- hosts: rke2-cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tasks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> firewalld:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: &amp;#34;{{ item }}&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> permanent: yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> immediate: yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> state: enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> with_items:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 9345/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 6443/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 8472/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 10250/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 2379-2380/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 30000-32767/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 8472/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 4240/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 179/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 4789/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 5473/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 9098/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 9099/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 8472/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 51820/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 51821/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wangken@wangken-MAC aps-rancher % ansible-playbook firewall.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> TASK [firewalld] ***************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.73] =&amp;gt; (item=9345/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.72] =&amp;gt; (item=9345/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.71] =&amp;gt; (item=9345/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.72] =&amp;gt; (item=6443/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.73] =&amp;gt; (item=6443/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.71] =&amp;gt; (item=6443/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.73] =&amp;gt; (item=8472/udp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.72] =&amp;gt; (item=8472/udp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.71] =&amp;gt; (item=8472/udp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.73] =&amp;gt; (item=10250/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.71] =&amp;gt; (item=10250/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.72] =&amp;gt; (item=10250/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.72] =&amp;gt; (item=2379-2380/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.73] =&amp;gt; (item=2379-2380/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.71] =&amp;gt; (item=2379-2380/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.71] =&amp;gt; (item=30000-32767/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.73] =&amp;gt; (item=30000-32767/tcp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changed: [192.168.2.72] =&amp;gt; (item=30000-32767/tcp)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安裝nfs-server">安裝NFS Server
&lt;/h3>&lt;p>&lt;a class="link" href="https://documentation.suse.com/sles/15-SP1/html/SLES-all/cha-nfs.html" target="_blank" rel="noopener"
>https://documentation.suse.com/sles/15-SP1/html/SLES-all/cha-nfs.html&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>建立NFS Server 目錄&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:/&amp;gt; pwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:/&amp;gt; sudo mkdir nfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:/&amp;gt; sudo chmod 777 nfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:/&amp;gt; ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxrwxrwx 1 root root 0 11月 8 14:33 nfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝NFS Server套件 (SUSE OS)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:/home&amp;gt; sudo zypper install yast2-nfs-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">下列 1 個推薦的套件已自動被選取：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfs-kernel-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">將會安裝下列 2 個新的套件：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfs-kernel-server yast2-nfs-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定nfs-server path&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exports&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exports&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># See the exports(5) manpage for a description of the syntax of this file.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file contains a list of all directories that are to be exported to &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># other computers via NFS (Network File System).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file used by rpc.nfsd and rpc.mountd. See their manpages for details&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># on how make changes in this file effective.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">255.255&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">255.0&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sync&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">no_root_squash&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">----&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 參數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">rw&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="err">，可讀寫的權限；&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">ro&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">only&lt;/span>&lt;span class="err">，唯讀的權限；&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">sync&lt;/span>&lt;span class="err">：資料同步寫入到記憶體與硬碟當中；&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">async&lt;/span>&lt;span class="err">：資料會先暫存於記憶體當中，而非直接寫入硬碟。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">no_root_squash&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">登入&lt;/span> &lt;span class="n">NFS&lt;/span> &lt;span class="err">主機使用分享目錄的使用者如果是&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="err">，對於分享的目錄具有&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的權限。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">極不安全，不建議使用。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">root_squash&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">登入&lt;/span> &lt;span class="n">NFS&lt;/span> &lt;span class="err">主機使用分享目錄的使用者如果是&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="err">，權限將被壓縮成匿名使用者，&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">通常他的&lt;/span> &lt;span class="n">UID&lt;/span> &lt;span class="err">與&lt;/span> &lt;span class="n">GID&lt;/span> &lt;span class="err">都會變成&lt;/span> &lt;span class="n">nobody&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nfsnobody&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">那個系統帳號的身份；&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">all_squash&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">不論登入&lt;/span> &lt;span class="n">NFS&lt;/span> &lt;span class="err">的使用者身份為何，都會被壓縮成為匿名使用者，通常是&lt;/span> &lt;span class="n">nobody&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nfsnobody&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">anonuid&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">anon&lt;/span> &lt;span class="err">意指&lt;/span> &lt;span class="n">anonymous&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">匿名者&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">，自訂匿名使用者的&lt;/span> &lt;span class="n">UID&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span> &lt;span class="n">anongid&lt;/span>&lt;span class="err">：自訂匿名使用者的是變成&lt;/span> &lt;span class="n">GID&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動nfs server、調整防火牆&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nfs&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的密碼：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">firewall&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cmd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">reload&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">showmount&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Export&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">255.255&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">255.0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="安裝rke2-1">安裝RKE2-1
&lt;/h2>&lt;ol>
&lt;li>安裝OS&lt;/li>
&lt;li>調整DNS 指向192.168.33.40&lt;/li>
&lt;li>關閉防火牆&lt;/li>
&lt;/ol>
&lt;h3 id="安裝rke2">安裝RKE2
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>下載install.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-1:~&amp;gt; curl -sfL https://get.rke2.io --output install.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rke2-1:~&amp;gt; chmod +x install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增設定檔&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-1:~&amp;gt; sudo mkdir -p /etc/rancher/rke2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rke2-1:~&amp;gt; sudo vim /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;rke2-1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">token: my-shared-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls-san:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rms.rancher.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devop@rke2-1:~&amp;gt; rke2 etcd-snapshot save \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --name pre-upgrade-snapshot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝rke2 &amp;ndash; version 1.23.9&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">INSTALL_RKE2_CHANNEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">WARN&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">only&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="n">point&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">finding&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">channel&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">release&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">checksums&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sha256sum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">verifying&lt;/span> &lt;span class="n">tarball&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">unpacking&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">updating&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">contents&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">reflect&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">moving&lt;/span> &lt;span class="n">systemd&lt;/span> &lt;span class="n">units&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">complete&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>調整kubectl 、rke2 指令及kubeconfig &amp;raquo; 可把 rke2、kubectl、rke2.yaml scp到 rms&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">chown&lt;/span> &lt;span class="n">devop&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">----&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">scp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.40&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">devop&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">authenticity&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="s1">&amp;#39;192.168.33.40 (192.168.33.40)&amp;#39;&lt;/span> &lt;span class="n">can&lt;/span>&lt;span class="s1">&amp;#39;t be established.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ECDSA&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="n">fingerprint&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">SHA256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">NS1PCnKGGGiOsCVPSdoRDhX5jq0yhqhtEIr3pMNDSzw&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Are&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">sure&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="k">continue&lt;/span> &lt;span class="n">connecting&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fingerprint&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="err">?&lt;/span> &lt;span class="n">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Warning&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Permanently&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="s1">&amp;#39;192.168.33.40&amp;#39;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ECDSA&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">known&lt;/span> &lt;span class="n">hosts&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span> &lt;span class="mi">2969&lt;/span> &lt;span class="mf">2.6&lt;/span>&lt;span class="n">MB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">scp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.40&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubectl&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span> &lt;span class="mi">47&lt;/span>&lt;span class="n">MB&lt;/span> &lt;span class="mf">220.3&lt;/span>&lt;span class="n">MB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認pod status (切到 rms來操作)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get pods -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cloud-controller-manager-rke2-1 1/1 Running 0 5m46s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-rke2-1 1/1 Running 0 5m30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-canal-9pg26 0/1 Completed 0 5m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-coredns-d4j4q 0/1 Completed 0 5m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-ingress-nginx-gz7db 0/1 Completed 0 5m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-metrics-server-fx65q 0/1 Completed 0 5m35s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-rke2-1 1/1 Running 0 5m21s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-rke2-1 1/1 Running 0 5m47s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-rke2-1 1/1 Running 0 5m43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-rke2-1 1/1 Running 0 5m47s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-canal-qkrdv 2/2 Running 0 5m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-coredns-rke2-coredns-545d64676-2q6x9 1/1 Running 0 5m20s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-coredns-rke2-coredns-autoscaler-5dd676f5c7-5bwdl 1/1 Running 0 5m20s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-ingress-nginx-controller-gxp6v 1/1 Running 0 4m42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-metrics-server-6564db4569-98ghm 1/1 Running 0 4m53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝Helm&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; wget https://get.helm.sh/helm-v3.8.2-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--2022-10-25 16:55:33-- https://get.helm.sh/helm-v3.8.2-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resolving get.helm.sh (get.helm.sh)... 152.199.39.108, 2606:2800:247:1cb7:261b:1f9c:2074:3c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connecting to get.helm.sh (get.helm.sh)|152.199.39.108|:443... connected.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HTTP request sent, awaiting response... 200 OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Length: 13633605 (13M) [application/x-tar]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving to: ‘helm-v3.8.2-linux-amd64.tar.gz’
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-v3.8.2-linux-amd64.ta 100%[=======================================&amp;gt;] 13.00M 34.4MB/s in 0.4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2022-10-25 16:55:35 (34.4 MB/s) - ‘helm-v3.8.2-linux-amd64.tar.gz’ saved [13633605/13633605]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; tar zxvf helm-v3.8.2-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; sudo cp linux-amd64/helm /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version.BuildInfo{Version:&amp;#34;v3.8.2&amp;#34;, GitCommit:&amp;#34;6e3701edea09e5d55a8ca2aae03a68917630e91b&amp;#34;, GitTreeState:&amp;#34;clean&amp;#34;, GoVersion:&amp;#34;go1.17.5&amp;#34;}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="install-rancher-and-cert-manager">install rancher and cert-manager
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>Add helm repo &amp;amp; Install Cert-manager&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stable&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">repositories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">namespace&lt;/span> &lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">namespace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificaterequests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificates&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">challenges&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">clusterissuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">issuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">jetstack&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jetstack&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">repositories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Hang&lt;/span> &lt;span class="n">tight&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="n">we&lt;/span> &lt;span class="n">grab&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">latest&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repositories&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>&lt;span class="n">Successfully&lt;/span> &lt;span class="n">got&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>&lt;span class="n">Successfully&lt;/span> &lt;span class="n">got&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Update&lt;/span> &lt;span class="n">Complete&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="err">⎈&lt;/span>&lt;span class="n">Happy&lt;/span> &lt;span class="n">Helming&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="err">⎈&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">jetstack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">namespace&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">version&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LAST&lt;/span> &lt;span class="n">DEPLOYED&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Tue&lt;/span> &lt;span class="n">Oct&lt;/span> &lt;span class="mi">25&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="mi">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STATUS&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">deployed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REVISION&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TEST&lt;/span> &lt;span class="n">SUITE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTES&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">deployed&lt;/span> &lt;span class="n">successfully&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">In&lt;/span> &lt;span class="n">order&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">begin&lt;/span> &lt;span class="n">issuing&lt;/span> &lt;span class="n">certificates&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">up&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">ClusterIssuer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">or&lt;/span> &lt;span class="n">Issuer&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">for&lt;/span> &lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;letsencrypt-staging&amp;#39;&lt;/span> &lt;span class="n">issuer&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">More&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">different&lt;/span> &lt;span class="n">types&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">issuers&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">how&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">them&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">can&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">found&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">our&lt;/span> &lt;span class="n">documentation&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">For&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">how&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">automatically&lt;/span> &lt;span class="n">provision&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Certificates&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">Ingress&lt;/span> &lt;span class="n">resources&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">look&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shim&lt;/span>&lt;span class="err">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">documentation&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">d44b459c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xnr7q&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">b679cc6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">lk2m&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">57&lt;/span>&lt;span class="n">c994b6b9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hssn2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">75&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝Rancher&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm install rancher rancher-stable/rancher --namespace cattle-system --set hostname=rms.rancher.ken.lab --version 2.6.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Tue Oct 25 17:05:13 2022
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Rancher Server has been installed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTE: Rancher may take several minutes to fully initialize. Please standby while Certificates are being issued, Containers are started and the Ingress rule comes up.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Check out our docs at https://rancher.com/docs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If you provided your own bootstrap password during installation, browse to https://rms.rancher.ken.lab to get started.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If this is the first time you installed Rancher, get started by running this command and clicking the URL it generates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo https://rms.rancher.ken.lab/dashboard/?setup=$(kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To get just the bootstrap password on its own, run:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Happy Containering!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mc85v6z7s6tnfcrwpnd67pg4phlnnch64gwsd5gwkflsmt8bjqckgg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>瀏覽器連線 &lt;a class="link" href="https://rms.rancher.ken.lab" target="_blank" rel="noopener"
>https://rms.rancher.ken.lab&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025170335200.png"
loading="lazy"
alt="image-20221025170335200"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入後修改預設密碼
admin / rancheradmin
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025170619277.png"
loading="lazy"
alt="image-20221025170619277"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入測試
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025170758099.png"
loading="lazy"
alt="image-20221025170758099"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="安裝rke2-2">安裝RKE2-2
&lt;/h2>&lt;ol>
&lt;li>安裝OS&lt;/li>
&lt;li>調整DNS 指向192.168.33.40&lt;/li>
&lt;li>關閉防火牆&lt;/li>
&lt;/ol>
&lt;h3 id="安裝rke2-3">安裝RKE2
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>下載install.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-2:~&amp;gt; curl -sfL https://get.rke2.io --output install.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rke2-2:~&amp;gt; chmod +x install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增設定檔&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-2:~&amp;gt; sudo mkdir -p /etc/rancher/rke2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rke2-2:~&amp;gt; sudo vim /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server: https://rms.rancher.ken.lab:9345
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;rke2-2&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">token: my-shared-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls-san:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rms.rancher.ken.lab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝rke2&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-2:~&amp;gt; sudo INSTALL_RKE2_CHANNEL=v1.23.9+rke2r1 ./install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">●&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">Rancher&lt;/span> &lt;span class="n">Kubernetes&lt;/span> &lt;span class="n">Engine&lt;/span> &lt;span class="n">v2&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Loaded&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">loaded&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">enabled&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">vendor&lt;/span> &lt;span class="n">preset&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">disabled&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Active&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">active&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">since&lt;/span> &lt;span class="n">Tue&lt;/span> &lt;span class="mi">2022&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">25&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">53&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="n">CST&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="nb">min&lt;/span> &lt;span class="n">ago&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Docs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="c1">#readme&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5602&lt;/span> &lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xc&lt;/span> &lt;span class="o">!&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemctl&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">enabled&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">quiet&lt;/span> &lt;span class="n">nm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5604&lt;/span> &lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modprobe&lt;/span> &lt;span class="n">br_netfilter&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5605&lt;/span> &lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modprobe&lt;/span> &lt;span class="n">overlay&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Main&lt;/span> &lt;span class="n">PID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5606&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Tasks&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">148&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>切換到RMS 確認nodes狀態&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-1 Ready control-plane,etcd,master 81m v1.23.9+rke2r1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-2 Ready control-plane,etcd,master 17m v1.23.9+rke2r1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="安裝rke-2-3">安裝RKE 2-3
&lt;/h2>&lt;ol>
&lt;li>安裝OS&lt;/li>
&lt;li>調整DNS 指向192.168.33.40&lt;/li>
&lt;li>關閉防火牆&lt;/li>
&lt;/ol>
&lt;h3 id="安裝rke2-4">安裝RKE2
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>下載install.sh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-3:~&amp;gt; curl -sfL https://get.rke2.io --output install.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rke2-3:~&amp;gt; chmod +x install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增設定檔&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rke2-3:~&amp;gt; sudo mkdir -p /etc/rancher/rke2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rke2-3:~&amp;gt; sudo vim /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server: https://rms.rancher.ken.lab:9345
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;rke2-3&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">token: my-shared-secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls-san:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rms.rancher.ken.lab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝rke2&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">INSTALL_RKE2_CHANNEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">WARN&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">only&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="n">point&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">finding&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">channel&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">release&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">checksums&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sha256sum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">verifying&lt;/span> &lt;span class="n">tarball&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">unpacking&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">updating&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">contents&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">reflect&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">moving&lt;/span> &lt;span class="n">systemd&lt;/span> &lt;span class="n">units&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">complete&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>切換到RMS 確認Nodes&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-1 Ready control-plane,etcd,master 91m v1.23.9+rke2r1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-2 Ready control-plane,etcd,master 27m v1.23.9+rke2r1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-3 Ready control-plane,etcd,master 58s v1.23.9+rke2r1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221025181826167.png"
loading="lazy"
alt="image-20221025181826167"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="新增down-stream-k8s">新增Down Stream K8s
&lt;/h1>&lt;h2 id="架構-建議用v124以上">架構 建議用v1.24以上
&lt;/h2>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026120534677.png"
loading="lazy"
alt="image-20221026120534677"
>&lt;/p>
&lt;h2 id="作業系統與安裝dokcer">作業系統與安裝Dokcer
&lt;/h2>&lt;p>要關閉防火牆、安裝Docker (用RKE2 不用安裝Docker)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">需先註冊系統或是設定repo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">master01&lt;/span>&lt;span class="p">:~&amp;gt;&lt;/span> &lt;span class="nx">sudo&lt;/span> &lt;span class="nx">SUSEConnect&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">p&lt;/span> &lt;span class="nx">sle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">containers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">15.4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">x86_64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Registering&lt;/span> &lt;span class="nx">system&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">SUSE&lt;/span> &lt;span class="nx">Customer&lt;/span> &lt;span class="nx">Center&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Updating&lt;/span> &lt;span class="nx">system&lt;/span> &lt;span class="nx">details&lt;/span> &lt;span class="nx">on&lt;/span> &lt;span class="nx">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//scc.suse.com ...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Activating&lt;/span> &lt;span class="nx">sle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">containers&lt;/span> &lt;span class="mf">15.4&lt;/span> &lt;span class="nx">x86_64&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Adding&lt;/span> &lt;span class="nx">service&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">system&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Installing&lt;/span> &lt;span class="nx">release&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Successfully&lt;/span> &lt;span class="nx">registered&lt;/span> &lt;span class="nx">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">master01&lt;/span>&lt;span class="p">:~&amp;gt;&lt;/span> &lt;span class="nx">sudo&lt;/span> &lt;span class="nx">zypper&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">n&lt;/span> &lt;span class="nx">install&lt;/span> &lt;span class="nx">docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在重新整理服務&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">Basesystem_Module_15_SP4_x86_64&lt;/span>&lt;span class="err">&amp;#39;。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在重新整理服務&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">Containers_Module_15_SP4_x86_64&lt;/span>&lt;span class="err">&amp;#39;。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在重新整理服務&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">SUSE_Linux_Enterprise_Server_15_SP4_x86_64&lt;/span>&lt;span class="err">&amp;#39;。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在重新整理服務&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">Server_Applications_Module_15_SP4_x86_64&lt;/span>&lt;span class="err">&amp;#39;。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在載入套件庫資料&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在讀取已安裝的套件&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在解決套件相依性&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">下列&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="nx">個推薦的套件已自動被選取&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">core&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">將會安裝下列&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="nx">個新的套件&lt;/span>&lt;span class="err">：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">catatonit&lt;/span> &lt;span class="nx">containerd&lt;/span> &lt;span class="nx">docker&lt;/span> &lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">bash&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">completion&lt;/span> &lt;span class="nx">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">core&lt;/span> &lt;span class="nx">libsha1detectcoll1&lt;/span> &lt;span class="nx">runc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">7&lt;/span> &lt;span class="nx">要安裝的新套件&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">全部下載大小&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="mf">52.2&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="nx">已快取&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="nx">B&lt;/span>&lt;span class="err">。&lt;/span> &lt;span class="nx">完成操作後&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="nx">將使用額外的&lt;/span> &lt;span class="mf">242.1&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">要繼續嗎&lt;/span>&lt;span class="err">？&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="o">/...&lt;/span>&lt;span class="err">?&lt;/span> &lt;span class="nx">顯示所有選項&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="nx">y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">libsha1detectcoll1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0.3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.18&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">23.2&lt;/span> &lt;span class="nf">KiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">45.8&lt;/span> &lt;span class="nx">KiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">libsha1detectcoll1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0.3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.18&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">..........................................&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">catatonit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.3.2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">257.2&lt;/span> &lt;span class="nf">KiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">696.5&lt;/span> &lt;span class="nx">KiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">catatonit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.3.2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">...................................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">runc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.1.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.33.4&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">2.6&lt;/span> &lt;span class="nf">MiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">9.1&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">runc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.1.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.33.4&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">....................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">完成&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">288.0&lt;/span> &lt;span class="nx">KiB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">containerd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.73.2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">17.7&lt;/span> &lt;span class="nf">MiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">74.2&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">containerd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.73.2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">..............................&lt;/span>&lt;span class="p">..[&lt;/span>&lt;span class="nx">完成&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">3.6&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.35.3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150300.10.15.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">4.8&lt;/span> &lt;span class="nf">MiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">26.6&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.35.3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150300.10.15.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">..........................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20.10.17&lt;/span>&lt;span class="nx">_ce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.166.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">x86_64&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">26.6&lt;/span> &lt;span class="nf">MiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">131.4&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20.10.17&lt;/span>&lt;span class="nx">_ce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.166.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">...........................&lt;/span>&lt;span class="p">..[&lt;/span>&lt;span class="nx">完成&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">7.9&lt;/span> &lt;span class="nx">MiB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取出&lt;/span> &lt;span class="nx">套件&lt;/span> &lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">bash&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">completion&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20.10.17&lt;/span>&lt;span class="nx">_ce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.166.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">noarch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mf">121.3&lt;/span> &lt;span class="nf">KiB&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">已解開&lt;/span> &lt;span class="mf">113.6&lt;/span> &lt;span class="nx">KiB&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在取回&lt;/span>&lt;span class="err">︰&lt;/span> &lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">bash&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">completion&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20.10.17&lt;/span>&lt;span class="nx">_ce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.166.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">noarch&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span> &lt;span class="o">........................&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">正在檢查檔案衝突&lt;/span>&lt;span class="err">：&lt;/span> &lt;span class="o">...........................................................................&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">libsha1detectcoll1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.0.3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.18&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span> &lt;span class="o">..........................................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">catatonit&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1.5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.3.2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span> &lt;span class="o">................................................&lt;/span>&lt;span class="p">..[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">runc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.1.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.33.4&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span> &lt;span class="o">................................................&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">containerd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.73.2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span> &lt;span class="o">..........................................&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">git&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.35.3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150300.10.15.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span> &lt;span class="o">.......................................&lt;/span>&lt;span class="p">..[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Updating&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">sysconfig&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">docker&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20.10.17&lt;/span>&lt;span class="nx">_ce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.166.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x86_64&lt;/span> &lt;span class="o">.......................................&lt;/span>&lt;span class="p">.[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">正在安裝&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">bash&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">completion&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20.10.17&lt;/span>&lt;span class="nx">_ce&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">150000.166.1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">noarch&lt;/span> &lt;span class="o">........................&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">完成&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span> &lt;span class="nx">啟動服務&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">master01&lt;/span>&lt;span class="p">:~&amp;gt;&lt;/span> &lt;span class="nx">sudo&lt;/span> &lt;span class="nx">systemctl&lt;/span> &lt;span class="nx">enable&lt;/span> &lt;span class="nx">docker&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Created&lt;/span> &lt;span class="nx">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">user&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">target&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">service&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="從rancher管理介面新增cluster">從Rancher管理介面新增Cluster
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>點選Create
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026121450385.png"
loading="lazy"
alt="image-20221026121450385"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇Custom 要把RKE2的選項打勾 才可以選擇RKE2
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026121555947.png"
loading="lazy"
alt="image-20221026121555947"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221027165708557.png"
loading="lazy"
alt="image-20221027165708557"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立名稱: DownStreamK8S ，其他Default即可
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026121636567.png"
loading="lazy"
alt="image-20221026121636567"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>針對各Node選擇不同的指令-Master
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026121758039.png"
loading="lazy"
alt="image-20221026121758039"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>直接貼在Master01、Master02、Ｍaster03上
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026123232444.png"
loading="lazy"
alt="image-20221026123232444"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>針對各Node選擇不同的指令-Master
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026123846849.png"
loading="lazy"
alt="image-20221026123846849"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>直接貼在Woker01、Worker02
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026123951429.png"
loading="lazy"
alt="image-20221026123951429"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>查看Log
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026124043002.png"
loading="lazy"
alt="image-20221026124043002"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221026132912006.png"
loading="lazy"
alt="image-20221026132912006"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>查看Cluster狀態
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221027134018550.png"
loading="lazy"
alt="image-20221027134018550"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="安裝後的設定">安裝後的設定
&lt;/h1>&lt;h2 id="authentication-ldap">Authentication LDAP
&lt;/h2>&lt;ol>
&lt;li>點到Users &amp;amp; Authentication
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028173919721.png"
loading="lazy"
alt="image-20221028173919721"
>&lt;/li>
&lt;li>設定參數並Enable
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028181954045.png"
loading="lazy"
alt="image-20221028181954045"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028174539292.png"
loading="lazy"
alt="image-20221028174539292"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028182009242.png"
loading="lazy"
alt="image-20221028182009242"
>&lt;/li>
&lt;li>指定特定Group可存取Rancher
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028182709975.png"
loading="lazy"
alt="image-20221028182709975"
>&lt;/li>
&lt;li>登入測試
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028182305555.png"
loading="lazy"
alt="image-20221028182305555"
>&lt;/li>
&lt;li>調整群組權限 Assign Global Roles
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028182403843.png"
loading="lazy"
alt="image-20221028182403843"
>&lt;/li>
&lt;li>加入ranchers的群組為Administrator 並Save
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028182450209.png"
loading="lazy"
alt="image-20221028182450209"
>&lt;/li>
&lt;li>確認權限
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028182514532.png"
loading="lazy"
alt="image-20221028182514532"
>&lt;/li>
&lt;/ol>
&lt;h2 id="storage設定">Storage設定
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>在Local Cluster的infra project建立rancher-nfs-storage的namespace
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031171840318.png"
loading="lazy"
alt="image-20221031171840318"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立namespace
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031172147900.png"
loading="lazy"
alt="image-20221031172147900"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Storage Class的yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~/config&amp;gt; cat storageclass.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 設定為default StorageClass，如果建立pvc時不指定StorageClass，則會使用當前的StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageclass.kubernetes.io/is-default-class: &amp;#34;true&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: default-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: provisioner-nfs # or choose another name, must match deployment&amp;#39;s env PROVISIONER_NAME&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 刪除PVC時不會保留資料
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> archiveOnDelete: &amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 回收策略：刪除
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reclaimPolicy: Delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#允許pvc建立後擴容
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allowVolumeExpansion: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Deployment.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~/config&amp;gt; cat deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # replace with namespace where provisioner is deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> strategy:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: Recreate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceAccountName: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nfs-client-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /persistentvolumes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> env:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: PROVISIONER_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: provisioner-nfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: NFS_SERVER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: 192.168.33.40
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: NFS_PATH
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: /nfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nfs-client-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: 192.168.33.40
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /nfs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>rbac.yaml&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ServiceAccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # replace with namespace where provisioner is deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ClusterRole
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: rbac.authorization.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nfs-client-provisioner-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;persistentvolumes&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;get&amp;#34;, &amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;, &amp;#34;create&amp;#34;, &amp;#34;delete&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;persistentvolumeclaims&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;get&amp;#34;, &amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;, &amp;#34;update&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;storage.k8s.io&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;storageclasses&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;get&amp;#34;, &amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;events&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;create&amp;#34;, &amp;#34;update&amp;#34;, &amp;#34;patch&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;services&amp;#34;, &amp;#34;endpoints&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;get&amp;#34;,&amp;#34;create&amp;#34;,&amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;,&amp;#34;update&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;extensions&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;podsecuritypolicies&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceNames: [&amp;#34;nfs-client-provisioner&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;use&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ClusterRoleBinding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: rbac.authorization.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: run-nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">subjects:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - kind: ServiceAccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # replace with namespace where provisioner is deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roleRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: ClusterRole
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nfs-client-provisioner-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiGroup: rbac.authorization.k8s.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: rbac.authorization.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: leader-locking-nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # replace with namespace where provisioner is deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiGroups: [&amp;#34;&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;endpoints&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;get&amp;#34;, &amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;, &amp;#34;create&amp;#34;, &amp;#34;update&amp;#34;, &amp;#34;patch&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: RoleBinding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: rbac.authorization.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: leader-locking-nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # replace with namespace where provisioner is deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">subjects:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - kind: ServiceAccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # replace with namespace where provisioner is deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roleRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: Role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: leader-locking-nfs-client-provisioner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiGroup: rbac.authorization.k8s.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>NFS Server先設定好可連線的主機&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">範例：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">auth&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/exports&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfsshare&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sync&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">no_wdelay&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">no_root_squash&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exports&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">255.255&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">255.0&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sync&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">no_root_squash&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>將rbac.yaml 、storage class.yaml、deployment.yaml部署到rancher-nfs-storage的NS上&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~/config&amp;gt; kubectl create -f rbac.yaml -f storageclass.yaml -f deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/nfs-client-provisioner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/nfs-client-provisioner-runner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/run-nfs-client-provisioner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/leader-locking-nfs-client-provisioner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/leader-locking-nfs-client-provisioner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">storageclass.storage.k8s.io/default-nfs-storage created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/nfs-client-provisioner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; kubectl get all -n rancher-nfs-storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/nfs-client-provisioner-6b8787f55b-r4m4t 1/1 Running 0 5m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/nfs-client-provisioner 1/1 1 1 5m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/nfs-client-provisioner-6b8787f55b 1 1 1 5m19s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>查看WebUI，確認deployment、StorageClass
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108141107082.png"
loading="lazy"
alt="image-20221108141107082"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增測試Claim 確認狀態為bound&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; cat test-claim.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: test-claim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #storageclass 名稱
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volume.beta.kubernetes.io/storage-class: &amp;#34;default-nfs-storage&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #訪問模式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteMany
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #請求資料大小
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 1024Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; kubectl create -f test-claim.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/test-claim created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; kubectl get pv,pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-f058cf4a-cc7b-4e44-97c3-aa1bfc654b65 1Gi RWX Delete Bound default/test-claim default-nfs-storage 33m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/test-claim Bound pvc-f058cf4a-cc7b-4e44-97c3-aa1bfc654b65 1Gi RWX default-nfs-storage 37m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增測試pod 確認可寫入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@tpeinfoapsrms01:~/nfs&amp;gt; cat test-pod.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: test-pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: test-pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: busybox:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;/bin/sh&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;-c&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;touch /mnt/SUCCESS &amp;amp;&amp;amp; exit 0 || exit 1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nfs-pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: &amp;#34;/mnt&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restartPolicy: &amp;#34;Never&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nfs-pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> persistentVolumeClaim:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> claimName: test-claim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; kubectl create -f test-pod.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/test-pod created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; kubectl get pv,pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-f058cf4a-cc7b-4e44-97c3-aa1bfc654b65 1Gi RWX Delete Bound default/test-claim default-nfs-storage 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/test-claim Bound pvc-f058cf4a-cc7b-4e44-97c3-aa1bfc654b65 1Gi RWX default-nfs-storage 38m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>WebUI
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031174825937.png"
loading="lazy"
alt="image-20221031174825937"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>刪除測試用的pv,pvc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; kubectl delete -f test-pod.yaml -f test-claim.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;test-pod&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim &amp;#34;test-claim&amp;#34; deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>同樣設定也放到DownStream K8s ，建立時也可透過WEB UI來將yaml檔放到Cluster
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031175458133.png"
loading="lazy"
alt="image-20221031175458133"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031175603727.png"
loading="lazy"
alt="image-20221031175603727"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031175616696.png"
loading="lazy"
alt="image-20221031175616696"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="安裝logging">安裝Logging
&lt;/h2>&lt;ol>
&lt;li>點到local的cluster&lt;/li>
&lt;li>建立project (infra)&lt;/li>
&lt;li>點選Apps &amp;ndash;&amp;gt; Charts &amp;ndash;&amp;gt; logging
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028163035932.png"
loading="lazy"
alt="image-20221028163035932"
>&lt;/li>
&lt;li>Default
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028163149621.png"
loading="lazy"
alt="image-20221028163149621"
>&lt;/li>
&lt;li>開始安裝
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028163228433.png"
loading="lazy"
alt="image-20221028163228433"
>&lt;/li>
&lt;li>重整網頁後即會出現
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028163610607.png"
loading="lazy"
alt="image-20221028163610607"
>&lt;/li>
&lt;li>後續可再針對後端的logging 機制&lt;/li>
&lt;/ol>
&lt;h2 id="安裝monitoring">安裝Monitoring
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.ibm.com/docs/en/cloud-private/3.2.0?topic=console-namespace-is-stuck-in-terminating-state" target="_blank" rel="noopener"
>https://www.ibm.com/docs/en/cloud-private/3.2.0?topic=console-namespace-is-stuck-in-terminating-state&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>點到local的cluster&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立project (infra)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028161139089.png"
loading="lazy"
alt="image-20221028161139089"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Apps &amp;ndash;&amp;gt; Charts &amp;ndash;&amp;gt; monitoring
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028160838561.png"
loading="lazy"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Monitoring &amp;ndash; &amp;gt; Install (安裝到Infra Project)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028163730065.png"
loading="lazy"
alt="image-20221028163730065"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Admin API Enable、PV
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221028163815459.png"
loading="lazy"
alt="image-20221028163815459"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031180012545.png"
loading="lazy"
alt="image-20221031180012545"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Grafana Enable
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031180129747.png"
loading="lazy"
alt="image-20221031180129747"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Install後重新整理WEB UI，即會出現Monitoring&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031180517689.png"
loading="lazy"
alt="image-20221031180517689"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Grafana確認資料
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221031180605633.png"
loading="lazy"
alt="image-20221031180605633"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>查詢Grafana預設帳號密碼
會放在cattle-monitoring-system的 Secret裡 (帳密為admin/prom-operator)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230923141114566.png"
loading="lazy"
alt="image-20230923141114566"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="安裝neuvector">安裝Neuvector
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.twblogs.net/a/6225a6dfc1f9c8b6ea0c84d2" target="_blank" rel="noopener"
>https://www.twblogs.net/a/6225a6dfc1f9c8b6ea0c84d2&lt;/a>
&lt;a class="link" href="https://github.com/IBM/Runtime-Container-Security-for-Kube/blob/main/neuvector.yaml" target="_blank" rel="noopener"
>https://github.com/IBM/Runtime-Container-Security-for-Kube/blob/main/neuvector.yaml&lt;/a>
&lt;a class="link" href="https://www.readfog.com/a/1685538272501141504" target="_blank" rel="noopener"
>https://www.readfog.com/a/1685538272501141504&lt;/a>
&lt;a class="link" href="https://open-docs.neuvector.com/" target="_blank" rel="noopener"
>https://open-docs.neuvector.com/&lt;/a>&lt;/p>
&lt;h1 id="rancher-cluster-備份還原升級">Rancher Cluster (備份.還原.升級)
&lt;/h1>&lt;p>&lt;a class="link" href="https://docs.ranchermanager.rancher.io/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/upgrades" target="_blank" rel="noopener"
>https://docs.ranchermanager.rancher.io/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/upgrades&lt;/a>&lt;/p>
&lt;h2 id="rancher-backup-備份還原app">Rancher Backup (備份還原APP)
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>在Apps &amp;ndash;&amp;gt; Charts 搜尋rancher backups
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153112348.png"
loading="lazy"
alt="image-20221108153112348"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選install
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153148832.png"
loading="lazy"
alt="image-20221108153148832"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定儲存位置 (Storage Class)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153231799.png"
loading="lazy"
alt="image-20221108153231799"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選install
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153312905.png"
loading="lazy"
alt="image-20221108153312905"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153324294.png"
loading="lazy"
alt="image-20221108153324294"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重整Web UI，出現Rancher Backups
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153426191.png"
loading="lazy"
alt="image-20221108153426191"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Rancher Backups &amp;ndash;&amp;gt; Create
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153514800.png"
loading="lazy"
alt="image-20221108153514800"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定名稱、參數等，點選Create
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153603733.png"
loading="lazy"
alt="image-20221108153603733"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認備份完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108153642511.png"
loading="lazy"
alt="image-20221108153642511"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試先將monitoring刪除後備份 （手動刪除cattle-monitoring-system、相關CRD）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete ns cattle-monitoring-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- 卡在terminating 可執行下方操作
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get ns cattle-monitoring-system -o json &amp;gt; tmp.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; vim tmp.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- 刪除 &amp;#34;finalizers&amp;#34;: [
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;#34;kubernetes&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- 開另一個terminal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; curl -k -H &amp;#34;Content-Type: application/json&amp;#34; -X PUT --data-binary @tmp.json http://127.0.0.1:8001/api/v1/namespaces/cattle-monitoring-system/finalize
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- 確認cattle-monitoring-system 刪除
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get ns cattle-monitoring-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error from server (NotFound): namespaces &amp;#34;cattle-monitoring-system&amp;#34; not found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- 刪除相關CRD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd prometheusrules.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;prometheusrules.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd prometheuses.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;prometheuses.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd alertmanagerconfigs.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;alertmanagerconfigs.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd alertmanagers.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;alertmanagers.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd podmonitors.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;podmonitors.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd probes.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;probes.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd servicemonitors.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;servicemonitors.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd thanosrulers.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &amp;#34;thanosrulers.monitoring.coreos.com&amp;#34; deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109100436616.png"
loading="lazy"
alt="image-20221109100436616"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109100244363.png"
loading="lazy"
alt="image-20221109100244363"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認備份完成後將Monitoring安裝回去
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109100334288.png"
loading="lazy"
alt="image-20221109100334288"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109100558546.png"
loading="lazy"
alt="image-20221109100558546"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認安裝完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109100809009.png"
loading="lazy"
alt="image-20221109100809009"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認備份檔案&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109102519201.png"
loading="lazy"
alt="image-20221109102519201"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>還原備份檔案&amp;ndash;&amp;gt;點選restore &amp;ndash;&amp;gt;Create 即會開始執行restore&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Result: The backup file is created and updated to the target storage location. The resources are restored in this order:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. Custom Resource Definitions (CRDs)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. Cluster-scoped resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. Namespaced resources
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109102614271.png"
loading="lazy"
alt="image-20221109102614271"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認 status，Rancher Cluster服務會中斷 (約3分鐘)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get po -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-bgj4j 0/1 Terminating 0 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-jkmpq 0/1 Terminating 0 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-tj8tw 0/1 Terminating 0 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-xzjxc 1/1 Running 0 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl logs rancher-backup-6b9fc54cc6-nzt6m -n cattle-resources-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:31] Marking resource rolebindings.rbac.authorization.k8s.io#v1/fleet-local/request-6hktw for deletion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:31] Marking resource rolebindings.rbac.authorization.k8s.io#v1/fleet-local/request-d9wpm for deletion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:31] Marking resource rolebindings.rbac.authorization.k8s.io#v1/fleet-local/request-hskp9 for deletion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:31] Will retry pruning resources by removing finalizers in 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:41] Retrying pruning resources by removing finalizers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:41] Processing controllerRef apps/v1/deployments/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:41] Scaling up controllerRef apps/v1/deployments/rancher to 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INFO[2022/11/09 02:32:41] Done restoring
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認Rancher 服務啟動
cattle-monitoring-system &amp;ndash; terminating 、相關crd還存在需手動刪除&lt;/p>
&lt;p>(若為自定義的Application應會全部清空，此處使用helm chart安裝的有留存著)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get po -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-8cn46 1/1 Running 0 71s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-kcqxc 1/1 Running 0 71s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-w5hsz 1/1 Running 0 71s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-xzjxc 1/1 Running 0 18h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get ns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cattle-monitoring-system Terminating 9m11s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get crd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete crd probes.monitoring.coreos.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109103725106.png"
loading="lazy"
alt="image-20221109103725106"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="備份rancher-cluster-etcd">備份Rancher Cluster etcd
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.rke2.io/backup_restore/" target="_blank" rel="noopener"
>https://docs.rke2.io/backup_restore/&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ansible設定&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % cat ansible.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[defaults]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inventory = /Users/wangken/ansible/infoserver/rke2-lab/inventory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote_user = devop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo_user = root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host_key_checking = False
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[privilege_escalation]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">become = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">become_user = root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">become_ask_pass = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % cat inventory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[rke2-cluster]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.[41:43] ansible_ssh_pass=suse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[downstreamk8s-master]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.[44:46] ansible_ssh_pass=suse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[downstreamk8s-worker]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.[47:48] ansible_ssh_pass=suse
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[downstreamk8s:children]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">downstreamk8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">downstreamk8s-worker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % ansible rke2-cluster -m ping
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認各nodes皆有rke2指令 /opt/rke2/bin/rke2&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % ansible rke2-cluster -m shell -a &amp;#39;rke2 --help&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BECOME password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.41 | FAILED | rc=127 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/sh: rke2：命令找不到non-zero return code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.42 | FAILED | rc=127 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/sh: rke2：命令找不到non-zero return code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.43 | FAILED | rc=127 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/bin/sh: rke2：命令找不到non-zero return code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- copy rke2 到/usr/local/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % ansible rke2-cluster -m shell -a &amp;#39;cp /opt/rke2/bin/rke2 /usr/local/bin/&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BECOME password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % ansible rke2-cluster -m shell -a &amp;#39;rke2 --help&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BECOME password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.41 | CHANGED | rc=0 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.42 | CHANGED | rc=0 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.43 | CHANGED | rc=0 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>backup etcd while running&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Snapshots&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">enabled&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">snapshot&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">defaults&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">ansible&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">shell&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;rke2 etcd-snapshot save --name pre-upgrade-snapshot-v2.6.6&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BECOME&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">ansible&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">shell&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;ls -l /var/lib/rancher/rke2/server/db/snapshots&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BECOME&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109115637681.png"
loading="lazy"
alt="image-20221109115637681"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109115733969.png"
loading="lazy"
alt="image-20221109115733969"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>利用下篇方法升級rancher cluster的version
v2.6.6 to v2.6.9&lt;/p>
&lt;/li>
&lt;li>
&lt;p>升級rancher cluster的k8s version&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="升級rancher-cluster">升級Rancher Cluster
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>確認Rancher Cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~/nfs&amp;gt; helm get values rancher -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USER-SUPPLIED VALUES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hostname: rms.rancher.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm get values rancher -n cattle-system -o yaml &amp;gt; values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; cat values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hostname: rms.rancher.ken.lab
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認rancher helm chart&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm repo list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME URL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-stable https://releases.rancher.com/server-charts/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">jetstack https://charts.jetstack.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector https://neuvector.github.io/neuvector-helm/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>update helm chart&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm repo update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hang tight while we grab the latest from your chart repositories...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &amp;#34;rancher-stable&amp;#34; chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &amp;#34;neuvector&amp;#34; chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &amp;#34;jetstack&amp;#34; chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Update Complete. ⎈Happy Helming!⎈
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認目前rancher 最新版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm search repo rancher-stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CHART VERSION APP VERSION DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-stable/rancher 2.6.9 v2.6.9 Install Rancher Server to manage Kubernetes clu...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認更新項目&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm fetch rancher-stable/rancher --version=2.6.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; tar xvf rancher-2.6.9.tgz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/Chart.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/NOTES.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/_helpers.tpl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/clusterRoleBinding.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/ingress.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/issuer-letsEncrypt.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/issuer-rancher.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/post-delete-hook-cluster-role-binding.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/post-delete-hook-cluster-role.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/post-delete-hook-config-map.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/post-delete-hook-job.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/post-delete-hook-psp.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/post-delete-hook-service-account.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/pvc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/service.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/templates/serviceAccount.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/.helmignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher/scripts/post-delete-hook.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; tree rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── Chart.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── scripts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── post-delete-hook.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── templates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── clusterRoleBinding.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── _helpers.tpl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── ingress.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── issuer-letsEncrypt.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── issuer-rancher.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── NOTES.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── post-delete-hook-cluster-role-binding.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── post-delete-hook-cluster-role.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── post-delete-hook-config-map.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── post-delete-hook-job.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── post-delete-hook-psp.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── post-delete-hook-service-account.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── pvc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── secret.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── serviceAccount.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── service.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 directories, 21 files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>執行更新&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm upgrade rancher rancher-stable/rancher --namespace cattle-system -f values.yaml --version=2.6.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Release &amp;#34;rancher&amp;#34; has been upgraded. Happy Helming!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Tue Nov 8 15:52:00 2022
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Rancher Server has been installed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTE: Rancher may take several minutes to fully initialize. Please standby while Certificates are being issued, Containers are started and the Ingress rule comes up.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Check out our docs at https://rancher.com/docs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If you provided your own bootstrap password during installation, browse to https://rms.rancher.ken.lab to get started.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If this is the first time you installed Rancher, get started by running this command and clicking the URL it generates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo https://rms.rancher.ken.lab/dashboard/?setup=$(kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To get just the bootstrap password on its own, run:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">```
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Happy Containering!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認status&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get pod -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-operation-trgz9 0/2 Completed 0 17m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-47hfd 0/1 ContainerCreating 0 43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-g666k 0/1 ContainerCreating 0 43s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-m9gt7 1/1 Running 2 (7d1h ago) 13d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-vjcpk 1/1 Running 2 (7d1h ago) 13d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-5b65595df9-9xsrc 1/1 Running 2 (7d1h ago) 13d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get pod -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-operation-ffdn6 0/2 Completed 0 13m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-operation-kjqgc 0/2 Completed 0 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-operation-tfbhr 0/2 Completed 0 13m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-operation-trgz9 0/2 Completed 0 33m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-47hfd 1/1 Running 0 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-g666k 1/1 Running 0 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-nkfkb 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-xzjxc 1/1 Running 0 13m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm history rancher -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION UPDATED STATUS CHART APP VERSION DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 Tue Oct 25 17:05:13 2022 superseded rancher-2.6.6 v2.6.6 Install complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 Tue Nov 8 15:52:00 2022 superseded rancher-2.6.9 v2.6.9 Upgrade complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3 Wed Nov 9 10:55:25 2022 superseded rancher-2.6.6 v2.6.6 Rollback to 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4 Wed Nov 9 12:04:06 2022 deployed rancher-2.6.9 v2.6.9 Upgrade complete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>從Web UI確認版本 v2.6.9
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221108160654097.png"
loading="lazy"
alt="image-20221108160654097"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>升級k8s version，針對升級後的Rancher Cluster點選edit config&lt;/p>
&lt;p>v1.23.9 to v1.24.4
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109121235714.png"
loading="lazy"
alt="image-20221109121235714"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選save，查看升級狀態 rolling upgrade ，期間Web UI不受影響&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109121345121.png"
loading="lazy"
alt="image-20221109121345121"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109121459412.png"
loading="lazy"
alt="image-20221109121459412"
>&lt;/p>
&lt;ol start="11">
&lt;li>
&lt;p>nodes輪流升級 (RAM的使用率會飆高)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109121632971.png"
loading="lazy"
alt="image-20221109121632971"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>升級完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109134021037.png"
loading="lazy"
alt="image-20221109134021037"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="roll-backup-rancher-helm">Roll Backup Rancher (Helm)
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.ranchermanager.rancher.io/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/rollbacks" target="_blank" rel="noopener"
>https://docs.ranchermanager.rancher.io/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/rollbacks&lt;/a>&lt;/p>
&lt;p>&lt;strong>雖官方文件有寫到，但原廠不建議這麼做&lt;/strong> ，只針對rancher 版本回復&lt;/p>
&lt;ol>
&lt;li>
&lt;p>查看rancher安裝過的版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm history rancher -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION UPDATED STATUS CHART APP VERSION DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 Tue Oct 25 17:05:13 2022 superseded rancher-2.6.6 v2.6.6 Install complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 Tue Nov 8 15:52:00 2022 deployed rancher-2.6.9 v2.6.9 Upgrade complete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>利用helm 還原rancher版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm rollback rancher 1 -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Rollback was a success! Happy Helming!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認status&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; watch kubectl get po -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-kcqxc 1/1 Running 0 23m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-6c8f689f57-w5hsz 1/1 Running 0 23m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-hsbhg 0/1 ContainerCreating 0 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-zrdm8 0/1 Running 0 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-xzjxc 1/1 Running 0 19h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; helm history rancher -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION UPDATED STATUS CHART APP VERSION DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1 Tue Oct 25 17:05:13 2022 superseded rancher-2.6.6 v2.6.6 Install complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2 Tue Nov 8 15:52:00 2022 superseded rancher-2.6.9 v2.6.9 Upgrade complete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3 Wed Nov 9 10:55:25 2022 deployed rancher-2.6.6 v2.6.6 Rollback to 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get po -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-hsbhg 1/1 Running 0 34m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-qz9xb 1/1 Running 0 33m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-zrdm8 1/1 Running 0 34m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-xzjxc 1/1 Running 0 19h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl describe po rancher-7fd65d9cd6-hsbhg -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rancher:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Container ID: containerd://13a9d5362e57776b8cfb54f63e872cd81b6ec38623716d7d3b3006f57acc9f89
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Image: rancher/rancher:v2.6.6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>重整Web UI確認版本已為v2.6.6
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109105523237.png"
loading="lazy"
alt="image-20221109105523237"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="還原rancher-cluster-etcd">還原Rancher Cluster etcd
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">順序：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="err">停止所有&lt;/span>&lt;span class="n">node的rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="err">在第一個節點&lt;/span> &lt;span class="err">執行&lt;/span>&lt;span class="n">restore指令&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="err">啟動第一個節點的&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span> &lt;span class="err">刪除剩下兩個節點的&lt;/span>&lt;span class="n">db目錄&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span> &lt;span class="err">啟動剩下兩個節點的&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>
&lt;p>先確認先前做snapshot的檔案都在&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">ansible&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">shell&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;ls -l /var/lib/rancher/rke2/server/db/snapshots&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BECOME&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">270504&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41029664&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667793600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41029664&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667836800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41029664&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667880000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41029664&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667923200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">56426528&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966400&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">56426528&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">upgrade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966290&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">270512&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">40488992&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667793600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">40488992&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667836800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">40488992&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667880000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">40488992&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667923200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">57511968&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966400&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">57511968&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">upgrade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966291&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">269656&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667793600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667836800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667880000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667923200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">54976544&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966400&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">54976544&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">upgrade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966289&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認目錄etcd&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">ansible&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">shell&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;ls -l /var/lib/rancher/rke2/server/db/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BECOME&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">400&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">400&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">400&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>停用rke2-server service&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC rke2-lab % ansible rke2-cluster -m shell -a &amp;#39;systemctl stop rke2-server&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BECOME password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.41 | CHANGED | rc=0 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.43 | CHANGED | rc=0 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.33.42 | CHANGED | rc=0 &amp;gt;&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在rke2-1執行 restore指令並啟動rke2-server service&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span> &lt;span class="n">server&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reset&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reset&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">restore&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=&amp;lt;&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">TO&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">SNAPSHOT&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshots&lt;/span> &lt;span class="c1"># pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshots&lt;/span> &lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">269656&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667793600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667836800&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667880000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">41537568&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667923200&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">54976544&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966400&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">54976544&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">upgrade&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">6.6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667966289&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshots&lt;/span> &lt;span class="c1"># rke2 server --cluster-reset --cluster-reset-restore-path=/var/lib/rancher/rke2/server/db/snapshots/pre-upgrade-snapshot-v2.6.6-rke2-1-1667966289&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0032&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Defragmenting&lt;/span> &lt;span class="n">etcd&lt;/span> &lt;span class="n">database&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0032&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Reconciling&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="n">between&lt;/span> &lt;span class="n">datastore&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">disk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0032&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Cluster&lt;/span> &lt;span class="n">reset&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">backing&lt;/span> &lt;span class="n">up&lt;/span> &lt;span class="n">certificates&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tls&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667973877&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Defragmenting&lt;/span> &lt;span class="n">etcd&lt;/span> &lt;span class="n">database&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">etcd&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="n">store&lt;/span> &lt;span class="n">connection&lt;/span> &lt;span class="n">OK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Waiting&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">API&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">become&lt;/span> &lt;span class="n">available&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">ETCD&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">now&lt;/span> &lt;span class="n">running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">rke2&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">up&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">running&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WARN&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="n">already&lt;/span> &lt;span class="n">exists&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0033&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Reconciling&lt;/span> &lt;span class="n">etcd&lt;/span> &lt;span class="n">snapshot&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">snapshots&lt;/span> &lt;span class="n">ConfigMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0035&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Waiting&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">retrieve&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span> &lt;span class="n">configuration&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ready&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6444&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">readyz&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">500&lt;/span> &lt;span class="n">Internal&lt;/span> &lt;span class="n">Server&lt;/span> &lt;span class="n">Error&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">INFO&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0037&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">Managed&lt;/span> &lt;span class="n">etcd&lt;/span> &lt;span class="n">cluster&lt;/span> &lt;span class="n">membership&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">reset&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">restart&lt;/span> &lt;span class="n">without&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">reset&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="n">now&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Backup&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">delete&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">datadir&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">each&lt;/span> &lt;span class="n">peer&lt;/span> &lt;span class="n">etcd&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">rejoin&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span> &lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">old&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667973863&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">426&lt;/span> &lt;span class="n">Nov&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">04&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshots&lt;/span> &lt;span class="c1"># systemctl start rke2-server&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>刪除剩下兩個節點的 /var/lib/rancher/rke2/server/db&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db_old&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db_old&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的密碼：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">db&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">devop&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">start&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>切換到rms確認node狀態&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-1 Ready control-plane,etcd,master 14d v1.24.4+rke2r1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-2 Ready control-plane,etcd,master 14d v1.24.4+rke2r1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rke2-3 Ready control-plane,etcd,master 14d v1.24.4+rke2r1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Web UI 版本回到v2.6.6
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221109141718197.png"
loading="lazy"
alt="image-20221109141718197"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>/var/lib/rancher/rke2/server/db/ 檔案路徑&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">ansible&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">shell&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;ls -l /var/lib/rancher/rke2/server/db/&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">BECOME&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.42&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">16&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.43&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.41&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">CHANGED&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">rc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">總用量&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="n">etcd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">32&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">old&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1667973863&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwx&lt;/span>&lt;span class="o">------&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">426&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">04&lt;/span> &lt;span class="n">snapshots&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認pod status 卡在Terminating&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get po -o wide -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-fjvxr 1/1 Running 0 16m 10.42.0.127 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-hsbhg 0/1 Terminating 0 3h33m &amp;lt;none&amp;gt; rke2-3 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-qz9xb 1/1 Terminating 0 3h33m 10.42.1.58 rke2-2 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-zk2f9 1/1 Running 0 16m 10.42.0.123 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-zrdm8 1/1 Running 0 3h33m 10.42.0.117 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-j2whv 1/1 Running 0 16m 10.42.0.126 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>強制刪除pod&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete pod --grace-period=0 --force -n cattle-system rancher-7fd65d9cd6-qz9xb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">warning: Immediate deletion does not wait for confirmation that the running resource has been terminated. The resource may continue to run on the cluster indefinitely.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;rancher-7fd65d9cd6-qz9xb&amp;#34; force deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl delete pod --grace-period=0 --force -n cattle-system rancher-7fd65d9cd6-hsbhg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">warning: Immediate deletion does not wait for confirmation that the running resource has been terminated. The resource may continue to run on the cluster indefinitely.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &amp;#34;rancher-7fd65d9cd6-hsbhg&amp;#34; force deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devop@rms:~&amp;gt; kubectl get po -o wide -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-5rglz 0/1 ContainerCreating 0 12m &amp;lt;none&amp;gt; rke2-3 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-fjvxr 1/1 Running 0 29m 10.42.0.127 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-zk2f9 1/1 Running 0 30m 10.42.0.123 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-d6f8b6cb-j2whv 1/1 Running 0 29m 10.42.0.126 rke2-1 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>重建rke2-2、rke2-3&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo systemctl stop rke2-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rke2 server --cluster-reset
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start rke2-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="備份downstream-cluster">備份Downstream Cluster
&lt;/h2>&lt;p>調整備份排程,目前每五小時備份一次
&lt;strong>/var/lib/rancher/rke2/server/db/snapshots&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221216114859715.png"
loading="lazy"
alt="image-20221216114859715"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221216115017093.png"
loading="lazy"
alt="image-20221216115017093"
>&lt;/p>
&lt;h2 id="還原downstream-cluster">還原Downstream Cluster
&lt;/h2>&lt;p>在Cluster Management可針對Cluster做還原&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221216115047603.png"
loading="lazy"
alt="image-20221216115047603"
>&lt;/p>
&lt;p>選擇要還原的時間點、還原的版本及etcd&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20221216115059772.png"
loading="lazy"
alt="image-20221216115059772"
>&lt;/p></description></item><item><title>Guide_RKE2&amp;Rancher_install</title><link>https://wangken0129.github.io/p/guide_rke2rancher_install/</link><pubDate>Sat, 23 Sep 2023 07:39:03 +0800</pubDate><guid>https://wangken0129.github.io/p/guide_rke2rancher_install/</guid><description>&lt;h1 id="rke2-and-rancher-install">RKE2 and Rancher install
&lt;/h1>&lt;h2 id="0-install-dns">0. Install DNS
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo zypper in -t pattern dhcp_dns_server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="1-login">1. login
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sam@sam:~&amp;gt; ssh rancher@192.168.122.41
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Last failed login: Wed Sep 21 08:33:47 CST 2022 from 192.168.122.1 on ssh:notty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">There was 1 failed login attempt since the last successful login.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Last login: Wed Sep 21 08:31:58 2022
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; curl -sfL https://get.rke2.io --output install.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; chmod +x install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-config-rke2-basic-parameters">2. config rke2 basic parameters
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; sudo mkdir -p /etc/rancher/rke2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; sudo vim /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; cat /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;rms1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">token: my-shared-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-install-rke2-with-1239">3. install rke2 with 1.23.9
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">INSTALL_RKE2_CHANNEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">WARN&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">only&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="n">point&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">finding&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">channel&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">release&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">checksums&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sha256sum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.9&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">verifying&lt;/span> &lt;span class="n">tarball&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">unpacking&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">updating&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">contents&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">reflect&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">moving&lt;/span> &lt;span class="n">systemd&lt;/span> &lt;span class="n">units&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">complete&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="4-enable-rke2-and-setup-kubeconfig">4. enable rke2 and setup kubeconfig
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">start&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的密碼：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">chown&lt;/span> &lt;span class="n">rancher&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="5-check-pod-status">5. check pod status
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No resources found in default namespace.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl get po -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cloud-controller-manager-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-canal-6bpd4 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-coredns-mjflj 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-ingress-nginx-76r2c 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-metrics-server-wkc4k 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-canal-8x56p 2/2 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-coredns-rke2-coredns-545d64676-zlnk9 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-coredns-rke2-coredns-autoscaler-5dd676f5c7-zrdbb 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-ingress-nginx-controller-xhxr6 1/1 Running 0 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-metrics-server-6564db4569-542hx 1/1 Running 0 14m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="6-install-helm3">6. install helm3
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="mi">2022&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">06&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">57&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Resolving&lt;/span> &lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mf">152.199&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">39.108&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2606&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2800&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">247&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">cb7&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">261&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">f9c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2074&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Connecting&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="mf">152.199&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">39.108&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">443.&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">connected&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HTTP&lt;/span> &lt;span class="n">request&lt;/span> &lt;span class="n">sent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awaiting&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mi">200&lt;/span> &lt;span class="n">OK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Length&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">13633605&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Saving&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">‘&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>&lt;span class="err">’&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">=============================================================&amp;gt;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">13.00&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mf">5.95&lt;/span>&lt;span class="n">MB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mf">2.2&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2022&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">21&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">07&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">5.95&lt;/span> &lt;span class="n">MB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="err">‘&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>&lt;span class="err">’&lt;/span> &lt;span class="n">saved&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">13633605&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">13633605&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">zxvf&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">LICENSE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">ls&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bin&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span> &lt;span class="n">public_html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的密碼：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">Kubernetes&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Common&lt;/span> &lt;span class="n">actions&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">Helm&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">search&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">charts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">pull&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">download&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">view&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">upload&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">Kubernetes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="n">releases&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">charts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="7-install-rancher-and-cert-manager">7. install rancher and cert-manager
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stable&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">repositories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">namespace&lt;/span> &lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">namespace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificaterequests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificates&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">challenges&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">clusterissuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">issuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">jetstack&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jetstack&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">repositories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Hang&lt;/span> &lt;span class="n">tight&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="n">we&lt;/span> &lt;span class="n">grab&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">latest&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repositories&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>&lt;span class="n">Successfully&lt;/span> &lt;span class="n">got&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>&lt;span class="n">Successfully&lt;/span> &lt;span class="n">got&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Update&lt;/span> &lt;span class="n">Complete&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="err">⎈&lt;/span>&lt;span class="n">Happy&lt;/span> &lt;span class="n">Helming&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="err">⎈&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">jetstack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">namespace&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">version&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LAST&lt;/span> &lt;span class="n">DEPLOYED&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Wed&lt;/span> &lt;span class="n">Sep&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">15&lt;/span> &lt;span class="mi">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STATUS&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">deployed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REVISION&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TEST&lt;/span> &lt;span class="n">SUITE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTES&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">deployed&lt;/span> &lt;span class="n">successfully&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">In&lt;/span> &lt;span class="n">order&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">begin&lt;/span> &lt;span class="n">issuing&lt;/span> &lt;span class="n">certificates&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">up&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">ClusterIssuer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">or&lt;/span> &lt;span class="n">Issuer&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">for&lt;/span> &lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;letsencrypt-staging&amp;#39;&lt;/span> &lt;span class="n">issuer&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">More&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">different&lt;/span> &lt;span class="n">types&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">issuers&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">how&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">them&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">can&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">found&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">our&lt;/span> &lt;span class="n">documentation&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">For&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">how&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">automatically&lt;/span> &lt;span class="n">provision&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Certificates&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">Ingress&lt;/span> &lt;span class="n">resources&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">look&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shim&lt;/span>&lt;span class="err">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">documentation&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">d44b459c&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zhpp2&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">32&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="n">b679cc6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">tzd8&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">32&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">57&lt;/span>&lt;span class="n">c994b6b9&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">dfvs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">32&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">rancher&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stable&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">set&lt;/span> &lt;span class="n">hostname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">version&lt;/span> &lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">rancher&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LAST&lt;/span> &lt;span class="n">DEPLOYED&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Wed&lt;/span> &lt;span class="n">Sep&lt;/span> &lt;span class="mi">21&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">14&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">06&lt;/span> &lt;span class="mi">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STATUS&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">deployed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REVISION&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TEST&lt;/span> &lt;span class="n">SUITE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTES&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Rancher&lt;/span> &lt;span class="n">Server&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Rancher&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">several&lt;/span> &lt;span class="n">minutes&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">fully&lt;/span> &lt;span class="n">initialize&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Please&lt;/span> &lt;span class="n">standby&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="n">Certificates&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">being&lt;/span> &lt;span class="n">issued&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Containers&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">started&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">Ingress&lt;/span> &lt;span class="n">rule&lt;/span> &lt;span class="n">comes&lt;/span> &lt;span class="n">up&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Check&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="n">our&lt;/span> &lt;span class="n">docs&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">If&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">provided&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">own&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="n">during&lt;/span> &lt;span class="n">installation&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">browse&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">started&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">If&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">first&lt;/span> &lt;span class="n">time&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">installed&lt;/span> &lt;span class="n">Rancher&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">started&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">running&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">command&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">clicking&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="n">generates&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dashboard&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">secret&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">secret&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">To&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">just&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">bootstrap&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">its&lt;/span> &lt;span class="n">own&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">secret&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cattle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">bootstrap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">secret&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#34; }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Happy&lt;/span> &lt;span class="n">Containering&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="8-check-rancher-status">8. check rancher status
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n cattle-system get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-8krrq 0/1 ContainerCreating 0 16s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-h28fw 0/1 ContainerCreating 0 16s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-k9hrr 0/1 ContainerCreating 0 16s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; watch kubectl -n cattle-system get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n cattle-system rollout status deploy/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting for deployment &amp;#34;rancher&amp;#34; rollout to finish: 0 of 3 updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting for deployment spec update to be observed...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting for deployment &amp;#34;rancher&amp;#34; rollout to finish: 0 of 3 updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting for deployment &amp;#34;rancher&amp;#34; rollout to finish: 1 of 3 updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting for deployment &amp;#34;rancher&amp;#34; rollout to finish: 2 of 3 updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &amp;#34;rancher&amp;#34; successfully rolled out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n cattle-system get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-8krrq 1/1 Running 1 (51s ago) 3m11s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-h28fw 1/1 Running 0 3m11s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-7fd65d9cd6-k9hrr 1/1 Running 1 (51s ago) 3m11s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="notice">notice
&lt;/h2>&lt;ol>
&lt;li>must use DNS for rancher.&lt;/li>
&lt;li>downstream must resolve rancher portal from dns.&lt;/li>
&lt;li>good luck.&lt;/li>
&lt;/ol></description></item><item><title>Guide_NeuVector</title><link>https://wangken0129.github.io/p/guide_neuvector/</link><pubDate>Sat, 23 Sep 2023 07:38:37 +0800</pubDate><guid>https://wangken0129.github.io/p/guide_neuvector/</guid><description>&lt;h1 id="neuvector">NeuVector
&lt;/h1>&lt;h2 id="0-install-rke2">0. install RKE2
&lt;/h2>&lt;h3 id="01-下載安裝腳本">0.1. 下載安裝腳本
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; curl -sfL https://get.rke2.io --output install.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; chmod +x install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="02-設定rke2基本餐數">0.2. 設定RKE2基本餐數
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; sudo mkdir -p /etc/rancher/rke2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; sudo vim /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; cat /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;rms1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">token: my-shared-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="03-安裝rke2">0.3. 安裝rke2
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">WARN&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">only&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="n">point&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">finding&lt;/span> &lt;span class="n">release&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">channel&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.6&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">using&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.6&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">release&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">checksums&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.6&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sha256sum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">24.6&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">rke2r1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">verifying&lt;/span> &lt;span class="n">tarball&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">unpacking&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">updating&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">contents&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">reflect&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">moving&lt;/span> &lt;span class="n">systemd&lt;/span> &lt;span class="n">units&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">complete&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="04-enable-rke2-and-setup-kubeconfig">0.4. enable rke2 and setup kubeconfig
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">start&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="err">的密碼：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">chown&lt;/span> &lt;span class="n">rancher&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="05-check-pod-status">0.5. check pod status
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No resources found in default namespace.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl get po -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system cloud-controller-manager-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-canal-6bpd4 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-coredns-mjflj 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-ingress-nginx-76r2c 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system helm-install-rke2-metrics-server-wkc4k 0/1 Completed 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-rms1 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-canal-8x56p 2/2 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-coredns-rke2-coredns-545d64676-zlnk9 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-coredns-rke2-coredns-autoscaler-5dd676f5c7-zrdbb 1/1 Running 0 15m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-ingress-nginx-controller-xhxr6 1/1 Running 0 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system rke2-metrics-server-6564db4569-542hx 1/1 Running 0 14m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="1-install-helm3">1. install helm3
&lt;/h2>&lt;h3 id="11-check-kubernetes-version">1.1. check kubernetes version
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl get no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rms1 Ready control-plane,etcd,master 37h v1.24.6+rke2r1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="12-下載與安裝helm">1.2. 下載與安裝helm
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="mi">2022&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">56&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Resolving&lt;/span> &lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mf">152.199&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">39.108&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2606&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2800&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">247&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">cb7&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">261&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">f9c&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2074&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Connecting&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="mf">152.199&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">39.108&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">443.&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">connected&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HTTP&lt;/span> &lt;span class="n">request&lt;/span> &lt;span class="n">sent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awaiting&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mi">200&lt;/span> &lt;span class="n">OK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Length&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">14026634&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Saving&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">‘&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>&lt;span class="err">’&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">========================================&amp;gt;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">13.38&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mf">7.86&lt;/span>&lt;span class="n">MB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mf">1.7&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2022&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">59&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">7.86&lt;/span> &lt;span class="n">MB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="err">‘&lt;/span>&lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>&lt;span class="err">’&lt;/span> &lt;span class="n">saved&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">14026634&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">14026634&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">zxvf&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">9.4&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">LICENSE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">helm&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">Kubernetes&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Common&lt;/span> &lt;span class="n">actions&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">Helm&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">search&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">search&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">charts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">pull&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">download&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">view&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">upload&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">Kubernetes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">list&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">list&lt;/span> &lt;span class="n">releases&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">charts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-install-neuvector">2. install NeuVector
&lt;/h2>&lt;h3 id="21-加入neuvector-helm-chart">2.1. 加入neuvector helm chart
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm repo add neuvector https://neuvector.github.io/neuvector-helm/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;neuvector&amp;#34; has been added to your repositories
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm search repo neuvector/core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CHART VERSION APP VERSION DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 2.2.3 5.0.3 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm search repo neuvector/core -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CHART VERSION APP VERSION DESCRIPTION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 2.2.3 5.0.3 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 2.2.2 5.0.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 2.2.1 5.0.1 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 2.2.0 5.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.9.2 4.4.4-s2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.9.1 4.4.4 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.9.0 4.4.4 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.9 4.4.3 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.8 4.4.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.7 4.4.1 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.6 4.4.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.5 4.3.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.4 4.3.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.3 4.3.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.2 4.3.1 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.8.0 4.3.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.7.7 4.2.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.7.6 4.2.2 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.7.5 4.2.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.7.2 4.2.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.7.1 4.2.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.7.0 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.9 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.8 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.7 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.6 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.5 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.4 4.0.0 Helm chart for NeuVector&amp;#39;s core services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector/core 1.6.1 4.0.0 NeuVector Full Lifecycle Container Security Pla...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm show values neuvector/core --version 2.2.3 &amp;gt; neuvector-values.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="22-調整yaml---part-1replicas-for-test">2.2. 調整yaml - part-1(replicas for test)
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">controller:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scanner:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="23-調整yaml---part-2cri-for-k3s">2.3. 調整yaml - part-2(CRI for k3s)
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">k3s:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enabled: true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="24-建立neuvector-namespace-and-create-neuvector">2.4. 建立NeuVector NameSpace and create neuvector
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl create ns neuvector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/neuvector created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm install neuvector neuvector/core --version 2.2.3 --namespace neuvector --values neuvector-values.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: neuvector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Sun Oct 16 13:10:22 2022
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: neuvector
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Get the NeuVector URL by running these commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NODE_PORT=$(kubectl get --namespace neuvector -o jsonpath=&amp;#34;{.spec.ports[0].nodePort}&amp;#34; services neuvector-service-webui)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NODE_IP=$(kubectl get nodes --namespace neuvector -o jsonpath=&amp;#34;{.items[0].status.addresses[0].address}&amp;#34;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> echo https://$NODE_IP:$NODE_PORT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n neuvector get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-controller-pod-6cf58c7894-hvvlw 1/1 Running 0 42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-enforcer-pod-rpzqg 1/1 Running 0 42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-manager-pod-8488cb586c-87q9n 1/1 Running 0 42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-scanner-pod-7d6bc8f775-pfwkk 1/1 Running 0 42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n neuvector get svc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-service-webui NodePort 10.43.189.243 &amp;lt;none&amp;gt; 8443:30805/TCP 66s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-svc-admission-webhook ClusterIP 10.43.103.17 &amp;lt;none&amp;gt; 443/TCP 67s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-svc-controller ClusterIP None &amp;lt;none&amp;gt; 18300/TCP,18301/TCP,18301/UDP 67s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">neuvector-svc-crd-webhook ClusterIP 10.43.185.195 &amp;lt;none&amp;gt; 443/TCP 66s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-其他">3. 其他
&lt;/h2>&lt;h3 id="31-image-registry">3.1. image registry
&lt;/h3>&lt;ol>
&lt;li>Name: Nginx&lt;/li>
&lt;li>Registry: &lt;a class="link" href="https://registry.hub.docker.com/" target="_blank" rel="noopener"
>https://registry.hub.docker.com/&lt;/a>&lt;/li>
&lt;li>Filter: nginx:stable&lt;/li>
&lt;/ol>
&lt;h3 id="32-response-rule">3.2. Response Rule
&lt;/h3>&lt;ol>
&lt;li>Category: &lt;code>Security Event&lt;/code>&lt;/li>
&lt;li>Group: &lt;code>nv.default&lt;/code>&lt;/li>
&lt;li>Criteria: &lt;code>name:Process.Profile.Violation&lt;/code>&lt;/li>
&lt;li>Action: &lt;code>Quarantine&lt;/code>&lt;/li>
&lt;li>Status: &lt;code>Enabled&lt;/code>&lt;/li>
&lt;/ol>
&lt;h3 id="33-cli-reference">3.3. CLI reference
&lt;/h3>&lt;h4 id="331-nginx-install-recon-ng">3.3.1. nginx install recon-ng
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">rms1&lt;/span>&lt;span class="p">:~&amp;gt;&lt;/span> &lt;span class="nx">kubectl&lt;/span> &lt;span class="nx">create&lt;/span> &lt;span class="nx">deploy&lt;/span> &lt;span class="nx">web&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">nginx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">port&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">replicas&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">deployment&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">web&lt;/span> &lt;span class="nx">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">rms1&lt;/span>&lt;span class="p">:~&amp;gt;&lt;/span> &lt;span class="nx">kubectl&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="nx">po&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">NAME&lt;/span> &lt;span class="nx">READY&lt;/span> &lt;span class="nx">STATUS&lt;/span> &lt;span class="nx">RESTARTS&lt;/span> &lt;span class="nx">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">cff6559d7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">jddwt&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="nx">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nx">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">rms1&lt;/span>&lt;span class="p">:~&amp;gt;&lt;/span> &lt;span class="nx">kubectl&lt;/span> &lt;span class="nx">exec&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">it&lt;/span> &lt;span class="nx">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">cff6559d7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">jddwt&lt;/span> &lt;span class="o">--&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">cff6559d7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">jddwt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">apt&lt;/span> &lt;span class="nx">update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//deb.debian.org/debian bullseye InRelease [116 kB]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//deb.debian.org/debian bullseye-updates InRelease [44.1 kB]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//deb.debian.org/debian bullseye/main amd64 Packages [8184 kB]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//deb.debian.org/debian-security bullseye-security/main amd64 Packages [189 kB] &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Get&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="c1">//deb.debian.org/debian bullseye-updates/main amd64 Packages [6340 B] &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Fetched&lt;/span> &lt;span class="mi">8588&lt;/span> &lt;span class="nx">kB&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="nf">s&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1050&lt;/span> &lt;span class="nx">kB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Reading&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">lists&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="nx">Done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Building&lt;/span> &lt;span class="nx">dependency&lt;/span> &lt;span class="nx">tree&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="nx">Done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Reading&lt;/span> &lt;span class="nx">state&lt;/span> &lt;span class="nx">information&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="nx">Done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">1&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">can&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">upgraded&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="nx">Run&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">apt&lt;/span> &lt;span class="nx">list&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">upgradable&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">see&lt;/span> &lt;span class="nx">it&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">cff6559d7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">jddwt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">apt&lt;/span> &lt;span class="nx">install&lt;/span> &lt;span class="nx">recon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Reading&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">lists&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="nx">Done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Building&lt;/span> &lt;span class="nx">dependency&lt;/span> &lt;span class="nx">tree&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="nx">Done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Reading&lt;/span> &lt;span class="nx">state&lt;/span> &lt;span class="nx">information&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="nx">Done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">The&lt;/span> &lt;span class="nx">following&lt;/span> &lt;span class="nx">additional&lt;/span> &lt;span class="nx">packages&lt;/span> &lt;span class="nx">will&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">javascript&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">common&lt;/span> &lt;span class="nx">libgpm2&lt;/span> &lt;span class="nx">libjs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">jquery&lt;/span> &lt;span class="nx">libjs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">skeleton&lt;/span> &lt;span class="nx">libjs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">sphinxdoc&lt;/span> &lt;span class="nx">libjs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">underscore&lt;/span> &lt;span class="nx">libmpdec3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">0&lt;/span> &lt;span class="nx">upgraded&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">69&lt;/span> &lt;span class="nx">newly&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">remove&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="nx">not&lt;/span> &lt;span class="nx">upgraded&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Need&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="mf">13.0&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">archives&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">After&lt;/span> &lt;span class="nx">this&lt;/span> &lt;span class="nx">operation&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">55.7&lt;/span> &lt;span class="nx">MB&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">additional&lt;/span> &lt;span class="nx">disk&lt;/span> &lt;span class="nx">space&lt;/span> &lt;span class="nx">will&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">used&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Do&lt;/span> &lt;span class="nx">you&lt;/span> &lt;span class="nx">want&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="err">?&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="nx">Y&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">n&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nx">y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Setting&lt;/span> &lt;span class="nx">up&lt;/span> &lt;span class="nx">recon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nf">ng&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">5.1.1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Processing&lt;/span> &lt;span class="nx">triggers&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">libc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nf">bin&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">2.31&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">deb11u4&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">web&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">cff6559d7&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">jddwt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">#&lt;/span> &lt;span class="nx">recon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nx">Version&lt;/span> &lt;span class="nx">check&lt;/span> &lt;span class="nx">disabled&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span> &lt;span class="err">\\&lt;/span> &lt;span class="o">/&lt;/span>\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Sponsored&lt;/span> &lt;span class="nx">by&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="err">\&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="err">\\&lt;/span>&lt;span class="nx">V&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="o">/&lt;/span>\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span> &lt;span class="err">\\&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="c1">// \\\\\ \\ \/\&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// // BLACK HILLS \/ \\&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">blackhillsinfosec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">____&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="nx">_____&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="nx">____&lt;/span> &lt;span class="nx">____&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">___&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span> &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="nx">_&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="nx">____&lt;/span>&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span> &lt;span class="p">|&lt;/span>&lt;span class="nx">____&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">practisec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="nx">recon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ng&lt;/span> &lt;span class="nx">v5&lt;/span>&lt;span class="mf">.1.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Tim&lt;/span> &lt;span class="nf">Tomes&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">lanmaster53&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="nx">No&lt;/span> &lt;span class="nx">modules&lt;/span> &lt;span class="nx">enabled&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">installed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">recon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">ng&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="332-nginx-bash">3.3.2. nginx bash
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web-cff6559d7-jddwt 1/1 Running 0 5m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl exec -it web-cff6559d7-jddwt -- /bin/bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Guide_rke2_offline_install</title><link>https://wangken0129.github.io/p/guide_rke2_offline_install/</link><pubDate>Sat, 23 Sep 2023 07:02:38 +0800</pubDate><guid>https://wangken0129.github.io/p/guide_rke2_offline_install/</guid><description>&lt;h1 id="rke2-offline-install">rke2 offline install
&lt;/h1>&lt;h2 id="1-下載1246離線安裝所需image">1. 下載1.24.6離線安裝所需image
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkdir&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cannot&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="err">‘&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="err">’&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ne">File&lt;/span> &lt;span class="n">exists&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">su&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span> &lt;span class="c1"># cd /root/rke2-artifacts/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># curl -OLs https://github.com/rancher/rke2/releases/download/v1.24.6%2Brke2r1/rke2-images.linux-amd64.tar.zst&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># curl -OLs https://github.com/rancher/rke2/releases/download/v1.24.6%2Brke2r1/rke2.linux-amd64.tar.gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># curl -OLs https://github.com/rancher/rke2/releases/download/v1.24.6%2Brke2r1/sha256sum-amd64.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># curl -sfL https://get.rke2.io --output install.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">823052&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">21438&lt;/span> &lt;span class="n">Oct&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span> &lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">794531974&lt;/span> &lt;span class="n">Oct&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">17&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zst&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">48238609&lt;/span> &lt;span class="n">Oct&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="mi">3626&lt;/span> &lt;span class="n">Oct&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">18&lt;/span> &lt;span class="n">sha256sum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="2-解壓縮與基本設定">2. 解壓縮與基本設定
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># INSTALL_RKE2_ARTIFACT_PATH=/root/rke2-artifacts sh install.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">WARN&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">read&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">only&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="n">point&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">staging&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">checksums&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sha256sum&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">staging&lt;/span> &lt;span class="n">zst&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">image&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">zst&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">staging&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">verifying&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">tarball&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">grep&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">XRvs61dJ7e&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">images&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">checksums&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">such&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">directory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">verifying&lt;/span> &lt;span class="n">tarball&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">unpacking&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">updating&lt;/span> &lt;span class="n">tarball&lt;/span> &lt;span class="n">contents&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">reflect&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">moving&lt;/span> &lt;span class="n">systemd&lt;/span> &lt;span class="n">units&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">INFO&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">complete&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">want&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">PATH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># export PATH=$PATH:/opt/rke2/bin&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="3-叢集基礎組態">3. 叢集基礎組態
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rms1:~/rke2-artifacts # mkdir -p /etc/rancher/rke2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] root 的密碼：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rms1:~/rke2-artifacts # vim /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rms1:~/rke2-artifacts # cat /etc/rancher/rke2/config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node-name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;rms1&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">token: my-shared-secret
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="4-啟用rke2服務">4. 啟用RKE2服務
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rms1:~/rke2-artifacts # systemctl enable --now rke2-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created symlink /etc/systemd/system/multi-user.target.wants/rke2-server.service → /etc/systemd/system/rke2-server.service.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="5-設定一般帳號使用kubectl">5. 設定一般帳號使用kubectl
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">artifacts&lt;/span> &lt;span class="c1"># exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">chown&lt;/span> &lt;span class="n">rancher&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">po&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span> &lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rms1&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m5s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">etcd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rms1&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m46s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">canal&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lpv22&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xndpj&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">r5sq&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">helm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">wkz6c&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Completed&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">apiserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rms1&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m37s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rms1&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m30s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rms1&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m57s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">scheduler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rms1&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m37s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">canal&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">clqp4&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m41s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">76&lt;/span>&lt;span class="n">cb76d66&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xpnqg&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m42s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">coredns&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">autoscaler&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">58867&lt;/span>&lt;span class="n">f8fc5&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">hzz2l&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="n">m42s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">controller&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">zfbvx&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">93&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kube&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span> &lt;span class="n">rke2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">metrics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6979&lt;/span>&lt;span class="n">d95f95&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kmbcv&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="6-加入其他節點">6. 加入其他節點
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="7-安裝helm">7. 安裝helm
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; wget https://get.helm.sh/helm-v3.9.4-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--2022-10-11 20:33:57-- https://get.helm.sh/helm-v3.9.4-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resolving get.helm.sh (get.helm.sh)... 152.199.39.108, 2606:2800:247:1cb7:261b:1f9c:2074:3c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connecting to get.helm.sh (get.helm.sh)|152.199.39.108|:443... connected.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HTTP request sent, awaiting response... 200 OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Length: 14026634 (13M) [application/x-tar]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saving to: ‘helm-v3.9.4-linux-amd64.tar.gz’
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-v3.9.4-linux-amd64.tar.gz 100%[======================================================&amp;gt;] 13.38M 11.0MB/s in 1.2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2022-10-11 20:34:00 (11.0 MB/s) - ‘helm-v3.9.4-linux-amd64.tar.gz’ saved [14026634/14026634]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; tar zxvf helm-v3.9.4-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; sudo cp linux-amd64/helm /usr/local/bin/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="8-啟用cert-manageroptional">8. 啟用cert-manager(optional)
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificaterequests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificates&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">challenges&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">clusterissuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">issuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">created&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">jetstack&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">charts&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jetstack&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">added&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">repositories&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">repo&lt;/span> &lt;span class="n">update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Hang&lt;/span> &lt;span class="n">tight&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="n">we&lt;/span> &lt;span class="n">grab&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">latest&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repositories&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>&lt;span class="n">Successfully&lt;/span> &lt;span class="n">got&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> &lt;span class="n">chart&lt;/span> &lt;span class="n">repository&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Update&lt;/span> &lt;span class="n">Complete&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="err">⎈&lt;/span>&lt;span class="n">Happy&lt;/span> &lt;span class="n">Helming&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="err">⎈&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">helm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">jetstack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">namespace&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">namespace&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">version&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LAST&lt;/span> &lt;span class="n">DEPLOYED&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Tue&lt;/span> &lt;span class="n">Oct&lt;/span> &lt;span class="mi">11&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">35&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">43&lt;/span> &lt;span class="mi">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAMESPACE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STATUS&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">deployed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">REVISION&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TEST&lt;/span> &lt;span class="n">SUITE&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NOTES&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">7.1&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">been&lt;/span> &lt;span class="n">deployed&lt;/span> &lt;span class="n">successfully&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">In&lt;/span> &lt;span class="n">order&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">begin&lt;/span> &lt;span class="n">issuing&lt;/span> &lt;span class="n">certificates&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">up&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">ClusterIssuer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">or&lt;/span> &lt;span class="n">Issuer&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">for&lt;/span> &lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">creating&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="s1">&amp;#39;letsencrypt-staging&amp;#39;&lt;/span> &lt;span class="n">issuer&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">More&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">different&lt;/span> &lt;span class="n">types&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">issuers&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">how&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">them&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">can&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">found&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">our&lt;/span> &lt;span class="n">documentation&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">For&lt;/span> &lt;span class="n">information&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">how&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">automatically&lt;/span> &lt;span class="n">provision&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Certificates&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">Ingress&lt;/span> &lt;span class="n">resources&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">take&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">look&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">shim&lt;/span>&lt;span class="err">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">documentation&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usage&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ingress&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">rancher&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">rms1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~&amp;gt;&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">po&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">646&lt;/span>&lt;span class="n">c67487&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">p9w77&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">72&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="n">cb8669d6b&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cwghz&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">72&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">696&lt;/span>&lt;span class="n">c5db7ff&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sjbw4&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">72&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="9-啟用rancher-268">9. 啟用Rancher 2.6.8
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;#34;rancher-stable&amp;#34; has been added to your repositories
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl create namespace cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/cattle-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm repo update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hang tight while we grab the latest from your chart repositories...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &amp;#34;jetstack&amp;#34; chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &amp;#34;rancher-stable&amp;#34; chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Update Complete. ⎈Happy Helming!⎈
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; helm install rancher rancher-stable/rancher --namespace cattle-system --set hostname=rancher.example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Tue Oct 11 20:37:49 2022
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Rancher Server has been installed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTE: Rancher may take several minutes to fully initialize. Please standby while Certificates are being issued, Containers are started and the Ingress rule comes up.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Check out our docs at https://rancher.com/docs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If you provided your own bootstrap password during installation, browse to https://rancher.example.com to get started.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If this is the first time you installed Rancher, get started by running this command and clicking the URL it generates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo https://rancher.example.com/dashboard/?setup=$(kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To get just the bootstrap password on its own, run:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get secret --namespace cattle-system bootstrap-secret -o go-template=&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Happy Containering!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n cattle-system get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-mrhwt 0/1 ContainerCreating 0 2m17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-nhl5m 0/1 ContainerCreating 0 2m17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-tswd8 0/1 ContainerCreating 0 2m17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n cattle-system get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-mrhwt 0/1 Running 0 2m27s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-nhl5m 0/1 Running 0 2m27s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-tswd8 0/1 ContainerCreating 0 2m27s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher@rms1:~&amp;gt; kubectl -n cattle-system get po
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-mrhwt 1/1 Running 2 (77s ago) 7m12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-nhl5m 1/1 Running 1 (2m39s ago) 7m12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-69595dc9c4-tswd8 1/1 Running 2 (77s ago) 7m12s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Gigamon_on_OCP</title><link>https://wangken0129.github.io/p/gigamon_on_ocp/</link><pubDate>Sat, 23 Sep 2023 03:50:05 +0800</pubDate><guid>https://wangken0129.github.io/p/gigamon_on_ocp/</guid><description>&lt;h1 id="gigamon-uct-on-ocp">Gigamon UCT on OCP
&lt;/h1>&lt;p>&lt;a class="link" href="https://docs.gigamon.com/pdfs/Content/Resources/PDF%20Library/GV-6000-Doc/Universal-Container-Tap-Guide-v60.pdf#page18" target="_blank" rel="noopener"
>https://docs.gigamon.com/pdfs/Content/Resources/PDF%20Library/GV-6000-Doc/Universal-Container-Tap-Guide-v60.pdf#page18&lt;/a>&lt;/p>
&lt;p>安裝Gigamon UCT 在RedHat Openshift上，讓Gigamon可以監看Openshift的流量，&lt;/p>
&lt;p>UCT會透過daemon set的方式安裝在每個Node上面，所以需要修改Project的權限。&lt;/p>
&lt;h2 id="安裝步驟">安裝步驟
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>create new project , 並加ssc給此project&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">oc new-project
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oc adm policy add-scc-to-user anyuid -z default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oc adm policy add-scc-to-user privileged -n gigamon -z default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Gigamon UTC-Controller,修改FM IP、Port (default 443)、External DNS、API等等
以及image版本,要注意第一個執行目錄會有所不同,可以的話用podman run起來看看&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ocpadmin@Bastion gigamon]$ cat uct-controller.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Copyright 2020 Gigamon Inc.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##################################################################################################
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># UCT service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##################################################################################################
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: gigamon-uct-cntlr-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service: gigamon-uct-cntlr-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # change the namespace tp match your namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: gigamon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - port: 8443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: uct-rest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> targetPort: 8443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - port: 42042
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: uct-stats
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> targetPort: 42042
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: uct-cntlr-v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # change the namespace tp match your namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: gigamon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # this below serviceAccountName should match with the ServiceAccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # name under ClusterRoleBinding section.It is recommended to use
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # a non default name as customers may use name of their choice.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # non default serviceAccountName should be created using the kubectl.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # kubectl create serviceaccount &amp;lt;non default name&amp;gt; -n &amp;lt;namespace&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceAccountName: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: gigamon/uct-controller:6.2.00-374893
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Usage:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # /uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;FM IP&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;FM REST Svc Port&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;UCT-Cntlr REST SVC Port&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;mTLS Mode: 1(ON)|0(OFF))
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;Cert Path&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;Cert file&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;Pvt Key&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # &amp;lt;CA-Root&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /uct-controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;192.168.85.197&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#39;443&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#39;8443&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#39;0&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;/etc/gcbcerts&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;gcb-cert.pem&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;gcb-pvt-key.pem&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &amp;#34;gcb-ca-root-cert.pem&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #command: [/giga_setup_init]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imagePullPolicy: Always
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - containerPort: 8443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - containerPort: 42042
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> env:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Service name.Shoudl match name specified in metadata section above.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: UCT_CNTLR_SERVICE_NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;gigamon-uct-cntlr-service&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # External LB balancer IP, for controller (FM) to connect to uct-cntlr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: UCT_CNTLR_EXT_IP_DNS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;gigamon-uct.ocp.dynasafelab.local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # K8S cluster end-point (typically, master nodes with default port of 6443)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # example: kubectl cluster-info cmd should give this value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: K8S_CLUSTER_ENDPOINT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;https://api.ocp.dynasafelab.local:6443&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # This value is upto user to specify. Will accept any value
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: FM_FQDN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;fm.dynasafelab.local&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Namespace of pod - gets from metadata
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: UCT_CNTLR_POD_NAMESPACE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> valueFrom:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fieldPath: metadata.namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # This value is to enable inventory collection through yaml file.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # true means enable, false or any other value means disable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: UCT_CNTLR_INVENTORY_COLLECTION_ENABLE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # We are specifying HOME dir as /pod-data to work with SCC restrictions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: HOME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &amp;#34;/pod-data&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # For No mTLS Case, Volume Mount is Optional.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mountPath: /etc/gcbcerts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: pki-path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mountPath: /pod-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: shared-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - emptyDir: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: shared-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - emptyDir: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: pki-path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imagePullSecrets:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: gig-dock-regkey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ClusterRole
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: rbac.authorization.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: pods-list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- apiGroups: [&amp;#34;&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;pods&amp;#34;,&amp;#34;services&amp;#34;, &amp;#34;nodes&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;get&amp;#34;,&amp;#34;watch&amp;#34;,&amp;#34;list&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- apiGroups: [&amp;#34;apps&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources: [&amp;#34;deployments&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> verbs: [&amp;#34;list&amp;#34;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ClusterRoleBinding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: rbac.authorization.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: pods-list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">subjects:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- kind: ServiceAccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #change the below namespace as per the requirement
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: gigamon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roleRef:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: ClusterRole
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: pods-list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiGroup: rbac.authorization.k8s.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Gigamon UTC-Tap , 注意此為Daemonset 所以一定要加scc不然會過不了
我把原文件的SecurityContext刪除,改用scc
修改service的名稱 、image版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ocpadmin&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">Bastion&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="n">uct&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">tap&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">DaemonSet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">template&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">restartPolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Always&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hostPID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hostNetwork&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">terminationGracePeriodSeconds&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">securityContext&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">containers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">resources&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">limits&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpu&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">512&lt;/span>&lt;span class="n">Mi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">requests&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cpu&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">512&lt;/span>&lt;span class="n">Mi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">uctapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="s1">&amp;#39;3&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="s1">&amp;#39;55&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">env&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">LD_LIBRARY_PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_DEBUG_MODE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;0x0A000004&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_SERVICE_NAME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_HTTP_SERVICE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_CNTLR_SVC_DNS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uct&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cntlr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_CNTLR_REST_SVC_PORT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;8443&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_WORKERNODE_NAME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valueFrom&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fieldRef&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fieldPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">spec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nodeName&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_POD_NAMESPACE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valueFrom&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fieldRef&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fieldPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">metadata&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">namespace&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_POD_IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">valueFrom&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fieldRef&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fieldPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">podIP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">UCT_NOKIA_SCP_VTAP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">hostPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">containerPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">protocol&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">TCP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">IfNotPresent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">socket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containerd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containerd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sock&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">shared&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">pod&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mountPropagation&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">map&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">sys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bpf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">terminationMessagePolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="ne">File&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;gigamon/uct-tap:6.2.00-374893&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">socket&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hostPath&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containerd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">containerd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sock&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">map&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hostPath&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">sys&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bpf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">shared&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">emptyDir&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnsPolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ClusterFirstWithHostNet&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>UTC-Controller Routes , 此處因爲service endpoint走的是 8443, 所以加上edge的tls方式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ocpadmin@Bastion gigamon]$ cat cntrl-route.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: route.openshift.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Route
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: gigamon-uct-cntlr-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: gigamon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> host: gigamon-uct.apps.ocp.dynasafelab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> targetPort: 8443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> to:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: gigamon-uct-cntlr-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tls:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> termination: edge
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>最後oc apply -f 上述的yaml檔案&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ocpadmin@Bastion gigamon]$ oc apply -f uct-controller.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ocpadmin@Bastion gigamon]$ oc apply -f cntrl-route.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ocpadmin@Bastion gigamon]$ oc apply -f uct-tap.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>Gigamon_on_Nutanix</title><link>https://wangken0129.github.io/p/gigamon_on_nutanix/</link><pubDate>Sat, 23 Sep 2023 03:47:05 +0800</pubDate><guid>https://wangken0129.github.io/p/gigamon_on_nutanix/</guid><description>&lt;h1 id="gigamon-on-nutanix">Gigamon On Nutanix
&lt;/h1>&lt;h2 id="參考連結">參考連結
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.gigamon.com/pdfs/Content/Resources/PDF%20Library/GV-6100-Doc/GigaVUE-Cloud-Suite-Nutanix-GigaVUE-V-Series-2-Guide-v61.pdf" target="_blank" rel="noopener"
>https://docs.gigamon.com/pdfs/Content/Resources/PDF%20Library/GV-6100-Doc/GigaVUE-Cloud-Suite-Nutanix-GigaVUE-V-Series-2-Guide-v61.pdf&lt;/a>
&lt;a class="link" href="https://community.gigamon.com/gigamoncp/s/article/Deploying-Gigamon-Cloud-Suite-for-pervasive-visibility-on-Nutanix-underlay-using-native-service-chaining-6-1" target="_blank" rel="noopener"
>https://community.gigamon.com/gigamoncp/s/article/Deploying-Gigamon-Cloud-Suite-for-pervasive-visibility-on-Nutanix-underlay-using-native-service-chaining-6-1&lt;/a>&lt;/p>
&lt;p>AHV Networking&lt;/p>
&lt;p>&lt;a class="link" href="https://www.nutanixbible.com/5a-book-of-ahv-architecture.html" target="_blank" rel="noopener"
>https://www.nutanixbible.com/5a-book-of-ahv-architecture.html&lt;/a>
&lt;a class="link" href="https://hyperhci.com/2019/11/20/nutanix-ahv-networking-advanced-features/" target="_blank" rel="noopener"
>https://hyperhci.com/2019/11/20/nutanix-ahv-networking-advanced-features/&lt;/a>&lt;/p>
&lt;p>Fortinet
&lt;a class="link" href="https://docs.fortinet.com/document/fortigate/6.4.0/new-features/932284/nutanix-service-chaining-6-4-5" target="_blank" rel="noopener"
>https://docs.fortinet.com/document/fortigate/6.4.0/new-features/932284/nutanix-service-chaining-6-4-5&lt;/a>&lt;/p>
&lt;h2 id="架構圖">架構圖
&lt;/h2>&lt;p>利用Nutanix的Flow Service Chaining 將流量導入到Gigamon vSeries
由GigaVUE-FM來控管要出去的流量,再從vSeries把流量導到資安設備 or Wireshark&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/rtaImage-20230519101724044.png"
loading="lazy"
alt="1.png"
>&lt;/p>
&lt;h2 id="port-requrements">Port Requrements
&lt;/h2>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/rtaImage.png"
loading="lazy"
alt="2.png"
>&lt;/p>
&lt;h1 id="資訊">資訊
&lt;/h1>&lt;ol>
&lt;li>Gigamon FM
https://172.16.101.160 admin / netfos123A!!&lt;/li>
&lt;/ol>
&lt;h2 id="monitoring-mode">Monitoring Mode
&lt;/h2>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230519154853485.png"
loading="lazy"
alt="image-20230519154853485"
>&lt;/p>
&lt;h2 id="依照手冊建立fm">依照手冊建立FM
&lt;/h2>&lt;h2 id="建立vseries">建立vSeries
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">需注意Management跟Data Lan都要使用DHCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">也就是IPAM的子網
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230519154627097.png"
loading="lazy"
alt="image-20230519154627097"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230519163320235.png"
loading="lazy"
alt="image-20230519163320235"
>&lt;/p>
&lt;h2 id="tcpdump">tcpdump
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>建立ubuntu VM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">community&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gigamon&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gigamoncp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">article&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Deploying&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Gigamon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Cloud&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Suite&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">AWS&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Behind&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">GWLB&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">to&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Gain&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Cross&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Account&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Visibility&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Once&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">session&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">successful&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">login&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">Ubuntu&lt;/span> &lt;span class="n">instance&lt;/span> &lt;span class="n">being&lt;/span> &lt;span class="n">used&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">tools&lt;/span> &lt;span class="n">VM&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">User&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">input&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">following&lt;/span> &lt;span class="n">commands&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Install&lt;/span> &lt;span class="n">TCPDump&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">snap&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">tcpdump&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Retrieve&lt;/span> &lt;span class="n">traffic&lt;/span> &lt;span class="n">being&lt;/span> &lt;span class="n">sent&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">VSeries&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">tcpdump&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="n">eth0&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">4789&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">To&lt;/span> &lt;span class="n">capture&lt;/span> &lt;span class="n">traffic&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">PCAP&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">instead&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">being&lt;/span> &lt;span class="n">displayed&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">terminal&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">tcpdump&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="n">eth0&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">4789&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pcap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">Optional&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">Download&lt;/span> &lt;span class="n">captured&lt;/span> &lt;span class="n">pcap&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">Linux&lt;/span> &lt;span class="n">workstation&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">scp&lt;/span> &lt;span class="n">test&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pcap&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">11.22&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">33.44&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">The&lt;/span> &lt;span class="n">traffic&lt;/span> &lt;span class="n">being&lt;/span> &lt;span class="n">retrieve&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">VXLAN&lt;/span> &lt;span class="n">encapsulated&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">To&lt;/span> &lt;span class="n">de&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">capsulate&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">traffic&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Add&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">VXLAN&lt;/span> &lt;span class="n">interface&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">ip&lt;/span> &lt;span class="n">link&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">vxlan0&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="n">vxlan&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="mi">112&lt;/span> &lt;span class="n">group&lt;/span> &lt;span class="mf">239.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.1&lt;/span> &lt;span class="n">dev&lt;/span> &lt;span class="n">eth0&lt;/span> &lt;span class="n">dstport&lt;/span> &lt;span class="mi">4789&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">The&lt;/span> &lt;span class="n">ID&lt;/span> &lt;span class="n">needs&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">match&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">VXLAN&lt;/span> &lt;span class="n">ID&lt;/span> &lt;span class="n">provided&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">tunnel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Bring&lt;/span> &lt;span class="n">up&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">VXLAN&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">ip&lt;/span> &lt;span class="n">link&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">vxlan0&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Capture&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">decapsulated&lt;/span> &lt;span class="n">packets&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">tcpdump&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">ni&lt;/span> &lt;span class="n">vxlan0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">By&lt;/span> &lt;span class="n">following&lt;/span> &lt;span class="n">above&lt;/span> &lt;span class="n">steps&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">view&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">intended&lt;/span> &lt;span class="n">traffic&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">source&lt;/span> &lt;span class="n">VMs&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">defined&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">policies&lt;/span> &lt;span class="n">under&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="wireshark">Wireshark
&lt;/h2>&lt;p>設定要監控的流量
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230523161447891.png"
loading="lazy"
alt="image-20230523161447891"
>&lt;/p>
&lt;p>在FM調整tunnel 的 VxLan Network Identifier及Destination L4 Port
為 4789
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230523161059697.png"
loading="lazy"
alt="image-20230523161059697"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230523155647640.png"
loading="lazy"
alt="image-20230523155647640"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230523155914647.png"
loading="lazy"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230523161239239.png"
loading="lazy"
alt="image-20230523161239239"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230523160553714.png"
loading="lazy"
alt="image-20230523160553714"
>&lt;/p></description></item><item><title>Nvdia_on_Nutanix</title><link>https://wangken0129.github.io/p/nvidia_on_nutanix/</link><pubDate>Sat, 23 Sep 2023 03:16:38 +0800</pubDate><guid>https://wangken0129.github.io/p/nvidia_on_nutanix/</guid><description>&lt;h1 id="nivida-on-nutanix-ahv">Nivida On Nutanix AHV
&lt;/h1>&lt;p>主要測試NVIDIA vGPU是否可在Nutanix AHV上安裝及運作，&lt;/p>
&lt;p>要使用 vGPU 則需要先安裝License Server，VM上的vGPU才可正常使用，&lt;/p>
&lt;p>vGPU相關的License Server、Host Driver、GuestOS Driver都有相依性，安裝前要先去對應，&lt;/p>
&lt;p>以下方法已在客戶端驗證可安裝使用。&lt;/p>
&lt;h2 id="參考資料">參考資料
&lt;/h2>&lt;ol>
&lt;li>Nutanix vGPU 說明&amp;amp;troubleshooting
&lt;a class="link" href="https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2046-vGPU-on-Nutanix:TN-2046-vGPU-on-Nutanix" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/solutions/details?targetId=TN-2046-vGPU-on-Nutanix:TN-2046-vGPU-on-Nutanix&lt;/a>&lt;/li>
&lt;li>Nvidia License Server Requirement
&lt;a class="link" href="https://docs.nvidia.com/license-system/latest/nvidia-license-system-faq/index.html" target="_blank" rel="noopener"
>https://docs.nvidia.com/license-system/latest/nvidia-license-system-faq/index.html&lt;/a>&lt;/li>
&lt;li>Nvidia License Server User Guide
&lt;a class="link" href="https://docs.nvidia.com/license-system/latest/nvidia-license-system-user-guide/index.html#registering-dls-administrator-user" target="_blank" rel="noopener"
>https://docs.nvidia.com/license-system/latest/nvidia-license-system-user-guide/index.html#registering-dls-administrator-user&lt;/a>&lt;/li>
&lt;li>AHV Install Nvidia Driver
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide:NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide:NVIDIA-Grid-Host-Driver-For-AHV-Install-Guide&lt;/a>&lt;/li>
&lt;li>AHV Create VM with vGPU
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:wc-vm-create-acropolis-wc-t.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Web-Console-Guide-Prism:wc-vm-create-acropolis-wc-t.html&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="預先準備">預先準備
&lt;/h2>&lt;ol>
&lt;li>下載AHV Driver 要對應Guest OS Driver
&lt;a class="link" href="https://portal.nutanix.com/page/downloads?product=ahv&amp;amp;bit=NVIDIA" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/downloads?product=ahv&amp;bit=NVIDIA&lt;/a>
&lt;a class="link" href="https://ui.licensing.nvidia.com/software" target="_blank" rel="noopener"
>https://ui.licensing.nvidia.com/software&lt;/a>&lt;/li>
&lt;li>下載License Server，NLS License Server (DLS 新版就用qcow2或是ovf)
&lt;a class="link" href="https://ui.licensing.nvidia.com/software" target="_blank" rel="noopener"
>https://ui.licensing.nvidia.com/software&lt;/a>&lt;/li>
&lt;li>License Key、Nvida Account&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Compatibility Matrix&lt;/strong>:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>AOS Version&lt;/th>
&lt;th>AHV Versiob&lt;/th>
&lt;th>Nvidia Version&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>AOS 6.5.3 LTS&lt;/td>
&lt;td>20220304.420&lt;/td>
&lt;td>15.2&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.6.2.5&lt;/td>
&lt;td>20220304.10057&lt;/td>
&lt;td>15.0&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.5.2.7 LTS&lt;/td>
&lt;td>20220304.392&lt;/td>
&lt;td>15.0&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.6.2&lt;/td>
&lt;td>20220304.10055&lt;/td>
&lt;td>15.0&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.5.2.6 LTS&lt;/td>
&lt;td>20220304.385&lt;/td>
&lt;td>15.0&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.6.0.5&lt;/td>
&lt;td>20220304.10019&lt;/td>
&lt;td>13.3&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.5.2 LTS&lt;/td>
&lt;td>20220304.342&lt;/td>
&lt;td>13.3&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.6&lt;/td>
&lt;td>20220304.10013&lt;/td>
&lt;td>13.3&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 6.5.1.8 LTS&lt;/td>
&lt;td>20220304.336&lt;/td>
&lt;td>13.3&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AOS 5.20.5 LTS&lt;/td>
&lt;td>20201105.2312&lt;/td>
&lt;td>13.3&lt;/td>
&lt;td>Download driver below&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="license-server-說明">License Server 說明
&lt;/h2>&lt;p>&lt;em>A VM obtains a license over the network from an NVIDIA vGPU software license server.&lt;/em>&lt;/p>
&lt;p>&lt;em>The license is “checked out” or “borrowed” when the VM is booted, and returned when the&lt;/em>&lt;/p>
&lt;p>&lt;em>VM is shut down.&lt;/em>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616170317746.png"
loading="lazy"
alt="image-20230616170317746"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616144254708.png"
loading="lazy"
alt="image-20230616144254708"
>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Before&lt;/span> &lt;span class="n">proceeding&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ensure&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">platform&lt;/span> &lt;span class="n">suitable&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">hosting&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">DLS&lt;/span> &lt;span class="n">virtual&lt;/span> &lt;span class="n">appliance&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">containerized&lt;/span> &lt;span class="n">DLS&lt;/span> &lt;span class="n">software&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">hosting&lt;/span> &lt;span class="n">platform&lt;/span> &lt;span class="n">must&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">physical&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="n">running&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">supported&lt;/span> &lt;span class="n">hypervisor&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="n">orchestration&lt;/span> &lt;span class="n">platform&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">minimum&lt;/span> &lt;span class="n">resource&lt;/span> &lt;span class="n">requirements&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">VM&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">which&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">DLS&lt;/span> &lt;span class="n">virtual&lt;/span> &lt;span class="n">appliance&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">DLS&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">follows&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Number&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">vCPUs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">RAM&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="n">Gbytes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">Disk&lt;/span> &lt;span class="n">Size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="n">Gbytes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">For&lt;/span> &lt;span class="n">additional&lt;/span> &lt;span class="n">guidelines&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">refer&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">Sizing&lt;/span> &lt;span class="n">Guidelines&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">DLS&lt;/span> &lt;span class="n">Appliance&lt;/span>&lt;span class="p">](&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nvidia&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">license&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">latest&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nvidia&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">license&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">guide&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="c1">#dls-virtual-appliance-sizing-guidelines). &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">platform&lt;/span> &lt;span class="n">must&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">fixed&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">unchanging&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">address&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">address&lt;/span> &lt;span class="n">may&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">assigned&lt;/span> &lt;span class="n">dynamically&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">DHCP&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">statically&lt;/span> &lt;span class="n">configured&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">but&lt;/span> &lt;span class="n">must&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">constant&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="n">platform&lt;/span>&lt;span class="err">’&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">date&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">time&lt;/span> &lt;span class="n">must&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">set&lt;/span> &lt;span class="n">accurately&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">NTP&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">recommended&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="執行步驟">執行步驟
&lt;/h2>&lt;h3 id="建立nvidia-帳號-並匯入key">建立Nvidia 帳號 並匯入Key
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>在License文件下方點選註冊或是登入
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230718095043423.png"
loading="lazy"
alt="image-20230718095043423"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入後即可看到License&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00015.png"
loading="lazy"
alt="anydesk00015"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="安裝license-server">安裝License Server
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>上傳License Server的 qcow2 image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開啟vm 設定 4 vpu 8gb ram&lt;/p>
&lt;/li>
&lt;li>
&lt;p>預設使用者 dls_system 登入 ( nls 3.1.0 預設帳號改為dls_admin / welcome )&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定固定IP&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ /etc/adminscripts/set-static-ip-cli.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616153813449.png"
loading="lazy"
alt="image-20230616153813449"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>註冊DLS Admin User (Cluster架構只需建立一次)
連線https://dls-vm-ip
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616154122814.png"
loading="lazy"
alt="image-20230616154122814"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇First time setup，設定dls_admin密碼
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616154243779.png"
loading="lazy"
alt="image-20230616154243779"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>複製secret，並用dls_admin登入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">79256b19-ffc6-4617-bec3-b62b0696064d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">密碼: Nutanix/4u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616154313559.png"
loading="lazy"
alt="image-20230616154313559"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入後即可註冊在Nvidia 建立的Service Instance，以及上傳License File
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616154446654.png"
loading="lazy"
alt="image-20230616154446654"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立sudo user: rsu_admin
用dls_admin / welcome or dls_system 登入License Server&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ /etc/adminscripts/enable_sudo.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">輸入密碼: Nutanix/4u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616171148494.png"
loading="lazy"
alt="image-20230616171148494"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616171359579.png"
loading="lazy"
alt="image-20230616171359579"
>&lt;/p>
&lt;ol start="10">
&lt;li>
&lt;p>製作HA Cluster ( optional )，依照上述步驟到步驟4再建立一台License Server
並在Web 上點選Configure high avaliability並輸入另一台的ip
要先確認防火牆port有通 ，建議同網段&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/nvidia-ha.png"
loading="lazy"
alt="截圖 2023-06-16 17.19.07"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616175313349.png"
loading="lazy"
alt="image-20230616175313349"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Create Cluster
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616175345183.png"
loading="lazy"
alt="image-20230616175345183"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616175455856.png"
loading="lazy"
alt="image-20230616175455856"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入另一台License Server確認 dls_admin 可以登入，資訊同步
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616175603060.png"
loading="lazy"
alt="image-20230616175603060"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="註冊license-server">註冊License Server
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>下載DLS Instance Token 上傳到Nvidia License Portal
點選SERVICE INSTANCES &amp;gt; Register DLS Instance&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00025.png"
loading="lazy"
alt="anydesk00025"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳Token
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00026.png"
loading="lazy"
alt="anydesk00026"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00027.png"
loading="lazy"
alt="anydesk00027"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在Nvidia Portal 建立License Server &amp;gt; CREATE SERVER
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00018.png"
loading="lazy"
alt="anydesk00018"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定名稱、描述
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00020.png"
loading="lazy"
alt="anydesk00020"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇License
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00021.png"
loading="lazy"
alt="anydesk00021"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立License Server
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00022.png"
loading="lazy"
alt="anydesk00022"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立好後把SERVER INSTANCES 連結到License Server
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00043.png"
loading="lazy"
alt="anydesk00043"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>連結好後即可下載License File的bin檔
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00044.png"
loading="lazy"
alt="anydesk00044"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230718102025826.png"
loading="lazy"
alt="image-20230718102025826"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再將bin檔上傳到地端的License Server
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616154446654.png"
loading="lazy"
alt="image-20230616154446654"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>即可看到License 已可在地端使用
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00038.png"
loading="lazy"
alt="anydesk00038"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00036.png"
loading="lazy"
alt="anydesk00036"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載Client Config Token 以利日後GuestOS 使用&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00039.png"
loading="lazy"
alt="anydesk00039"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00040.png"
loading="lazy"
alt="anydesk00040"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anydesk00041.png"
loading="lazy"
alt="anydesk00041"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ahv-安裝nvidia-driver">AHV 安裝Nvidia Driver
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>確認AHV有抓到顯卡&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">root@ahv# lspci | grep -i nvidia
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>PE 上看到Hardware有無顯卡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳lcm_nvidia_5.10.170-2.el7.nutanix.20220304.420-525.105.14.tar.gz 到CVM&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CVM 執行安裝Driver&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">解壓縮&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">cvm&lt;/span>&lt;span class="err">$&lt;/span> &lt;span class="nx">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">xvzf&lt;/span> &lt;span class="nx">lcm_nvidia_version&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">tar&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nvidia&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nvidia&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">metadata&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nvidia&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">metadata&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">sign&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nvidia&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">builds&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">nvidia&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">vgpu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">rpm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">執行安裝&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">cvm&lt;/span>&lt;span class="err">$&lt;/span> &lt;span class="nx">install_host_package&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="nx">driver_package_location&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認VM可能會關機或是被移轉&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">VMs&lt;/span> &lt;span class="nx">using&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">GPU&lt;/span> &lt;span class="nx">must&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">powered&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">their&lt;/span> &lt;span class="nx">parent&lt;/span> &lt;span class="nx">host&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">affected&lt;/span> &lt;span class="nx">by&lt;/span> &lt;span class="nx">this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">install&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="nx">If&lt;/span> &lt;span class="nx">left&lt;/span> &lt;span class="nx">running&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">these&lt;/span> &lt;span class="nx">VMs&lt;/span> &lt;span class="nx">will&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">automatically&lt;/span> &lt;span class="nx">powered&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="nx">when&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">installation&lt;/span> &lt;span class="nx">begins&lt;/span> &lt;span class="nx">on&lt;/span> &lt;span class="nx">their&lt;/span> &lt;span class="nx">parent&lt;/span> &lt;span class="nx">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">powered&lt;/span> &lt;span class="nx">back&lt;/span> &lt;span class="nx">on&lt;/span> &lt;span class="nx">after&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">driver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">install&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">completed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">VMs&lt;/span> &lt;span class="nx">using&lt;/span> &lt;span class="nx">vGPU&lt;/span> &lt;span class="nx">will&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">migrated&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">their&lt;/span> &lt;span class="nx">parent&lt;/span> &lt;span class="nx">host&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">affected&lt;/span> &lt;span class="nx">by&lt;/span> &lt;span class="nx">this&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">install&lt;/span>&lt;span class="p">.&lt;/span> &lt;span class="nx">However&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">some&lt;/span> &lt;span class="nx">vGPU&lt;/span> &lt;span class="nx">VMs&lt;/span> &lt;span class="nx">might&lt;/span> &lt;span class="nx">be&lt;/span> &lt;span class="nx">automatically&lt;/span> &lt;span class="nx">powered&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="nx">due&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">lack&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">of&lt;/span> &lt;span class="nx">resource&lt;/span> &lt;span class="nx">when&lt;/span> &lt;span class="nx">installation&lt;/span> &lt;span class="nx">begins&lt;/span> &lt;span class="nx">on&lt;/span> &lt;span class="nx">their&lt;/span> &lt;span class="nx">parent&lt;/span> &lt;span class="nx">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">powered&lt;/span> &lt;span class="nx">back&lt;/span> &lt;span class="nx">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">after&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">driver&lt;/span> &lt;span class="nx">install&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">completed&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Install&lt;/span> &lt;span class="nf">now&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">no&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">yes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Note&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">If&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">host&lt;/span> &lt;span class="nx">already&lt;/span> &lt;span class="nx">has&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">same&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="nx">vGPU&lt;/span> &lt;span class="nx">driver&lt;/span> &lt;span class="nx">installed&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">install_host_package&lt;/span> &lt;span class="nx">script&lt;/span> &lt;span class="nx">skips&lt;/span> &lt;span class="nx">putting&lt;/span> &lt;span class="nx">that&lt;/span> &lt;span class="nx">host&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">maintenance&lt;/span> &lt;span class="nx">mode&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">also&lt;/span> &lt;span class="nx">skips&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">restart&lt;/span> &lt;span class="nx">of&lt;/span> &lt;span class="nx">that&lt;/span> &lt;span class="nx">host&lt;/span>&lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>這邊選擇no，在沒有GPU的node上面不用安裝&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2021&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">05&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">27&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">52&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">082&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">INFO&lt;/span> &lt;span class="n">install_host_package&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">70&lt;/span> &lt;span class="n">Waiting&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">download&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2021&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">05&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">27&lt;/span> &lt;span class="mi">06&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">55&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">269&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">INFO&lt;/span> &lt;span class="n">install_host_package&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">192&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">supported&lt;/span> &lt;span class="n">GPU&lt;/span> &lt;span class="n">hardware&lt;/span> &lt;span class="n">found&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="mf">1.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Continue&lt;/span> &lt;span class="n">installing&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">this&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="n">anyway&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Install&lt;/span> &lt;span class="n">now&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">no&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認安裝完畢&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@cvm$ hostssh &amp;#34;rpm -qa | grep -i nvidia&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@cvm$ ncc health_checks hypervisor_checks gpu_driver_installed_check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@cvm$ hostssh nvidia-smi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="指派vgpu-profile給guest-vm">指派vGPU Profile給Guest VM
&lt;/h3>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616180448664.png"
loading="lazy"
alt="image-20230616180448664"
>&lt;/p>
&lt;h3 id="guest-vm-安裝driver">Guest VM 安裝Driver
&lt;/h3>&lt;p>參考 grid-vgpu-user-guide.pdf&lt;/p>
&lt;p>安裝檔案&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230617151001641.png"
loading="lazy"
alt="image-20230617151001641"
>&lt;/p>
&lt;h4 id="windows">Windows
&lt;/h4>&lt;p>安裝Driver，裝完會重開機&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230617150418550.png"
loading="lazy"
alt="image-20230617150418550"
>&lt;/p>
&lt;p>指定License Server路徑&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230616181414038.png" alt="image-20230616181414038" style="zoom:50%;" />
&lt;h4 id="linux">Linux
&lt;/h4>&lt;p>A-Series的顯卡要裝15.1以上的版本&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ubuntu 安裝方法,裝完重開機&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">＄apt-get install ./nvidia-linux-grid-525_525.105.17_amd64.deb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>裝完後設定/etc/nvidia/gridd.conf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$vi /etc/nvidia/gridd.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 主要有三項要修改
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ServerAddress=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ServerPort= #新版預設是443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FeatureType= #如下方描述
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Description: Set Feature to be enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Data type: integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Possible values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 0 =&amp;gt; for unlicensed state
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 1 =&amp;gt; for NVIDIA vGPU (Auto Select)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 2 =&amp;gt; for NVIDIA RTX Virtual Workstation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 4 =&amp;gt; for NVIDIA Virtual Compute Server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>把Client_Configuration_Token放到 /etc/nvidia/ClientConfigToken/
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230718103324873.png"
loading="lazy"
alt="image-20230718103324873"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重啟nvidia-gridd 服務,確認有抓到License&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ service nvidia-gridd restart
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ service nvidia-gridd status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230617150712476.png"
loading="lazy"
alt="image-20230617150712476"
>&lt;/p>
&lt;h2 id="troubleshoot">Troubleshoot
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>產Log report給Nvidia Support (&lt;a class="link" href="mailto:enterprisesupport@nvidia.com" >enterprisesupport@nvidia.com&lt;/a>)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">SSH to your AHV Host
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Run: nvidia-bug-report.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This will generate the file named: nvidia-bug-report.log.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">It will be placed in folder from which you ran the command
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Here is the example:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://docs.nvidia.com/grid/11.0/grid-vgpu-user-guide/index.html#capture-config-data-for-bug-report
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝時有遇到無法取得License：&lt;/p>
&lt;p>建議先檢查Client跟License Server的時區、時間是否正確。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>License Server設定網卡IP時會出現錯誤訊息：&lt;/p>
&lt;p>建議可用IPAM先配發DHCP，等服務起來再進去Web更改。&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Nutanix_Mine</title><link>https://wangken0129.github.io/p/nutanix_mine/</link><pubDate>Sat, 23 Sep 2023 03:11:15 +0800</pubDate><guid>https://wangken0129.github.io/p/nutanix_mine/</guid><description>&lt;h1 id="mine-with-veeam-guide-30">Mine™ with Veeam Guide 3.0
&lt;/h1>&lt;p>Nutanix Mine 是Nutanix整合備份軟體讓Nutanix Cluster成為備份專用的Cluster，&lt;/p>
&lt;p>以下會測試安裝Nutanix Mine with Veeam，測試備份、還原、升級等。&lt;/p>
&lt;h2 id="refrence">Refrence
&lt;/h2>&lt;ol>
&lt;li>Document
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Mine_veeam:Mine_veeam" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Mine_veeam:Mine_veeam&lt;/a>&lt;/li>
&lt;li>Video (Mine 2.0)
&lt;a class="link" href="https://www.youtube.com/watch?v=e13I-VXVaoo" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=e13I-VXVaoo&lt;/a>&lt;/li>
&lt;li>Download
&lt;a class="link" href="https://portal.nutanix.com/page/downloads?product=mine" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/downloads?product=mine&lt;/a>&lt;/li>
&lt;li>Veeam
&lt;a class="link" href="https://helpcenter.veeam.com/docs/backup/mine/architecture_overview.html?ver=120" target="_blank" rel="noopener"
>https://helpcenter.veeam.com/docs/backup/mine/architecture_overview.html?ver=120&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="notice">Notice
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>安裝Mine Foundation VM時,時區要先調成UTC,安裝完後再調回需要的時區。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Mine Foundation需要一直保持開機狀態,才可以與AHV Cluster溝通。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Mine Cluster只支援AOS LTS版本,STS不支援。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>請勿修改或刪除部署後的以下6個VM以及Foundation For Mine。
Veeam-Win-Node1,Veeam-Win-Node2, Veeam-Win-Node3,Veeam-Lin-Node1, Veeam-Lin-Node2,Veeam-Lin-Node3&lt;/p>
&lt;/li>
&lt;li>
&lt;p>AHV Cluster建議使用另一個Cluster Admin帳戶,用預設的admin可能會有warning。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署Mine Cluster目前只支援Windows 2019 Std.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認DNS設定。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>請勿刪除default Storage Container,Mine Cluster會使用到。&lt;/p>
&lt;p>如刪除會出現以下錯誤
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230214164432111.png"
loading="lazy"
alt="image-20230214164432111"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署Mine Cluster至少要四個Node。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="架構">架構
&lt;/h2>&lt;ol>
&lt;li>Backup Flow&lt;/li>
&lt;/ol>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/workflow.png" alt="img" style="zoom:48%;" />
&lt;ol start="2">
&lt;li>
&lt;p>VM數量:&lt;/p>
&lt;p>Foundation For Mine *&lt;strong>1&lt;/strong> (Linux) ,4 vCPUs and 4 GB memory
Backup Server *&lt;strong>1&lt;/strong> (Windows) , 8 vCPU,16GB memory
Backup Proxy *&lt;strong>2&lt;/strong> or &lt;em>5 (Node&amp;gt;8) , 8 vCPU,16GB memory
Backup Ropositories (Linux)&lt;/em> &lt;strong>3&lt;/strong> or *6 (Node &amp;gt;8) , 8 vCPU,128GB memory&lt;/p>
&lt;/li>
&lt;li>
&lt;p>網路
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230214160103221.png" alt="image-20230214160103221" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Requirement
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230214165959249.png" alt="image-20230214165959249" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="installation">Installation
&lt;/h2>&lt;h3 id="安裝步驟">安裝步驟
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>上架並連上網路。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>利用Foundation建立AHV Cluster (CVM建議32GB RAM)。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Veeam的Cluster admin account。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載 NutanixFoundationForMineWithVeeam-v3.0.vmdk。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳 NutanixFoundationForMineWithVeeam-v3.0.vmdk 至AHV Cluster。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>利用上傳的vmdk建立Mine Foundation VM並開機 (4 vCPU, 4GB RAM)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如有DHCP 直接連線Web https://ip:8743
如沒有DHCP則開啟VM Console並調整IP ( account/password: veeam/veeam )&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$sudo nano /etc/network/interfaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">address yourIpAddress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netmask yourSubnetMask
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway yourAddressAddress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo service networking restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>登入web後點選setup
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/main-menu-setup.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Accept EULA
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/cluster-setup-1.png"
loading="lazy"
alt="end user license agreement page"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Configure a virtual network for guest VM interfaces.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入Prism Element Cluster的資訊&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳Windows 2019 Std的iso&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳Veeam的License&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入Veeam Server的資訊(用現存的或是部署新的,
Windows: 8 vCPUs and 16 GB memory,
Linux: 8 vCPUs and 128 GB memory)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開始部署(1~2Hrs)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入Windows License Key&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署完成。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="安裝後的步驟">安裝後的步驟
&lt;/h3>&lt;ol>
&lt;li>新增Volume Group,attach到backup server,並將VG,bakcup server加到protection domain&lt;/li>
&lt;li>設定備份VM等Job&lt;/li>
&lt;/ol>
&lt;h1 id="mine-安裝實作">Mine 安裝實作
&lt;/h1>&lt;h2 id="lab架構">Lab架構
&lt;/h2>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine.png"
loading="lazy"
alt="image-20230221112445015"
>&lt;/p>
&lt;h3 id="資訊欄">資訊欄
&lt;/h3>&lt;ol>
&lt;li>AHV Cluster , Block SN: 13SM35330024&lt;/li>
&lt;/ol>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>項目&lt;/th>
&lt;th>SN&lt;/th>
&lt;th>IPMI MAC&lt;/th>
&lt;th>IPMI IP&lt;/th>
&lt;th>CVM IP&lt;/th>
&lt;th>AHV IP&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>NodeA-AHV1&lt;/td>
&lt;td>ZM137S025587&lt;/td>
&lt;td>00:25:90:d3:c8:23&lt;/td>
&lt;td>10.0.90.2&lt;/td>
&lt;td>172.16.90.61&lt;/td>
&lt;td>172.16.90.51&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NodeB-AHV2&lt;/td>
&lt;td>ZM139S125484&lt;/td>
&lt;td>00:25:90:d8:74:17&lt;/td>
&lt;td>10.0.90.3&lt;/td>
&lt;td>172.16.90.62&lt;/td>
&lt;td>172.16.90.52&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NodeC-AHV3&lt;/td>
&lt;td>ZM137S025585&lt;/td>
&lt;td>00:25:90:d3:c8:20&lt;/td>
&lt;td>10.0.90.4&lt;/td>
&lt;td>172.16.90.63&lt;/td>
&lt;td>172.16.90.53&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>NodeD-AHV4&lt;/td>
&lt;td>ZM137S025604&lt;/td>
&lt;td>00:25:90:d3:c7:f4&lt;/td>
&lt;td>10.0.90.5&lt;/td>
&lt;td>172.16.90.64&lt;/td>
&lt;td>172.16.90.54&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>SSD、HDD per node&lt;/strong>&lt;/td>
&lt;td>&lt;strong>Memory per node&lt;/strong>&lt;/td>
&lt;td>&lt;strong>IPMI Account&lt;/strong>&lt;/td>
&lt;td>&lt;strong>IPMI Passwd&lt;/strong>&lt;/td>
&lt;td>&lt;strong>Account&lt;/strong>&lt;/td>
&lt;td>&lt;strong>CVM,AHV Passwd&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>400GB SSD *2 &lt;br />1TB HDD *4&lt;/td>
&lt;td>128GB(16GB *8)&lt;/td>
&lt;td>ADMIN&lt;/td>
&lt;td>&lt;/td>
&lt;td>nutanix&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ol start="2">
&lt;li>
&lt;p>Veeam Cluster&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>項目&lt;/th>
&lt;th>IP&lt;/th>
&lt;th>Account&lt;/th>
&lt;th>vCPU&lt;/th>
&lt;th>Memory&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Foundation-Mine&lt;/td>
&lt;td>172.16.90.206:8743&lt;/td>
&lt;td>veeam&lt;/td>
&lt;td>4&lt;/td>
&lt;td>4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Veeam-Win-Node1&lt;/td>
&lt;td>172.16.90.207&lt;/td>
&lt;td>administrator&lt;/td>
&lt;td>8&lt;/td>
&lt;td>16&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Veeam-Win-Node2&lt;/td>
&lt;td>172.16.90.208&lt;/td>
&lt;td>administrator&lt;/td>
&lt;td>8&lt;/td>
&lt;td>16&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Veeam-Win-Node3&lt;/td>
&lt;td>172.16.90.209&lt;/td>
&lt;td>administrator&lt;/td>
&lt;td>8&lt;/td>
&lt;td>16&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Veeam-Lin-Node1&lt;/td>
&lt;td>172.16.90.210&lt;/td>
&lt;td>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>128&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Veeam-Lin-Node2&lt;/td>
&lt;td>172.16.90.211&lt;/td>
&lt;td>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>128&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Veeam-Lin-Node3&lt;/td>
&lt;td>172.16.90.212&lt;/td>
&lt;td>&lt;/td>
&lt;td>8&lt;/td>
&lt;td>128&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Helper Appliance&lt;/td>
&lt;td>172.16.90.215&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Backup Proxy&lt;/td>
&lt;td>172.16.90.216&lt;/td>
&lt;td>veeam&lt;/td>
&lt;td>4&lt;/td>
&lt;td>4&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230214181548005.png"
loading="lazy"
alt="image-20230214181548005"
>&lt;/p>
&lt;p>資源不足無法安裝&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230214182149519.png"
loading="lazy"
alt="image-20230214182149519"
>&lt;/p>
&lt;p>加裝記憶體到196GB Per Node&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="installation-1">Installation
&lt;/h3>&lt;h4 id="ahv-cluster">AHV Cluster
&lt;/h4>&lt;ol>
&lt;li>Foundation四個Node,安裝成一個AHV Cluster,AOS版本建議是LTS的版本。&lt;/li>
&lt;li>設定DNS、NTP等基本設定,以下不贅述。&lt;/li>
&lt;/ol>
&lt;h4 id="mine-foundation-install">Mine Foundation Install
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>下載Mine Foundation VM的vmdk (NutanixFoundationForMineWithVeeam-v3.0.vmdk)
&lt;a class="link" href="https://portal.nutanix.com/page/downloads?product=mine" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/downloads?product=mine&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>將下載後的vmdk上傳到Image Service
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Image-service01.png"
loading="lazy"
alt="Image-service01"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-service02.png"
loading="lazy"
alt="image-20230218150259550"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立For Veeam使用的Cluster Admin
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Create_Account01.png"
loading="lazy"
alt="image-20230218150843210"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Create_Account02.png"
loading="lazy"
alt="image-20230218151100056"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>利用上傳的vmdk建立Mine Foundation VM並開機 (4 vCPU, 4GB RAM)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Create_VM01.png"
loading="lazy"
alt="image-20230218151259652"
>&lt;/p>
&lt;p>新增上傳好的硬碟&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Create_VM02.png"
loading="lazy"
alt="image-20230218151418225"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Create_VM03.png"
loading="lazy"
alt="image-20230218151510134"
>&lt;/p>
&lt;p>新增網卡並save
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Create_VM04.png"
loading="lazy"
alt="image-20230218151614915"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Mine Foundation IP (預設是DHCP)
VM開機後進入Console介面,登入帳密 veeam/veeam
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Change_IP01.png"
loading="lazy"
alt="image-20230218151959600"
>&lt;/p>
&lt;p>執行以下指令修改ip&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$sudo vim /etc/network/interfaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------原始-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------更改後-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">address yourIpAddress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netmask yourSubnetMask
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway yourAddressAddress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$sudo service networking restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230218152415873.png"
loading="lazy"
alt="image-20230218152415873"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>瀏覽器連線至 Foundation_Mine的8743 port
https://172.16.90.206:8743
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Browser8743.png"
loading="lazy"
alt="image-20230218152630482"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>預設帳密veeam / veeam ,登入後進行修改
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Change_Password.png"
loading="lazy"
alt="image-20230218152751705"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入測試
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Browser_Login.png"
loading="lazy"
alt="image-20230218152835564"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="mine-cluster-install">Mine Cluster Install
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>全新部署請選擇 Setup
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Browser_MainPage.png"
loading="lazy"
alt="image-20230218152932005"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選接受EULA後下一步
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Browser_EULA.png"
loading="lazy"
alt="image-20230218153016441"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>輸入Prism Element的IP、帳密(前步驟建立的Veeam Account),點選下一步
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Browser_PE.png"
loading="lazy"
alt="image-20230218153136261"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入後會進行檢查確認硬體是否合適&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Check_HW.png"
loading="lazy"
alt="image-20230218181053737"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳windows 2019的iso檔,可先上傳至PE
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Upload_Win2019.png"
loading="lazy"
alt="image-20230218181155441"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220104444863.png"
loading="lazy"
alt="image-20230220104444863"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇新增DEPLOY NEW BACKUP&amp;amp;REPLICATION SERVER
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220104517202.png"
loading="lazy"
alt="image-20230220104517202"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳Veeam License File (可先申請試用版授權來使用)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220104629567.png"
loading="lazy"
alt="image-20230220104629567"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>網路設定,共會新增3台windows 、3台Linux VM
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Deploy_NW.png"
loading="lazy"
alt="image-20230220104835929"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220104918728.png"
loading="lazy"
alt="image-20230220104918728"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定windows 認證,官方文件不建議使用windows AD驗證
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Windows_Cred.png"
loading="lazy"
alt="image-20230220105137321"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>review設定
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Review.png"
loading="lazy"
alt="image-20230220105219300"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開始進行安裝 (順序：搜集資訊&amp;gt;部署Linux&amp;gt;部署Windows&amp;gt;設定Scale Out Backup Repository)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220105309758.png"
loading="lazy"
alt="image-20230220105309758"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220105609659.png"
loading="lazy"
alt="image-20230220105609659"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220105914370.png"
loading="lazy"
alt="image-20230220105914370"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入PE可看到VM正在部署
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_VM.png"
loading="lazy"
alt="image-20230220110200502"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Windows.png"
loading="lazy"
alt="image-20230220110749749"
>&lt;/p>
&lt;p>透由PowerShell自動部署
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Powershell.png"
loading="lazy"
alt="image-20230220112550775"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>自動建立Storage Container
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Container.png"
loading="lazy"
alt="image-20230220110529475"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>自動建立Volume Group
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_VG01.png"
loading="lazy"
alt="image-20230220110632074"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_VG02.png"
loading="lazy"
alt="image-20230220110652147"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署完成,輸入windows授權啟用,可先略過
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220115041552.png"
loading="lazy"
alt="image-20230220115041552"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220115115335.png"
loading="lazy"
alt="image-20230220115115335"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點close後設定時區&amp;gt;settings
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_TimeZone.png"
loading="lazy"
alt="image-20230220161551198"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定時區、NTP
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_timezone02.png"
loading="lazy"
alt="image-20230220161838334"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重新登入PE
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AfterInstall01.png"
loading="lazy"
alt="image-20230220162124407"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Dashboard沒出現,可參考以下說明
&lt;a class="link" href="https://www.veeam.com/kb4265" target="_blank" rel="noopener"
>https://www.veeam.com/kb4265&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1. 開啟Foundation_Mine的VM Console,並開啟ssh service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. ssh 登入Foundation_mine VM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. copy 指令並修改PE的IP、帳號密碼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. 執行完成後重新登入PE會看到下方圖一
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. 關閉Foundation_mine VM的ssh service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6. ssh登入其中一台CVM並執行指令 allssh sudo cp -rp /home/nutanix/prism/webapps/console/nirvana/ /home/apache/www/console/nirvana/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">7.即可看到圖二的Dashboard
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>圖一&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Dashboard01.png"
loading="lazy"
alt="image-20230220163841278"
>&lt;/p>
&lt;p>圖二
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Dashboard02.png"
loading="lazy"
alt="image-20230220164338921"
>&lt;/p>
&lt;p>更新完後LCM的選項會消失,但還是可以在Setting &amp;gt; Upgrade Software上點選出來
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_LCM.png"
loading="lazy"
alt="image-20230221135620882"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_LCM02.png"
loading="lazy"
alt="image-20230221135654995"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Launch Console會連線到Bakcup Server的VM (帳號密碼為Foundation Mine時所建立的)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Launch_Console.png"
loading="lazy"
alt="image-20230220164527387"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增需備份的Hypervisor平台
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer.png"
loading="lazy"
alt="image-20230220164806207"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>使用此方式建立的Mine Cluster會新增Nutanix AHV的Plug-in
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer02.png"
loading="lazy"
alt="image-20230220164939182"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增Nutanix AHV Cluster (輸入PE的VIP)&lt;/p>
&lt;p>詳細設定可參考 &lt;a class="link" href="https://helpcenter.veeam.com/archive/van/21/userguide/overview.html" target="_blank" rel="noopener"
>https://helpcenter.veeam.com/archive/van/21/userguide/overview.html&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer03.png"
loading="lazy"
alt="image-20230220165208683"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增連線帳號密碼
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer04.png"
loading="lazy"
alt="image-20230220165407259"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>此處會建立一個Helper Appliance VM在目的地的AHV Cluster,需要與Backup Server同網段
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer05.png"
loading="lazy"
alt="image-20230220165823258"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Helper Appliance建立完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer06.png"
loading="lazy"
alt="image-20230220170044692"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddServer07.png"
loading="lazy"
alt="image-20230220170415237"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Proxy 在備份目標上 , 備份會透過此Proxy來連線AHV Cluster
(&lt;a class="link" href="https://helpcenter.veeam.com/archive/van/21/userguide/add_ahv_proxy.html" target="_blank" rel="noopener"
>https://helpcenter.veeam.com/archive/van/21/userguide/add_ahv_proxy.html&lt;/a>)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy01.png"
loading="lazy"
alt="image-20230220170511581"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立新的Backup Proxy Linux VM
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy02.png"
loading="lazy"
alt="image-20230220170802112"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Backup Proxy名稱、vCPU、Memory,點選Advance進行設定
依照同時進行任務的數量來決定資源, EX: 同時進行4個任務就需要4個vCPU Core、4GB Memory
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy03.png"
loading="lazy"
alt="image-20230220171350815"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Backup Proxy的網路 (預設使用DHCP)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy04.png"
loading="lazy"
alt="image-20230220171553883"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定帳號權限
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy05.png"
loading="lazy"
alt="image-20230220173342620"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Backup Repository的權限
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy06.png"
loading="lazy"
alt="image-20230220171705433"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立完成,跳出DNS Warning,需要在DNS Server上新增兩筆紀錄,veeam-win-node1、NX1365-VeeamProxy的紀錄
並重新apply backup proxy的設定才會重新連線&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy_Warning.png"
loading="lazy"
alt="image-20230220175809202"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy_DNS.png"
loading="lazy"
alt="image-20230220175728486"
>&lt;/p>
&lt;p>Backup Server 也需設定DNS尾碼,或是加一筆記錄至hosts內
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy_DNS02.png"
loading="lazy"
alt="image-20230220190134179"
>&lt;/p>
&lt;p>同理在Linux Proxy Server也需設定 (/etc/hosts)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy_DNS03.png"
loading="lazy"
alt="image-20230220190559732"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230220191156878.png"
loading="lazy"
alt="image-20230220191156878"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Finish
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AddProxy_Finish.png"
loading="lazy"
alt="image-20230220175918366"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="add-backup-job">ADD Backup Job
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>新增一個Backup Job測試,用ken-jump VM來測試
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Add_Job01.png"
loading="lazy"
alt="image-20230220180217763"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>會連線到 https://172.16.90.216:8100 (Backup Proxy的IP)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Add_Job02.png"
loading="lazy"
alt="image-20230220180451484"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Dashboard畫面,NTP跟時區需要手動再去設定,點右上方齒輪可進行設定
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Proxy_Dashboard01.png"
loading="lazy"
alt="image-20230220191245336"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Proxy_Dashboard02.png"
loading="lazy"
alt="image-20230220191339305"
>
Backup Server&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_ManageBKServer.png"
loading="lazy"
alt="image-20230221094142493"
>
可備份的Cluster&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_ManageAHV.png"
loading="lazy"
alt="image-20230221094207472"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增一個backup job
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_New_Bakcupjob01.png"
loading="lazy"
alt="image-20230220191416200"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_New_backupjob02.png"
loading="lazy"
alt="image-20230220191457379"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇備份的VM
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_NEW_backupjob03.png"
loading="lazy"
alt="image-20230220191612250"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定備份目的地,及還原點數量&amp;hellip;
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/MIne_NEW_backupjob04.png"
loading="lazy"
alt="image-20230220191719197"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定排程
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_NEW_backupjob05.png"
loading="lazy"
alt="image-20230220191816190"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>完成設定
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_NEW_backupjob06.png"
loading="lazy"
alt="image-20230220191847506"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>查看備份進度
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_NEW_backupjob07.png"
loading="lazy"
alt="image-20230220192103389"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>備份完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Add_Backupjob.png"
loading="lazy"
alt="image-20230221093619689"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Protech VMs可以看到從Veeam執行備份的VM以及NX1365 Cluster上原有的Snapshot
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_ProtechedVMs.png"
loading="lazy"
alt="image-20230221093836882"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Events查看執行紀錄
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Events.png"
loading="lazy"
alt="image-20230221093946234"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Proxy Server Dashboard畫面
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Dashboard03.png"
loading="lazy"
alt="image-20230221092833155"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>PE上的Mine&amp;amp;Veeam Dashboard
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Dashboard04.png"
loading="lazy"
alt="image-20230221093447492"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="restore-backup-vm">Restore Backup VM
&lt;/h4>&lt;p>目標：將備份的VM還原至AHV Cluster&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在Backup Proxy上的Protected VMs點選Restore
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore01.png"
loading="lazy"
alt="image-20230221094652971"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇需要的VM及還原點
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore02.png"
loading="lazy"
alt="image-20230221094813735"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>還原模式選擇： 還原至原來的位置(原機還原) or 還原至新的位置(客製化設定)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore03.png"
loading="lazy"
alt="image-20230221095049681"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore04.png"
loading="lazy"
alt="image-20230221095116899"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因為是測試還原故選擇Restore to a new location,設定VM Name
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore05.png"
loading="lazy"
alt="image-20230221095225911"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore06.png"
loading="lazy"
alt="image-20230221095252250"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇還原至哪個Storage Container
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore07.png"
loading="lazy"
alt="image-20230221095636955"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇網路,測試還原故將網路先斷線
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore08.png"
loading="lazy"
alt="image-20230221095756632"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>還原的原因,可略過
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore09.png"
loading="lazy"
alt="image-20230221095856886"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>還原Job總覽
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/MIne_Restore10.png"
loading="lazy"
alt="image-20230221095935837"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Finish即會開始還原
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore11.png"
loading="lazy"
alt="image-20230221100100496"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>目的地的AHV Cluster上會先建立Volume Group,還原完後自動刪除
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore12.png"
loading="lazy"
alt="image-20230221100433777"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>備份完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore13.png"
loading="lazy"
alt="image-20230221101215579"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>NX1365 AHV Cluster即可看到該VM,登入確認OK
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore14.png"
loading="lazy"
alt="image-20230221101150100"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在Backup Proxy上的還原只針對整台VM或是Disk的還原
如要針對檔案或是Application (AD,Exchange,SQL等),則要回到Backup Server上進行還原
實測Disk or Snapshots皆可進行檔案、Application還原,但Snapshots還原會在PE上建立VM及Volume Group故時間上會較慢
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore15.png"
loading="lazy"
alt="image-20230221101455390"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如下圖為針對檔案的還原
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore16.png"
loading="lazy"
alt="image-20230221101637052"
>&lt;/p>
&lt;p>可選擇還原至原來位置or複製一份到別地方
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Restore17.png"
loading="lazy"
alt="image-20230221101747022"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>以上為Nutanix Mine with Veeam的安裝及備份還原實作測試。&lt;/p>
&lt;h3 id="upgrading">Upgrading
&lt;/h3>&lt;h4 id="mine">Mine
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>開啟Mine Foundation的UI介面 &amp;gt; Mine Platform
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Mine01.png"
loading="lazy"
alt="image-20230221135803336"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選Settings&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Mine02.png"
loading="lazy"
alt="image-20230221135946161"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選check updates 來更新,目前為最新版本故無需更新
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Mine03.png"
loading="lazy"
alt="image-20230221140032583"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="backup-proxy">Backup Proxy
&lt;/h4>&lt;p>Version: 2.1.396&lt;/p>
&lt;ol>
&lt;li>
&lt;p>連線至Backup Proxy UI https://172.16.90.216:8100
點選右上角齒輪 &amp;gt; Appliance Settings &amp;gt; Updates &amp;gt; Check and view updates&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Proxy01.png"
loading="lazy"
alt="image-20230221130725879"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>會出現可更新的項目 Security updates、DoNetCore updates
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_proxy02.png"
loading="lazy"
alt="image-20230221130956650"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Proxy03.png"
loading="lazy"
alt="image-20230221131514935"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>勾選全部並執行更新,勾選自動重新啟動
需先確認沒有backup jobs or restore jobs正在執行
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Proxy04.png"
loading="lazy"
alt="image-20230221131647251"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Proxy05.png"
loading="lazy"
alt="image-20230221131904623"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更新完成後可查看更新紀錄
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Proxy06.png"
loading="lazy"
alt="image-20230221131954375"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再次執行備份確認沒問題
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Upgrade_Proxy07.png"
loading="lazy"
alt="image-20230221132606909"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="aos">AOS
&lt;/h4>&lt;p>AOS如有更新則需要在Mine Foundation的UI介面點選Maintenance &amp;gt; Redeploy Mine Dashboard
來重新更新UI介面&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AOS.png"
loading="lazy"
alt="image-20230221143205971"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_AOS2.png"
loading="lazy"
alt="image-20230221143308653"
>&lt;/p>
&lt;h4 id="veeam-server">Veeam Server
&lt;/h4>&lt;p>目前版本: 11.0.0.837
更新版本: 12.0.0.1420
Repository版本: 11.0.0.839&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam01.png"
loading="lazy"
alt="image-20230221145122428"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam02.png"
loading="lazy"
alt="image-20230221145705817"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>下載最新的Veeam Backup&amp;amp;Replication iso檔
&lt;a class="link" href="https://www.veeam.com/backup-replication-download.html?ad=downloads" target="_blank" rel="noopener"
>https://www.veeam.com/backup-replication-download.html?ad=downloads&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開啟iso檔,用系統管理員身份執行Setup.exe
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam03.png"
loading="lazy"
alt="image-20230221154214097"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>執行Upgrade (需先關閉Veeam的視窗)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam04.png"
loading="lazy"
alt="image-20230221154303858"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam05.png"
loading="lazy"
alt="image-20230221154327332"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Accept License
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam06.png"
loading="lazy"
alt="image-20230221154854447"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確認更新版本,及自動更新遠端的元件
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam07.png"
loading="lazy"
alt="image-20230221154941326"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更新License (11 to 12)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam08.png"
loading="lazy"
alt="image-20230221155035130"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇帳號
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam09.png"
loading="lazy"
alt="image-20230221155146228"
>&lt;/p>
&lt;p>SQL
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam10.png"
loading="lazy"
alt="image-20230221155209177"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>提示升級可能也會更新Datebase
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam11.png"
loading="lazy"
alt="image-20230221155446853"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>升級前的check,Next
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam12.png"
loading="lazy"
alt="image-20230221155539238"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開始升級
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam13.png"
loading="lazy"
alt="image-20230221155645278"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam14.png"
loading="lazy"
alt="image-20230221155710579"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完畢,需重新啟動
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam15.png"
loading="lazy"
alt="image-20230221163718541"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重新登入Veeam Console後會出現可更新的遠端元件
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam16.png"
loading="lazy"
alt="image-20230221164224318"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam17.png"
loading="lazy"
alt="image-20230221164251762"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>更新遠端的元件,Linux Node Failed: Permission denied&lt;/p>
&lt;p>NX1365-VeeamProxy 更新中
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam18.png"
loading="lazy"
alt="image-20230221164340902"
>&lt;/p>
&lt;p>Backup Server會直接呼叫Proxy Server的AHV Cluster進行快照、更新&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam22.png"
loading="lazy"
alt="image-20230221165329079"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>連線到Foundation Mine來進行更新,點選Update
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam19.png"
loading="lazy"
alt="image-20230221164456511"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam20.png"
loading="lazy"
alt="image-20230221164557209"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Linux Repository更新完畢
版本11.0.0.839 &amp;gt; 12.0.0.1420&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam21.png"
loading="lazy"
alt="image-20230221165120054"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Proxy Server 更新完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam23.png"
loading="lazy"
alt="image-20230221165437075"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入Proxy Server https://172.16.90.216&lt;/p>
&lt;p>介面已更新
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam24.png"
loading="lazy"
alt="image-20230221165557868"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam25.png"
loading="lazy"
alt="image-20230221165650105"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>版本 v2.1.396 &amp;gt; v4.0.0.1899
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam26.png"
loading="lazy"
alt="image-20230221165938130"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到PE上的Mine with Veeam Dashboard確認狀態&lt;/p>
&lt;p>Protected Instances 顯示N/A&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam28.png"
loading="lazy"
alt="image-20230221171846726"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>回到Foundation Mine上面下載Support Bundle&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam29.png"
loading="lazy"
alt="image-20230221172004727"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>下載後會是一個zip檔,解壓縮看到以下目錄&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam30.png"
loading="lazy"
alt="image-20230221172059331"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點開NutanixMineDashboard&lt;/p>
&lt;p>Error &amp;ldquo;Cannot get restore points from backup ken-jump, because it is encrypted or create by an enterprise plug-in&amp;rdquo;&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam31.png"
loading="lazy"
alt="image-20230221172215714"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>有可能是因為目前12版本太新,有相容性問題
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Mine_Veeam32.png"
loading="lazy"
alt="image-20230221180824415"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>除了Dashboard之外,其他功能顯示皆正常,也可正常備份還原。&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Nutanix Karbon&amp;Files</title><link>https://wangken0129.github.io/p/karbonfiles/</link><pubDate>Sat, 23 Sep 2023 02:46:09 +0800</pubDate><guid>https://wangken0129.github.io/p/karbonfiles/</guid><description>&lt;h1 id="karbonfiles">Karbon、Files
&lt;/h1>&lt;p>測試安裝Nutanix 內建的Kubernetes，並使用內建的Storage儲存空間(NFS、Volume)&lt;/p>
&lt;h2 id="linux主機安裝設定測試用">Linux主機安裝設定(測試用)
&lt;/h2>&lt;p>(測試功能又不佔用ip才需要此Linux主機)&lt;/p>
&lt;h3 id="安裝一台centos-stream9">安裝一台CentOS-Stream9
&lt;/h3>&lt;p>IP: 172.16.90.205 , 192.168.1.1
Host: bastion.netfos.ken.lab&lt;/p>
&lt;p>此VM作用為 Router, NAT, DHCP, DNS,Web等等&lt;/p>
&lt;p>PE Network設定,新增192.168.1.1的subnet並綁到vSwitch上 (啟動IPAM)&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230111135752295.png"
loading="lazy"
alt="image-20230111135752295"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>upload iso to Prism Element&lt;/p>
&lt;/li>
&lt;li>
&lt;p>on Prism Central import iso&lt;/p>
&lt;/li>
&lt;li>
&lt;p>create VM on Prism Central
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230111114303181.png"
loading="lazy"
alt="image-20230111114303181"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝OS&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="設定router--nat">設定Router &amp;amp; NAT
&lt;/h3>&lt;p>&lt;a class="link" href="https://linux.vbird.org/linux_server/centos6/0230router.php" target="_blank" rel="noopener"
>https://linux.vbird.org/linux_server/centos6/0230router.php&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>啟動Linux Kernal 的 ip_forwarder功能&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo vim /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.ip_forward = 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo sysctl -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.ip_forward = 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo cat /proc/sys/net/ipv4/ip_forward
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>NAT設定&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo iptables -A INPUT -i ens4 -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo iptables -A INPUT -i lo -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -j MASQUERADE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo iptables -L
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Chain INPUT (policy ACCEPT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">target prot opt source destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ACCEPT all -- anywhere anywhere
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Chain FORWARD (policy ACCEPT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">target prot opt source destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Chain OUTPUT (policy ACCEPT)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">target prot opt source destination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo iptables-save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Generated by iptables-save v1.8.8 (nf_tables) on Wed Jan 11 12:06:10 2023
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*filter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:INPUT ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:FORWARD ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:OUTPUT ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-A INPUT -i ens4 -j ACCEPT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMIT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Completed on Wed Jan 11 12:06:10 2023
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Generated by iptables-save v1.8.8 (nf_tables) on Wed Jan 11 12:06:10 2023
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*nat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:PREROUTING ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:INPUT ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:OUTPUT ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">:POSTROUTING ACCEPT [0:0]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-A POSTROUTING -s 192.168.1.0/24 -j MASQUERADE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMIT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># Completed on Wed Jan 11 12:06:10 2023
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">關閉防火牆
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl disable firewalld --now
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>DNAT設定
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Port-Reference:NKE_Airgap_port_auto_r.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Port-Reference:NKE_Airgap_port_auto_r.html&lt;/a>
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Port-Reference:Nutanix_Kubernetes_Engine_port_auto_r.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Port-Reference:Nutanix_Kubernetes_Engine_port_auto_r.html&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">## For NKE Registry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -i ens3 -p tcp --dport 22 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -j DNAT --to-destination 192.168.1.5:22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -i ens3 -p tcp --dport 5000 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -j DNAT --to-destination 192.168.1.5:5000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables-save
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## For NKE Loadbalnacer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -i ens3 -p tcp --dport 443 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -j DNAT --to-destination 192.168.1.10:22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -i ens3 -p tcp --dport 2379 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -j DNAT --to-destination 192.168.1.10:2379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -i ens3 -p tcp --dport 30001 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -j DNAT --to-destination 192.168.1.10:30001
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables -t nat -A PREROUTING -i ens3 -p tcp --dport 30000:32767 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -j DNAT --to-destination 192.168.1.10:30000-32767
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo iptables-save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>拿一台測試VM確認可ping 通
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230111135706837.png"
loading="lazy"
alt="image-20230111135706837"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="安裝dns-server-named">安裝DNS Server (named)
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>安裝named&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo yum install bind bind-libs bind-chroot bind-utils
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for ken:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改named 設定檔 /etc/named.conf&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># cat /etc/named.conf &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">named&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">Provided&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">Red&lt;/span> &lt;span class="n">Hat&lt;/span> &lt;span class="n">bind&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">configure&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">ISC&lt;/span> &lt;span class="n">BIND&lt;/span> &lt;span class="n">named&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">DNS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">as&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">caching&lt;/span> &lt;span class="n">only&lt;/span> &lt;span class="n">nameserver&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">as&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">localhost&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">resolver&lt;/span> &lt;span class="n">only&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span> &lt;span class="n">See&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">doc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="o">*/&lt;/span>&lt;span class="n">sample&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">example&lt;/span> &lt;span class="n">named&lt;/span> &lt;span class="n">configuration&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">options&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">on&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">53&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span>&lt;span class="n">listen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">on&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v6&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="mi">53&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="p">::&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/var/named&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dump&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/cache_dump.db&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">statistics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named_stats.txt&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">memstatistics&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named_mem_stats.txt&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">secroots&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named.secroots&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/var/named/data/named.recursing&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">## 設定轉寄站&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">forwarders&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">102.1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">102.2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">building&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">AUTHORITATIVE&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">NOT&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">recursion&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">building&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">RECURSIVE&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">caching&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">server&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">need&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">enable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursion&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">If&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">recursive&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">has&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">address&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">you&lt;/span> &lt;span class="n">MUST&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">access&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">control&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">limit&lt;/span> &lt;span class="n">queries&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">legitimate&lt;/span> &lt;span class="n">users&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Failing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="n">so&lt;/span> &lt;span class="n">will&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cause&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">become&lt;/span> &lt;span class="n">part&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">large&lt;/span> &lt;span class="n">scale&lt;/span> &lt;span class="n">DNS&lt;/span> &lt;span class="n">amplification&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">attacks&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Implementing&lt;/span> &lt;span class="n">BCP38&lt;/span> &lt;span class="n">within&lt;/span> &lt;span class="n">your&lt;/span> &lt;span class="n">network&lt;/span> &lt;span class="n">would&lt;/span> &lt;span class="n">greatly&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reduce&lt;/span> &lt;span class="n">such&lt;/span> &lt;span class="n">attack&lt;/span> &lt;span class="n">surface&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">recursion&lt;/span> &lt;span class="n">yes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnssec&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">validation&lt;/span> &lt;span class="n">no&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dnssec&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">enable&lt;/span> &lt;span class="n">yes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">managed&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/var/named/dynamic&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">geoip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">directory&lt;/span> &lt;span class="s2">&amp;#34;/usr/share/GeoIP&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pid&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;/run/named/named.pid&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">session&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keyfile&lt;/span> &lt;span class="s2">&amp;#34;/run/named/session.key&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/*&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">fedoraproject&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wiki&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Changes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CryptoPolicy&lt;/span> &lt;span class="o">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/crypto-policies/back-ends/bind.config&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">logging&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">channel&lt;/span> &lt;span class="n">default_debug&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;data/named.run&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">severity&lt;/span> &lt;span class="n">dynamic&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zone&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span> &lt;span class="n">IN&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">hint&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;named.ca&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/named.rfc1912.zones&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">include&lt;/span> &lt;span class="s2">&amp;#34;/etc/named.root.key&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zone&lt;/span> &lt;span class="s2">&amp;#34;netfos.ken.lab&amp;#34;&lt;/span> &lt;span class="n">IN&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">master&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;ken.zone&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">update&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transfer&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">zone&lt;/span> &lt;span class="s2">&amp;#34;1.168.192.in-addr.arpa&amp;#34;&lt;/span> &lt;span class="n">IN&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span> &lt;span class="n">master&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span> &lt;span class="s2">&amp;#34;ken.reverse&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">update&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">query&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">any&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">allow&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">transfer&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改正向解析 /var/named/ken.zone&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dns" data-lang="dns">&lt;span class="line">&lt;span class="cl">&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">named]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">ken.zone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">$TTL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">@&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SOA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.netfos.ken.lab. &lt;/span>&lt;span class="err">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2019070700&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; serial&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="err">H&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; refresh (3 hours)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">30&lt;/span>&lt;span class="err">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; retry (30 minutes)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; expiry (2 weeks)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; minimum (1 week)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.netfos.ken.lab.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="py">bastion.netfos.ken.lab. &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">A&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192.168.1.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改反解析 /var/named/ken.reverse&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dns" data-lang="dns">&lt;span class="line">&lt;span class="cl">&lt;span class="err">[root@bastion&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">named]#&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">cat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nc">ken.reverse&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">$TTL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="sc">10&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nc">@&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">SOA&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.netfos.ken.lab. &lt;/span>&lt;span class="err">root&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2019070700&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; serial&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">3&lt;/span>&lt;span class="err">H&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; refresh (3 hours)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">30&lt;/span>&lt;span class="err">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; retry (30 minutes)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">2&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; expiry (2 weeks)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="sc">1&lt;/span>&lt;span class="err">W&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">; minimum (1 week)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">IN&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">NS&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="py">bastion.netfos.ken.lab.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">;EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>調整防火牆&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --add-service=dns --permanent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># firewall-cmd --reload&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@bastion ~]# systemctl enable named --now
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>驗證DNS&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ dig +noall +answer @192.168.1.1 bastion.netfos.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bastion.netfos.ken.lab. 604800 IN A 192.168.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ nslookup 168.95.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.1.95.168.in-addr.arpa name = dns.hinet.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Authoritative answers can be found from:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="安裝nfs-server">安裝NFS Server
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>install&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo yum install nfs-utils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>setting&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">nfs01&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="mi">777&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">nfs01&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">vim&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exports&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">nfs01&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">24&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">no_root_squash&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span> &lt;span class="n">rpcbind&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">防火牆關閉或是開&lt;/span>&lt;span class="n">nfs&lt;/span> &lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="karbon-airgap">Karbon (Airgap)
&lt;/h2>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:top-airgap-deploy-t.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:top-airgap-deploy-t.html&lt;/a>
&lt;a class="link" href="https://next.nutanix.com/nutanix-kubernetes-engine-30/karbon-install-40404" target="_blank" rel="noopener"
>https://next.nutanix.com/nutanix-kubernetes-engine-30/karbon-install-40404&lt;/a>
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:Nutanix-Kubernetes-Engine-v2_6" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:Nutanix-Kubernetes-Engine-v2_6&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/airgap-architecture-diagram.png"
loading="lazy"
alt="img"
>&lt;/p>
&lt;h4 id="安裝httpd">安裝httpd
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>安裝httpd&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo yum install httpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增資料夾並複製Karbon檔案&amp;amp;解壓縮&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">sudo&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">ken&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">scp&lt;/span> &lt;span class="n">airgap&lt;/span>&lt;span class="o">-*&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.205&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">airgap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">airgap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manifest&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="n">xvzf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動httpd,確認可以瀏覽至該目錄&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ sudo systemctl enable httpd --now
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service → /usr/lib/systemd/system/httpd.service.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230111164809319.png" alt="image-20230111164809319" style="zoom:33%;" />
&lt;/li>
&lt;/ol>
&lt;h4 id="安裝karbon">安裝Karbon
&lt;/h4>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:Nutanix-Kubernetes-Engine-v2_6" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:Nutanix-Kubernetes-Engine-v2_6&lt;/a>
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:top-airgap-c.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_6:top-airgap-c.html&lt;/a>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>PC Enable Karbon&lt;/p>
&lt;/li>
&lt;li>
&lt;p>LCM確認Karbon版本為最新 (2.6.0)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>PC 加一張網卡(連192.168.1.0的網段)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ sudo ifconfig eth1 192.168.1.2 netmask 255.255.255.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ sudo ip link set eth1 down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ sudo ip link set eth1 up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ route -n
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Kernel IP routing table
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Destination Gateway Genmask Flags Metric Ref Use Iface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0.0.0.0 172.16.90.254 0.0.0.0 UG 0 0 0 eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">169.254.0.0 0.0.0.0 255.255.0.0 U 1002 0 0 eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">172.16.90.0 0.0.0.0 255.255.255.0 U 0 0 0 eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.0 0.0.0.0 255.255.255.0 U 0 0 0 eth1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>
&lt;p>用nutanix登入進prism central, cd 進/home/nutanix/karbon&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC % ssh -m hmac-sha2-256 nutanix@172.16.90.219
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Prism Central VM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@172.16.90.219&amp;#39;s password: nutanix/4u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ pwd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/nutanix/karbon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">karbonctl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">登入prism central
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ ./karbonctl login --pc-ip 172.16.90.219 \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--pc-username admin \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--pc-password Nutanix@20230109
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login successful
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>填入資訊並執行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">pcvm&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">enable&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">webserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">webserver_url&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">number&lt;/span>&lt;span class="o">/&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">vlan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">network_name&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ip&lt;/span> &lt;span class="k">static&lt;/span> &lt;span class="n">ip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">address&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">container&lt;/span> &lt;span class="n">storage_container_name&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">PE_cluster_name&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">–&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">username&lt;/span> &lt;span class="n">user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">----&lt;/span> &lt;span class="err">執行安裝指令&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="err">若出現&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">username的error可以把它調到最前面&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">pcvm&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">enable&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">–&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">username&lt;/span> &lt;span class="n">admin&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">webserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.205&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">vlan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.0&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ip&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.5&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">container&lt;/span> &lt;span class="n">VM&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">NX3360NG8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">NTNX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">219&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">PCVM&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">username&lt;/span> &lt;span class="n">admin&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">webserver&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">172.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">90.205&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ntnx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">vlan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.0&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ip&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.5&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">container&lt;/span> &lt;span class="n">VM&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">pe&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">NX3360NG8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Please&lt;/span> &lt;span class="n">enter&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">PE&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">admin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Successfully&lt;/span> &lt;span class="n">submitted&lt;/span> &lt;span class="n">request&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">airgap&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">POST&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">airgap&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">202&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">postAirgapAccepted&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">TaskUUID&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mh">0xc000370140&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">----&lt;/span> &lt;span class="err">確認執行進度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">NTNX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">219&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">PCVM&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Airgap&lt;/span> &lt;span class="n">UUID&lt;/span> &lt;span class="n">VM&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Package&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Registry&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">33844&lt;/span>&lt;span class="n">fb8&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">a677&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4412&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5440&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b099f4a5289d&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Deploying&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="ne">OS&lt;/span> &lt;span class="n">images&lt;/span> &lt;span class="n">Not&lt;/span> &lt;span class="n">running&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230111173203221.png"
loading="lazy"
alt="image-20230111173203221"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112092547218.png"
loading="lazy"
alt="image-20230112092547218"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>check ok&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">NTNX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">219&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">PCVM&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Airgap&lt;/span> &lt;span class="n">UUID&lt;/span> &lt;span class="n">VM&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">URL&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Package&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Registry&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Status&lt;/span> &lt;span class="n">Message&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">00e01072&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">b5a6&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4055&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="n">cfd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">f55d78a8d57b&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.5&lt;/span> &lt;span class="n">airgap&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span> &lt;span class="n">Airgap&lt;/span> &lt;span class="n">registry&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">running&lt;/span> &lt;span class="n">Healthy&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在Web UI新增Production Cluster
連線方式用External Loadbalancer: 192.168.1.10 &amp;ndash;&amp;gt; 要額外設定LoadBalancer
control plane: 192.168.1.6-8&lt;/p>
&lt;p>改用Active-Passive Mode &amp;ndash;&amp;gt; VIP 192.168.1.9&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164205242.png"
loading="lazy"
alt="image-20230112164205242"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164222735.png"
loading="lazy"
alt="image-20230112164222735"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164247610.png"
loading="lazy"
alt="image-20230112164247610"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164318768.png"
loading="lazy"
alt="image-20230112164318768"
>&lt;/p>
&lt;p>抽換為 Active-Passive Mode&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112170725765.png"
loading="lazy"
alt="image-20230112170725765"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164346300.png"
loading="lazy"
alt="image-20230112164346300"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164407434.png"
loading="lazy"
alt="image-20230112164407434"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112164422938.png"
loading="lazy"
alt="image-20230112164422938"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完畢
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112173209983.png"
loading="lazy"
alt="image-20230112173209983"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="連線測試nke">連線測試NKE
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>下載kubeconfig
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112173233274.png" alt="image-20230112173233274" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>linux 安裝kubectl&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">LO&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">dl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">%&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Received&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">Xferd&lt;/span> &lt;span class="n">Average&lt;/span> &lt;span class="n">Speed&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Time&lt;/span> &lt;span class="n">Current&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Dload&lt;/span> &lt;span class="n">Upload&lt;/span> &lt;span class="n">Total&lt;/span> &lt;span class="n">Spent&lt;/span> &lt;span class="n">Left&lt;/span> &lt;span class="n">Speed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mi">138&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mi">138&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">380&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mi">379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">100&lt;/span> &lt;span class="mf">44.4&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="mf">44.4&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">8858&lt;/span>&lt;span class="n">k&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">05&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="mf">10.6&lt;/span>&lt;span class="n">M&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="n">root&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="mi">0755&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">version&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">client&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Client&lt;/span> &lt;span class="n">Version&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">version&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Info&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">Major&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Minor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;23&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GitVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;v1.23.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GitCommit&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;ab69524f795c42094a6630298ff53f3c3ebab7f4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GitTreeState&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;clean&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">BuildDate&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;2021-12-07T18:16:20Z&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">GoVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;go1.17.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Compiler&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;gc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;linux/amd64&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">###將kubeconfig放到.kube/config &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cp&lt;/span> &lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">kubectl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cfg&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">kube&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubeconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cfg&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">master&lt;/span> &lt;span class="mi">25&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">master&lt;/span> &lt;span class="mi">25&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">23&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">wide&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">ROLES&lt;/span> &lt;span class="n">AGE&lt;/span> &lt;span class="n">VERSION&lt;/span> &lt;span class="n">INTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="n">EXTERNAL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">IP&lt;/span> &lt;span class="ne">OS&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">IMAGE&lt;/span> &lt;span class="n">KERNEL&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">VERSION&lt;/span> &lt;span class="n">CONTAINER&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">RUNTIME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">master&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.27&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">CentOS&lt;/span> &lt;span class="n">Linux&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Core&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mf">3.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1160.71&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">el7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">master&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">master&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.13&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">CentOS&lt;/span> &lt;span class="n">Linux&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Core&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mf">3.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1160.71&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">el7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.84&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">CentOS&lt;/span> &lt;span class="n">Linux&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Core&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mf">3.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1160.71&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">el7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.15&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">CentOS&lt;/span> &lt;span class="n">Linux&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Core&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mf">3.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1160.71&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">el7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nke&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">34&lt;/span>&lt;span class="n">f192&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="n">Ready&lt;/span> &lt;span class="n">node&lt;/span> &lt;span class="mi">17&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">23.11&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.82&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">none&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">CentOS&lt;/span> &lt;span class="n">Linux&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Core&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mf">3.10&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1160.71&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.&lt;/span>&lt;span class="n">el7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x86_64&lt;/span> &lt;span class="n">containerd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">### 新增測試pod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="n">busybox&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">radial&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busyboxplus&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">curl&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">Never&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="新增測試服務-redmine">新增測試服務-redmine
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>postgresql的yaml檔-pvc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine-postgres-pv-claim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: default-storageclass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteOnce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 20Gi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>postgresql的yaml檔-configmap&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="n">pgsql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ConfigMap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">POSTGRES_USER&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">POSTGRES_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">P&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mi">55&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PGDATA&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pgdata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">POSTGRES_DB&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>postgresql的yaml檔-deployment&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="n">pgsql&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deploy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">apiVersion&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">kind&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">namespace&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">strategy&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Recreate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">selector&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">replicas&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">template&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">metadata&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">labels&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">containers&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">postgres&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;IfNotPresent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">containerPort&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">envFrom&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">configMapRef&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgredb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">subPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pgsql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pg_hba&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgredb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">subPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pgsql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pghba&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">mountPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgredb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">subPath&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pgsql&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgresql&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgredb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">persistentVolumeClaim&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">claimName&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">redmine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pv&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">claim&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>postgresql的yaml檔-svc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ cat pgsql-svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine-postgres-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: NodePort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - port: 5432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodePort: 31432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: postgres
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>deploy pgsql&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ kubectl apply -f pgsql-pvc.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/redmine-postgres-pv-claim created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ kubectl apply -f pgsql-config.yaml -f pgsql-deploy.yaml -f pgsql-svc.yaml -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/redmine-postgres-config created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 確認PV,PVC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ kubectl get pv,pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-6e4760a1-6884-492f-8ecb-b2dc89ddfdde 30Gi RWO Delete Bound ntnx-system/prometheus-k8s-db-prometheus-k8s-0 default-storageclass 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-7875f29e-0b6e-409f-bcc2-d03b315ff2ac 20Gi RWO Delete Bound redmine/redmine-postgres-pv-claim default-storageclass 4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-d5e769a0-3c74-4e99-b401-2deb620f90c0 30Gi RWO Delete Bound ntnx-system/prometheus-k8s-db-prometheus-k8s-1 default-storageclass 17h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/redmine-postgres-pv-claim Bound pvc-7875f29e-0b6e-409f-bcc2-d03b315ff2ac 20Gi RWO default-storageclass 7s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 確認pgsql status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ kubectl get all -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-postgres-deployment-6f6f66f9cd-4ph9q 1/1 Running 0 6m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service NodePort 172.19.202.4 &amp;lt;none&amp;gt; 5432:31432/TCP 6m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment 1/1 1 1 6m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-postgres-deployment-6f6f66f9cd 1 1 1 6m4s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### Test node port 31432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ telnet 192.168.1.84 31432
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying 192.168.1.84...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connected to 192.168.1.84.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Escape character is &amp;#39;^]&amp;#39;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^CConnection closed by foreign host.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>redmine的yaml檔-config&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> configuration.yml: |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # = Redmine configuration file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Each environment has its own configuration options. If you are only
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # running in production, only the production block needs to be configured.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Environment specific configuration options override the default ones.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # Note that this file needs to be a valid YAML file.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # DO NOT USE TABS! Use 2 spaces instead of tabs for indentation.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # default configuration options for all environments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> email_delivery:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> autologin_cookie_name:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> autologin_cookie_path:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_mercurial_command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_git_command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_cvs_command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_bazaar_command:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_subversion_path_regexp:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_mercurial_path_regexp:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_git_path_regexp:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_cvs_path_regexp:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_bazaar_path_regexp:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_filesystem_path_regexp:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scm_stderr_log_file:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> database_cipher_key:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> minimagick_font_path:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> production:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> development:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ConfigMap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: redmine
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>redmine的yaml檔-deploy&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ cat redmine-deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1 # for versions before 1.9.0 use apps/v1beta2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> initContainers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 修正configmap所需的讀寫權限
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: fix-permission-for-configfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: busybox:1.33.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imagePullPolicy: IfNotPresent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> command: [&amp;#39;sh&amp;#39;, &amp;#39;-c&amp;#39;, &amp;#39;cat /tmp/configuration.yml &amp;amp;&amp;amp; cp /tmp/configuration.yml /config-tmp-dir/configuration.yml &amp;amp;&amp;amp; chmod -R 777 /config-tmp-dir&amp;#39;]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 同時掛載兩個空間(一個有redmine要得檔案, 另外一個有可自由讀寫的空間)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-config-vol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /tmp/configuration.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> subPath: configuration.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-config-tmp-dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /config-tmp-dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: redmine:4.1.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> env:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: REDMINE_DB_POSTGRES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: redmine-postgres-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: REDMINE_DB_USER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: REDMINE_DB_PASSWORD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: P@55w.rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: REDMINE_DB_DATABASE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # default password admin/admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-config-tmp-dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /usr/src/redmine/config/configuration.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> subPath: configuration.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-files-dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /usr/src/redmine/files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-plugins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /usr/src/redmine/plugins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-themes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /usr/src/redmine/public/themes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - containerPort: 3000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ui
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 向k8s取得redmine的yaml檔案
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-config-vol
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> configMap:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> items:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: configuration.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: configuration.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # 暫存給redmine與初始化需要的儲存空間(會隨刪除消失)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-config-tmp-dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> emptyDir: {}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-files-dir
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /nfs01/redmine/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: 192.168.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-themes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /nfs01/redmine/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: 192.168.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: redmine-plugins
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /nfs01/redmine/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: 192.168.1.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>redmine的yaml檔-service (NodePort)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion ~]$ cat redmine-svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: NodePort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: ui
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 3000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodePort: 32748
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ----------------- ClusterIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: redmine-service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: ClusterIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> externalIPs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 172.16.90.213
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: ui
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: 80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> targetPort: 3000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>部署redmine&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ kubectl apply -f redmine-config.yaml -f redmine-deploy.yaml -f redmine-svc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/redmine-config created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-service created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion redmine]$ kubectl get all -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-54b45b447c-89rm4 1/1 Running 0 51s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-postgres-deployment-6f6f66f9cd-6ngtz 1/1 Running 0 86s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service NodePort 172.19.202.4 &amp;lt;none&amp;gt; 5432:31432/TCP 172m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-service NodePort 172.19.220.153 &amp;lt;none&amp;gt; 3000:32748/TCP 51s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine 1/1 1 1 52s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment 1/1 1 1 172m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-54b45b447c 1 1 1 52s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-postgres-deployment-6f6f66f9cd 1 1 1 172m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>預設帳密 admin/admin , 服務皆走node port , 確認連線OK
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113132436022.png" alt="image-20230113132436022" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="enable-advance-k8s">Enable Advance k8s
&lt;/h4>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_5:top-install-advanced-t.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Nutanix-Kubernetes-Engine-v2_5:top-install-advanced-t.html&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>登入Prism Central的VM&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % ssh nutanix@172.16.90.219
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Prism Central VM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@172.16.90.219&amp;#39;s password:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>karbonctl 登入PC&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~$ cd karbon/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 66020
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-x---. 1 nutanix nutanix 53464168 Oct 14 11:04 karbonctl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-------. 1 nutanix nutanix 14136153 Jan 11 00:56 kps-cloud-deployer-pc.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix@NTNX-172-16-90-219-A-PCVM:~/karbon$ ./karbonctl login --pc-username admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the password for the PC user: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Login successful
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Enable Advance K8s Management &amp;ndash; airgap mode 不能啟用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">NTNX&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">16&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">90&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">219&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">PCVM&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">karbon&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">karbonctl&lt;/span> &lt;span class="n">karbon&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">management&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">cluster&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">nke&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Advanced&lt;/span> &lt;span class="n">Kubernetes&lt;/span> &lt;span class="n">Managment&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">enabled&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">airgap&lt;/span> &lt;span class="n">mode&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">panic&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">runtime&lt;/span> &lt;span class="n">error&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">invalid&lt;/span> &lt;span class="n">memory&lt;/span> &lt;span class="n">address&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="n">pointer&lt;/span> &lt;span class="n">dereference&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="k">signal&lt;/span> &lt;span class="n">SIGSEGV&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">segmentation&lt;/span> &lt;span class="n">violation&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mh">0x1&lt;/span> &lt;span class="n">addr&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mh">0x68&lt;/span> &lt;span class="n">pc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mh">0x155813e&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">goroutine&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="p">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">executeK8sRESTAPI&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="mh">0x1b93ae8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xc00013f1c0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x190b901&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x5&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0xc000148200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xc000523510&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xc000356880&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x28bff08&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonmgmt_enable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">140&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x5e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">actionKarbonMgmtYaml&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="mh">0x1b93ae8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xc00013f1c0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0xc0003ec0c0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x28bff08&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonmgmt&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">213&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x191&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">processKarbonMgmtYaml&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="mh">0x1b93ae8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0xc00013f1c0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x190e83e&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x16eeb40&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="mh">0x1b29ac0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x32&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0x0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x2b&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0xc0004dcea0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonmgmt_enable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">483&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x165&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">glob&lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="n">func64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x286ba80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0xc00013d060&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x2&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">karbonmgmt_enable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">426&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x1c5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cobra&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">Command&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x286ba80&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mh">0xc00013d040&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x2&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vendor&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cobra&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">860&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x5f8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cobra&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">Command&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ExecuteC&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x2870580&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vendor&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cobra&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">974&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x3bc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cobra&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">Command&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vendor&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spf13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cobra&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">902&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Execute&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cmd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x25&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">main&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">circleci&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">karbonctl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="mh">0x17&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h4 id="rancher-install">Rancher install
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>下載安裝cert-manager&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jetstack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.4&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">ns&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="n">pods&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">NAME&lt;/span> &lt;span class="n">READY&lt;/span> &lt;span class="n">STATUS&lt;/span> &lt;span class="n">RESTARTS&lt;/span> &lt;span class="n">AGE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">7455&lt;/span>&lt;span class="n">bdc9bd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jxjrs&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cainjector&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">bcbb87487&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">j27cl&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Error&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">ago&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">webhook&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">55&lt;/span>&lt;span class="n">b97fbb44&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">xbsd&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="mi">109&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">複製檔案過來&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">3324&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">ken&lt;/span> &lt;span class="n">ken&lt;/span> &lt;span class="mi">1679688&lt;/span> &lt;span class="n">Jan&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">ken&lt;/span> &lt;span class="n">ken&lt;/span> &lt;span class="mi">1701573&lt;/span> &lt;span class="n">Dec&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="mi">2021&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">ken&lt;/span> &lt;span class="n">ken&lt;/span> &lt;span class="mi">262&lt;/span> &lt;span class="n">Jan&lt;/span> &lt;span class="mi">16&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">44&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="n">apply&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">validate&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">false&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">crds&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificaterequests&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certificates&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">challenges&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">clusterissuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">issuers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">customresourcedefinition&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">apiextensions&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">orders&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">acme&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cert&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">manager&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span> &lt;span class="n">configured&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝rancher&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ kubectl create namespace cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/cattle-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ kubectl apply -f rancher-service.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/rancher-service created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### helm install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ wget https://get.helm.sh/helm-v3.11.0-rc.2-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ tar xvf helm-v3.10.3-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/helm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">linux-amd64/README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion linux-amd64]$ sudo cp helm /usr/local/bin/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[sudo] password for ken:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion linux-amd64]$ helm version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/ken/nke.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /home/ken/nke.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version.BuildInfo{Version:&amp;#34;v3.10.3&amp;#34;, GitCommit:&amp;#34;835b7334cfe2e5e27870ab3ed4135f136eecc704&amp;#34;, GitTreeState:&amp;#34;clean&amp;#34;, GoVersion:&amp;#34;go1.18.9&amp;#34;}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">##rancher install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ helm install rancher rancher-stable/rancher --namespace cattle-system --set hostname=rancher.netfos.ken.lab --set replicas=1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion rancher]$ kubectl get all -n cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/helm-operation-9bhx6 0/2 Completed 0 72s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/helm-operation-h7rnz 0/2 Completed 0 25s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/helm-operation-j8wx2 0/2 Completed 0 6s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/rancher-687bc6596d-xf4pw 1/1 Running 0 2m38s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/rancher ClusterIP 172.19.196.248 &amp;lt;none&amp;gt; 80/TCP,443/TCP 2m39s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/rancher-service NodePort 172.19.29.29 &amp;lt;none&amp;gt; 443:31443/TCP 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/rancher 1/1 1 1 2m39s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/rancher-687bc6596d 1 1 1 2m39s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>browser to https://192.168.1.15:31443
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230116102459000.png"
loading="lazy"
alt="image-20230116102459000"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>改密碼
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230116102741258.png" alt="image-20230116102741258" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>即可透過Rancher來查看叢集Status
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230116102900002.png"
loading="lazy"
alt="image-20230116102900002"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230116103502845.png"
loading="lazy"
alt="image-20230116103502845"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="files">FIles
&lt;/h2>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:fil-file-server-create-wc-t.html#ntask_dgl_l3j_j5" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:fil-file-server-create-wc-t.html#ntask_dgl_l3j_j5&lt;/a>
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:Files-v4_2" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:Files-v4_2&lt;/a>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>安裝設定AD (optional 如要使用SMB就需有AD)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Domain: netfos.ken.lab&lt;/p>
&lt;/li>
&lt;li>
&lt;p>分為Storage Network (172.16.90.0)、Client Network (192.168.1.0)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Client Network不能與CVM同網段&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Virtual IP用在Storage Network, Client 的IP, FSVM會自動HA&lt;/p>
&lt;/li>
&lt;li>
&lt;p>先用LCM將File升級到最新&lt;/p>
&lt;/li>
&lt;li>
&lt;p>網路Port圖
&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Port-Reference:Files_port_auto_r.html" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Port-Reference:Files_port_auto_r.html&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="架構">架構
&lt;/h4>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/fs-file-server-network-relationship.png" alt="img" style="zoom:50%;" />
&lt;h4 id="安裝ad">安裝AD
&lt;/h4>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112103131877.png" alt="image-20230112103131877" style="zoom:50%;" />
&lt;h4 id="安裝file-server-on-pe">安裝File Server on PE
&lt;/h4>&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:fil-file-server-create-wc-t.html#ntask_dgl_l3j_j5" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:fil-file-server-create-wc-t.html#ntask_dgl_l3j_j5&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在PE的 File Server ADD,先確認有達到最低需求
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112104219863.png" alt="image-20230112104219863" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定FQDN、大小&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112104042391.png"
loading="lazy"
alt="image-20230112104042391"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定Client Network (192.168.1.0 要與CVM的網段不同)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112105256290.png" alt="image-20230112105256290" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定DNS&amp;amp;NTP&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112105434906.png" alt="image-20230112105434906" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>設定Storage Network (172.16.90.206-209)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112105545032.png" alt="image-20230112105545032" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定目錄服務 SMB、NFS (SMB要AD)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112104942496.png" alt="image-20230112104942496" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Summary &amp;amp; Protection Domain (Snapshot)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112105055627.png" alt="image-20230112105055627" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>去PE的Setting查看fs被分配到什麼IP (192.168.1.26,81,97)&lt;/p>
&lt;p>並在DNS上註記 &amp;ndash; 使用auto update&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113151039168.png"
loading="lazy"
alt="image-20230113151039168"
>&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112105750255.png" alt="image-20230112105750255" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>查看Takss
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112110132893.png"
loading="lazy"
alt="image-20230112110132893"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝完畢
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112111921165.png"
loading="lazy"
alt="image-20230112111921165"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>可以點選console來查看File Server的狀態
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112112012184.png"
loading="lazy"
alt="image-20230112112012184"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>有出現無法連到AD 需查找問題&amp;ndash; 將兩台DNS Server的註記都設定上去後即正常
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112112151953.png"
loading="lazy"
alt="image-20230112112151953"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新增Share資料夾 (SMB)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112112521953.png" alt="image-20230112112521953" style="zoom:50%;" />&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112112613066.png" alt="image-20230112112613066" style="zoom:50%;" />
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112112657224.png"
loading="lazy"
alt="image-20230112112657224"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試連線,點進去file-test即可看到mount path
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112112723327.png"
loading="lazy"
alt="image-20230112112723327"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在一台Windows上連線測試 ( 走的是192.168.1.0網段 )&lt;/p>
&lt;p>測試資料夾有出現，但要開權限&lt;/p>
&lt;p>&lt;a class="link" href="https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:fil-fs-rbac-workflow-c.html![image-20230112112909758]%28https://kenkenny.synology.me:5543/images/2023/09/image-20230112112909758.png%29" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/details?targetId=Files-v4_2:fil-fs-rbac-workflow-c.html![image-20230112112909758](https://kenkenny.synology.me:5543/images/2023/09/image-20230112112909758.png)&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>查詢
&lt;a class="link" href="https://portal.nutanix.com/page/documents/kbs/details?targetId=kA032000000TWZMCA4" target="_blank" rel="noopener"
>https://portal.nutanix.com/page/documents/kbs/details?targetId=kA032000000TWZMCA4&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nutanix@NTNX-22SH6M380125-C-CVM:172.16.90.213:~$ ncli fs ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Uuid : dcb7f7d3-1beb-423e-92d8-0004978542c8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name : fs01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DNS Domain Name : netfos.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version : 4.2.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Container ID : 0005f1d0-ce0d-147b-16c3-7cc25505da5a::169299
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Container Uuid : 5d3fd980-8192-4a8c-ab18-5fb605f58bae
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Virtual IP address : 172.16.90.206
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DNS Server IP Addresses : 192.168.1.1, 192.168.1.100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> NTP Servers : clock.stdtime.gov.tw, tick.stdtime.gov.tw, time.stdtime.gov.tw, tock.stdtime.gov.tw, watch.stdtime.gov.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File server PD name : NTNX-fs01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File server PD status : Active
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> File server status : Active
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AD Domain Name : netfos.ken.lab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AD Username : administrator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Preferred Domain Contr... : true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Overwrite User Account : false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AD Protocol Type : SMB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Local Protocol Type : NFS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nfs version : NFSV3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Total Snapshot Space Used : 0 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Total Space Used : 808 KiB (827,392 bytes)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Total Space Available : 1024 GiB (1,099,510,800,384 bytes)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Total SMB Connections : 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Storage User Capacity : 23.31 TiB (25,633,686,087,723 bytes)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Size : 1 TiB (1,099,511,627,776 bytes)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Data savings : 0 bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Data reduction ratio : 1:1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Controller Num IOPs : 100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Controller IO Bandwidth : 751
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Controller Avg IO Latency : 867
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Network UUID : c5b9824f-4fba-4c01-9fb2-d02a88daf933
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Default Gateway : 172.16.90.254
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subnet Mask : 255.255.255.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Network Type : Internal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> IP Pool : 172.16.90.206 - 172.16.90.209
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Network UUID : ac09299f-322e-4750-9183-6d106be2a0df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Default Gateway : 192.168.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subnet Mask : 255.255.255.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Network Type : External
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm UUID : 5a7aef2d-2052-4a6b-935a-bfa46b493b98
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm ID : 0005f1d0-ce0d-147b-16c3-7cc25505da5a::0749859d-c8d7-4199-876f-92ee9215ba26
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm Name : NTNX-fs01-3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory In GiB : 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Virtual CPUs : 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm IP Addresses : 192.168.1.26, 172.16.90.209
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm UUID : 275adefc-0e3f-4f26-8680-9dd7ff7223b4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm ID : 0005f1d0-ce0d-147b-16c3-7cc25505da5a::a0a930a7-cafd-4dd3-b4f9-559a48a6db00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm Name : NTNX-fs01-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory In GiB : 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Virtual CPUs : 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm IP Addresses : 192.168.1.97, 172.16.90.207
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm UUID : 3eec8305-8d7c-41ec-804d-9f217b41669c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm ID : 0005f1d0-ce0d-147b-16c3-7cc25505da5a::d3b41d19-1bf1-4c4b-8ece-e09d2b9dac2d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm Name : NTNX-fs01-2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory In GiB : 12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Virtual CPUs : 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nvm IP Addresses : 192.168.1.81, 172.16.90.208
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>最後問題點是FQDN帶了多個IP出來，直接用IP就可以連線&lt;/p>
&lt;p>並且資料會同步到其他FSVM上
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112145143605.png"
loading="lazy"
alt="image-20230112145143605"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112153035796.png"
loading="lazy"
alt="image-20230112153035796"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>可以針對檔案副檔名封鎖存取&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112145238291.png" alt="image-20230112145238291" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>Dashboard查看目前Share Folder的狀態&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112145309865.png"
loading="lazy"
alt="image-20230112145309865"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試NFS,新增NFS Share&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112150448407.png"
loading="lazy"
alt="image-20230112150448407"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在Linux上安裝nfs-utils後mount測試&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">yum&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">utils&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="n">nfs&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.26&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs01&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">remote&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">fs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rpc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">statd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rpc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">statd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mount&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">access&lt;/span> &lt;span class="n">denied&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="n">mounting&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.26&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs01&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>出現 Access Denied 需要調整權限,Authentication調整為none,mount時要加sec=none
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112150700831.png" alt="image-20230112150700831" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>測試連線&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">mount&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="n">nfs&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.26&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs01&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">sec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">none&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="n">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">touch&lt;/span> &lt;span class="mi">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">touch&lt;/span> &lt;span class="mf">321.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">bastion&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">total&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">4294967294&lt;/span> &lt;span class="mi">4294967294&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">Jan&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="mi">2023&lt;/span> &lt;span class="mi">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">-&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">--.&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="mi">4294967294&lt;/span> &lt;span class="mi">4294967294&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="n">Jan&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="mi">2023&lt;/span> &lt;span class="mf">321.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">drwxr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">xr&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="mi">4294967294&lt;/span> &lt;span class="mi">4294967294&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">Jan&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="mi">15&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="n">test&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>測試阻擋副檔名*.txt
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112151230300.png" alt="image-20230112151230300" style="zoom:50%;" />&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ken@bastion nfs]$ touch 333.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch: cannot touch &amp;#39;333.txt&amp;#39;: Permission denied
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion nfs]$ rm 321.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm: cannot remove &amp;#39;321.txt&amp;#39;: Operation not permitted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ken@bastion nfs]$ rm 123
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm: cannot remove &amp;#39;123&amp;#39;: Operation not permitted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>若新增時選擇的是Use &amp;ldquo;Distributed&amp;rdquo; share type instead of &amp;ldquo;Standard&amp;rdquo;&lt;/p>
&lt;p>提示要安裝MMC Plugin&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112152924185.png" alt="image-20230112152924185" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>可以連線至該資料夾，但無法新增檔案
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230112153247015.png" alt="image-20230112153247015" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>可以新增資料夾並在子資料夾內可新增檔案&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113141034500.png" alt="image-20230113141034500" style="zoom:50%;" />
&lt;/li>
&lt;li>
&lt;p>Standard vs Distributed&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Standard: 一般的Share Folder,實測資料都會同步到其他FSVM上,第一層資料夾即可開始使用。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Distributed: 多用來當作家目錄資料夾底下會放多個使用者的資料夾，可以有比較好的效能跟分流作用。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113140218786.png"
loading="lazy"
>&lt;/p>
&lt;h5 id="distributed">Distributed
&lt;/h5>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/share-export-distributed.png"
loading="lazy"
alt="Shares, in this example \profile, distributed across FSVMs."
>&lt;/p>
&lt;h5 id="standard">Standard
&lt;/h5>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/share-export-standard.png"
loading="lazy"
alt="Shares, in this example \finance, \hr, and \eng, are not distributed across FSVMs."
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="file-ha">File HA
&lt;/h4>&lt;ol>
&lt;li>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Fail&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">VMs&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">FSVMs&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">High&lt;/span> &lt;span class="n">Availability&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">HA&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">Files&lt;/span> &lt;span class="n">insures&lt;/span> &lt;span class="n">that&lt;/span> &lt;span class="n">during&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">disruption&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">service&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">VM&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">FSVM&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">clusters&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">two&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">FSVMs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">fail&lt;/span> &lt;span class="n">over&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">another&lt;/span> &lt;span class="n">FSVM&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">High&lt;/span> &lt;span class="n">Availability&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">enabled&lt;/span> &lt;span class="n">by&lt;/span> &lt;span class="n">default&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="n">clusters&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">two&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">more&lt;/span> &lt;span class="n">FSVMs&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">When&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">FSVM&lt;/span> &lt;span class="n">experiences&lt;/span> &lt;span class="n">an&lt;/span> &lt;span class="n">issue&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Files&lt;/span> &lt;span class="n">reassigns&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">address&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">FSVM&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">another&lt;/span> &lt;span class="n">FSVM&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">cluster&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">The&lt;/span> &lt;span class="ne">IP&lt;/span> &lt;span class="n">address&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">out&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="n">FSVM&lt;/span> &lt;span class="n">remains&lt;/span> &lt;span class="n">available&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">However&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">shares&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">exports&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">impacted&lt;/span> &lt;span class="n">FSVM&lt;/span> &lt;span class="n">are&lt;/span> &lt;span class="n">unavailable&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">several&lt;/span> &lt;span class="n">minutes&lt;/span> &lt;span class="n">during&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">failover&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Affinity&lt;/span> &lt;span class="n">rules&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">affect&lt;/span> &lt;span class="n">HA&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">multiple&lt;/span> &lt;span class="n">FSVMs&lt;/span> &lt;span class="n">can&lt;/span> &lt;span class="n">share&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">single&lt;/span> &lt;span class="n">host&lt;/span> &lt;span class="n">during&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">HA&lt;/span> &lt;span class="n">event&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>情境模擬,目前DNS設定
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113152719949.png" alt="image-20230113152719949" style="zoom:50%;" />&lt;/p>
&lt;/li>
&lt;li>
&lt;p>資料夾連線狀態,兩邊都可以新增檔案
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113152849603.png"
loading="lazy"
alt="image-20230113152849603"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>將ntnx-fs01-1關機
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113153317896.png"
loading="lazy"
alt="image-20230113153317896"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>同樣路徑下還是可以進行檔案編輯、新增
192.168.1.97 還是ping得通。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113153249886.png"
loading="lazy"
alt="image-20230113153249886"
>&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230113153717326.png" alt="image-20230113153717326" style="zoom:50%;" />
&lt;/li>
&lt;/ol>
&lt;h4 id="csi">CSI
&lt;/h4>&lt;p>&lt;a class="link" href="https://github.com/nutanix/csi-plugin/blob/master/README.md" target="_blank" rel="noopener"
>https://github.com/nutanix/csi-plugin/blob/master/README.md&lt;/a>&lt;/p>
&lt;p>分為Volume 跟Files
Files 分為專用的Share以及Dynamic NFS
先確認worker node 有啟動nfs-server服務&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workerVm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">now&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Created&lt;/span> &lt;span class="n">symlink&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">wants&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="err">→&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">nutanix&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workerVm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">●&lt;/span> &lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">NFS&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">services&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Loaded&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">loaded&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nfs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">enabled&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">vendor&lt;/span> &lt;span class="n">preset&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">disabled&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Active&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">active&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">since&lt;/span> &lt;span class="n">Fri&lt;/span> &lt;span class="mi">2023&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">14&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="n">UTC&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">ago&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">46413&lt;/span> &lt;span class="n">ExecStart&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">q&lt;/span> &lt;span class="n">is&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">active&lt;/span> &lt;span class="n">gssproxy&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">then&lt;/span> &lt;span class="n">systemctl&lt;/span> &lt;span class="n">reload&lt;/span> &lt;span class="n">gssproxy&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">fi&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">46400&lt;/span> &lt;span class="n">ExecStart&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rpc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nfsd&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">46398&lt;/span> &lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">exportfs&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Main&lt;/span> &lt;span class="n">PID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">46413&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">7&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workerVm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">systemd&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="n">Starting&lt;/span> &lt;span class="n">NFS&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">services&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">7&lt;/span>&lt;span class="err">月&lt;/span> &lt;span class="mi">14&lt;/span> &lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10&lt;/span> &lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lab01&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">anthos&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">workerVm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">systemd&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="n">Started&lt;/span> &lt;span class="n">NFS&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">services&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h5 id="files-dynamic">Files Dynamic
&lt;/h5>&lt;p>Prism 上有建立Files Server即可使用，不用新增Share&lt;/p>
&lt;ol>
&lt;li>
&lt;p>建立Secret&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ cat ntnx-secret74.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-secret74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # base64 encoded prism-ip:prism-port:admin:password.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # E.g.: echo -n &amp;#34;172.16.90.74:9440:admin:mypassword&amp;#34; | base64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: MTcyLjE2LjkwLjc0Ojk0NDA6YWRtaW46TnV0YW5peC9MYWIxMjM=
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立Dynamic NFS Storageclass&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ cat ntnx-secret74.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-secret74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # base64 encoded prism-ip:prism-port:admin:password.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> # E.g.: echo -n &amp;#34;10.6.47.155:9440:admin:mypassword&amp;#34; | base64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: MTcyLjE2LjkwLjc0Ojk0NDA6YWRtaW46TnV0YW5peC9MYWIxMjM=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ cat dyn-files.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dynamicProv: ENABLED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfsServerName: Files
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-name: ntnx-secret74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> csi.storage.k8s.io/provisioner-secret-namespace: ntnx-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixFiles
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>建立測試pvc&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ cat test-claim.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: claim2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteMany
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 10Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: ntnx-files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>驗證OK&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ kubectl get pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">claim2 Bound pvc-a338991c-13f8-4c2f-811b-10911f543e97 10Gi RWX ntnx-files 93m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>實際Prism 畫面
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/dyn-files.png"
loading="lazy"
alt="image-20230714135126573"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Anthos 畫面
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230714135206479.png"
loading="lazy"
alt="image-20230714135206479"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h5 id="files-share">Files Share
&lt;/h5>&lt;ol>
&lt;li>
&lt;p>Prism 建立Files Share
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230714140331520.png"
loading="lazy"
alt="image-20230714140331520"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230714140358134.png"
loading="lazy"
alt="image-20230714140358134"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230714140415066.png"
loading="lazy"
alt="image-20230714140415066"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230714140434787.png"
loading="lazy"
alt="image-20230714140434787"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230714140451932.png"
loading="lazy"
alt="image-20230714140451932"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立Storageclass 針對anthos 這個share&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ cat ntnx-files.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: StorageClass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: storage.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ntnx-files-anthos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> annotations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageclass.kubernetes.io/is-default-class: &amp;#34;false&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parameters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfsServer: Files.nutanixlab.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nfsPath: anthos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageType: NutanixFiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reclaimPolicy: Delete
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>確認Storageclass &amp;ldquo;ntnx-files-anthos&amp;rdquo;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ kubectl get storageclass
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos-system kubernetes.io/no-provisioner Delete WaitForFirstConsumer false 29d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local-disks kubernetes.io/no-provisioner Delete WaitForFirstConsumer false 29d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local-shared kubernetes.io/no-provisioner Delete WaitForFirstConsumer false 29d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-files csi.nutanix.com Delete Immediate false 108m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ntnx-files-anthos csi.nutanix.com Delete Immediate false 6s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutanix-volume (default) csi.nutanix.com Delete Immediate true 29d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[nutanix@anthos-lab01-anthos-adminVm-0 ~]$ kubectl describe storageclass ntnx-files-anthos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name: ntnx-files-anthos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IsDefaultClass: No
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Annotations: storageclass.kubernetes.io/is-default-class=false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Provisioner: csi.nutanix.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Parameters: nfsPath=anthos,nfsServer=Files.nutanixlab.local,storageType=NutanixFiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AllowVolumeExpansion: &amp;lt;unset&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MountOptions: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ReclaimPolicy: Delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VolumeBindingMode: Immediate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events: &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>Anthos_on_Nutanix</title><link>https://wangken0129.github.io/p/anthos_on_nutanix/</link><pubDate>Sat, 23 Sep 2023 02:40:52 +0800</pubDate><guid>https://wangken0129.github.io/p/anthos_on_nutanix/</guid><description>&lt;h1 id="nutanix上快速部署-anthos">Nutanix上快速部署 Anthos
&lt;/h1>&lt;h2 id="目標-">目標 :
&lt;/h2>&lt;p>透過 Nutanix 的 Calm 快速部署 Google Anthos Cluster並註冊到雲端，過程約一個小時，
並在Google Cloud Console 上來管理地端Anthos Cluster，達到混合雲的架構。&lt;/p>
&lt;p>除了Nutanix Calm外，同樣也可以使用Terraform來達到相同目的。&lt;/p>
&lt;h2 id="環境準備-">環境準備 :
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>一座 Nutanix Cluster 含至少192GB 可用記憶體、768GB 硬碟可用空間、
6個 IPAM 給Anthos Cluster VM、3個Kubernetes用的IP&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Prism Central 啟用Calm服務&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一台 Calm DSL VM (啟動Calm DSL Container )&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一組 ssh key 給Anthos 部署的VM 使用&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>其他準備：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Prerequisites
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Before using any of the automation methods, make sure to meet the following requirements:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Automation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Calm:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3.0.0.2 or later
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A project with AHV account
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ~ or ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Terraform:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.13.x or later
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Nutanix provider 1.2.x or later
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Credentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> (Calm only) SSH key. It must start with —BEGIN RSA PRIVATE KEY—
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Prism Element account with User Admin role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Prism Central account with CRUD VM permissions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Networking
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Internet connectivity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AHV IPAM pool with minimum 6 IP addresses
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Kubernetes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Control plane VIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Ingress VIP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Load balancing pool
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Prism Element cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AHV: 20201105.1045 or later
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AOS: 5.19.1 or later
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> iSCSI data service IP configured
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VLAN network with AHV IPAM configured
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Prism Central: 2020.11.0.1 or later
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Google Cloud
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A project with Owner role
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Project must have monitoring enabled (console)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A service account (how-to)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Role: Project Owner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A private key: JSON format
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="版本資訊-">版本資訊 :
&lt;/h2>&lt;ul>
&lt;li>AOS Version: 6.5.2&lt;/li>
&lt;li>Prism Central Version: 2023.1.01&lt;/li>
&lt;li>Calm Version: 3.6.2&lt;/li>
&lt;li>Calm DSL Version: 3.6.1.2023.03.15.commit.e753678&lt;/li>
&lt;li>Anthos Version: 1.15.0 (v1.26.2-gke.1001)&lt;/li>
&lt;li>CentOS Version: 8.2.2004-20200611.2&lt;/li>
&lt;/ul>
&lt;h2 id="參考資料">參考資料
&lt;/h2>&lt;p>Anthos on AHV
&lt;a class="link" href="https://www.nutanix.dev/2021/04/26/anthos-clusters-on-ahv-getting-started/#calm-anthos-ahv" target="_blank" rel="noopener"
>https://www.nutanix.dev/2021/04/26/anthos-clusters-on-ahv-getting-started/#calm-anthos-ahv&lt;/a>&lt;/p>
&lt;p>Calm Blueprint
&lt;a class="link" href="https://github.com/nutanixdev/anthos-on-ahv/tree/main/calm" target="_blank" rel="noopener"
>https://github.com/nutanixdev/anthos-on-ahv/tree/main/calm&lt;/a>&lt;/p>
&lt;p>Service Account
&lt;a class="link" href="https://cloud.google.com/anthos/run/docs/securing/service-accounts" target="_blank" rel="noopener"
>https://cloud.google.com/anthos/run/docs/securing/service-accounts&lt;/a>&lt;/p>
&lt;h2 id="架構圖-">架構圖 :
&lt;/h2>&lt;p>Calm&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/nutanix-kubernetes-7zv4o.max-700x700.png"
loading="lazy"
alt="Going Hybrid with Kubernetes on Google Cloud Platform and Nutanix | Google Cloud Blog"
>&lt;/p>
&lt;p>Anthos Cluster&lt;/p>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/Anthos-clusters-on-AHV-Architecture-1024x733.png" alt="img" />
&lt;p>Calm 與 Jenkins整合的流程，日後可做為參考&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230711125654636.png"
loading="lazy"
alt="image-20230711125654636"
>&lt;/p>
&lt;p>Lab01 Info&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名稱&lt;/th>
&lt;th>IP&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Prism Central&lt;/td>
&lt;td>172.16.90.72&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Prism Element&lt;/td>
&lt;td>172.16.90.71&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Prism iSCSI Data IP&lt;/td>
&lt;td>172.16.90.73&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Calm DSL VM&lt;/td>
&lt;td>172.16.90.210&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab01-admin-vm&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab01-master1&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab01-master2&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab01-master3&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab01-worker1&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab01-worker2&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Anthos cluster01 VIP&lt;/td>
&lt;td>172.16.90.207&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ingress VIP&lt;/td>
&lt;td>172.16.90.205&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Loadbalncer IP&lt;/td>
&lt;td>172.16.90.205-206&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Lab02&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名稱&lt;/th>
&lt;th>IP&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>anthos-lab02-admin-vm&lt;/td>
&lt;td>172.16.90.211-216&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab02-master0&lt;/td>
&lt;td>172.16.90.217-223&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab02-master1&lt;/td>
&lt;td>172.16.90.217-223&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab02-master2&lt;/td>
&lt;td>172.16.90.217-223&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab02-worker0&lt;/td>
&lt;td>172.16.90.217-223&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab02-worker1&lt;/td>
&lt;td>172.16.90.217-223&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>anthos-lab02-worker2&lt;/td>
&lt;td>172.16.90.217-223&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Anthos cluster02 VIP&lt;/td>
&lt;td>172.16.90.224&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ingress VIP&lt;/td>
&lt;td>172.16.90.208&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Loadbalncer IP&lt;/td>
&lt;td>172.16.90.208-209&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="calm-dsl執行步驟-">Calm DSL執行步驟 :
&lt;/h2>&lt;h3 id="google-cloud-console-">Google Cloud Console :
&lt;/h3>&lt;ol>
&lt;li>登入 Google console&lt;/li>
&lt;/ol>
&lt;p>&lt;a class="link" href="https://console.cloud.google.com" target="_blank" rel="noopener"
>https://console.cloud.google.com&lt;/a>&lt;/p>
&lt;ol start="2">
&lt;li>建立 Project &amp;amp; Enable Anthos&lt;/li>
&lt;li>建立 Service Account &amp;amp;私密金鑰並上傳&lt;/li>
&lt;/ol>
&lt;h3 id="nutanix-cluster-">Nutanix Cluster :
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>登入 Prism Central&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立 Nutanix Project 並設定使用者、基礎環境&lt;/p>
&lt;/li>
&lt;li>
&lt;p>取得blueprint、設定環境變數 (Calm DSL VM)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> ~/nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git clone https://github.com/mat0606/anthos-on-ahv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> anthos-on-ahv/calm/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ vim blueprint.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Create Variables
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ mkdir -p .local/secrets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ ls -l .local/secrets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">1&lt;/span> 6月 &lt;span class="m">14&lt;/span> 07:03 gcloud_account
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">1&lt;/span> 6月 &lt;span class="m">14&lt;/span> 07:04 gcloud_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">11&lt;/span> 6月 &lt;span class="m">6&lt;/span> 07:39 os2_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">8&lt;/span> 6月 &lt;span class="m">6&lt;/span> 07:39 os2_username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-------. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">2455&lt;/span> 6月 &lt;span class="m">9&lt;/span> 04:19 os_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">8&lt;/span> 6月 &lt;span class="m">6&lt;/span> 06:57 os_username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">15&lt;/span> 6月 &lt;span class="m">6&lt;/span> 06:57 pc_password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">6&lt;/span> 6月 &lt;span class="m">9&lt;/span> 04:03 pc_username
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">15&lt;/span> 6月 &lt;span class="m">6&lt;/span> 06:57 pe_password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r--. &lt;span class="m">1&lt;/span> nutanix nutanix &lt;span class="m">6&lt;/span> 6月 &lt;span class="m">6&lt;/span> 06:58 pe_username
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動Calm DSL Container&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ sudo docker run -v /home/nutanix/anthos-on-ahv:/home/centos/anthos-on-ahv:z -it ntnx/calm-dsl /bin/bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Calm DSL連線到Prism Central及該Project (Calm DSL Container)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ls -l /home/centos/anthos-on-ahv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ calm init dsl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ calm show config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Calm DSL 建立blueprint到Prism Central&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ calm compile bp --name esun-bp --file /home/centos/anthos-on-ahv/calm/blueprint.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ calm create bp --name esun-bp --file /home/centos/anthos-on-ahv/calm/blueprint.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在Prism Central 的blueprint貼上ssh key&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Calm DSL 利用blueprint啟動Application&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ calm launch bp &lt;span class="s2">&amp;#34;Anthos-AHV-DSL&amp;#34;&lt;/span> --app_name anthos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>等待約30~45分鐘即可看到Cluster建立完成&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="anthos-cluster">Anthos-Cluster：
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>登入admin-VM取得kubeconfig確認Cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">SECRET_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get serviceaccount google-cloud-console -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{$.secrets[0].name}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get secret &lt;span class="si">${&lt;/span>&lt;span class="nv">SECRET_NAME&lt;/span>&lt;span class="si">}&lt;/span> -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{$.data.token}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> base64 --decode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>驗證workload&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ sudo yum -y install git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ git clone https://github.com/mat0606/K8S.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl create ns wordpress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl -n wordpress create secret generic mysql-pass --from-literal&lt;span class="o">=&lt;/span>&lt;span class="nv">password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;Nutanix/4u&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl -n wordpress apply -f mysql-deployment.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl -n wordpress get pvc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Google Console 確認Cluster已有註冊&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="terraform-執行步驟">Terraform 執行步驟：
&lt;/h2>&lt;h3 id="google-cloud-console">Google Cloud Console：
&lt;/h3>&lt;p>與Calm 執行步驟相同&lt;/p>
&lt;ol>
&lt;li>登入 Google console&lt;/li>
&lt;/ol>
&lt;p>&lt;a class="link" href="https://console.cloud.google.com" target="_blank" rel="noopener"
>https://console.cloud.google.com&lt;/a>&lt;/p>
&lt;ol start="2">
&lt;li>建立 Project &amp;amp; Enable Anthos&lt;/li>
&lt;li>建立 Service Account &amp;amp;私密金鑰並上傳&lt;/li>
&lt;/ol>
&lt;h3 id="nutanix-cluster">Nutanix Cluster：
&lt;/h3>&lt;p>只需準備IPAM的可用IP即可&lt;/p>
&lt;h3 id="terraform">Terraform：
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>建立terraform.tfvars&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;subnet_name = &amp;#34;&amp;lt;subnet_name&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">anthos_version = &amp;#34;&amp;lt;anthos_version&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">anthos_controlplane_vip = &amp;#34;&amp;lt;anthos_controlplane_vip&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">anthos_ingress_vip = &amp;#34;&amp;lt;anthos_ingress_vip&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">anthos_lb_addresspool = &amp;#34;&amp;lt;anthos_lb_addresspool&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">anthos_cluster_name = &amp;#34;&amp;lt;anthos_cluster_name&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">google_application_credentials_path = &amp;#34;&amp;lt;google_application_credentials_path&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">amount_of_anthos_worker_vms = &amp;#34;&amp;lt;amount_of_anthos_worker_vms&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pc_username = &amp;#34;&amp;lt;ntnx_pc_username&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pc_password = &amp;#34;&amp;lt;ntnx_pc_password&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pc_ip = &amp;#34;&amp;lt;ntnx_pc_ip&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pe_storage_container = &amp;#34;&amp;lt;ntnx_pe_storage_container&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pe_username = &amp;#34;&amp;lt;ntnx_pe_username&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pe_password = &amp;#34;&amp;lt;ntnx_pe_password&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pe_ip = &amp;#34;&amp;lt;ntnx_pe_ip&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ntnx_pe_dataservice_ip = &amp;#34;&amp;lt;ntnx_pe_dataservice_ip&amp;gt;&amp;#34;&amp;#39;&lt;/span> &amp;gt; terraform.tfvars
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ chmod &lt;span class="m">0600&lt;/span> terraform.tfvars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>執行terraform初始化並產生plan&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ terraform init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ terraform plan
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>部署anthos cluster&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ terraform apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="anthos-cluster-1">Anthos-Cluster：
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>部署完成後登入admin-vm確認Cluster&lt;/p>
&lt;/li>
&lt;li>
&lt;p>取得kubeconfig以登入Google Cloud Console&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">SECRET_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get serviceaccount google-cloud-console -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{$.secrets[0].name}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ kubectl get secret &lt;span class="si">${&lt;/span>&lt;span class="nv">SECRET_NAME&lt;/span>&lt;span class="si">}&lt;/span> -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{$.data.token}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> base64 --decode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>Google Console 確認Cluster已有註冊&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Scale out 測試，修改terraform.tfvars的worker數量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ terraform apply
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>登入admin-vm 確認Scale out 完成&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="google與calm-bp完整步驟">Google與Calm bp完整步驟
&lt;/h2>&lt;h3 id="anthos">Anthos
&lt;/h3>&lt;h4 id="create-service-accounts">Create Service Accounts
&lt;/h4>&lt;ol>
&lt;li>
&lt;p>進入IAM與管理,點選project (Anthos-Test-202303)
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-sa01.png"
loading="lazy"
alt="image-20230314115438141"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選建立服務帳戶
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-sa02.png"
loading="lazy"
alt="image-20230314115626110"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>給擁有者的權限&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-sa03.png"
loading="lazy"
alt="image-20230314115729988"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>郵件地址複製
&lt;a class="link" href="mailto:netfos@anthos-test-202303.iam.gserviceaccount.com" >netfos@anthos-test-202303.iam.gserviceaccount.com&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點選該服務帳戶,新增金鑰
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-sa04.png"
loading="lazy"
alt="image-20230314115902286"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>儲存金鑰
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-sa05.png"
loading="lazy"
alt="image-20230314120003591"
>
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-sa06.png"
loading="lazy"
alt="image-20230314120124523"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="enable-anthos">Enable Anthos
&lt;/h4>&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-active01.png"
loading="lazy"
alt="image-20230314110332738"
>&lt;/p>
&lt;h3 id="prism-central--calm">Prism Central &amp;amp; Calm
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>IPAM設定IP Pool&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-IPAM.png"
loading="lazy"
alt="image-20230314111246357"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Calm建立Project
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-project01.png"
loading="lazy"
alt="image-20230314113139889"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-project02.png"
loading="lazy"
alt="image-20230314113258956"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-project03.png"
loading="lazy"
alt="image-20230314155154308"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>上傳github 上的 blueprint
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-blueprint.png"
loading="lazy"
alt="image-20230314113458998"
>&lt;/p>
&lt;p>點開Blueprint&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-blueprint02.png"
loading="lazy"
alt="image-20230314113547773"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>調整參數可以安裝時再輸入即可 (有藍色的人代表安裝時可以輸入)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>VM網卡要先設定好
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-bp-network.png"
loading="lazy"
alt="image-20230314160312365"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Credential 要先輸入
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-cred.png"
loading="lazy"
alt="image-20230314152343047"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CRED_OS ssh-keygen&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -f ~/.ssh/KEY_FILENAME -C USERNAME -b &lt;span class="m">2048&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % ssh-keygen -t rsa -f ~/.ssh/anthos_key -C nutanix -b &lt;span class="m">2048&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating public/private rsa key pair.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter passphrase &lt;span class="o">(&lt;/span>empty &lt;span class="k">for&lt;/span> no passphrase&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter same passphrase again:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your identification has been saved in /Users/wangken/.ssh/anthos_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your public key has been saved in /Users/wangken/.ssh/anthos_key.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key fingerprint is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHA256:vBzHezjT7zfmG5ZWQX+eS78TLDHmfNj7g1Rki4PxV5Q nutanix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key&lt;span class="err">&amp;#39;&lt;/span>s randomart image is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---&lt;span class="o">[&lt;/span>RSA 2048&lt;span class="o">]&lt;/span>----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> oo&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> . .Eo&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> + +.&lt;span class="o">=&lt;/span>&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> . . . &lt;span class="nv">B&lt;/span> &lt;span class="o">=&lt;/span>+&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> S o + Xoo&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> . + + *.&lt;span class="o">==&lt;/span>&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="nv">o&lt;/span> &lt;span class="o">=&lt;/span> + +*+&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> + oo*+&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> .&lt;span class="o">==&lt;/span>B&lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----&lt;span class="o">[&lt;/span>SHA256&lt;span class="o">]&lt;/span>-----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC .ssh % ls &lt;span class="p">|&lt;/span>grep anthos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos_key.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos_key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>anthos sa private key&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC notes % cat anthos-test-202303-privatekey.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;service_account&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;project_id&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;anthos-test-202303&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;private_key_id&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;b76e04e16af19f535e185f2f36bae2be8038c363&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;private_key&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;-----BEGIN PRIVATE KEY-----
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> XXXX\n-----END PRIVATE KEY-----\n&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;client_email&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;netfos@anthos-test-202303.iam.gserviceaccount.com&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;client_id&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;110466507071833816563&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;auth_uri&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;https://accounts.google.com/o/oauth2/auth&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;token_uri&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;https://oauth2.googleapis.com/token&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;auth_provider_x509_cert_url&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;https://www.googleapis.com/oauth2/v1/certs&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;client_x509_cert_url&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;https://www.googleapis.com/robot/v1/metadata/x509/netfos%40anthos-test-202303.iam.gserviceaccount.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>輸入完後按save , 執行
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-launch.png"
loading="lazy"
alt="image-20230314153857881"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>填入資訊
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-lauch01.png"
loading="lazy"
alt="image-20230314154058030"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>IP 資訊
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-lauch02.png"
loading="lazy"
alt="image-20230314154540212"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>IP 資訊 Ingress VIP 要在load balancing pool 內
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-lauch03.png"
loading="lazy"
alt="image-20230314154644473"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Deploy
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-deploy.png"
loading="lazy"
alt="image-20230314160527582"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>自動化部屬
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-deploy05.png"
loading="lazy"
alt="image-20230314160559318"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Manage可以查看目前的部署狀態
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-deploy06.png"
loading="lazy"
alt="image-20230314160801127"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>部署完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-vm.png"
loading="lazy"
alt="image-20230314173530825"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>登入Admin VM 取得Secret並在Anthos Console登入&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % ssh -i .ssh/anthos_key nutanix@172.16.90.206
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Activate the web console with: systemctl &lt;span class="nb">enable&lt;/span> --now cockpit.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Last login: Tue Mar &lt;span class="m">14&lt;/span> 09:21:38 &lt;span class="m">2023&lt;/span> from 172.16.90.72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>nutanix@anthos-netfos1-anthos-adminVm-0 ~&lt;span class="o">]&lt;/span>$ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos-netfos1-anthos-controlvm-0 Ready control-plane,master 57m v1.21.5-gke.1200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos-netfos1-anthos-controlvm-1 Ready control-plane,master 53m v1.21.5-gke.1200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos-netfos1-anthos-controlvm-2 Ready control-plane,master 53m v1.21.5-gke.1200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos-netfos1-anthos-workervm-0 Ready &amp;lt;none&amp;gt; 50m v1.21.5-gke.1200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">anthos-netfos1-anthos-workervm-1 Ready &amp;lt;none&amp;gt; 50m v1.21.5-gke.1200
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>nutanix@anthos-netfos1-anthos-adminVm-0 anthos-netfos1&lt;span class="o">]&lt;/span>$ &lt;span class="nb">pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/home/nutanix/baremetal/bmctl-workspace/anthos-netfos1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>nutanix@anthos-netfos1-anthos-adminVm-0 anthos-netfos1&lt;span class="o">]&lt;/span>$ cat anthos-netfos1-kubeconfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> certificate-authority-data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">XXXX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: https://172.16.90.212:443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: anthos-netfos1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">contexts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- context:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster: anthos-netfos1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user: anthos-netfos1-admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: anthos-netfos1-admin@anthos-netfos1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">current-context: anthos-netfos1-admin@anthos-netfos1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">preferences: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">users:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- name: anthos-netfos1-admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client-certificate-data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">XXX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client-key-data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">XXXX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>登入Anthos Console用憑證下面兩行指令得出的base64 碼&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$SECRET_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get serviceaccount google-cloud-console -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{$.secrets[0].name}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$kubectl&lt;/span> get secret &lt;span class="si">${&lt;/span>&lt;span class="nv">SECRET_NAME&lt;/span>&lt;span class="si">}&lt;/span> -o &lt;span class="nv">jsonpath&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{$.data.token}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> base64 --decode
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>登入完成
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-login.png"
loading="lazy"
alt="image-20230314174734950"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-GKE.png"
loading="lazy"
alt="image-20230314175007215"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Workload
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-workload.png"
loading="lazy"
alt="image-20230314175203478"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Marketplace部署測試程式
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-marketplace01.png"
loading="lazy"
alt="image-20230314175624682"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>設定並部署
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-marketplace02.png"
loading="lazy"
alt="image-20230314175712418"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-marketplace03.png"
loading="lazy"
alt="image-20230314180133597"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在地端查看namespace狀態&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>nutanix@anthos-netfos1-anthos-adminVm-0 ~&lt;span class="o">]&lt;/span>$ kubectl get all -n harbor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-chartmuseum-967bb456b-2vmjk 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-core-7956bd9f54-t4jcw 1/1 Running &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-database-0 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-deployer-rq8m5 0/1 Completed &lt;span class="m">0&lt;/span> 3m59s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-exporter-5c86cc7b6d-s78kb 1/2 CrashLoopBackOff &lt;span class="m">5&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-jobservice-9898c468b-5bhzp 1/1 Running &lt;span class="m">3&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-nginx-66d4ccd87-7p7q2 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-notary-server-7d7b4b598d-85nm5 1/1 Running &lt;span class="m">2&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-notary-signer-5d59d79f4-4tkn4 1/1 Running &lt;span class="m">2&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-portal-66f4b7478b-5xv5b 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-redis-0 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-registry-67bc689779-bvw8m 2/2 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/harbor-1-trivy-0 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor ClusterIP 172.31.202.245 &amp;lt;none&amp;gt; 80/TCP,443/TCP,4443/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-chartmuseum ClusterIP 172.31.6.127 &amp;lt;none&amp;gt; 80/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-core ClusterIP 172.31.17.10 &amp;lt;none&amp;gt; 80/TCP,8001/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-database ClusterIP 172.31.204.175 &amp;lt;none&amp;gt; 5432/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-exporter ClusterIP 172.31.107.19 &amp;lt;none&amp;gt; 8001/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-jobservice ClusterIP 172.31.128.4 &amp;lt;none&amp;gt; 80/TCP,8001/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-notary-server ClusterIP 172.31.240.223 &amp;lt;none&amp;gt; 4443/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-notary-signer ClusterIP 172.31.221.6 &amp;lt;none&amp;gt; 7899/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-portal ClusterIP 172.31.38.67 &amp;lt;none&amp;gt; 80/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-redis ClusterIP 172.31.38.202 &amp;lt;none&amp;gt; 6379/TCP 3m19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-registry ClusterIP 172.31.16.8 &amp;lt;none&amp;gt; 5000/TCP,8080/TCP,8001/TCP 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/harbor-1-trivy ClusterIP 172.31.70.71 &amp;lt;none&amp;gt; 8080/TCP 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-chartmuseum 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-core 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-exporter 0/1 &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-jobservice 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-nginx 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-notary-server 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-notary-signer 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-portal 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/harbor-1-registry 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-chartmuseum-967bb456b &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-core-7956bd9f54 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-exporter-5c86cc7b6d &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-jobservice-9898c468b &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-nginx-66d4ccd87 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-notary-server-7d7b4b598d &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-notary-signer-5d59d79f4 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-portal-66f4b7478b &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/harbor-1-registry-67bc689779 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps/harbor-1-database 1/1 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps/harbor-1-redis 1/1 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">statefulset.apps/harbor-1-trivy 1/1 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME COMPLETIONS DURATION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">job.batch/harbor-1-deployer 1/1 44s 3m59s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>測試redmine&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>nutanix@anthos-netfos1-anthos-adminVm-0 redmine&lt;span class="o">]&lt;/span>$ kubectl get all -n redmine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-58cfd55655-qthfz 1/1 Running &lt;span class="m">0&lt;/span> 38m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redmine-postgres-deployment-6b8f85c97b-72vkl 1/1 Running &lt;span class="m">0&lt;/span> 106m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-postgres-service NodePort 172.31.163.134 &amp;lt;none&amp;gt; 5432:31432/TCP 106m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redmine-service ClusterIP 172.31.151.36 172.16.90.213 80/TCP 38m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 38m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/redmine-postgres-deployment 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 106m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT READY AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-58cfd55655 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 38m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">replicaset.apps/redmine-postgres-deployment-6b8f85c97b &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 106m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>IngressVIP : 172.16.90.213
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-redmine.png"
loading="lazy"
alt="image-20230320170954778"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>anthos畫面
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-redmine2.png"
loading="lazy"
alt="image-20230320171120742"
>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-redmine3.png"
loading="lazy"
alt="image-20230320171223253"
>&lt;/p>
&lt;p>StorageClass &amp;ndash;&amp;gt; default block storage&lt;/p>
&lt;p>預設會是用Nutanix的iSCSI block storage，如果要使用NFS則要另外設定&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/anthos-redmine4.png"
loading="lazy"
alt="image-20230320171344271"
>&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>製作Blog Part2</title><link>https://wangken0129.github.io/p/blog-part2/</link><pubDate>Wed, 20 Sep 2023 08:15:00 +0800</pubDate><guid>https://wangken0129.github.io/p/blog-part2/</guid><description>&lt;h1 id="製作blog-part2">製作Blog Part2
&lt;/h1>&lt;p>前篇寫了 Typora + Picgo + NAS 的筆記製作過程，&lt;/p>
&lt;p>接下來要將做的筆記用Hugo + Github Page + Stack Theme 的方式做成一個靜態網站。&lt;/p>
&lt;h2 id="預先準備">預先準備
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>&lt;strong>Homebrew&lt;/strong>&lt;/p>
&lt;p>Homebrew 安裝參考：https://brew.sh&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Git&lt;/strong>&lt;/p>
&lt;p>Git 安裝參考：&lt;a class="link" href="https://git-scm.com/book/zh-tw/v2/%e9%96%8b%e5%a7%8b-Git-%e5%ae%89%e8%a3%9d%e6%95%99%e5%ad%b8" target="_blank" rel="noopener"
>https://git-scm.com/book/zh-tw/v2/開始-Git-安裝教學&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="hugo">Hugo
&lt;/h2>&lt;h3 id="簡介">簡介
&lt;/h3>&lt;p>Hugo是一個由Go語言開發的靜態網頁產生器，&lt;/p>
&lt;p>老實說跟另一個叫Hexo的產生器比起來，Hexo的主題、中文文件比較多，&lt;/p>
&lt;p>以部落格的好看性來說應該是Hexo較優，而且是由台灣人開發出來的，&lt;/p>
&lt;p>但Hexo的安裝可能還要考慮Node.js的相依性等，我在安裝時遇到了一些問題懶得去解決，&lt;/p>
&lt;p>所以最後就選擇Hugo，相對來說安裝上就簡單很多，反正簡單、好用就好，&lt;/p>
&lt;p>可以參考下方的主題來選擇自己要的產生器。&lt;/p>
&lt;p>Hugo主題: &lt;a class="link" href="https://themes.gohugo.io/tags/blog" target="_blank" rel="noopener"
>https://themes.gohugo.io/tags/blog&lt;/a>&lt;/p>
&lt;p>Hexo主題: &lt;a class="link" href="https://hexo.io/themes/index.html" target="_blank" rel="noopener"
>https://hexo.io/themes/index.html&lt;/a>&lt;/p>
&lt;h3 id="install-hugo">Install Hugo
&lt;/h3>&lt;p>官方文件：https://gohugo.io/installation/macos/&lt;/p>
&lt;ol>
&lt;li>
&lt;p>確認Homebrew版本，推薦Mac用戶都要安裝這個套件軟體&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % brew -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Homebrew 4.1.11
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>透過Homebrew安裝Hugo，裝好後確認hugo版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % brew install hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % hugo version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo v0.118.2-da7983ac4b94d97d776d7c2405040de97e95c03d+extended darwin/arm64 BuildDate=2023-08-31T11:23:51Z VendorInfo=brew
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>( Option ) 升級 hugo 版本跟部落格版本，遇到版本支援問題時會需要升級 ( 2024-12-13 更新 )&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">myblog&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">brew&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="n">hugo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Running&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="n">brew&lt;/span> &lt;span class="n">update&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">auto&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">update&lt;/span>&lt;span class="err">`&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">ghcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">homebrew&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portable&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ruby&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">portable&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ruby&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">blobs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">303&lt;/span>&lt;span class="n">bed4c7fc431a685db3c3c151d873740114adbdccd23762ea2d1e39ea78f47&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">######################################################################### 100.0%&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Pouring&lt;/span> &lt;span class="n">portable&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ruby&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">6.&lt;/span>&lt;span class="n">arm64_big_sur&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bottle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Auto&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">updated&lt;/span> &lt;span class="n">Homebrew&lt;/span>&lt;span class="o">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">You&lt;/span> &lt;span class="n">have&lt;/span> &lt;span class="mi">56&lt;/span> &lt;span class="n">outdated&lt;/span> &lt;span class="n">formulae&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">outdated&lt;/span> &lt;span class="n">cask&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Migrating&lt;/span> &lt;span class="n">formula&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certifi&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">certifi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Unlinking&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certifi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Moving&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certifi&lt;/span> &lt;span class="n">versions&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">homebrew&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Cellar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">certifi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&amp;gt;&lt;/span> &lt;span class="n">Relinking&lt;/span> &lt;span class="n">certifi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">myblog&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">hugo&lt;/span> &lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">hugo&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">139.4&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">withdeploy&lt;/span> &lt;span class="n">darwin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">arm64&lt;/span> &lt;span class="n">BuildDate&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">12&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="n">T17&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="n">Z&lt;/span> &lt;span class="n">VendorInfo&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">brew&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">模板升級&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">blog&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">hugo&lt;/span> &lt;span class="n">mod&lt;/span> &lt;span class="n">get&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CaiJimmy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WARN&lt;/span> &lt;span class="n">deprecated&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">site&lt;/span> &lt;span class="n">config&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="n">paginate&lt;/span> &lt;span class="n">was&lt;/span> &lt;span class="n">deprecated&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">Hugo&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">128.0&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">removed&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">future&lt;/span> &lt;span class="n">release&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Use&lt;/span> &lt;span class="n">pagination&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pagerSize&lt;/span> &lt;span class="n">instead&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">hugo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">modules&lt;/span> &lt;span class="err">…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">hugo&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">collected&lt;/span> &lt;span class="n">modules&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mi">3638&lt;/span> &lt;span class="n">ms&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CaiJimmy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v3&lt;/span> &lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">downloading&lt;/span> &lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CaiJimmy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span> &lt;span class="n">v2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">incompatible&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">upgraded&lt;/span> &lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">CaiJimmy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">theme&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stack&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v3&lt;/span> &lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">21.0&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">v3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">29.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="n">hugo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">blog&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">hugo&lt;/span> &lt;span class="n">mod&lt;/span> &lt;span class="n">tidy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WARN&lt;/span> &lt;span class="n">deprecated&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">site&lt;/span> &lt;span class="n">config&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="n">paginate&lt;/span> &lt;span class="n">was&lt;/span> &lt;span class="n">deprecated&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">Hugo&lt;/span> &lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">128.0&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">will&lt;/span> &lt;span class="n">be&lt;/span> &lt;span class="n">removed&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">future&lt;/span> &lt;span class="n">release&lt;/span>&lt;span class="o">.&lt;/span> &lt;span class="n">Use&lt;/span> &lt;span class="n">pagination&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pagerSize&lt;/span> &lt;span class="n">instead&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>遇到的錯誤訊息 ( 在 Github 的 Action 內，Build 的時候發生錯誤，只能等原模板的作者更新，或自行修改 ）&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2024/12/image-20241213092834099.png"
loading="lazy"
alt="image-20241213092834099"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="test-hugo">Test Hugo
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>開啟終端機，新增一個hugo的網站目錄&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % hugo new site test-hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Congratulations! Your new Hugo site was created in /Users/wangken/test-hugo.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Just a few more steps...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. Change the current directory to /Users/wangken/test-hugo.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. Create or install a theme:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Create a new theme with the command &amp;#34;hugo new theme &amp;lt;THEMENAME&amp;gt;&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Install a theme from https://themes.gohugo.io/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. Edit hugo.toml, setting the &amp;#34;theme&amp;#34; property to the theme name.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. Create new content with the command &amp;#34;hugo new content &amp;lt;SECTIONNAME&amp;gt;/&amp;lt;FILENAME&amp;gt;.&amp;lt;FORMAT&amp;gt;&amp;#34;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. Start the embedded web server with the command &amp;#34;hugo server --buildDrafts&amp;#34;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">See documentation at https://gohugo.io/.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>cd進入專案目錄 test-hugo&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % cd test-hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC test-hugo % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 3 wangken staff 96 9 20 12:05 archetypes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 assets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- 1 wangken staff 83 9 20 12:05 hugo.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 i18n
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 layouts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x 2 wangken staff 64 9 20 12:05 themes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>啟動hugo，輸入hugo serve&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC test-hugo % hugo serve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Watching for changes in /Users/wangken/test-hugo/{archetypes,assets,content,data,i18n,layouts,static}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Watching for config changes in /Users/wangken/test-hugo/hugo.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Start building sites …
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo v0.118.2-da7983ac4b94d97d776d7c2405040de97e95c03d+extended darwin/arm64 BuildDate=2023-08-31T11:23:51Z VendorInfo=brew
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARN found no layout file for &amp;#34;html&amp;#34; for kind &amp;#34;taxonomy&amp;#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARN found no layout file for &amp;#34;html&amp;#34; for kind &amp;#34;home&amp;#34;: You should create a template file which matches Hugo Layouts Lookup Rules for this combination.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | EN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-------------------+-----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Pages | 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Paginator pages | 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Non-page files | 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Static files | 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Processed images | 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Aliases | 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Sitemaps | 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Cleaned | 0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Built in 6 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Environment: &amp;#34;development&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Serving pages from memory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Press Ctrl+C to stop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>將 http://localhost:1313 貼到瀏覽器上，確認有顯示出 &lt;strong>Page Not Found&lt;/strong>&lt;/p>
&lt;p>表示Hugo運作正常，會顯示這個訊息是因為Hugo會需要主題來運作，而且也沒有任何的文章發布&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920121219994.png"
loading="lazy"
alt="image-20230920121219994"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>終端機輸入Control+C 結束hugo網站，到此hugo的安裝就完成了，&lt;/p>
&lt;p>後續我會直接套用Stack主題的模板，如要其他模板可以參考其他文章來建立。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="github-pages">Github Pages
&lt;/h2>&lt;h3 id="申請github帳號">申請Github帳號
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>進入Github官網，點右上角的Sign up，接著輸入必要的資訊即可&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/" target="_blank" rel="noopener"
>https://github.com/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920111615527.png"
loading="lazy"
alt="image-20230920111615527"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="套用模板與基本設定">套用模板與基本設定
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>點開Stack 主題模板的連結，下方有說明可以參考&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack-starter" target="_blank" rel="noopener"
>https://github.com/CaiJimmy/hugo-theme-stack-starter&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>點擊 Use this template &amp;ndash;&amp;gt; Create a new repository&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920122233724.png"
loading="lazy"
alt="image-20230920122233724"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在Repository name的地方要輸入 『 github帳號.github.io 』，&lt;/p>
&lt;p>這樣github page的連結才會是根網站像 &lt;a class="link" href="https://wangken0129.github.io" target="_blank" rel="noopener"
>https://wangken0129.github.io&lt;/a>&lt;/p>
&lt;p>如果輸入其他名稱連結會變成 &lt;a class="link" href="https://wangken0129.github.io/" target="_blank" rel="noopener"
>https://wangken0129.github.io/&lt;/a>其他名稱&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920122343907.png"
loading="lazy"
alt="image-20230920122343907"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>匯入完成後會看到有兩個branch，&lt;strong>master&lt;/strong>跟&lt;strong>gh-pages&lt;/strong>，&lt;/p>
&lt;p>其他兩個是如果上一步驟有勾選 Include all branches就會複製過來&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920145122008.png"
loading="lazy"
alt="image-20230920145122008"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>複製過來後原文件說明是可以直接在綠色 Code地方新增一個codespace，這是可以直接在github上面直接去編輯配置文件&lt;/p>
&lt;p>但為了後續管理文件方便，我選擇回到筆電終端機上建立一個資料夾來當作工作目錄。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再來要設定好 github page 所用的branch，最點選右邊的Settings &amp;ndash;&amp;gt; Pages&lt;/p>
&lt;p>根據下圖的設定，Branch那邊要選擇 &lt;strong>gh-pages&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920150015698.png"
loading="lazy"
alt="image-20230920150015698"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>接下來可以在github上先新增一個token，用來在筆電上跟github做溝通，&lt;/p>
&lt;p>點選右上角的圓圈&amp;ndash;&amp;gt; Settings&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920150444875.png"
loading="lazy"
alt="image-20230920150444875"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>拉到最下面有個Developer settings&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920150654570.png"
loading="lazy"
alt="image-20230920150654570"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Personal access tokens &amp;ndash;&amp;gt; Tokens (classic) 新增一組Token，&lt;/p>
&lt;p>這組Token請小心保存，而且只會出現一次，可以根據需求設定到期時間、名稱等&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920150749028.png"
loading="lazy"
alt="image-20230920150749028"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="設定模板">設定模板
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>回到剛剛的Github Repository上面，點選 Code &amp;ndash;&amp;gt; SSH 並複製下方那串SSH&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920151123036.png"
loading="lazy"
alt="image-20230920151123036"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>開啟筆電終端機，新增一個資料夾作為工作目錄，並進入此資料夾&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % mkdir workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % &lt;span class="nb">cd&lt;/span> workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace %
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>git 登入，最後面使用 authentication token，就是上面複製的token&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace % gh auth login
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? What account &lt;span class="k">do&lt;/span> you want to log into? GitHub.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? You&lt;span class="err">&amp;#39;&lt;/span>re already logged into github.com. Do you want to re-authenticate? Yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? What is your preferred protocol &lt;span class="k">for&lt;/span> Git operations? HTTPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Authenticate Git with your GitHub credentials? Yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? How would you like to authenticate GitHub CLI? &lt;span class="o">[&lt;/span>Use arrows to move, &lt;span class="nb">type&lt;/span> to filter&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Login with a web browser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; Paste an authentication token
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>用git初始化工作目錄，並用 -b 指定branch為master&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace % git init -b master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">已初始化空的 Git 版本庫於 /Users/wangken/workspace/.git/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>git 新增遠端Github的Repository，並用 git remote -v 確認&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace % git remote add origin git@github.com:wangken0129/wangken0129.github.io.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace % git remote -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">origin git@github.com:wangken0129/wangken0129.github.io.git &lt;span class="o">(&lt;/span>fetch&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">origin git@github.com:wangken0129/wangken0129.github.io.git &lt;span class="o">(&lt;/span>push&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>將遠端的branch 拉下來，此時就會看到github上有的資料夾以及檔案&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace % git pull git@github.com:wangken0129/wangken0129.github.io.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Enumerating objects: 247, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Counting objects: 100% &lt;span class="o">(&lt;/span>247/247&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Compressing objects: 100% &lt;span class="o">(&lt;/span>128/128&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Total &lt;span class="m">247&lt;/span> &lt;span class="o">(&lt;/span>delta 109&lt;span class="o">)&lt;/span>, reused &lt;span class="m">195&lt;/span> &lt;span class="o">(&lt;/span>delta 68&lt;span class="o">)&lt;/span>, pack-reused &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">接收物件中: 100% &lt;span class="o">(&lt;/span>247/247&lt;span class="o">)&lt;/span>, 141.87 KiB &lt;span class="p">|&lt;/span> 470.00 KiB/s, 完成.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">處理 delta 中: 100% &lt;span class="o">(&lt;/span>109/109&lt;span class="o">)&lt;/span>, 完成.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">來自 github.com:wangken0129/wangken0129.github.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * branch HEAD -&amp;gt; FETCH_HEAD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> wangken@wangken-MAC workspace % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">1066&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">2874&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">4&lt;/span> wangken staff &lt;span class="m">128&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 assets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> wangken staff &lt;span class="m">96&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">6&lt;/span> wangken staff &lt;span class="m">192&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">130&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> wangken staff &lt;span class="m">199&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> wangken staff &lt;span class="m">96&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">20&lt;/span> 15:16 static
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在config/_default/config.toml內的有幾項需要先設定&lt;/p>
&lt;p>baseurl = ”https://Github帳號名稱.github.io“&lt;/p>
&lt;p>title = &amp;ldquo;自定義&amp;rdquo;&lt;/p>
&lt;p>defaultContentLanguage = &amp;ldquo;zh-tw&amp;rdquo;&lt;/p>
&lt;p>disqusShortname = &amp;ldquo;disqus建立的Shortname&amp;rdquo; (這是部落格底下的留言板功能，可先忽略)&lt;/p>
&lt;p>可以去官網註冊帳號，並建立一個Site，官網： &lt;a class="link" href="https://disqus.com/profile/signup/intent/" target="_blank" rel="noopener"
>https://disqus.com/profile/signup/intent/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC workspace % vi config/_default/config.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Change baseurl before deploy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">baseurl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://wangken0129.github.io&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">languageCode&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;en-us&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">paginate&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">title&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Ken&amp;#39;s blog&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Theme i18n support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Available values: en, fr, id, ja, ko, pt-br, zh-cn, zh-tw, es, de, nl, it, th, el, uk, ar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">defaultContentLanguage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;zh-tw&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set hasCJKLanguage to true if DefaultContentLanguage is in [zh-cn ja ko]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This will make .Summary and .WordCount behave correctly for CJK languages.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">hasCJKLanguage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Change it to your Disqus shortname before using&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">disqusShortname&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;wangken0129&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>基本設定這些就可以建立網站了，後續的一些設定可以參考官方文件，幾乎都可以在config/_default 目錄底下去設定&lt;/p>
&lt;p>Stack主題的官方文件：https://stack.jimmycai.com/&lt;/p>
&lt;/li>
&lt;li>
&lt;p>後續如果有文章想新增的話，根據此主題的架構要新增目錄在content/post裡面&lt;/p>
&lt;p>並依照下方的目錄結構去新增，並且md檔案前面會需要加上front matter&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 文章結構，每篇都會有index.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── post
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── my-first-post
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── index.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── image1.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── image2.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># front matter範例，以此文章為範例，放在md檔案最上面前後都要加 ```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">```&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 文章標題&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">title: 製作Blog Part2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 文章描述&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">description: Hugo + Github Page + Stack Theme
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># slug&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">slug: blog-part2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 時間，固定格式UTC+08:00&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">date: 2023-09-20T07:15:00+08:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 文章分類&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">categories:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Knowledge Base Category
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 文章標籤&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tags:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - Blog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - KB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">weight: &lt;span class="m">1&lt;/span> &lt;span class="c1"># You can add weight to some posts to override the default sorting (date descending)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">```&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>設定完成後即可push到github上面，指令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &amp;#34;msg&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push --set-upstream origin master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>成功push後可以點進Github 上的Repository &amp;ndash;&amp;gt; Actions&lt;/p>
&lt;p>套用此模板的好處之一，就是已經自動幫你建立好workflows，&lt;/p>
&lt;p>只要在電腦編輯好後再push上去，有任何更動都會幫你套用到網站&lt;/p>
&lt;p>同時也會自動更新主題的一些Bug&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920154906316.png"
loading="lazy"
alt="image-20230920154906316"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>連線確認網站OK&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920160059559.png"
loading="lazy"
alt="image-20230920160059559"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="後記">後記
&lt;/h2>&lt;p>完成部落格的設定後，再來就要把之前做的筆記套用Front Matter放上來跟之後的撰寫了，&lt;/p>
&lt;p>針對Hugo的一些配置檔的調整，我會使用Visual Studio Code來做編輯跟調整，&lt;/p>
&lt;p>因為針對.toml檔案的編輯還是比較友善，&lt;/p>
&lt;p>像下方的params.toml，我有去修改[sidebar]下方的值，&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920163349713.png"
loading="lazy"
alt="image-20230920163349713"
>&lt;/p>
&lt;p>其他筆記的撰寫我就還是用Typora，左邊可以分為檔案的目錄檢視，&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920163708312.png"
loading="lazy"
alt="image-20230920163708312"
>&lt;/p>
&lt;p>或是切換到大綱檢視，分為文章裡面的大小標題等等，&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230920163841527.png"
loading="lazy"
alt="image-20230920163841527"
>&lt;/p>
&lt;p>最後因為會頻繁地做git push的動作，所以我也參考網路的Script來自動化的push，&lt;/p>
&lt;p>希望最後是能變成從寫完後就全部都自動化，有的話再寫上來分享。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#Put this script outside the workspace folder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If a command fails then the deploy stops&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;\033[0;32mDeploying updates to GitHub...\033[0m\n&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Go To workspace folder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> workspace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Add changes to git.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Commit changes.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;rebuilding site &lt;/span>&lt;span class="k">$(&lt;/span>date&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$*&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$*&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$msg&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Push source and build repos.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push origin master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># come back&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ..
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>製作Blog Part1</title><link>https://wangken0129.github.io/p/blog-part1/</link><pubDate>Tue, 19 Sep 2023 07:10:00 +0800</pubDate><guid>https://wangken0129.github.io/p/blog-part1/</guid><description>&lt;h1 id="製作blog-part1">製作Blog Part1
&lt;/h1>&lt;p>把過程記錄下來，未來若有更換電腦還可以照著操作復原回來。&lt;/p>
&lt;p>原本我只有使用Typora做本地紀錄，有需要再上傳Github或是匯出成 PDF or Word 分享給別人，&lt;/p>
&lt;p>後來覺得有時候要用手機查看不太方便，有嘗試使用Notion因為還有手機App可使用，&lt;/p>
&lt;p>但是匯入文件的時候出現不少問題故作罷，幾經測試，覺得Github Page+Hugo看起來是比較簡單好上手。&lt;/p>
&lt;p>Part1 是Typora作為筆記軟體，並用Picgo上傳圖片到自架的NAS當作圖床空間。&lt;/p>
&lt;p>Part2 是透過Hugo + Github Page來做靜態網站，以存放Typora的筆記。&lt;/p>
&lt;p>Part3 是自動化腳本。&lt;/p>
&lt;h2 id="typora">Typora
&lt;/h2>&lt;p>我使用Typora作為我的Markdown筆記軟體，操作簡單而且可以匯出很多格式。&lt;/p>
&lt;h3 id="install-typora">Install Typora
&lt;/h3>&lt;p>從官網下載下來安裝即可&lt;/p>
&lt;p>官網: &lt;a class="link" href="https://typora.io/" target="_blank" rel="noopener"
>https://typora.io/&lt;/a>&lt;/p>
&lt;h3 id="setting-typora">Setting Typora
&lt;/h3>&lt;p>有三個步驟:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>輸入授權 or 破解(?)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>針對圖片的存放設定，一開始我是使用如下圖的設定，&lt;/p>
&lt;p>複製圖片至Typora時會存放到上層路徑的assets資料夾，後來因為方便性改為上傳到自架的NAS上作為圖床。
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919115931790.png"
loading="lazy"
alt="image-20230919115931790"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>外觀配置，官網有很多主題可以使用，只要把下載下來的主題複製到主題資料夾即可。&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919125343105.png"
loading="lazy"
alt="image-20230919125343105"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>完成後就可以開始使用Typora了。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919143435523.png"
loading="lazy"
alt="image-20230919143435523"
>&lt;/p>
&lt;h2 id="nas自架圖床">NAS自架圖床
&lt;/h2>&lt;p>這步驟如果沒有NAS或是使用其他圖床空間可以省略，&lt;/p>
&lt;p>會使用NAS自架圖床也是剛好有NAS，而且Imgur前陣子在大掃除，&lt;/p>
&lt;p>其他的圖床空間也難免會有大掃除或是停止的狀況，自架也只建議小型的Blog使用，&lt;/p>
&lt;p>如果有大量的圖片需求，還是建議用雲端的像Amazon S3等等。&lt;/p>
&lt;p>&lt;em>NAS設定 DDNS OR DNS 還有憑證網路上有很多參考文件此處就不多加贅述，此處使用的是Synology DDNS 憑證自動更新&lt;/em>&lt;/p>
&lt;h3 id="web-station-install">Web Station Install
&lt;/h3>&lt;ol>
&lt;li>新增共用資料夾 /www/wwwroot/blog/images
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919130918428.png"
loading="lazy"
alt="image-20230919130918428"
>&lt;/li>
&lt;li>建議再新增一個使用者設定權限專門使用此資料夾
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919131239449.png"
loading="lazy"
alt="image-20230919131239449"
>&lt;/li>
&lt;li>安裝Web Station&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919130741842.png"
loading="lazy"
alt="image-20230919130741842"
>&lt;/li>
&lt;li>網頁服務 &amp;ndash;&amp;gt; 新增靜態網站，指定主目錄為剛剛新增的資料夾
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919131023338.png"
loading="lazy"
alt="image-20230919131023338"
>&lt;/li>
&lt;li>新增網頁入口，對應剛剛新增的網頁服務，並設定好Port號，建議使用HTTPS
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919132005169.png"
loading="lazy"
alt="image-20230919132005169"
>&lt;/li>
&lt;li>丟一張圖片到 /www/wwwroot/blog/images
用網頁連線測試看是否可以讀取
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919131936400.png"
loading="lazy"
alt="image-20230919131936400"
>&lt;/li>
&lt;/ol>
&lt;h3 id="ftp-設定">FTP 設定
&lt;/h3>&lt;ol>
&lt;li>開啟FTP服務，設定FTPS、Port號，安全性考量不勾選FTP
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919132202926.png"
loading="lazy"
alt="image-20230919132202926"
>&lt;/li>
&lt;li>設定指定使用者根目錄，安全考量不啟用匿名登入
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919132448501.png"
loading="lazy"
alt="image-20230919132448501"
>&lt;/li>
&lt;/ol>
&lt;h2 id="picgo">Picgo
&lt;/h2>&lt;p>配置文件&lt;/p>
&lt;p>參考原文: &lt;a class="link" href="https://zhuanlan.zhihu.com/p/382702959" target="_blank" rel="noopener"
>https://zhuanlan.zhihu.com/p/382702959&lt;/a>&lt;/p>
&lt;p>Picgo: &lt;a class="link" href="https://picgo.github.io/PicGo-Core-Doc/zh/guide/config.html" target="_blank" rel="noopener"
>https://picgo.github.io/PicGo-Core-Doc/zh/guide/config.html&lt;/a>&lt;/p>
&lt;p>ftp-uploader: &lt;a class="link" href="https://github.com/imba97/picgo-plugin-ftp-uploader/tree/master" target="_blank" rel="noopener"
>https://github.com/imba97/picgo-plugin-ftp-uploader/tree/master&lt;/a>&lt;/p>
&lt;p>ftp-basic: &lt;a class="link" href="https://www.npmjs.com/package/basic-ftp" target="_blank" rel="noopener"
>https://www.npmjs.com/package/basic-ftp&lt;/a>&lt;/p>
&lt;h3 id="install-picgo">Install Picgo
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>首先要先安裝Node.js，下載安裝或是用brew install node&lt;/p>
&lt;p>&lt;a class="link" href="https://nodejs.org/en/download" target="_blank" rel="noopener"
>https://nodejs.org/en/download&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>安裝好後確認版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % npm -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">9.6.7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % node -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v18.17.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>使用npm安裝Picgo&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % npm install picgo -g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % picgo -v
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.5.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % picgo --help
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage: picgo &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>command&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Options:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -v, --version output the version number
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -d, --debug debug mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -s, --silent silent mode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -c, --config &amp;lt;path&amp;gt; &lt;span class="nb">set&lt;/span> config path
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -p, --proxy &amp;lt;url&amp;gt; &lt;span class="nb">set&lt;/span> proxy &lt;span class="k">for&lt;/span> uploading
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> -h, --help display &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Commands:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> install&lt;span class="p">|&lt;/span>add &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span> &amp;lt;plugins...&amp;gt; install picgo plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uninstall&lt;span class="p">|&lt;/span>rm &amp;lt;plugins...&amp;gt; uninstall picgo plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span> &amp;lt;plugins...&amp;gt; update picgo plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> set&lt;span class="p">|&lt;/span>config &amp;lt;module&amp;gt; &lt;span class="o">[&lt;/span>name&lt;span class="o">]&lt;/span> configure config of picgo modules
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> upload&lt;span class="p">|&lt;/span>u &lt;span class="o">[&lt;/span>input...&lt;span class="o">]&lt;/span> upload, go go go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> use &lt;span class="o">[&lt;/span>module&lt;span class="o">]&lt;/span> use modules of picgo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> init &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span> &amp;lt;template&amp;gt; &lt;span class="o">[&lt;/span>project&lt;span class="o">]&lt;/span> create picgo plugin&lt;span class="err">&amp;#39;&lt;/span>s development templates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> i18n &lt;span class="o">[&lt;/span>lang&lt;span class="o">]&lt;/span> change picgo language
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">help&lt;/span> &lt;span class="o">[&lt;/span>command&lt;span class="o">]&lt;/span> display &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>安裝好後再新增ftp-uploader&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wangken&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">wangken&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MAC&lt;/span> &lt;span class="o">~&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">picgo&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">picgo&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plugin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ftp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">uploader&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># added 3 packages in 1s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># [PicGo SUCCESS]: 插件安装成功&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="setting-picgo">Setting Picgo
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>修改Picgo配置文件，預設在~/.picgo/config.json&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % picgo &lt;span class="nb">set&lt;/span> uploader
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? Choose a&lt;span class="o">(&lt;/span>n&lt;span class="o">)&lt;/span> uploader ftp-uploader
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? imba97 kenkenny
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">? D:/ftpUploaderConfig.json /Users/wangken/.picgo/ftpUploaderConfig.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>PicGo SUCCESS&lt;span class="o">]&lt;/span>: Configure config successfully!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC ~ % cat ~/.picgo/config.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;picBed&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;uploader&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;ftp-uploader&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;current&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;ftp-uploader&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ftp-uploader&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;site&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;kenkenny&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;configFile&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;/Users/wangken/.picgo/ftpUploaderConfig.json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;picgoPlugins&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;picgo-plugin-ftp-uploader&amp;#34;&lt;/span>: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>%
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>新增~/.picgo/ftpUploaderConfig.json
這裡我多了一個secure的選項，安裝好後預設是沒有這個參數
因為我是使用FTPS，所以後面的配置檔案也要新增secure的參數，其餘請自行修改NAS對應的路徑及連結&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="err">wangken@wangken-MAC&lt;/span> &lt;span class="err">.picgo&lt;/span> &lt;span class="err">%&lt;/span> &lt;span class="err">cat&lt;/span> &lt;span class="err">ftpUploaderConfig.json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;kenkenny&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://nas.domain:xxxx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/images/{year}/{month}/{fullName}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uploadPath&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/wwwroot/blog/images/{year}/{month}/{fullName}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;nas.domain&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="err">portnumber&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;username&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ftp-user&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;password&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ftp-user-password&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;secure&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>修改 ~/.picgo/node_modules/picgo-plugin-ftp-uploader/dist/index.js&lt;/p>
&lt;p>在await client.access的地方新增 &lt;strong>secure: config.secure&lt;/strong>&lt;/p>
&lt;p>詳細配置可以Google &amp;ldquo;ftp-basic&amp;rdquo; 就會有文件可以參考了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wangken@wangken-MAC dist % vim index.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> await client.access({
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> host: config.host,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: config.port,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user: config.username,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: config.password,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> secure: config.secure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> });
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>以上配置完成，不用重開機直接進入Typora修改圖片上傳的設定&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="驗證typora--picgo--nas">驗證Typora + Picgo + NAS
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>首先修改Typora的圖片設定，改為自訂命令，輸入 picgo upload
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919141634956.png"
loading="lazy"
alt="image-20230919141634956"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>接著新增一個md檔案，複製一張圖片進去即可看到圖片上傳成功&lt;/p>
&lt;p>Typora: 點擊圖片即可看到上傳後的路徑&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919142209291.png"
loading="lazy"
alt="image-20230919142209291"
>&lt;/p>
&lt;p>NAS: 點選連結或是進入NAS的File Station確認圖片
&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/image-20230919142323495.png"
loading="lazy"
alt="image-20230919142323495"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>以上就是Typora+Picgo上傳圖片到NAS上的設定，下一篇再來進入部落格的製作。&lt;/p></description></item><item><title>Hello World</title><link>https://wangken0129.github.io/p/hello-world/</link><pubDate>Tue, 19 Sep 2023 05:10:00 +0800</pubDate><guid>https://wangken0129.github.io/p/hello-world/</guid><description>&lt;h1 id="hello-world">Hello World
&lt;/h1>&lt;h2 id="description">Description
&lt;/h2>&lt;p>This is a blog for my labs and knowledge bases.&lt;/p>
&lt;p>Happy engineering.&lt;/p>
&lt;p>這是Ken的部落格，用來放我的Lab跟知識庫。&lt;/p>
&lt;p>當個快樂的工程師。&lt;/p>
&lt;p>&lt;img src="https://kenkenny.synology.me:5543/images/2023/09/0*ngAthWxOvKZHvsw9.jpeg"
loading="lazy"
alt="The Dangers of Hacking and What a Hacker Can Do to Your Computer? | by Sravan Cynixit | Quick Code | Medium"
>&lt;/p>
&lt;h2 id="this-is-a-test-shell-script">This is a test shell script
&lt;/h2>&lt;p>Generate certificate script&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1"># Create certificate given a specific url name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> &lt;span class="nv">$#&lt;/span> -ne &lt;span class="m">1&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;No arguments supplied or too many arguments&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Usage: &lt;/span>&lt;span class="nv">$0&lt;/span>&lt;span class="s2"> domain_name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MYNAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generating a private key...for &lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl genrsa -out &lt;span class="nv">$MYNAME&lt;/span>.key &lt;span class="m">2048&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generating a CSR...for &lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl req -new -key &lt;span class="nv">$MYNAME&lt;/span>.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-out &lt;span class="nv">$MYNAME&lt;/span>.csr &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-subj &lt;span class="s2">&amp;#34;/C=US/ST=NC/L=Raleigh/O=RedHat/OU=RHT/CN=&lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Generating a certificate...for &lt;/span>&lt;span class="nv">$MYNAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openssl x509 -req -days &lt;span class="m">366&lt;/span> -in &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="nv">$MYNAME&lt;/span>.csr -signkey &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="nv">$MYNAME&lt;/span>.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-out &lt;span class="nv">$MYNAME&lt;/span>.crt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Archives</title><link>https://wangken0129.github.io/archives/</link><pubDate>Tue, 19 Sep 2023 00:00:00 +0000</pubDate><guid>https://wangken0129.github.io/archives/</guid><description/></item><item><title>Links</title><link>https://wangken0129.github.io/links/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangken0129.github.io/links/</guid><description>&lt;p>To use this feature, add &lt;code>links&lt;/code> section to frontmatter.&lt;/p>
&lt;p>This page&amp;rsquo;s frontmatter:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">links&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub is the world&amp;#39;s largest software development platform.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">website&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TypeScript&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">website&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://www.typescriptlang.org&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ts-logo-128.jpg&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>image&lt;/code> field accepts both local and external images.&lt;/p></description></item><item><title>Search</title><link>https://wangken0129.github.io/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangken0129.github.io/search/</guid><description/></item></channel></rss>